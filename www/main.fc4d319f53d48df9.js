(self.webpackChunktextiles=self.webpackChunktextiles||[]).push([[179],{2011:(ct,ke,F)=>{"use strict";F.d(ke,{hO:()=>je,xv:()=>ye,Dh:()=>me,GT:()=>Ce,cc:()=>Re,on:()=>G,pX:()=>ge});var c=F(5e3),H=F(127),N=F(5813);ct=F.hmd(ct);const de=["ngOnDestroy"],ge=(fe,be,Te,ve={})=>new Proxy(fe,{get:(qe,xe)=>Te.runOutsideAngular(()=>{var nt;if(fe[xe])return(null===(nt=null==ve?void 0:ve.spy)||void 0===nt?void 0:nt.get)&&ve.spy.get(xe,fe[xe]),fe[xe];if(de.indexOf(xe)>-1)return()=>{};const he=be.toPromise().then(it=>{const U=it&&it[xe];return"function"==typeof U?U.bind(it):U&&U.then?U.then(Z=>Te.run(()=>Z)):Te.run(()=>U)});return new Proxy(()=>{},{get:(it,U)=>he[U],apply:(it,U,Z)=>he.then(z=>{var X;const pe=z&&z(...Z);return(null===(X=null==ve?void 0:ve.spy)||void 0===X?void 0:X.apply)&&ve.spy.apply(xe,Z,pe),pe})})})}),Ce=(fe,be)=>{be.forEach(Te=>{Object.getOwnPropertyNames(Te.prototype||Te).forEach(ve=>{Object.defineProperty(fe.prototype,ve,Object.getOwnPropertyDescriptor(Te.prototype||Te,ve))})})};class ce{constructor(be){return be}}const me=new c.OlP("angularfire2.app.options"),ye=new c.OlP("angularfire2.app.name");function G(fe,be,Te){const qe="object"==typeof Te&&Te||{};qe.name=qe.name||"string"==typeof Te&&Te||"[DEFAULT]";const nt=H.Z.apps.filter(he=>he&&he.name===qe.name)[0]||be.runOutsideAngular(()=>H.Z.initializeApp(fe,qe));try{JSON.stringify(fe)!==JSON.stringify(nt.options)&&W("error",`${nt.name} Firebase App already initialized with different options${ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(he){}return new ce(nt)}const W=(fe,...be)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[fe](...be)},oe={provide:ce,useFactory:G,deps:[me,c.R0b,[new c.FiY,ye]]};let je=(()=>{class fe{constructor(Te){H.Z.registerVersion("angularfire",N.q4.full,"core"),H.Z.registerVersion("angularfire",N.q4.full,"app-compat"),H.Z.registerVersion("angular",c.q4F.full,Te.toString())}static initializeApp(Te,ve){return{ngModule:fe,providers:[{provide:me,useValue:Te},{provide:ye,useValue:ve}]}}}return fe.\u0275fac=function(Te){return new(Te||fe)(c.LFG(c.Lbi))},fe.\u0275mod=c.oAB({type:fe}),fe.\u0275inj=c.cJS({providers:[oe]}),fe})();function Re(fe,be,Te,ve,qe){const[,xe,nt]=globalThis.\u0275AngularfireInstanceCache.find(he=>he[0]===fe)||[];if(xe)return function Fe(fe,be){try{return fe.toString()===be.toString()}catch(Te){return fe===be}}(qe,nt)||(te("error",`${be} was already initialized on the ${Te} Firebase App with different settings.${Be?" You may need to reload as Firebase is not HMR aware.":""}`),te("warn",{is:qe,was:nt})),xe;{const he=ve();return globalThis.\u0275AngularfireInstanceCache.push([fe,he,qe]),he}}const Be=!!ct.hot,te=(fe,...be)=>{(0,c.X6Q)()&&"undefined"!=typeof console&&console[fe](...be)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(ct,ke,F)=>{"use strict";F.d(ke,{q4:()=>zi,iC:()=>kh,HU:()=>co,vb:()=>od,JM:()=>ic,u3:()=>Zc});var c=F(5e3),H=F(5867),N=F(5861),de=F(9681),ge=F(2090),Ce=F(4859),ce=F(1877),me=F(2940);const ye="@firebase/installations",G="0.5.5",oe=`w:${G}`,je="FIS_v2",be=new ge.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Te(T){return T instanceof ge.ZR&&T.code.includes("request-failed")}function ve({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function qe(T){return{token:T.token,requestStatus:2,expiresIn:z(T.expiresIn),creationTime:Date.now()}}function xe(T,S){return nt.apply(this,arguments)}function nt(){return(nt=(0,N.Z)(function*(T,S){const B=(yield S.json()).error;return be.create("request-failed",{requestName:T,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function he({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function it(T,{refreshToken:S}){const P=he(T);return P.append("Authorization",function X(T){return`${je} ${T}`}(S)),P}function U(T){return Z.apply(this,arguments)}function Z(){return(Z=(0,N.Z)(function*(T){const S=yield T();return S.status>=500&&S.status<600?T():S})).apply(this,arguments)}function z(T){return Number(T.replace("s","000"))}function pe(T,S){return K.apply(this,arguments)}function K(){return(K=(0,N.Z)(function*(T,{fid:S}){const P=ve(T),_e={method:"POST",headers:he(T),body:JSON.stringify({fid:S,authVersion:je,appId:T.appId,sdkVersion:oe})},Ve=yield U(()=>fetch(P,_e));if(Ve.ok){const Qe=yield Ve.json();return{fid:Qe.fid||S,registrationStatus:2,refreshToken:Qe.refreshToken,authToken:qe(Qe.authToken)}}throw yield xe("Create Installation",Ve)})).apply(this,arguments)}function $e(T){return new Promise(S=>{setTimeout(S,T)})}const cn=/^[cdef][\w-]{21}$/;function et(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const P=function un(T){return function yt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return cn.test(P)?P:""}catch(T){return""}}function It(T){return`${T.appName}!${T.appId}`}const Tn=new Map;function Kt(T,S){const P=It(T);Mn(P,S),function Fi(T,S){const P=function xn(){return!Rr&&"BroadcastChannel"in self&&(Rr=new BroadcastChannel("[Firebase] FID Change"),Rr.onmessage=T=>{Mn(T.data.key,T.data.fid)}),Rr}();P&&P.postMessage({key:T,fid:S}),function Ji(){0===Tn.size&&Rr&&(Rr.close(),Rr=null)}()}(P,S)}function Mn(T,S){const P=Tn.get(T);if(P)for(const B of P)B(S)}let Rr=null;const zn="firebase-installations-store";let es=null;function wt(){return es||(es=(0,me.openDb)("firebase-installations-database",1,T=>{0===T.oldVersion&&T.createObjectStore(zn)})),es}function qr(T,S){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,N.Z)(function*(T,S){const P=It(T),ne=(yield wt()).transaction(zn,"readwrite"),_e=ne.objectStore(zn),Ve=yield _e.get(P);return yield _e.put(S,P),yield ne.complete,(!Ve||Ve.fid!==S.fid)&&Kt(T,S.fid),S})).apply(this,arguments)}function Jt(T){return Er.apply(this,arguments)}function Er(){return(Er=(0,N.Z)(function*(T){const S=It(T),B=(yield wt()).transaction(zn,"readwrite");yield B.objectStore(zn).delete(S),yield B.complete})).apply(this,arguments)}function sr(T,S){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,N.Z)(function*(T,S){const P=It(T),ne=(yield wt()).transaction(zn,"readwrite"),_e=ne.objectStore(zn),Ve=yield _e.get(P),Qe=S(Ve);return void 0===Qe?yield _e.delete(P):yield _e.put(Qe,P),yield ne.complete,Qe&&(!Ve||Ve.fid!==Qe.fid)&&Kt(T,Qe.fid),Qe})).apply(this,arguments)}function fn(T){return or.apply(this,arguments)}function or(){return(or=(0,N.Z)(function*(T){let S;const P=yield sr(T,B=>{const ne=ts(B),_e=Bt(T,ne);return S=_e.registrationPromise,_e.installationEntry});return""===P.fid?{installationEntry:yield S}:{installationEntry:P,registrationPromise:S}})).apply(this,arguments)}function ts(T){return gi(T||{fid:et(),registrationStatus:0})}function Bt(T,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(be.create("app-offline"))};const P={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},B=function ft(T,S){return rt.apply(this,arguments)}(T,P);return{installationEntry:P,registrationPromise:B}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:pi(T)}:{installationEntry:S}}function rt(){return(rt=(0,N.Z)(function*(T,S){try{return qr(T,yield pe(T,S))}catch(P){throw Te(P)&&409===P.customData.serverCode?yield Jt(T):yield qr(T,{fid:S.fid,registrationStatus:0}),P}})).apply(this,arguments)}function pi(T){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,N.Z)(function*(T){let S=yield Pt(T);for(;1===S.registrationStatus;)yield $e(100),S=yield Pt(T);if(0===S.registrationStatus){const{installationEntry:P,registrationPromise:B}=yield fn(T);return B||P}return S})).apply(this,arguments)}function Pt(T){return sr(T,S=>{if(!S)throw be.create("installation-not-found");return gi(S)})}function gi(T){return function Bn(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function pn(T,S){return $.apply(this,arguments)}function $(){return($=(0,N.Z)(function*({appConfig:T,platformLoggerProvider:S},P){const B=Y(T,P),ne=it(T,P),_e=S.getImmediate({optional:!0});_e&&ne.append("x-firebase-client",_e.getPlatformInfoString());const Qe={method:"POST",headers:ne,body:JSON.stringify({installation:{sdkVersion:oe}})},st=yield U(()=>fetch(B,Qe));if(st.ok)return qe(yield st.json());throw yield xe("Generate Auth Token",st)})).apply(this,arguments)}function Y(T,{fid:S}){return`${ve(T)}/${S}/authTokens:generate`}function J(T){return De.apply(this,arguments)}function De(){return(De=(0,N.Z)(function*(T,S=!1){let P;const B=yield sr(T.appConfig,_e=>{if(!ht(_e))throw be.create("not-registered");const Ve=_e.authToken;if(!S&&St(Ve))return _e;if(1===Ve.requestStatus)return P=ae(T,S),_e;{if(!navigator.onLine)throw be.create("app-offline");const Qe=rn(_e);return P=Ie(T,Qe),Qe}});return P?yield P:B.authToken})).apply(this,arguments)}function ae(T,S){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,N.Z)(function*(T,S){let P=yield Me(T.appConfig);for(;1===P.authToken.requestStatus;)yield $e(100),P=yield Me(T.appConfig);const B=P.authToken;return 0===B.requestStatus?J(T,S):B})).apply(this,arguments)}function Me(T){return sr(T,S=>{if(!ht(S))throw be.create("not-registered");return function le(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Ie(T,S){return He.apply(this,arguments)}function He(){return(He=(0,N.Z)(function*(T,S){try{const P=yield pn(T,S),B=Object.assign(Object.assign({},S),{authToken:P});return yield qr(T.appConfig,B),P}catch(P){if(!Te(P)||401!==P.customData.serverCode&&404!==P.customData.serverCode){const B=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield qr(T.appConfig,B)}else yield Jt(T.appConfig);throw P}})).apply(this,arguments)}function ht(T){return void 0!==T&&2===T.registrationStatus}function St(T){return 2===T.requestStatus&&!function gt(T){const S=Date.now();return S<T.creationTime||T.creationTime+T.expiresIn<S+36e5}(T)}function rn(T){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:S})}function Q(){return(Q=(0,N.Z)(function*(T){const S=T,{installationEntry:P,registrationPromise:B}=yield fn(S.appConfig);return B?B.catch(console.error):J(S).catch(console.error),P.fid})).apply(this,arguments)}function We(){return(We=(0,N.Z)(function*(T,S=!1){const P=T;return yield ut(P.appConfig),(yield J(P,S)).token})).apply(this,arguments)}function ut(T){return kt.apply(this,arguments)}function kt(){return(kt=(0,N.Z)(function*(T){const{registrationPromise:S}=yield fn(T);S&&(yield S)})).apply(this,arguments)}function Ba(T){return be.create("missing-app-config-values",{valueName:T})}const dn="installations",Vt=T=>{const S=T.getProvider("app").getImmediate(),P=function pr(T){if(!T||!T.options)throw Ba("App Configuration");if(!T.name)throw Ba("App Name");const S=["projectId","apiKey","appId"];for(const P of S)if(!T.options[P])throw Ba(P);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(S);return{app:S,appConfig:P,platformLoggerProvider:(0,de._getProvider)(S,"platform-logger"),_delete:()=>Promise.resolve()}},gn=T=>{const S=T.getProvider("app").getImmediate(),P=(0,de._getProvider)(S,dn).getImmediate();return{getId:()=>function ee(T){return Q.apply(this,arguments)}(P),getToken:ne=>function Oe(T){return We.apply(this,arguments)}(P,ne)}};(function oi(){(0,de._registerComponent)(new Ce.wA(dn,Vt,"PUBLIC")),(0,de._registerComponent)(new Ce.wA("installations-internal",gn,"PRIVATE"))})(),(0,de.registerVersion)(ye,G),(0,de.registerVersion)(ye,G,"esm2017");const rs="@firebase/remote-config",Gn=new ge.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vl{constructor(S,P,B,ne){this.client=S,this.storage=P,this.storageCache=B,this.logger=ne}isCachedDataFresh(S,P){if(!P)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-P,ne=B<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ne}.`),ne}fetch(S){var P=this;return(0,N.Z)(function*(){const[B,ne]=yield Promise.all([P.storage.getLastSuccessfulFetchTimestampMillis(),P.storage.getLastSuccessfulFetchResponse()]);if(ne&&P.isCachedDataFresh(S.cacheMaxAgeMillis,B))return ne;S.eTag=ne&&ne.eTag;const _e=yield P.client.fetch(S),Ve=[P.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===_e.status&&Ve.push(P.storage.setLastSuccessfulFetchResponse(_e)),yield Promise.all(Ve),_e})()}}function eo(T=navigator){return T.languages&&T.languages[0]||T.language}class ai{constructor(S,P,B,ne,_e,Ve){this.firebaseInstallations=S,this.sdkVersion=P,this.namespace=B,this.projectId=ne,this.apiKey=_e,this.appId=Ve}fetch(S){var P=this;return(0,N.Z)(function*(){const[B,ne]=yield Promise.all([P.firebaseInstallations.getId(),P.firebaseInstallations.getToken()]),Ve=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${P.projectId}/namespaces/${P.namespace}:fetch?key=${P.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},st={sdk_version:P.sdkVersion,app_instance_id:B,app_instance_id_token:ne,app_id:P.appId,language_code:eo()},Yt={method:"POST",headers:Qe,body:JSON.stringify(st)},_n=fetch(Ve,Yt),nr=new Promise((Zr,Ei)=>{S.signal.addEventListener(()=>{const Ho=new Error("The operation was aborted.");Ho.name="AbortError",Ei(Ho)})});let Zn;try{yield Promise.race([_n,nr]),Zn=yield _n}catch(Zr){let Ei="fetch-client-network";throw"AbortError"===Zr.name&&(Ei="fetch-timeout"),Gn.create(Ei,{originalErrorMessage:Zr.message})}let Kn=Zn.status;const Os=Zn.headers.get("ETag")||void 0;let sc,gs;if(200===Zn.status){let Zr;try{Zr=yield Zn.json()}catch(Ei){throw Gn.create("fetch-client-parse",{originalErrorMessage:Ei.message})}sc=Zr.entries,gs=Zr.state}if("INSTANCE_STATE_UNSPECIFIED"===gs?Kn=500:"NO_CHANGE"===gs?Kn=304:("NO_TEMPLATE"===gs||"EMPTY_CONFIG"===gs)&&(sc={}),304!==Kn&&200!==Kn)throw Gn.create("fetch-status",{httpStatus:Kn});return{status:Kn,eTag:Os,config:sc}})()}}class $p{constructor(S,P){this.client=S,this.storage=P}fetch(S){var P=this;return(0,N.Z)(function*(){const B=(yield P.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return P.attemptFetch(S,B)})()}attemptFetch(S,{throttleEndTimeMillis:P,backoffCount:B}){var ne=this;return(0,N.Z)(function*(){yield function Hp(T,S){return new Promise((P,B)=>{const ne=Math.max(S-Date.now(),0),_e=setTimeout(P,ne);T.addEventListener(()=>{clearTimeout(_e),B(Gn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,P);try{const _e=yield ne.client.fetch(S);return yield ne.storage.deleteThrottleMetadata(),_e}catch(_e){if(!function Cs(T){if(!(T instanceof ge.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}(_e))throw _e;const Ve={throttleEndTimeMillis:Date.now()+(0,ge.$s)(B),backoffCount:B+1};return yield ne.storage.setThrottleMetadata(Ve),ne.attemptFetch(S,Ve)}})()}}class Vu{constructor(S,P,B,ne,_e){this.app=S,this._client=P,this._storageCache=B,this._storage=ne,this._logger=_e,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ac(T,S){const P=T.target.error||void 0;return Gn.create(S,{originalErrorMessage:P&&P.message})}const to="app_namespace_store";class la{constructor(S,P,B,ne=function Uu(){return new Promise((T,S)=>{try{const P=indexedDB.open("firebase_remote_config",1);P.onerror=B=>{S(Ac(B,"storage-open"))},P.onsuccess=B=>{T(B.target.result)},P.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(to,{keyPath:"compositeKey"})}}catch(P){S(Gn.create("storage-open",{originalErrorMessage:P}))}})}()){this.appId=S,this.appName=P,this.namespace=B,this.openDbPromise=ne}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var P=this;return(0,N.Z)(function*(){const B=yield P.openDbPromise;return new Promise((ne,_e)=>{const Qe=B.transaction([to],"readonly").objectStore(to),st=P.createCompositeKey(S);try{const Yt=Qe.get(st);Yt.onerror=_n=>{_e(Ac(_n,"storage-get"))},Yt.onsuccess=_n=>{const nr=_n.target.result;ne(nr?nr.value:void 0)}}catch(Yt){_e(Gn.create("storage-get",{originalErrorMessage:Yt&&Yt.message}))}})})()}set(S,P){var B=this;return(0,N.Z)(function*(){const ne=yield B.openDbPromise;return new Promise((_e,Ve)=>{const st=ne.transaction([to],"readwrite").objectStore(to),Yt=B.createCompositeKey(S);try{const _n=st.put({compositeKey:Yt,value:P});_n.onerror=nr=>{Ve(Ac(nr,"storage-set"))},_n.onsuccess=()=>{_e()}}catch(_n){Ve(Gn.create("storage-set",{originalErrorMessage:_n&&_n.message}))}})})()}delete(S){var P=this;return(0,N.Z)(function*(){const B=yield P.openDbPromise;return new Promise((ne,_e)=>{const Qe=B.transaction([to],"readwrite").objectStore(to),st=P.createCompositeKey(S);try{const Yt=Qe.delete(st);Yt.onerror=_n=>{_e(Ac(_n,"storage-delete"))},Yt.onsuccess=()=>{ne()}}catch(Yt){_e(Gn.create("storage-delete",{originalErrorMessage:Yt&&Yt.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class Gp{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,N.Z)(function*(){const P=S.storage.getLastFetchStatus(),B=S.storage.getLastSuccessfulFetchTimestampMillis(),ne=S.storage.getActiveConfig(),_e=yield P;_e&&(S.lastFetchStatus=_e);const Ve=yield B;Ve&&(S.lastSuccessfulFetchTimestampMillis=Ve);const Qe=yield ne;Qe&&(S.activeConfig=Qe)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function Bu(){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,N.Z)(function*(){if(!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Wp(){(0,de._registerComponent)(new Ce.wA("remote-config",function T(S,{instanceIdentifier:P}){const B=S.getProvider("app").getImmediate(),ne=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Gn.create("registration-window");if(!(0,ge.hl)())throw Gn.create("indexed-db-unavailable");const{projectId:_e,apiKey:Ve,appId:Qe}=B.options;if(!_e)throw Gn.create("registration-project-id");if(!Ve)throw Gn.create("registration-api-key");if(!Qe)throw Gn.create("registration-app-id");const st=new la(Qe,B.name,P=P||"firebase"),Yt=new Gp(st),_n=new ce.Yd(rs);_n.logLevel=ce.in.ERROR;const nr=new ai(ne,de.SDK_VERSION,P,_e,Ve,Qe),Zn=new $p(nr,st),Kn=new Vl(Zn,st,Yt,_n),Os=new Vu(B,Kn,Yt,st,_n);return function bn(T){const S=(0,ge.m9)(T);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Os),Os},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(rs,"0.3.4"),(0,de.registerVersion)(rs,"0.3.4","esm2017")}();const qa="/firebase-messaging-sw.js",Bi="/firebase-cloud-messaging-push-scope",Ga="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Za="google.c.a.c_id",Eh="google.c.a.c_l",Ka="google.c.a.ts",Ya="google.c.a.e";var ca=(()=>{return(T=ca||(ca={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",ca;var T})();function _i(T){const S=new Uint8Array(T);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mc(T){const P=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(P),ne=new Uint8Array(B.length);for(let _e=0;_e<B.length;++_e)ne[_e]=B.charCodeAt(_e);return ne}const Sn="fcm_token_details_db",ju="fcm_token_object_Store";function Bl(T){return Ja.apply(this,arguments)}function Ja(){return Ja=(0,N.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(_e=>_e.name).includes(Sn))return null;let S=null;return(yield(0,me.openDb)(Sn,5,function(){var B=(0,N.Z)(function*(ne){var _e;if(ne.oldVersion<2||!ne.objectStoreNames.contains(ju))return;const Ve=ne.transaction.objectStore(ju),Qe=yield Ve.index("fcmSenderId").get(T);if(yield Ve.clear(),Qe)if(2===ne.oldVersion){const st=Qe;if(!st.auth||!st.p256dh||!st.endpoint)return;S={token:st.fcmToken,createTime:null!==(_e=st.createTime)&&void 0!==_e?_e:Date.now(),subscriptionOptions:{auth:st.auth,p256dh:st.p256dh,endpoint:st.endpoint,swScope:st.swScope,vapidKey:"string"==typeof st.vapidKey?st.vapidKey:_i(st.vapidKey)}}}else if(3===ne.oldVersion){const st=Qe;S={token:st.fcmToken,createTime:st.createTime,subscriptionOptions:{auth:_i(st.auth),p256dh:_i(st.p256dh),endpoint:st.endpoint,swScope:st.swScope,vapidKey:_i(st.vapidKey)}}}else if(4===ne.oldVersion){const st=Qe;S={token:st.fcmToken,createTime:st.createTime,subscriptionOptions:{auth:_i(st.auth),p256dh:_i(st.p256dh),endpoint:st.endpoint,swScope:st.swScope,vapidKey:_i(st.vapidKey)}}}});return function(ne){return B.apply(this,arguments)}}())).close(),yield(0,me.deleteDb)(Sn),yield(0,me.deleteDb)("fcm_vapid_details_db"),yield(0,me.deleteDb)("undefined"),jl(S)?S:null}),Ja.apply(this,arguments)}function jl(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:S}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const as="firebase-messaging-store";let Hl=null;function kn(){return Hl||(Hl=(0,me.openDb)("firebase-messaging-database",1,T=>{0===T.oldVersion&&T.createObjectStore(as)})),Hl}function el(T){return ua.apply(this,arguments)}function ua(){return(ua=(0,N.Z)(function*(T){const S=yi(T),B=yield(yield kn()).transaction(as).objectStore(as).get(S);if(B)return B;{const ne=yield Bl(T.appConfig.senderId);if(ne)return yield ji(T,ne),ne}})).apply(this,arguments)}function ji(T,S){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,N.Z)(function*(T,S){const P=yi(T),ne=(yield kn()).transaction(as,"readwrite");return yield ne.objectStore(as).put(S,P),yield ne.complete,S})).apply(this,arguments)}function tl(T){return To.apply(this,arguments)}function To(){return(To=(0,N.Z)(function*(T){const S=yi(T),B=(yield kn()).transaction(as,"readwrite");yield B.objectStore(as).delete(S),yield B.complete})).apply(this,arguments)}function yi({appConfig:T}){return T.appId}const Jn=new ge.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Do(T,S){return $l.apply(this,arguments)}function $l(){return($l=(0,N.Z)(function*(T,S){const P=yield Mo(T),B=ko(S),ne={method:"POST",headers:P,body:JSON.stringify(B)};let _e;try{_e=yield(yield fetch(no(T.appConfig),ne)).json()}catch(Ve){throw Jn.create("token-subscribe-failed",{errorInfo:Ve})}if(_e.error)throw Jn.create("token-subscribe-failed",{errorInfo:_e.error.message});if(!_e.token)throw Jn.create("token-subscribe-no-token");return _e.token})).apply(this,arguments)}function li(T,S){return So.apply(this,arguments)}function So(){return(So=(0,N.Z)(function*(T,S){const P=yield Mo(T),B=ko(S.subscriptionOptions),ne={method:"PATCH",headers:P,body:JSON.stringify(B)};let _e;try{_e=yield(yield fetch(`${no(T.appConfig)}/${S.token}`,ne)).json()}catch(Ve){throw Jn.create("token-update-failed",{errorInfo:Ve})}if(_e.error)throw Jn.create("token-update-failed",{errorInfo:_e.error.message});if(!_e.token)throw Jn.create("token-update-no-token");return _e.token})).apply(this,arguments)}function Ao(T,S){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,N.Z)(function*(T,S){const B={method:"DELETE",headers:yield Mo(T)};try{const _e=yield(yield fetch(`${no(T.appConfig)}/${S}`,B)).json();if(_e.error)throw Jn.create("token-unsubscribe-failed",{errorInfo:_e.error.message})}catch(ne){throw Jn.create("token-unsubscribe-failed",{errorInfo:ne})}})).apply(this,arguments)}function no({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function Mo(T){return xo.apply(this,arguments)}function xo(){return(xo=(0,N.Z)(function*({appConfig:T,installations:S}){const P=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${P}`})})).apply(this,arguments)}function ko({p256dh:T,auth:S,endpoint:P,vapidKey:B}){const ne={web:{endpoint:P,auth:S,p256dh:T}};return B!==Ga&&(ne.web.applicationPubKey=B),ne}const xc=6048e5;function zl(T){return kc.apply(this,arguments)}function kc(){return(kc=(0,N.Z)(function*(T){const S=yield Lr(T.swRegistration,T.vapidKey),P={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:S.endpoint,auth:_i(S.getKey("auth")),p256dh:_i(S.getKey("p256dh"))},B=yield el(T.firebaseDependencies);if(B){if(nl(B.subscriptionOptions,P))return Date.now()>=B.createTime+xc?ql(T,{token:B.token,createTime:Date.now(),subscriptionOptions:P}):B.token;try{yield Ao(T.firebaseDependencies,B.token)}catch(ne){console.warn(ne)}return da(T.firebaseDependencies,P)}return da(T.firebaseDependencies,P)})).apply(this,arguments)}function Pe(T){return zt.apply(this,arguments)}function zt(){return(zt=(0,N.Z)(function*(T){const S=yield el(T.firebaseDependencies);S&&(yield Ao(T.firebaseDependencies,S.token),yield tl(T.firebaseDependencies));const P=yield T.swRegistration.pushManager.getSubscription();return!P||P.unsubscribe()})).apply(this,arguments)}function ql(T,S){return An.apply(this,arguments)}function An(){return(An=(0,N.Z)(function*(T,S){try{const P=yield li(T.firebaseDependencies,S),B=Object.assign(Object.assign({},S),{token:P,createTime:Date.now()});return yield ji(T.firebaseDependencies,B),P}catch(P){throw yield Pe(T),P}})).apply(this,arguments)}function da(T,S){return ha.apply(this,arguments)}function ha(){return(ha=(0,N.Z)(function*(T,S){const B={token:yield Do(T,S),createTime:Date.now(),subscriptionOptions:S};return yield ji(T,B),B.token})).apply(this,arguments)}function Lr(T,S){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,N.Z)(function*(T,S){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Mc(S)})})).apply(this,arguments)}function nl(T,S){return S.vapidKey===T.vapidKey&&S.endpoint===T.endpoint&&S.auth===T.auth&&S.p256dh===T.p256dh}function Hu(T){const S={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function Ih(T,S){if(!S.notification)return;T.notification={};const P=S.notification.title;P&&(T.notification.title=P);const B=S.notification.body;B&&(T.notification.body=B);const ne=S.notification.image;ne&&(T.notification.image=ne)}(S,T),function fa(T,S){!S.data||(T.data=S.data)}(S,T),function Gl(T,S){if(!S.fcmOptions)return;T.fcmOptions={};const P=S.fcmOptions.link;P&&(T.fcmOptions.link=P);const B=S.fcmOptions.analytics_label;B&&(T.fcmOptions.analyticsLabel=B)}(S,T),S}function Ir(T){return"object"==typeof T&&!!T&&Za in T}function vi(T,S){const P=[];for(let B=0;B<T.length;B++)P.push(T.charAt(B)),B<S.length&&P.push(S.charAt(B));return P.join("")}function Hi(T){return Jn.create("missing-app-config-values",{valueName:T})}vi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),vi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Is{constructor(S,P,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ne=function $u(T){if(!T||!T.options)throw Hi("App Configuration Object");if(!T.name)throw Hi("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:P}=T;for(const B of S)if(!P[B])throw Hi(B);return{appName:T.name,projectId:P.projectId,apiKey:P.apiKey,appId:P.appId,senderId:P.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ne,installations:P,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Wl(T){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,N.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(qa,{scope:Bi}),T.swRegistration.update().catch(()=>{})}catch(S){throw Jn.create("failed-service-worker-registration",{browserErrorMessage:S.message})}})).apply(this,arguments)}function Oc(T,S){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,N.Z)(function*(T,S){if(!S&&!T.swRegistration&&(yield Wl(T)),S||!T.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Jn.create("invalid-sw-registration");T.swRegistration=S}})).apply(this,arguments)}function rl(T,S){return il.apply(this,arguments)}function il(){return(il=(0,N.Z)(function*(T,S){S?T.vapidKey=S:T.vapidKey||(T.vapidKey=Ga)})).apply(this,arguments)}function ol(){return(ol=(0,N.Z)(function*(T,S){if(!navigator)throw Jn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Jn.create("permission-blocked");return yield rl(T,null==S?void 0:S.vapidKey),yield Oc(T,null==S?void 0:S.serviceWorkerRegistration),zl(T)})).apply(this,arguments)}function Kl(T,S,P){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,N.Z)(function*(T,S,P){const B=Yl(S);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:P[Za],message_name:P[Eh],message_time:P[Ka],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Yl(T){switch(T){case ca.NOTIFICATION_CLICKED:return"notification_open";case ca.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function al(){return(al=(0,N.Z)(function*(T,S){const P=S.data;if(!P.isFirebaseMessaging)return;T.onMessageHandler&&P.messageType===ca.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(Hu(P)):T.onMessageHandler.next(Hu(P)));const B=P.data;Ir(B)&&"1"===B[Ya]&&(yield Kl(T,P.messageType,B))})).apply(this,arguments)}const Nc="@firebase/messaging",ll=T=>{const S=new Is(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",P=>function zu(T,S){return al.apply(this,arguments)}(S,P)),S},Zp=T=>{const S=T.getProvider("messaging").getImmediate();return{getToken:B=>function sl(T,S){return ol.apply(this,arguments)}(S,B)}};function gr(){return mr.apply(this,arguments)}function mr(){return(mr=(0,N.Z)(function*(){try{yield(0,ge.eu)()}catch(T){return!1}return"undefined"!=typeof window&&(0,ge.hl)()&&(0,ge.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Kp(){(0,de._registerComponent)(new Ce.wA("messaging",ll,"PUBLIC")),(0,de._registerComponent)(new Ce.wA("messaging-internal",Zp,"PRIVATE")),(0,de.registerVersion)(Nc,"0.9.9"),(0,de.registerVersion)(Nc,"0.9.9","esm2017")}();const io="analytics",ls="firebase_id",Yp="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ts="https://www.googletagmanager.com/gtag/js",Wn=new ce.Yd("@firebase/analytics");function Lc(T){return Promise.all(T.map(S=>S.catch(P=>P)))}function Wu(T,S){const P=document.createElement("script");P.src=`${Ts}?l=${T}&id=${S}`,P.async=!0,document.head.appendChild(P)}function cl(T,S,P,B,ne,_e){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,N.Z)(function*(T,S,P,B,ne,_e){const Ve=B[ne];try{if(Ve)yield S[Ve];else{const st=(yield Lc(P)).find(Yt=>Yt.measurementId===ne);st&&(yield S[st.appId])}}catch(Qe){Wn.error(Qe)}T("config",ne,_e)})).apply(this,arguments)}function Uc(T,S,P,B,ne){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,N.Z)(function*(T,S,P,B,ne){try{let _e=[];if(ne&&ne.send_to){let Ve=ne.send_to;Array.isArray(Ve)||(Ve=[Ve]);const Qe=yield Lc(P);for(const st of Ve){const Yt=Qe.find(nr=>nr.measurementId===st),_n=Yt&&S[Yt.appId];if(!_n){_e=[];break}_e.push(_n)}}0===_e.length&&(_e=Object.values(S)),yield Promise.all(_e),T("event",B,ne||{})}catch(_e){Wn.error(_e)}})).apply(this,arguments)}function bi(){const T=window.document.getElementsByTagName("script");for(const S of Object.values(T))if(S.src&&S.src.includes(Ts))return S;return null}const ar=new ge.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Mh=new class lr{constructor(S={},P=1e3){this.throttleMetadata=S,this.intervalMillis=P}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,P){this.throttleMetadata[S]=P}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function wn(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Vr(T){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,N.Z)(function*(T){var S;const{appId:P,apiKey:B}=T,ne={method:"GET",headers:wn(B)},_e=Yp.replace("{app-id}",P),Ve=yield fetch(_e,ne);if(200!==Ve.status&&304!==Ve.status){let Qe="";try{const st=yield Ve.json();(null===(S=st.error)||void 0===S?void 0:S.message)&&(Qe=st.error.message)}catch(st){}throw ar.create("config-fetch-failed",{httpStatus:Ve.status,responseMessage:Qe})}return Ve.json()})).apply(this,arguments)}function ul(T){return Po.apply(this,arguments)}function Po(){return(Po=(0,N.Z)(function*(T,S=Mh,P){const{appId:B,apiKey:ne,measurementId:_e}=T.options;if(!B)throw ar.create("no-app-id");if(!ne){if(_e)return{measurementId:_e,appId:B};throw ar.create("no-api-key")}const Ve=S.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new Ss;return setTimeout((0,N.Z)(function*(){Qe.abort()}),void 0!==P?P:6e4),Jl({appId:B,apiKey:ne,measurementId:_e},Ve,Qe,S)})).apply(this,arguments)}function Jl(T,S,P){return No.apply(this,arguments)}function No(){return(No=(0,N.Z)(function*(T,{throttleEndTimeMillis:S,backoffCount:P},B,ne=Mh){const{appId:_e,measurementId:Ve}=T;try{yield Qu(B,S)}catch(Qe){if(Ve)return Wn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ve} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:_e,measurementId:Ve};throw Qe}try{const Qe=yield Vr(T);return ne.deleteThrottleMetadata(_e),Qe}catch(Qe){if(!Ds(Qe)){if(ne.deleteThrottleMetadata(_e),Ve)return Wn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ve} provided in the "measurementId" field in the local Firebase config. [${Qe.message}]`),{appId:_e,measurementId:Ve};throw Qe}const st=503===Number(Qe.customData.httpStatus)?(0,ge.$s)(P,ne.intervalMillis,30):(0,ge.$s)(P,ne.intervalMillis),Yt={throttleEndTimeMillis:Date.now()+st,backoffCount:P+1};return ne.setThrottleMetadata(_e,Yt),Wn.debug(`Calling attemptFetch again in ${st} millis`),Jl(T,Yt,B,ne)}})).apply(this,arguments)}function Qu(T,S){return new Promise((P,B)=>{const ne=Math.max(S-Date.now(),0),_e=setTimeout(P,ne);T.addEventListener(()=>{clearTimeout(_e),B(ar.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function Ds(T){if(!(T instanceof ge.ZR&&T.customData))return!1;const S=Number(T.customData.httpStatus);return 429===S||500===S||503===S||504===S}class Ss{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}function cs(){return us.apply(this,arguments)}function us(){return(us=(0,N.Z)(function*(){if(!(0,ge.hl)())return Wn.warn(ar.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ge.eu)()}catch(T){return Wn.warn(ar.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function dl(){return(dl=(0,N.Z)(function*(T,S,P,B,ne,_e,Ve){var Qe;const st=ul(T);st.then(Kn=>{P[Kn.measurementId]=Kn.appId,T.options.measurementId&&Kn.measurementId!==T.options.measurementId&&Wn.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kn=>Wn.error(Kn)),S.push(st);const Yt=cs().then(Kn=>{if(Kn)return B.getId()}),[_n,nr]=yield Promise.all([st,Yt]);bi()||Wu(_e,_n.measurementId),ne("js",new Date);const Zn=null!==(Qe=null==Ve?void 0:Ve.config)&&void 0!==Qe?Qe:{};return Zn.origin="firebase",Zn.update=!0,null!=nr&&(Zn[ls]=nr),ne("config",_n.measurementId,Zn),_n.measurementId})).apply(this,arguments)}class ec{constructor(S){this.app=S}_delete(){return delete $i[this.app.options.appId],Promise.resolve()}}let $i={},tc=[];const As={};let On,Ms,so="dataLayer",Xu=!1;function Fo(T,S,P){!function ed(){const T=[];if((0,ge.ru)()&&T.push("This is a browser extension environment."),(0,ge.zI)()||T.push("Cookies are not available."),T.length>0){const S=T.map((B,ne)=>`(${ne+1}) ${B}`).join(" "),P=ar.create("invalid-analytics-context",{errorInfo:S});Wn.warn(P.message)}}();const B=T.options.appId;if(!B)throw ar.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw ar.create("no-api-key");Wn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$i[B])throw ar.create("already-exists",{id:B});if(!Xu){!function Xl(T){let S=[];Array.isArray(window[T])?S=window[T]:window[T]=S}(so);const{wrappedGtag:_e,gtagCore:Ve}=function Ku(T,S,P,B,ne){let _e=function(...Ve){window[B].push(arguments)};return window[ne]&&"function"==typeof window[ne]&&(_e=window[ne]),window[ne]=function Ah(T,S,P,B){function _e(){return(_e=(0,N.Z)(function*(Ve,Qe,st){try{"event"===Ve?yield Uc(T,S,P,Qe,st):"config"===Ve?yield cl(T,S,P,B,Qe,st):T("set",Qe)}catch(Yt){Wn.error(Yt)}})).apply(this,arguments)}return function ne(Ve,Qe,st){return _e.apply(this,arguments)}}(_e,T,S,P),{gtagCore:_e,wrappedGtag:window[ne]}}($i,tc,As,so,"gtag");Ms=_e,On=Ve,Xu=!0}return $i[B]=function pa(T,S,P,B,ne,_e,Ve){return dl.apply(this,arguments)}(T,tc,As,S,On,so,P),new ec(T)}function Tr(){return(Tr=(0,N.Z)(function*(T,S,P,B,ne){if(ne&&ne.global)T("event",P,B);else{const _e=yield S;T("event",P,Object.assign(Object.assign({},B),{send_to:_e}))}})).apply(this,arguments)}function hs(){return rd.apply(this,arguments)}function rd(){return(rd=(0,N.Z)(function*(){if((0,ge.ru)()||!(0,ge.zI)()||!(0,ge.hl)())return!1;try{return yield(0,ge.eu)()}catch(T){return!1}})).apply(this,arguments)}const ci="@firebase/analytics";!function qt(){(0,de._registerComponent)(new Ce.wA(io,(S,{options:P})=>Fo(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),P),"PUBLIC")),(0,de._registerComponent)(new Ce.wA("analytics-internal",function T(S){try{const P=S.getProvider(io).getImmediate();return{logEvent:(B,ne,_e)=>function nc(T,S,P,B){T=(0,ge.m9)(T),function td(T,S,P,B,ne){return Tr.apply(this,arguments)}(Ms,$i[T.app.options.appId],S,P,B).catch(ne=>Wn.error(ne))}(P,B,ne,_e)}}catch(P){throw ar.create("interop-component-reg-failed",{reason:P})}},"PRIVATE")),(0,de.registerVersion)(ci,"0.7.5"),(0,de.registerVersion)(ci,"0.7.5","esm2017")}();var fs=F(4408),ao=F(7565);const ui=new class rc extends ao.v{}(class Vo extends fs.o{constructor(S,P){super(S,P),this.scheduler=S,this.work=P}schedule(S,P=0){return P>0?super.schedule(S,P):(this.delay=P,this.state=S,this.scheduler.flush(this),this)}execute(S,P){return P>0||this.closed?super.execute(S,P):this._execute(S,P)}requestAsyncId(S,P,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(S,P,B):S.flush(this)}});var ga=F(4986),lo=F(8306),ma=F(8505),_a=F(9468),Hc=F(5363);const zi=new c.GfV("7.2.1"),hl="__angularfire_symbol__analyticsIsSupportedValue",$c="__angularfire_symbol__analyticsIsSupported",fl="__angularfire_symbol__remoteConfigIsSupportedValue",Dr="__angularfire_symbol__remoteConfigIsSupported",Uo="__angularfire_symbol__messagingIsSupportedValue",ps="__angularfire_symbol__messagingIsSupported";function ic(T,S,P){if(S){if(1===S.length)return S[0];const _e=S.filter(Ve=>Ve.app===P);if(1===_e.length)return _e[0]}return P.container.getProvider(T).getImmediate({optional:!0})}globalThis[$c]||(globalThis[$c]=hs().then(T=>globalThis[hl]=T).catch(()=>globalThis[hl]=!1)),globalThis[ps]||(globalThis[ps]=gr().then(T=>globalThis[Uo]=T).catch(()=>globalThis[Uo]=!1)),globalThis[Dr]||(globalThis[Dr]=Bu().then(T=>globalThis[fl]=T).catch(()=>globalThis[fl]=!1));const od=(T,S)=>{const P=S?[S]:(0,H.C6)(),B=[];return P.forEach(ne=>{ne.container.getProvider(T).instances.forEach(Ve=>{B.includes(Ve)||B.push(Ve)})}),B};function ks(){}class Bo{constructor(S,P=ui){this.zone=S,this.delegate=P}now(){return this.delegate.now()}schedule(S,P,B){const ne=this.zone;return this.delegate.schedule(function(Ve){ne.runGuarded(()=>{S.apply(this,[Ve])})},P,B)}}class ya{constructor(S){this.zone=S,this.task=null}call(S,P){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ks,{},ks,ks)),P.pipe((0,ma.b)({next:B,complete:B,error:B})).subscribe(S).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let co=(()=>{class T{constructor(P){this.ngZone=P,this.outsideAngular=P.runOutsideAngular(()=>new Bo(Zone.current)),this.insideAngular=P.run(()=>new Bo(Zone.current,ga.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(P){return new(P||T)(c.LFG(c.R0b))},T.\u0275prov=c.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function jo(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function va(T){return jo().ngZone.runOutsideAngular(()=>T())}function er(T){return jo().ngZone.run(()=>T())}function kh(T){return jo(),function Oh(T){return function(P){return(P=P.lift(new ya(T.ngZone))).pipe((0,_a.R)(T.outsideAngular),(0,Hc.Q)(T.insideAngular))}}(jo())(T)}const pl=(T,S)=>{const P=void 0;return function(){const B=arguments;return S&&setTimeout(()=>{"scheduled"===S.state&&S.invoke()},10),er(()=>T.apply(P,B))}},Zc=(T,S)=>function(){let P;const B=arguments;for(let _e=0;_e<arguments.length;_e++)"function"==typeof B[_e]&&(S&&(P||(P=er(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ks,{},ks,ks)))),B[_e]=pl(B[_e],P));const ne=va(()=>T.apply(this,B));if(!S){if(ne instanceof lo.y){const _e=jo();return ne.pipe((0,_a.R)(_e.outsideAngular),(0,Hc.Q)(_e.insideAngular))}return er(()=>ne)}return ne instanceof lo.y?ne.pipe(kh):ne instanceof Promise?er(()=>new Promise((_e,Ve)=>ne.then(Qe=>er(()=>_e(Qe)),Qe=>er(()=>Ve(Qe))))):"function"==typeof ne&&P?function(){return setTimeout(()=>{P&&"scheduled"===P.state&&P.invoke()},10),ne.apply(this,arguments)}:er(()=>ne)}},4929:(ct,ke,F)=>{"use strict";F.d(ke,{$:()=>xc,A:()=>W,E:()=>Vt,G:()=>Wr,I:()=>Cs,K:()=>St,L:()=>Bu,M:()=>Ga,N:()=>Wa,P:()=>Hc,Q:()=>Za,R:()=>ci,T:()=>Bi,U:()=>Qa,V:()=>ca,W:()=>ju,X:()=>yi,Y:()=>Jn,Z:()=>$l,_:()=>Ct,a:()=>ar,a0:()=>kc,a1:()=>zt,a2:()=>An,a3:()=>ha,a4:()=>Oo,a5:()=>Hu,a6:()=>Ih,a7:()=>Gl,a8:()=>Ir,a9:()=>Is,aA:()=>_n,aB:()=>kh,aC:()=>dn,aG:()=>lr,aJ:()=>Ka,aa:()=>Zl,ab:()=>Rc,ae:()=>ol,af:()=>Pc,ag:()=>Yl,aj:()=>Ln,ak:()=>Un,am:()=>Sh,an:()=>Xl,ao:()=>qn,ap:()=>U,aq:()=>Ft,ar:()=>ut,as:()=>Te,at:()=>qi,au:()=>Ho,av:()=>ve,aw:()=>he,ax:()=>z,ay:()=>gt,az:()=>sc,b:()=>bi,c:()=>qc,d:()=>od,e:()=>sd,f:()=>Zc,g:()=>_e,h:()=>P,i:()=>Ju,j:()=>st,k:()=>Hh,l:()=>ao,m:()=>Qc,n:()=>CD,o:()=>me,r:()=>ui,s:()=>fs,t:()=>Th,u:()=>ma,z:()=>Re});var c=F(5861),H=F(2090),N=F(9681),de=F(655),ge=F(1877),Ce=F(4859);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},W={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Re=function oe(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Fe=function je(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Be=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),fe=new ge.Yd("@firebase/auth");function be(b,...m){fe.logLevel<=ge.in.ERROR&&fe.error(`Auth (${N.SDK_VERSION}): ${b}`,...m)}function Te(b,...m){throw nt(b,...m)}function ve(b,...m){return nt(b,...m)}function qe(b,m,_){const E=Object.assign(Object.assign({},Fe()),{[m]:_});return new H.LL("auth","Firebase",E).create(m,{appName:b.name})}function xe(b,m,_){if(!(m instanceof _))throw _.name!==m.constructor.name&&Te(b,"argument-error"),qe(b,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nt(b,...m){if("string"!=typeof b){const _=m[0],E=[...m.slice(1)];return E[0]&&(E[0].appName=b.name),b._errorFactory.create(_,...E)}return Be.create(b,...m)}function he(b,m,..._){if(!b)throw nt(m,..._)}function it(b){const m="INTERNAL ASSERTION FAILED: "+b;throw be(m),new Error(m)}function U(b,m){b||it(m)}const Z=new Map;function z(b){U(b instanceof Function,"Expected a class definition");let m=Z.get(b);return m?(U(m instanceof b,"Instance stored in cache mismatched with class"),m):(m=new b,Z.set(b,m),m)}function K(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function $e(){return"http:"===yt()||"https:"===yt()}function yt(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class et{constructor(m,_){this.shortDelay=m,this.longDelay=_,U(_>m,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return function cn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&($e()||(0,H.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function un(b,m){U(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return m?`${_}${m.startsWith("/")?m.slice(1):m}`:_}class It{static initialize(m,_,E){this.fetchImpl=m,_&&(this.headersImpl=_),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void it("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void it("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void it("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Tn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Kt=new et(3e4,6e4);function Ut(b,m){return b.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:b.tenantId}):m}function tn(b,m,_,E){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,c.Z)(function*(b,m,_,E,k={}){return Fi(b,k,(0,c.Z)(function*(){let V={},ue={};E&&("GET"===m?ue=E:V={body:JSON.stringify(E)});const Ne=(0,H.xO)(Object.assign({key:b.config.apiKey},ue)).slice(1),at=yield b._getAdditionalHeaders();return at["Content-Type"]="application/json",b.languageCode&&(at["X-Firebase-Locale"]=b.languageCode),It.fetch()(fi(b,b.config.apiHost,_,Ne),Object.assign({method:m,headers:at,referrerPolicy:"no-referrer"},V))}))})).apply(this,arguments)}function Fi(b,m,_){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,c.Z)(function*(b,m,_){b._canInitEmulator=!1;const E=Object.assign(Object.assign({},Tn),m);try{const k=new Li(b),V=yield Promise.race([_(),k.promise]);k.clearNetworkTimeout();const ue=yield V.json();if("needConfirmation"in ue)throw zn(b,"account-exists-with-different-credential",ue);if(V.ok&&!("errorMessage"in ue))return ue;{const Ne=V.ok?ue.errorMessage:ue.error.message,[at,Dt]=Ne.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===at)throw zn(b,"credential-already-in-use",ue);if("EMAIL_EXISTS"===at)throw zn(b,"email-already-in-use",ue);const Wt=E[at]||at.toLowerCase().replace(/[_\s]+/g,"-");if(Dt)throw qe(b,Wt,Dt);Te(b,Wt)}}catch(k){if(k instanceof H.ZR)throw k;Te(b,"network-request-failed")}})).apply(this,arguments)}function xn(b,m,_,E){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,c.Z)(function*(b,m,_,E,k={}){const V=yield tn(b,m,_,E,k);return"mfaPendingCredential"in V&&Te(b,"multi-factor-auth-required",{_serverResponse:V}),V})).apply(this,arguments)}function fi(b,m,_,E){const k=`${m}${_}?${E}`;return b.config.emulator?un(b.config,k):`${b.config.apiScheme}://${k}`}class Li{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((_,E)=>{this.timer=setTimeout(()=>E(ve(this.auth,"network-request-failed")),Kt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zn(b,m,_){const E={appName:b.name};_.email&&(E.email=_.email),_.phoneNumber&&(E.phoneNumber=_.phoneNumber);const k=ve(b,m,E);return k.customData._tokenResponse=_,k}function wt(){return(wt=(0,c.Z)(function*(b,m){return tn(b,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function qr(b,m){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,c.Z)(function*(b,m){return tn(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Jt(b,m){return Er.apply(this,arguments)}function Er(){return(Er=(0,c.Z)(function*(b,m){return tn(b,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function sr(b){if(b)try{const m=new Date(Number(b));if(!isNaN(m.getTime()))return m.toUTCString()}catch(m){}}function or(){return(or=(0,c.Z)(function*(b,m=!1){const _=(0,H.m9)(b),E=yield _.getIdToken(m),k=Bt(E);he(k&&k.exp&&k.auth_time&&k.iat,_.auth,"internal-error");const V="object"==typeof k.firebase?k.firebase:void 0,ue=null==V?void 0:V.sign_in_provider;return{claims:k,token:E,authTime:sr(ts(k.auth_time)),issuedAtTime:sr(ts(k.iat)),expirationTime:sr(ts(k.exp)),signInProvider:ue||null,signInSecondFactor:(null==V?void 0:V.sign_in_second_factor)||null}})).apply(this,arguments)}function ts(b){return 1e3*Number(b)}function Bt(b){const[m,_,E]=b.split(".");if(void 0===m||void 0===_||void 0===E)return be("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,H.tV)(_);return k?JSON.parse(k):(be("Failed to decode base64 JWT payload"),null)}catch(k){return be("Caught error parsing JWT payload as JSON",k),null}}function rt(b,m){return pi.apply(this,arguments)}function pi(){return(pi=(0,c.Z)(function*(b,m,_=!1){if(_)return m;try{return yield m}catch(E){throw E instanceof H.ZR&&Vi(E)&&b.auth.currentUser===b&&(yield b.auth.signOut()),E}})).apply(this,arguments)}function Vi({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class Pt{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var _;if(m){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const k=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(m=!1){var _=this;if(!this.isRunning)return;const E=this.getInterval(m);this.timerId=setTimeout((0,c.Z)(function*(){yield _.iteration()}),E)}iteration(){var m=this;return(0,c.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&m.schedule(!0))}m.schedule()})()}}class gi{constructor(m,_){this.createdAt=m,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=sr(this.lastLoginAt),this.creationTime=sr(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Bn(b){return pn.apply(this,arguments)}function pn(){return(pn=(0,c.Z)(function*(b){var m;const _=b.auth,E=yield b.getIdToken(),k=yield rt(b,Jt(_,{idToken:E}));he(null==k?void 0:k.users.length,_,"internal-error");const V=k.users[0];b._notifyReloadListener(V);const ue=(null===(m=V.providerUserInfo)||void 0===m?void 0:m.length)?De(V.providerUserInfo):[],Ne=J(b.providerData,ue),Wt=!!b.isAnonymous&&!(b.email&&V.passwordHash||(null==Ne?void 0:Ne.length)),Rn={uid:V.localId,displayName:V.displayName||null,photoURL:V.photoUrl||null,email:V.email||null,emailVerified:V.emailVerified||!1,phoneNumber:V.phoneNumber||null,tenantId:V.tenantId||null,providerData:Ne,metadata:new gi(V.createdAt,V.lastLoginAt),isAnonymous:Wt};Object.assign(b,Rn)})).apply(this,arguments)}function Y(){return(Y=(0,c.Z)(function*(b){const m=(0,H.m9)(b);yield Bn(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function J(b,m){return[...b.filter(E=>!m.some(k=>k.providerId===E.providerId)),...m]}function De(b){return b.map(m=>{var{providerId:_}=m,E=(0,de._T)(m,["providerId"]);return{providerId:_,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ge(){return(Ge=(0,c.Z)(function*(b,m){const _=yield Fi(b,{},(0,c.Z)(function*(){const E=(0,H.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:k,apiKey:V}=b.config,ue=fi(b,k,"/v1/token",`key=${V}`),Ne=yield b._getAdditionalHeaders();return Ne["Content-Type"]="application/x-www-form-urlencoded",It.fetch()(ue,{method:"POST",headers:Ne,body:E})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class Me{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){he(m.idToken,"internal-error"),he(void 0!==m.idToken,"internal-error"),he(void 0!==m.refreshToken,"internal-error");const _="expiresIn"in m&&void 0!==m.expiresIn?Number(m.expiresIn):function ft(b){const m=Bt(b);return he(m,"internal-error"),he(void 0!==m.exp,"internal-error"),he(void 0!==m.iat,"internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,_)}getToken(m,_=!1){var E=this;return(0,c.Z)(function*(){return he(!E.accessToken||E.refreshToken,m,"user-token-expired"),_||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(m,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,_){var E=this;return(0,c.Z)(function*(){const{accessToken:k,refreshToken:V,expiresIn:ue}=yield function ae(b,m){return Ge.apply(this,arguments)}(m,_);E.updateTokensAndExpiration(k,V,Number(ue))})()}updateTokensAndExpiration(m,_,E){this.refreshToken=_||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(m,_){const{refreshToken:E,accessToken:k,expirationTime:V}=_,ue=new Me;return E&&(he("string"==typeof E,"internal-error",{appName:m}),ue.refreshToken=E),k&&(he("string"==typeof k,"internal-error",{appName:m}),ue.accessToken=k),V&&(he("number"==typeof V,"internal-error",{appName:m}),ue.expirationTime=V),ue}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Me,this.toJSON())}_performRefresh(){return it("not implemented")}}function Ie(b,m){he("string"==typeof b||void 0===b,"internal-error",{appName:m})}class He{constructor(m){var{uid:_,auth:E,stsTokenManager:k}=m,V=(0,de._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Pt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=E,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=V.displayName||null,this.email=V.email||null,this.emailVerified=V.emailVerified||!1,this.phoneNumber=V.phoneNumber||null,this.photoURL=V.photoURL||null,this.isAnonymous=V.isAnonymous||!1,this.tenantId=V.tenantId||null,this.providerData=V.providerData?[...V.providerData]:[],this.metadata=new gi(V.createdAt||void 0,V.lastLoginAt||void 0)}getIdToken(m){var _=this;return(0,c.Z)(function*(){const E=yield rt(_,_.stsTokenManager.getToken(_.auth,m));return he(E,_.auth,"internal-error"),_.accessToken!==E&&(_.accessToken=E,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),E})()}getIdTokenResult(m){return function fn(b){return or.apply(this,arguments)}(this,m)}reload(){return function $(b){return Y.apply(this,arguments)}(this)}_assign(m){this!==m&&(he(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(_=>Object.assign({},_)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new He(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,_=!1){var E=this;return(0,c.Z)(function*(){let k=!1;m.idToken&&m.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(m),k=!0),_&&(yield Bn(E)),yield E.auth._persistUserIfCurrent(E),k&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var m=this;return(0,c.Z)(function*(){const _=yield m.getIdToken();return yield rt(m,function es(b,m){return wt.apply(this,arguments)}(m.auth,{idToken:_})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,_){var E,k,V,ue,Ne,at,Dt,Wt;const Rn=null!==(E=_.displayName)&&void 0!==E?E:void 0,Rs=null!==(k=_.email)&&void 0!==k?k:void 0,Ps=null!==(V=_.phoneNumber)&&void 0!==V?V:void 0,qh=null!==(ue=_.photoURL)&&void 0!==ue?ue:void 0,ag=null!==(Ne=_.tenantId)&&void 0!==Ne?Ne:void 0,dd=null!==(at=_._redirectEventId)&&void 0!==at?at:void 0,Gh=null!==(Dt=_.createdAt)&&void 0!==Dt?Dt:void 0,hd=null!==(Wt=_.lastLoginAt)&&void 0!==Wt?Wt:void 0,{uid:Wh,emailVerified:Zh,isAnonymous:Kh,providerData:Ns,stsTokenManager:Yh}=_;he(Wh&&Yh,m,"internal-error");const Jc=Me.fromJSON(this.name,Yh);he("string"==typeof Wh,m,"internal-error"),Ie(Rn,m.name),Ie(Rs,m.name),he("boolean"==typeof Zh,m,"internal-error"),he("boolean"==typeof Kh,m,"internal-error"),Ie(Ps,m.name),Ie(qh,m.name),Ie(ag,m.name),Ie(dd,m.name),Ie(Gh,m.name),Ie(hd,m.name);const Qh=new He({uid:Wh,auth:m,email:Rs,emailVerified:Zh,displayName:Rn,isAnonymous:Kh,photoURL:qh,phoneNumber:Ps,tenantId:ag,stsTokenManager:Jc,createdAt:Gh,lastLoginAt:hd});return Ns&&Array.isArray(Ns)&&(Qh.providerData=Ns.map(Hn=>Object.assign({},Hn))),dd&&(Qh._redirectEventId=dd),Qh}static _fromIdTokenResponse(m,_,E=!1){return(0,c.Z)(function*(){const k=new Me;k.updateFromServerResponse(_);const V=new He({uid:_.localId,auth:m,stsTokenManager:k,isAnonymous:E});return yield Bn(V),V})()}}const St=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(_,E){var k=this;return(0,c.Z)(function*(){k.storage[_]=E})()}_get(_){var E=this;return(0,c.Z)(function*(){const k=E.storage[_];return void 0===k?null:k})()}_remove(_){var E=this;return(0,c.Z)(function*(){delete E.storage[_]})()}_addListener(_,E){}_removeListener(_,E){}}return b.type="NONE",b})();function gt(b,m,_){return`firebase:${b}:${m}:${_}`}class rn{constructor(m,_,E){this.persistence=m,this.auth=_,this.userKey=E;const{config:k,name:V}=this.auth;this.fullUserKey=gt(this.userKey,k.apiKey,V),this.fullPersistenceKey=gt("persistence",k.apiKey,V),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,c.Z)(function*(){const _=yield m.persistence._get(m.fullUserKey);return _?He._fromJSON(m.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var _=this;return(0,c.Z)(function*(){if(_.persistence===m)return;const E=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=m,E?_.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,_,E="authUser"){return(0,c.Z)(function*(){if(!_.length)return new rn(z(St),m,E);const k=(yield Promise.all(_.map(function(){var Dt=(0,c.Z)(function*(Wt){if(yield Wt._isAvailable())return Wt});return function(Wt){return Dt.apply(this,arguments)}}()))).filter(Dt=>Dt);let V=k[0]||z(St);const ue=gt(E,m.config.apiKey,m.name);let Ne=null;for(const Dt of _)try{const Wt=yield Dt._get(ue);if(Wt){const Rn=He._fromJSON(m,Wt);Dt!==V&&(Ne=Rn),V=Dt;break}}catch(Wt){}const at=k.filter(Dt=>Dt._shouldAllowMigration);return V._shouldAllowMigration&&at.length?(V=at[0],Ne&&(yield V._set(ue,Ne.toJSON())),yield Promise.all(_.map(function(){var Dt=(0,c.Z)(function*(Wt){if(Wt!==V)try{yield Wt._remove(ue)}catch(Rn){}});return function(Wt){return Dt.apply(this,arguments)}}())),new rn(V,m,E)):new rn(V,m,E)})()}}function le(b){const m=b.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(We(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(ee(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(kt(m))return"Blackberry";if($t(m))return"Webos";if(Q(m))return"Safari";if((m.includes("chrome/")||Oe(m))&&!m.includes("edge/"))return"Chrome";if(ut(m))return"Android";{const E=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function ee(b=(0,H.z$)()){return/firefox\//i.test(b)}function Q(b=(0,H.z$)()){const m=b.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Oe(b=(0,H.z$)()){return/crios\//i.test(b)}function We(b=(0,H.z$)()){return/iemobile/i.test(b)}function ut(b=(0,H.z$)()){return/android/i.test(b)}function kt(b=(0,H.z$)()){return/blackberry/i.test(b)}function $t(b=(0,H.z$)()){return/webos/i.test(b)}function Ft(b=(0,H.z$)()){return/iphone|ipad|ipod/i.test(b)}function qn(b=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}function Pr(b=(0,H.z$)()){return Ft(b)||ut(b)||$t(b)||kt(b)||/windows phone/i.test(b)||We(b)}function pr(b,m=[]){let _;switch(b){case"Browser":_=le((0,H.z$)());break;case"Worker":_=`${le((0,H.z$)())}-${b}`;break;default:_=b}const E=m.length?m.join(","):"FirebaseCore-web";return`${_}/JsCore/${N.SDK_VERSION}/${E}`}class Ba{constructor(m,_){this.app=m,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ye(this),this.idTokenSubscription=new Ye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Be,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(m,_){var E=this;return _&&(this._popupRedirectResolver=z(_)),this._initializationPromise=this.queue((0,c.Z)(function*(){var k,V;if(!E._deleted&&(E.persistenceManager=yield rn.create(E,m),!E._deleted)){if(null===(k=E._popupRedirectResolver)||void 0===k?void 0:k._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(ue){}yield E.initializeCurrentUser(_),E.lastNotifiedUid=(null===(V=E.currentUser)||void 0===V?void 0:V.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,c.Z)(function*(){if(m._deleted)return;const _=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||_){if(m.currentUser&&_&&m.currentUser.uid===_.uid)return m._currentUser._assign(_),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(_)}})()}initializeCurrentUser(m){var _=this;return(0,c.Z)(function*(){var E;let k=yield _.assertedPersistence.getCurrentUser();if(m&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const V=null===(E=_.redirectUser)||void 0===E?void 0:E._redirectEventId,ue=null==k?void 0:k._redirectEventId,Ne=yield _.tryRedirectSignIn(m);(!V||V===ue)&&(null==Ne?void 0:Ne.user)&&(k=Ne.user)}return k?k._redirectEventId?(he(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===k._redirectEventId?_.directlySetCurrentUser(k):_.reloadAndSetCurrentUserOrClear(k)):_.reloadAndSetCurrentUserOrClear(k):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(m){var _=this;return(0,c.Z)(function*(){let E=null;try{E=yield _._popupRedirectResolver._completeRedirectFn(_,m,!0)}catch(k){yield _._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(m){var _=this;return(0,c.Z)(function*(){try{yield Bn(m)}catch(E){if("auth/network-request-failed"!==E.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Le(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var m=this;return(0,c.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var _=this;return(0,c.Z)(function*(){const E=m?(0,H.m9)(m):null;return E&&he(E.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(E&&E._clone(_))})()}_updateCurrentUser(m){var _=this;return(0,c.Z)(function*(){if(!_._deleted)return m&&he(_.tenantId===m.tenantId,_,"tenant-id-mismatch"),_.queue((0,c.Z)(function*(){yield _.directlySetCurrentUser(m),_.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,c.Z)(function*(){return(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null)})()}setPersistence(m){var _=this;return this.queue((0,c.Z)(function*(){yield _.assertedPersistence.setPersistence(z(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new H.LL("auth","Firebase",m())}onAuthStateChanged(m,_,E){return this.registerStateListener(this.authStateSubscription,m,_,E)}onIdTokenChanged(m,_,E){return this.registerStateListener(this.idTokenSubscription,m,_,E)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,_){var E=this;return(0,c.Z)(function*(){const k=yield E.getOrInitRedirectPersistenceManager(_);return null===m?k.removeCurrentUser():k.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var _=this;return(0,c.Z)(function*(){if(!_.redirectPersistenceManager){const E=m&&z(m)||_._popupRedirectResolver;he(E,_,"argument-error"),_.redirectPersistenceManager=yield rn.create(_,[z(E._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(m){var _=this;return(0,c.Z)(function*(){var E,k;return _._isInitialized&&(yield _.queue((0,c.Z)(function*(){}))),(null===(E=_._currentUser)||void 0===E?void 0:E._redirectEventId)===m?_._currentUser:(null===(k=_.redirectUser)||void 0===k?void 0:k._redirectEventId)===m?_.redirectUser:null})()}_persistUserIfCurrent(m){var _=this;return(0,c.Z)(function*(){if(m===_.currentUser)return _.queue((0,c.Z)(function*(){return _.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(_=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,_,E,k){if(this._deleted)return()=>{};const V="function"==typeof _?_:_.next.bind(_),ue=this._isInitialized?Promise.resolve():this._initializationPromise;return he(ue,this,"internal-error"),ue.then(()=>V(this.currentUser)),"function"==typeof _?m.addObserver(_,E,k):m.addObserver(_)}directlySetCurrentUser(m){var _=this;return(0,c.Z)(function*(){_.currentUser&&_.currentUser!==m&&(_._currentUser._stopProactiveRefresh(),m&&_.isProactiveRefreshEnabled&&m._startProactiveRefresh()),_.currentUser=m,m?yield _.assertedPersistence.setCurrentUser(m):yield _.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=pr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,c.Z)(function*(){const _={"X-Client-Version":m.clientVersion};return m.app.options.appId&&(_["X-Firebase-gmpid"]=m.app.options.appId),_})()}}function dn(b){return(0,H.m9)(b)}class Ye{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,H.ne)(_=>this.observer=_)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Vt(b,m,_){const E=dn(b);he(E._canInitEmulator,E,"emulator-config-failed"),he(/^https?:\/\//.test(m),E,"invalid-emulator-scheme");const k=!!(null==_?void 0:_.disableWarnings),V=gn(m),{host:ue,port:Ne}=function oi(b){const m=gn(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(m.length));if(!_)return{host:"",port:null};const E=_[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(E);if(k){const V=k[1];return{host:V,port:rs(E.substr(V.length+1))}}{const[V,ue]=E.split(":");return{host:V,port:rs(ue)}}}(m);E.config.emulator={url:`${V}//${ue}${null===Ne?"":`:${Ne}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:ue,port:Ne,protocol:V.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function Xn(){function b(){const m=document.createElement("p"),_=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}function gn(b){const m=b.indexOf(":");return m<0?"":b.substr(0,m+1)}function rs(b){if(!b)return null;const m=Number(b);return isNaN(m)?null:m}class Wr{constructor(m,_){this.providerId=m,this.signInMethod=_}toJSON(){return it("not implemented")}_getIdTokenResponse(m){return it("not implemented")}_linkToIdToken(m,_){return it("not implemented")}_getReauthenticationResolver(m){return it("not implemented")}}function vn(b,m){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,c.Z)(function*(b,m){return tn(b,"POST","/v1/accounts:resetPassword",Ut(b,m))})).apply(this,arguments)}function Gn(b,m){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,c.Z)(function*(b,m){return tn(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Pl(b,m){return is.apply(this,arguments)}function is(){return(is=(0,c.Z)(function*(b,m){return tn(b,"POST","/v1/accounts:update",Ut(b,m))})).apply(this,arguments)}function Js(){return(Js=(0,c.Z)(function*(b,m){return xn(b,"POST","/v1/accounts:signInWithPassword",Ut(b,m))})).apply(this,arguments)}function Vn(b,m){return Io.apply(this,arguments)}function Io(){return(Io=(0,c.Z)(function*(b,m){return tn(b,"POST","/v1/accounts:sendOobCode",Ut(b,m))})).apply(this,arguments)}function ja(b,m){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,c.Z)(function*(b,m){return Vn(b,m)})).apply(this,arguments)}function bn(b,m){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,c.Z)(function*(b,m){return Vn(b,m)})).apply(this,arguments)}function Ha(b,m){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,c.Z)(function*(b,m){return Vn(b,m)})).apply(this,arguments)}function mi(b,m){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,c.Z)(function*(b,m){return Vn(b,m)})).apply(this,arguments)}function ss(){return(ss=(0,c.Z)(function*(b,m){return xn(b,"POST","/v1/accounts:signInWithEmailLink",Ut(b,m))})).apply(this,arguments)}function $a(){return($a=(0,c.Z)(function*(b,m){return xn(b,"POST","/v1/accounts:signInWithEmailLink",Ut(b,m))})).apply(this,arguments)}class Vl extends Wr{constructor(m,_,E,k=null){super("password",E),this._email=m,this._password=_,this._tenantId=k}static _fromEmailAndPassword(m,_){return new Vl(m,_,"password")}static _fromEmailAndCode(m,_,E=null){return new Vl(m,_,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(m){var _=this;return(0,c.Z)(function*(){switch(_.signInMethod){case"password":return function Nl(b,m){return Js.apply(this,arguments)}(m,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Fu(b,m){return ss.apply(this,arguments)}(m,{email:_._email,oobCode:_._password});default:Te(m,"internal-error")}})()}_linkToIdToken(m,_){var E=this;return(0,c.Z)(function*(){switch(E.signInMethod){case"password":return Gn(m,{idToken:_,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function os(b,m){return $a.apply(this,arguments)}(m,{idToken:_,email:E._email,oobCode:E._password});default:Te(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function eo(b,m){return ai.apply(this,arguments)}function ai(){return(ai=(0,c.Z)(function*(b,m){return xn(b,"POST","/v1/accounts:signInWithIdp",Ut(b,m))})).apply(this,arguments)}class Cs extends Wr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const _=new Cs(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(_.idToken=m.idToken),m.accessToken&&(_.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(_.nonce=m.nonce),m.pendingToken&&(_.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(_.accessToken=m.oauthToken,_.secret=m.oauthTokenSecret):Te("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:k}=_,V=(0,de._T)(_,["providerId","signInMethod"]);if(!E||!k)return null;const ue=new Cs(E,k);return ue.idToken=V.idToken||void 0,ue.accessToken=V.accessToken||void 0,ue.secret=V.secret,ue.nonce=V.nonce,ue.pendingToken=V.pendingToken||null,ue}_getIdTokenResponse(m){return eo(m,this.buildRequest())}_linkToIdToken(m,_){const E=this.buildRequest();return E.idToken=_,eo(m,E)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,eo(m,_)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),m.postBody=(0,H.xO)(_)}return m}}function $p(b,m){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,c.Z)(function*(b,m){return tn(b,"POST","/v1/accounts:sendVerificationCode",Ut(b,m))})).apply(this,arguments)}function Vu(){return(Vu=(0,c.Z)(function*(b,m){return xn(b,"POST","/v1/accounts:signInWithPhoneNumber",Ut(b,m))})).apply(this,arguments)}function to(){return(to=(0,c.Z)(function*(b,m){const _=yield xn(b,"POST","/v1/accounts:signInWithPhoneNumber",Ut(b,m));if(_.temporaryProof)throw zn(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const zp={USER_NOT_FOUND:"user-not-found"};function Uu(){return(Uu=(0,c.Z)(function*(b,m){return xn(b,"POST","/v1/accounts:signInWithPhoneNumber",Ut(b,Object.assign(Object.assign({},m),{operation:"REAUTH"})),zp)})).apply(this,arguments)}class la extends Wr{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,_){return new la({verificationId:m,verificationCode:_})}static _fromTokenResponse(m,_){return new la({phoneNumber:m,temporaryProof:_})}_getIdTokenResponse(m){return function wh(b,m){return Vu.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,_){return function Ac(b,m){return to.apply(this,arguments)}(m,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function qp(b,m){return Uu.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:_,verificationId:E,verificationCode:k}=this.params;return m&&_?{temporaryProof:m,phoneNumber:_}:{sessionInfo:E,code:k}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:_,verificationCode:E,phoneNumber:k,temporaryProof:V}=m;return E||_||k||V?new la({verificationId:_,verificationCode:E,phoneNumber:k,temporaryProof:V}):null}}class za{constructor(m){var _,E,k,V,ue,Ne;const at=(0,H.zd)((0,H.pd)(m)),Dt=null!==(_=at.apiKey)&&void 0!==_?_:null,Wt=null!==(E=at.oobCode)&&void 0!==E?E:null,Rn=function Gp(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=at.mode)&&void 0!==k?k:null);he(Dt&&Wt&&Rn,"argument-error"),this.apiKey=Dt,this.operation=Rn,this.code=Wt,this.continueUrl=null!==(V=at.continueUrl)&&void 0!==V?V:null,this.languageCode=null!==(ue=at.languageCode)&&void 0!==ue?ue:null,this.tenantId=null!==(Ne=at.tenantId)&&void 0!==Ne?Ne:null}static parseLink(m){const _=function Wp(b){const m=(0,H.zd)((0,H.pd)(b)).link,_=m?(0,H.zd)((0,H.pd)(m)).deep_link_id:null,E=(0,H.zd)((0,H.pd)(b)).deep_link_id;return(E?(0,H.zd)((0,H.pd)(E)).link:null)||E||_||m||b}(m);try{return new za(_)}catch(E){return null}}}let Bu=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,E){return Vl._fromEmailAndPassword(_,E)}static credentialWithLink(_,E){const k=za.parseLink(E);return he(k,"argument-error"),Vl._fromEmailAndCode(_,k.code,k.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Ui{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class qa extends Ui{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Bi extends qa{static credentialFromJSON(m){const _="string"==typeof m?JSON.parse(m):m;return he("providerId"in _&&"signInMethod"in _,"argument-error"),Cs._fromParams(_)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return he(m.idToken||m.accessToken,"argument-error"),Cs._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Bi.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Bi.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:_,oauthAccessToken:E,oauthTokenSecret:k,pendingToken:V,nonce:ue,providerId:Ne}=m;if(!E&&!k&&!_&&!V||!Ne)return null;try{return new Bi(Ne)._credential({idToken:_,accessToken:E,nonce:ue,pendingToken:V})}catch(at){return null}}}let Ga=(()=>{class b extends qa{constructor(){super("facebook.com")}static credential(_){return Cs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(E){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Wa=(()=>{class b extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(_,E){return Cs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:E})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:E,oauthAccessToken:k}=_;if(!E&&!k)return null;try{return b.credential(E,k)}catch(V){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),Za=(()=>{class b extends qa{constructor(){super("github.com")}static credential(_){return Cs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(E){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Ka extends Wr{constructor(m,_){super(m,m),this.pendingToken=_}_getIdTokenResponse(m){return eo(m,this.buildRequest())}_linkToIdToken(m,_){const E=this.buildRequest();return E.idToken=_,eo(m,E)}_getReauthenticationResolver(m){const _=this.buildRequest();return _.autoCreate=!1,eo(m,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const _="string"==typeof m?JSON.parse(m):m,{providerId:E,signInMethod:k,pendingToken:V}=_;return E&&k&&V&&E===k?new Ka(E,V):null}static _create(m,_){return new Ka(m,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qa extends Ui{constructor(m){he(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Qa.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Qa.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const _=Ka.fromJSON(m);return he(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:_,providerId:E}=m;if(!_||!E)return null;try{return Ka._create(E,_)}catch(k){return null}}}let ca=(()=>{class b extends qa{constructor(){super("twitter.com")}static credential(_,E){return Cs._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:E})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:E,oauthTokenSecret:k}=_;if(!E||!k)return null;try{return b.credential(E,k)}catch(V){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function _i(b,m){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,c.Z)(function*(b,m){return xn(b,"POST","/v1/accounts:signUp",Ut(b,m))})).apply(this,arguments)}class Sn{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,_,E,k=!1){return(0,c.Z)(function*(){const V=yield He._fromIdTokenResponse(m,E,k),ue=Xa(E);return new Sn({user:V,providerId:ue,_tokenResponse:E,operationType:_})})()}static _forOperation(m,_,E){return(0,c.Z)(function*(){yield m._updateTokensIfNecessary(E,!0);const k=Xa(E);return new Sn({user:m,providerId:k,_tokenResponse:E,operationType:_})})()}}function Xa(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function ju(b){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,c.Z)(function*(b){var m;const _=dn(b);if(yield _._initializationPromise,null===(m=_.currentUser)||void 0===m?void 0:m.isAnonymous)return new Sn({user:_.currentUser,providerId:null,operationType:"signIn"});const E=yield _i(_,{returnSecureToken:!0}),k=yield Sn._fromIdTokenResponse(_,"signIn",E,!0);return yield _._updateCurrentUser(k.user),k})).apply(this,arguments)}class Ja extends H.ZR{constructor(m,_,E,k){var V;super(_.code,_.message),this.operationType=E,this.user=k,Object.setPrototypeOf(this,Ja.prototype),this.customData={appName:m.name,tenantId:null!==(V=m.tenantId)&&void 0!==V?V:void 0,_serverResponse:_.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(m,_,E,k){return new Ja(m,_,E,k)}}function jl(b,m,_,E){return("reauthenticate"===m?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(V=>{throw"auth/multi-factor-auth-required"===V.code?Ja._fromErrorAndOperation(b,V,m,E):V})}function Ch(b){return new Set(b.map(({providerId:m})=>m).filter(m=>!!m))}function Ln(b,m){return as.apply(this,arguments)}function as(){return(as=(0,c.Z)(function*(b,m){const _=(0,H.m9)(b);yield el(!0,_,m);const{providerUserInfo:E}=yield qr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[m]}),k=Ch(E||[]);return _.providerData=_.providerData.filter(V=>k.has(V.providerId)),k.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Hl(b,m){return kn.apply(this,arguments)}function kn(){return(kn=(0,c.Z)(function*(b,m,_=!1){const E=yield rt(b,m._linkToIdToken(b.auth,yield b.getIdToken()),_);return Sn._forOperation(b,"link",E)})).apply(this,arguments)}function el(b,m,_){return ua.apply(this,arguments)}function ua(){return(ua=(0,c.Z)(function*(b,m,_){yield Bn(m);const k=!1===b?"provider-already-linked":"no-such-provider";he(Ch(m.providerData).has(_)===b,m.auth,k)})).apply(this,arguments)}function ji(b,m){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,c.Z)(function*(b,m,_=!1){const{auth:E}=b,k="reauthenticate";try{const V=yield rt(b,jl(E,k,m,b),_);he(V.idToken,E,"internal-error");const ue=Bt(V.idToken);he(ue,E,"internal-error");const{sub:Ne}=ue;return he(b.uid===Ne,E,"user-mismatch"),Sn._forOperation(b,k,V)}catch(V){throw"auth/user-not-found"===(null==V?void 0:V.code)&&Te(E,"user-mismatch"),V}})).apply(this,arguments)}function tl(b,m){return To.apply(this,arguments)}function To(){return(To=(0,c.Z)(function*(b,m,_=!1){const E="signIn",k=yield jl(b,E,m),V=yield Sn._fromIdTokenResponse(b,E,k);return _||(yield b._updateCurrentUser(V.user)),V})).apply(this,arguments)}function yi(b,m){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,c.Z)(function*(b,m){return tl(dn(b),m)})).apply(this,arguments)}function Jn(b,m){return Do.apply(this,arguments)}function Do(){return(Do=(0,c.Z)(function*(b,m){const _=(0,H.m9)(b);return yield el(!1,_,m.providerId),Hl(_,m)})).apply(this,arguments)}function $l(b,m){return li.apply(this,arguments)}function li(){return(li=(0,c.Z)(function*(b,m){return ji((0,H.m9)(b),m)})).apply(this,arguments)}function So(b,m){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,c.Z)(function*(b,m){return xn(b,"POST","/v1/accounts:signInWithCustomToken",Ut(b,m))})).apply(this,arguments)}function Ct(b,m){return no.apply(this,arguments)}function no(){return(no=(0,c.Z)(function*(b,m){const _=dn(b),E=yield So(_,{token:m,returnSecureToken:!0}),k=yield Sn._fromIdTokenResponse(_,"signIn",E);return yield _._updateCurrentUser(k.user),k})).apply(this,arguments)}class Mo{constructor(m,_){this.factorId=m,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(m,_){return"phoneInfo"in _?xo._fromServerResponse(m,_):Te(m,"internal-error")}}class xo extends Mo{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,_){return new xo(_)}}function ko(b,m,_){var E;he((null===(E=_.url)||void 0===E?void 0:E.length)>0,b,"invalid-continue-uri"),he(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),m.continueUrl=_.url,m.dynamicLinkDomain=_.dynamicLinkDomain,m.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(he(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),m.iOSBundleId=_.iOS.bundleId),_.android&&(he(_.android.packageName.length>0,b,"missing-android-pkg-name"),m.androidInstallApp=_.android.installApp,m.androidMinimumVersionCode=_.android.minimumVersion,m.androidPackageName=_.android.packageName)}function xc(b,m,_){return zl.apply(this,arguments)}function zl(){return(zl=(0,c.Z)(function*(b,m,_){const E=(0,H.m9)(b),k={requestType:"PASSWORD_RESET",email:m};_&&ko(E,k,_),yield bn(E,k)})).apply(this,arguments)}function kc(b,m,_){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,c.Z)(function*(b,m,_){yield vn((0,H.m9)(b),{oobCode:m,newPassword:_})})).apply(this,arguments)}function zt(b,m){return ql.apply(this,arguments)}function ql(){return(ql=(0,c.Z)(function*(b,m){yield Pl((0,H.m9)(b),{oobCode:m})})).apply(this,arguments)}function An(b,m){return da.apply(this,arguments)}function da(){return(da=(0,c.Z)(function*(b,m){const _=(0,H.m9)(b),E=yield vn(_,{oobCode:m}),k=E.requestType;switch(he(k,_,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":he(E.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":he(E.mfaInfo,_,"internal-error");default:he(E.email,_,"internal-error")}let V=null;return E.mfaInfo&&(V=Mo._fromServerResponse(dn(_),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:V},operation:k}})).apply(this,arguments)}function ha(b,m){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,c.Z)(function*(b,m){const{data:_}=yield An((0,H.m9)(b),m);return _.email})).apply(this,arguments)}function Oo(b,m,_){return nl.apply(this,arguments)}function nl(){return(nl=(0,c.Z)(function*(b,m,_){const E=dn(b),k=yield _i(E,{returnSecureToken:!0,email:m,password:_}),V=yield Sn._fromIdTokenResponse(E,"signIn",k);return yield E._updateCurrentUser(V.user),V})).apply(this,arguments)}function Hu(b,m,_){return yi((0,H.m9)(b),Bu.credential(m,_))}function Ih(b,m,_){return fa.apply(this,arguments)}function fa(){return(fa=(0,c.Z)(function*(b,m,_){const E=(0,H.m9)(b),k={requestType:"EMAIL_SIGNIN",email:m};he(_.handleCodeInApp,E,"argument-error"),_&&ko(E,k,_),yield Ha(E,k)})).apply(this,arguments)}function Gl(b,m){const _=za.parseLink(m);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function Ir(b,m,_){return vi.apply(this,arguments)}function vi(){return(vi=(0,c.Z)(function*(b,m,_){const E=(0,H.m9)(b),k=Bu.credentialWithLink(m,_||K());return he(k._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),yi(E,k)})).apply(this,arguments)}function $u(b,m){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,c.Z)(function*(b,m){return tn(b,"POST","/v1/accounts:createAuthUri",Ut(b,m))})).apply(this,arguments)}function Is(b,m){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,c.Z)(function*(b,m){const E={identifier:m,continueUri:$e()?K():"http://localhost"},{signinMethods:k}=yield $u((0,H.m9)(b),E);return k||[]})).apply(this,arguments)}function Zl(b,m){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,c.Z)(function*(b,m){const _=(0,H.m9)(b),k={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};m&&ko(_.auth,k,m);const{email:V}=yield ja(_.auth,k);V!==b.email&&(yield b.reload())})).apply(this,arguments)}function Rc(b,m,_){return rl.apply(this,arguments)}function rl(){return(rl=(0,c.Z)(function*(b,m,_){const E=(0,H.m9)(b),V={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:m};_&&ko(E.auth,V,_);const{email:ue}=yield mi(E.auth,V);ue!==b.email&&(yield b.reload())})).apply(this,arguments)}function il(b,m){return sl.apply(this,arguments)}function sl(){return(sl=(0,c.Z)(function*(b,m){return tn(b,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ol(b,m){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,c.Z)(function*(b,{displayName:m,photoURL:_}){if(void 0===m&&void 0===_)return;const E=(0,H.m9)(b),V={idToken:yield E.getIdToken(),displayName:m,photoUrl:_,returnSecureToken:!0},ue=yield rt(E,il(E.auth,V));E.displayName=ue.displayName||null,E.photoURL=ue.photoUrl||null;const Ne=E.providerData.find(({providerId:at})=>"password"===at);Ne&&(Ne.displayName=E.displayName,Ne.photoURL=E.photoURL),yield E._updateTokensIfNecessary(ue)})).apply(this,arguments)}function Pc(b,m){return zu((0,H.m9)(b),m,null)}function Yl(b,m){return zu((0,H.m9)(b),null,m)}function zu(b,m,_){return al.apply(this,arguments)}function al(){return(al=(0,c.Z)(function*(b,m,_){const{auth:E}=b,V={idToken:yield b.getIdToken(),returnSecureToken:!0};m&&(V.email=m),_&&(V.password=_);const ue=yield rt(b,Gn(E,V));yield b._updateTokensIfNecessary(ue,!0)})).apply(this,arguments)}class ro{constructor(m,_,E={}){this.isNewUser=m,this.providerId=_,this.profile=E}}class ll extends ro{constructor(m,_,E,k){super(m,_,E),this.username=k}}class Zp extends ro{constructor(m,_){super(m,"facebook.com",_)}}class Kp extends ll{constructor(m,_){super(m,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class gr extends ro{constructor(m,_){super(m,"google.com",_)}}class mr extends ll{constructor(m,_,E){super(m,"twitter.com",_,E)}}function Un(b){const{user:m,_tokenResponse:_}=b;return m.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Nc(b){var m,_;if(!b)return null;const{providerId:E}=b,k=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},V=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!E&&(null==b?void 0:b.idToken)){const ue=null===(_=null===(m=Bt(b.idToken))||void 0===m?void 0:m.firebase)||void 0===_?void 0:_.sign_in_provider;if(ue)return new ro(V,"anonymous"!==ue&&"custom"!==ue?ue:null)}if(!E)return null;switch(E){case"facebook.com":return new Zp(V,k);case"github.com":return new Kp(V,k);case"google.com":return new gr(V,k);case"twitter.com":return new mr(V,k,b.screenName||null);case"custom":case"anonymous":return new ro(V,null);default:return new ro(V,E,k)}}(_)}function Th(b,m,_,E){return(0,H.m9)(b).onAuthStateChanged(m,_,E)}class ls{constructor(m,_){this.type=m,this.credential=_}static _fromIdtoken(m){return new ls("enroll",m)}static _fromMfaPendingCredential(m){return new ls("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var _,E;if(null==m?void 0:m.multiFactorSession){if(null===(_=m.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return ls._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null===(E=m.multiFactorSession)||void 0===E?void 0:E.idToken)return ls._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Ql{constructor(m,_,E){this.session=m,this.hints=_,this.signInResolver=E}static _fromError(m,_){const E=dn(m),k=_.customData._serverResponse,V=(k.mfaInfo||[]).map(Ne=>Mo._fromServerResponse(E,Ne));he(k.mfaPendingCredential,E,"internal-error");const ue=ls._fromMfaPendingCredential(k.mfaPendingCredential);return new Ql(ue,V,function(){var Ne=(0,c.Z)(function*(at){const Dt=yield at._process(E,ue);delete k.mfaInfo,delete k.mfaPendingCredential;const Wt=Object.assign(Object.assign({},k),{idToken:Dt.idToken,refreshToken:Dt.refreshToken});switch(_.operationType){case"signIn":const Rn=yield Sn._fromIdTokenResponse(E,_.operationType,Wt);return yield E._updateCurrentUser(Rn.user),Rn;case"reauthenticate":return he(_.user,E,"internal-error"),Sn._forOperation(_.user,_.operationType,Wt);default:Te(E,"internal-error")}});return function(at){return Ne.apply(this,arguments)}}())}resolveSignIn(m){var _=this;return(0,c.Z)(function*(){return _.signInResolver(m)})()}}function Sh(b,m){var _;const E=(0,H.m9)(b),k=m;return he(m.customData.operationType,E,"argument-error"),he(null===(_=k.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,E,"argument-error"),Ql._fromError(E,k)}function Yp(b,m){return tn(b,"POST","/v2/accounts/mfaEnrollment:start",Ut(b,m))}class Lc{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(E=>Mo._fromServerResponse(m.auth,E)))})}static _fromUser(m){return new Lc(m)}getSession(){var m=this;return(0,c.Z)(function*(){return ls._fromIdtoken(yield m.user.getIdToken())})()}enroll(m,_){var E=this;return(0,c.Z)(function*(){const k=m,V=yield E.getSession(),ue=yield rt(E.user,k._process(E.user.auth,V,_));return yield E.user._updateTokensIfNecessary(ue),E.user.reload()})()}unenroll(m){var _=this;return(0,c.Z)(function*(){const E="string"==typeof m?m:m.uid,k=yield _.user.getIdToken(),V=yield rt(_.user,function Wn(b,m){return tn(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Ut(b,m))}(_.user.auth,{idToken:k,mfaEnrollmentId:E}));_.enrolledFactors=_.enrolledFactors.filter(({uid:ue})=>ue!==E),yield _.user._updateTokensIfNecessary(V);try{yield _.user.reload()}catch(ue){if("auth/user-token-expired"!==ue.code)throw ue}})()}}const Wu=new WeakMap;function Xl(b){const m=(0,H.m9)(b);return Wu.has(m)||Wu.set(m,Lc._fromUser(m)),Wu.get(m)}const cl="__sak";class Vc{constructor(m,_){this.storageRetriever=m,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(cl,"1"),this.storage.removeItem(cl),Promise.resolve(!0)):Promise.resolve(!1)}catch(m){return Promise.resolve(!1)}}_set(m,_){return this.storage.setItem(m,JSON.stringify(_)),Promise.resolve()}_get(m){const _=this.storage.getItem(m);return Promise.resolve(_?JSON.parse(_):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const bi=(()=>{class b extends Vc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,E)=>this.onStorageEvent(_,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Uc(){const b=(0,H.z$)();return Q(b)||Ft(b)}()&&function ns(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=Pr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const E of Object.keys(this.listeners)){const k=this.storage.getItem(E),V=this.localCache[E];k!==V&&_(E,V,k)}}onStorageEvent(_,E=!1){if(!_.key)return void this.forAllChangedKeys((Ne,at,Dt)=>{this.notifyListeners(Ne,Dt)});const k=_.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ne=this.storage.getItem(k);if(_.newValue!==Ne)null!==_.newValue?this.storage.setItem(k,_.newValue):this.storage.removeItem(k);else if(this.localCache[k]===_.newValue&&!E)return}const V=()=>{const Ne=this.storage.getItem(k);!E&&this.localCache[k]===Ne||this.notifyListeners(k,Ne)},ue=this.storage.getItem(k);!function Lt(){return(0,H.w1)()&&10===document.documentMode}()||ue===_.newValue||_.newValue===_.oldValue?V():setTimeout(V,10)}notifyListeners(_,E){this.localCache[_]=E;const k=this.listeners[_];if(k)for(const V of Array.from(k))V(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,E,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:E,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,E){var k=()=>super._set,V=this;return(0,c.Z)(function*(){yield k().call(V,_,E),V.localCache[_]=JSON.stringify(E)})()}_get(_){var E=()=>super._get,k=this;return(0,c.Z)(function*(){const V=yield E().call(k,_);return k.localCache[_]=JSON.stringify(V),V})()}_remove(_){var E=()=>super._remove,k=this;return(0,c.Z)(function*(){yield E().call(k,_),delete k.localCache[_]})()}}return b.type="LOCAL",b})(),ar=(()=>{class b extends Vc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,E){}_removeListener(_,E){}}return b.type="SESSION",b})();let jn=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const E=this.receivers.find(V=>V.isListeningto(_));if(E)return E;const k=new b(_);return this.receivers.push(k),k}isListeningto(_){return this.eventTarget===_}handleEvent(_){var E=this;return(0,c.Z)(function*(){const k=_,{eventId:V,eventType:ue,data:Ne}=k.data,at=E.handlersMap[ue];if(!(null==at?void 0:at.size))return;k.ports[0].postMessage({status:"ack",eventId:V,eventType:ue});const Dt=Array.from(at).map(function(){var Rn=(0,c.Z)(function*(Rs){return Rs(k.origin,Ne)});return function(Rs){return Rn.apply(this,arguments)}}()),Wt=yield function Bc(b){return Promise.all(b.map(function(){var m=(0,c.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(E){return{fulfilled:!1,reason:E}}});return function(_){return m.apply(this,arguments)}}()))}(Dt);k.ports[0].postMessage({status:"done",eventId:V,eventType:ue,response:Wt})})()}_subscribe(_,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(E)}_unsubscribe(_,E){this.handlersMap[_]&&E&&this.handlersMap[_].delete(E),(!E||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function lr(b="",m=10){let _="";for(let E=0;E<m;E++)_+=Math.floor(10*Math.random());return b+_}class Mh{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,_,E=50){var k=this;return(0,c.Z)(function*(){const V="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!V)throw new Error("connection_unavailable");let ue,Ne;return new Promise((at,Dt)=>{const Wt=lr("",20);V.port1.start();const Rn=setTimeout(()=>{Dt(new Error("unsupported_event"))},E);Ne={messageChannel:V,onMessage(Rs){const Ps=Rs;if(Ps.data.eventId===Wt)switch(Ps.data.status){case"ack":clearTimeout(Rn),ue=setTimeout(()=>{Dt(new Error("timeout"))},3e3);break;case"done":clearTimeout(ue),at(Ps.data.response);break;default:clearTimeout(Rn),clearTimeout(ue),Dt(new Error("invalid_response"))}}},k.handlers.add(Ne),V.port1.addEventListener("message",Ne.onMessage),k.target.postMessage({eventType:m,eventId:Wt,data:_},[V.port2])}).finally(()=>{Ne&&k.removeMessageHandler(Ne)})})()}}function wn(){return window}function Ro(){return void 0!==wn().WorkerGlobalScope&&"function"==typeof wn().importScripts}function Po(){return(Po=(0,c.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Qu="firebaseLocalStorageDb",Ss="firebaseLocalStorage",cs="fbase_key";class us{constructor(m){this.request=m}toPromise(){return new Promise((m,_)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function pa(b,m){return b.transaction([Ss],m?"readwrite":"readonly").objectStore(Ss)}function ec(){const b=indexedDB.open(Qu,1);return new Promise((m,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const E=b.result;try{E.createObjectStore(Ss,{keyPath:cs})}catch(k){_(k)}}),b.addEventListener("success",(0,c.Z)(function*(){const E=b.result;E.objectStoreNames.contains(Ss)?m(E):(E.close(),yield function dl(){const b=indexedDB.deleteDatabase(Qu);return new us(b).toPromise()}(),m(yield ec()))}))})}function $i(b,m,_){return tc.apply(this,arguments)}function tc(){return(tc=(0,c.Z)(function*(b,m,_){const E=pa(b,!0).put({[cs]:m,value:_});return new us(E).toPromise()})).apply(this,arguments)}function so(){return(so=(0,c.Z)(function*(b,m){const _=pa(b,!1).get(m),E=yield new us(_).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function mn(b,m){const _=pa(b,!0).delete(m);return new us(_).toPromise()}const Ju=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,c.Z)(function*(){return _.db||(_.db=yield ec()),_.db})()}_withRetries(_){var E=this;return(0,c.Z)(function*(){let k=0;for(;;)try{const V=yield E._openDb();return yield _(V)}catch(V){if(k++>3)throw V;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,c.Z)(function*(){return Ro()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,c.Z)(function*(){_.receiver=jn._getInstance(function No(){return Ro()?self:null}()),_.receiver._subscribe("keyChanged",function(){var E=(0,c.Z)(function*(k,V){return{keyProcessed:(yield _._poll()).includes(V.key)}});return function(k,V){return E.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var E=(0,c.Z)(function*(k,V){return["keyChanged"]});return function(k,V){return E.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,c.Z)(function*(){var E,k;if(_.activeServiceWorker=yield function ul(){return Po.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new Mh(_.activeServiceWorker);const V=yield _.sender._send("ping",{},800);!V||(null===(E=V[0])||void 0===E?void 0:E.fulfilled)&&(null===(k=V[0])||void 0===k?void 0:k.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var E=this;return(0,c.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Jl(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:_},E.serviceWorkerReceiverAvailable?800:50)}catch(k){}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const _=yield ec();return yield $i(_,cl,"1"),yield mn(_,cl),!0}catch(_){}return!1})()}_withPendingWrite(_){var E=this;return(0,c.Z)(function*(){E.pendingWrites++;try{yield _()}finally{E.pendingWrites--}})()}_set(_,E){var k=this;return(0,c.Z)(function*(){return k._withPendingWrite((0,c.Z)(function*(){return yield k._withRetries(V=>$i(V,_,E)),k.localCache[_]=E,k.notifyServiceWorker(_)}))})()}_get(_){var E=this;return(0,c.Z)(function*(){const k=yield E._withRetries(V=>function As(b,m){return so.apply(this,arguments)}(V,_));return E.localCache[_]=k,k})()}_remove(_){var E=this;return(0,c.Z)(function*(){return E._withPendingWrite((0,c.Z)(function*(){return yield E._withRetries(k=>mn(k,_)),delete E.localCache[_],E.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,c.Z)(function*(){const E=yield _._withRetries(ue=>{const Ne=pa(ue,!1).getAll();return new us(Ne).toPromise()});if(!E)return[];if(0!==_.pendingWrites)return[];const k=[],V=new Set;for(const{fbase_key:ue,value:Ne}of E)V.add(ue),JSON.stringify(_.localCache[ue])!==JSON.stringify(Ne)&&(_.notifyListeners(ue,Ne),k.push(ue));for(const ue of Object.keys(_.localCache))_.localCache[ue]&&!V.has(ue)&&(_.notifyListeners(ue,null),k.push(ue));return k})()}notifyListeners(_,E){this.localCache[_]=E;const k=this.listeners[_];if(k)for(const V of Array.from(k))V(E)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(E)}_removeListener(_,E){this.listeners[_]&&(this.listeners[_].delete(E),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function ed(b,m){return tn(b,"POST","/v2/accounts/mfaSignIn:start",Ut(b,m))}function Tr(){return(Tr=(0,c.Z)(function*(b){return(yield tn(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function nn(b){return new Promise((m,_)=>{const E=document.createElement("script");E.setAttribute("src",b),E.onload=m,E.onerror=k=>{const V=ve("internal-error");V.customData=k,_(V)},E.type="text/javascript",E.charset="UTF-8",function xs(){var b,m;return null!==(m=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==m?m:document}().appendChild(E)})}function ot(b){return`__${b}${Math.floor(1e6*Math.random())}`}const ds=1e12;class Lo{constructor(m){this.auth=m,this.counter=ds,this._widgets=new Map}render(m,_){const E=this.counter;return this._widgets.set(E,new jc(m,this.auth.name,_||{})),this.counter++,E}reset(m){var _;const E=m||ds;null===(_=this._widgets.get(E))||void 0===_||_.delete(),this._widgets.delete(E)}getResponse(m){var _;return(null===(_=this._widgets.get(m||ds))||void 0===_?void 0:_.getResponse())||""}execute(m){var _=this;return(0,c.Z)(function*(){var E;return null===(E=_._widgets.get(m||ds))||void 0===E||E.execute(),""})()}}class jc{constructor(m,_,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof m?document.getElementById(m):m;he(k,"argument-error",{appName:_}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function xh(b){const m=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<b;E++)m.push(_.charAt(Math.floor(Math.random()*_.length)));return m.join("")}(50);const{callback:m,"expired-callback":_}=this.params;if(m)try{m(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const sn=ot("rcb"),hs=new et(3e4,6e4);class Qp{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!wn().grecaptcha}load(m,_=""){return he(function o_(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),m,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(wn().grecaptcha):new Promise((E,k)=>{const V=wn().setTimeout(()=>{k(ve(m,"network-request-failed"))},hs.get());wn()[sn]=()=>{wn().clearTimeout(V),delete wn()[sn];const Ne=wn().grecaptcha;if(!Ne)return void k(ve(m,"internal-error"));const at=Ne.render;Ne.render=(Dt,Wt)=>{const Rn=at(Dt,Wt);return this.counter++,Rn},this.hostLanguage=_,E(Ne)},nn(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:sn,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(V),k(ve(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){return!!wn().grecaptcha&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class a_{load(m){return(0,c.Z)(function*(){return new Lo(m)})()}clearedOneInstance(){}}const Xp="recaptcha",nc={theme:"light",type:"image"};class ci{constructor(m,_=Object.assign({},nc),E){this.parameters=_,this.type=Xp,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dn(E),this.isInvisible="invisible"===this.parameters.size,he("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof m?document.getElementById(m):m;he(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new a_:new Qp,this.validateStartingState()}verify(){var m=this;return(0,c.Z)(function*(){m.assertNotDestroyed();const _=yield m.render(),E=m.getAssertedRecaptcha();return E.getResponse(_)||new Promise(V=>{const ue=Ne=>{!Ne||(m.tokenChangeListeners.delete(ue),V(Ne))};m.tokenChangeListeners.add(ue),m.isInvisible&&E.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){he(!this.parameters.sitekey,this.auth,"argument-error"),he(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),he("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return _=>{if(this.tokenChangeListeners.forEach(E=>E(_)),"function"==typeof m)m(_);else if("string"==typeof m){const E=wn()[m];"function"==typeof E&&E(_)}}}assertNotDestroyed(){he(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,c.Z)(function*(){if(yield m.init(),!m.widgetId){let _=m.container;if(!m.isInvisible){const E=document.createElement("div");_.appendChild(E),_=E}m.widgetId=m.getAssertedRecaptcha().render(_,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,c.Z)(function*(){he($e()&&!Ro(),m.auth,"internal-error"),yield function id(){let b=null;return new Promise(m=>{"complete"!==document.readyState?(b=()=>m(),window.addEventListener("load",b)):m()}).catch(m=>{throw b&&window.removeEventListener("load",b),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const _=yield function td(b){return Tr.apply(this,arguments)}(m.auth);he(_,m.auth,"internal-error"),m.parameters.sitekey=_})()}getAssertedRecaptcha(){return he(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qt{constructor(m,_){this.verificationId=m,this.onConfirmation=_}confirm(m){const _=la._fromVerification(this.verificationId,m);return this.onConfirmation(_)}}function fs(b,m,_){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,c.Z)(function*(b,m,_){const E=dn(b),k=yield ga(E,m,(0,H.m9)(_));return new qt(k,V=>yi(E,V))})).apply(this,arguments)}function ao(b,m,_){return rc.apply(this,arguments)}function rc(){return(rc=(0,c.Z)(function*(b,m,_){const E=(0,H.m9)(b);yield el(!1,E,"phone");const k=yield ga(E.auth,m,(0,H.m9)(_));return new qt(k,V=>Jn(E,V))})).apply(this,arguments)}function ui(b,m,_){return wi.apply(this,arguments)}function wi(){return(wi=(0,c.Z)(function*(b,m,_){const E=(0,H.m9)(b),k=yield ga(E.auth,m,(0,H.m9)(_));return new qt(k,V=>$l(E,V))})).apply(this,arguments)}function ga(b,m,_){return lo.apply(this,arguments)}function lo(){return(lo=(0,c.Z)(function*(b,m,_){var E;const k=yield _.verify();try{let V;if(he("string"==typeof k,b,"argument-error"),he(_.type===Xp,b,"argument-error"),V="string"==typeof m?{phoneNumber:m}:m,"session"in V){const ue=V.session;if("phoneNumber"in V)return he("enroll"===ue.type,b,"internal-error"),(yield Yp(b,{idToken:ue.credential,phoneEnrollmentInfo:{phoneNumber:V.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{he("signin"===ue.type,b,"internal-error");const Ne=(null===(E=V.multiFactorHint)||void 0===E?void 0:E.uid)||V.multiFactorUid;return he(Ne,b,"missing-multi-factor-info"),(yield ed(b,{mfaPendingCredential:ue.credential,mfaEnrollmentId:Ne,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ue}=yield $p(b,{phoneNumber:V.phoneNumber,recaptchaToken:k});return ue}}finally{_._reset()}})).apply(this,arguments)}function ma(b,m){return _a.apply(this,arguments)}function _a(){return(_a=(0,c.Z)(function*(b,m){yield Hl((0,H.m9)(b),m)})).apply(this,arguments)}let Hc=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=dn(_)}verifyPhoneNumber(_,E){return ga(this.auth,_,(0,H.m9)(E))}static credential(_,E){return la._fromVerification(_,E)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:E,temporaryProof:k}=_;return E&&k?la._fromTokenResponse(E,k):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function zi(b,m){return m?z(m):(he(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class hl extends Wr{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return eo(m,this._buildIdpRequest())}_linkToIdToken(m,_){return eo(m,this._buildIdpRequest(_))}_getReauthenticationResolver(m){return eo(m,this._buildIdpRequest())}_buildIdpRequest(m){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(_.idToken=m),_}}function $c(b){return tl(b.auth,new hl(b),b.bypassAuthState)}function fl(b){const{auth:m,user:_}=b;return he(_,m,"internal-error"),ji(_,new hl(b),b.bypassAuthState)}function Dr(b){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,c.Z)(function*(b){const{auth:m,user:_}=b;return he(_,m,"internal-error"),Hl(_,new hl(b),b.bypassAuthState)})).apply(this,arguments)}class ps{constructor(m,_,E,k,V=!1){this.auth=m,this.resolver=E,this.user=k,this.bypassAuthState=V,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var m=this;return new Promise(function(){var _=(0,c.Z)(function*(E,k){m.pendingPromise={resolve:E,reject:k};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(V){m.reject(V)}});return function(E,k){return _.apply(this,arguments)}}())}onAuthEvent(m){var _=this;return(0,c.Z)(function*(){const{urlResponse:E,sessionId:k,postBody:V,tenantId:ue,error:Ne,type:at}=m;if(Ne)return void _.reject(Ne);const Dt={auth:_.auth,requestUri:E,sessionId:k,tenantId:ue||void 0,postBody:V||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(at)(Dt))}catch(Wt){_.reject(Wt)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return $c;case"linkViaPopup":case"linkViaRedirect":return Dr;case"reauthViaPopup":case"reauthViaRedirect":return fl;default:Te(this.auth,"internal-error")}}resolve(m){U(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){U(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const zc=new et(2e3,1e4);function qc(b,m,_){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,c.Z)(function*(b,m,_){const E=dn(b);xe(b,m,Ui);const k=zi(E,_);return new Bo(E,"signInViaPopup",m,k).executeNotNull()})).apply(this,arguments)}function sd(b,m,_){return ic.apply(this,arguments)}function ic(){return(ic=(0,c.Z)(function*(b,m,_){const E=(0,H.m9)(b);xe(E.auth,m,Ui);const k=zi(E.auth,_);return new Bo(E.auth,"reauthViaPopup",m,k,E).executeNotNull()})).apply(this,arguments)}function od(b,m,_){return ks.apply(this,arguments)}function ks(){return(ks=(0,c.Z)(function*(b,m,_){const E=(0,H.m9)(b);xe(E.auth,m,Ui);const k=zi(E.auth,_);return new Bo(E.auth,"linkViaPopup",m,k,E).executeNotNull()})).apply(this,arguments)}let Bo=(()=>{class b extends ps{constructor(_,E,k,V,ue){super(_,E,V,ue),this.provider=k,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,c.Z)(function*(){const E=yield _.execute();return he(E,_.auth,"internal-error"),E})()}onExecution(){var _=this;return(0,c.Z)(function*(){U(1===_.filter.length,"Popup operations only handle one event");const E=lr();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],E),_.authWindow.associatedEvent=E,_.resolver._originValidation(_.auth).catch(k=>{_.reject(k)}),_.resolver._isIframeWebStorageSupported(_.auth,k=>{k||_.reject(ve(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var E,k;this.pollId=(null===(k=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===k?void 0:k.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,zc.get())};_()}}return b.currentPopupAction=null,b})();const co=new Map;class jo extends ps{constructor(m,_,E=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,E),this.eventId=null}execute(){var m=()=>super.execute,_=this;return(0,c.Z)(function*(){let E=co.get(_.auth._key());if(!E){try{const V=(yield function va(b,m){return er.apply(this,arguments)}(_.resolver,_.auth))?yield m().call(_):null;E=()=>Promise.resolve(V)}catch(k){E=()=>Promise.reject(k)}co.set(_.auth._key(),E)}return _.bypassAuthState||co.set(_.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(m){var _=()=>super.onAuthEvent,E=this;return(0,c.Z)(function*(){if("signInViaRedirect"===m.type)return _().call(E,m);if("unknown"!==m.type){if(m.eventId){const k=yield E.auth._redirectUserForId(m.eventId);if(k)return E.user=k,_().call(E,m);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function er(){return(er=(0,c.Z)(function*(b,m){const _=pl(m),E=Oh(b);if(!(yield E._isAvailable()))return!1;const k="true"===(yield E._get(_));return yield E._remove(_),k})).apply(this,arguments)}function tr(b,m){return Wc.apply(this,arguments)}function Wc(){return(Wc=(0,c.Z)(function*(b,m){return Oh(b)._set(pl(m),"true")})).apply(this,arguments)}function kh(){co.clear()}function Oh(b){return z(b._redirectPersistence)}function pl(b){return gt("pendingRedirect",b.config.apiKey,b.name)}function Zc(b,m,_){return function T(b,m,_){return S.apply(this,arguments)}(b,m,_)}function S(){return(S=(0,c.Z)(function*(b,m,_){const E=dn(b);xe(b,m,Ui);const k=zi(E,_);return yield tr(k,E),k._openRedirect(E,m,"signInViaRedirect")})).apply(this,arguments)}function P(b,m,_){return function B(b,m,_){return ne.apply(this,arguments)}(b,m,_)}function ne(){return(ne=(0,c.Z)(function*(b,m,_){const E=(0,H.m9)(b);xe(E.auth,m,Ui);const k=zi(E.auth,_);yield tr(k,E.auth);const V=yield Zn(E);return k._openRedirect(E.auth,m,"reauthViaRedirect",V)})).apply(this,arguments)}function _e(b,m,_){return function Ve(b,m,_){return Qe.apply(this,arguments)}(b,m,_)}function Qe(){return(Qe=(0,c.Z)(function*(b,m,_){const E=(0,H.m9)(b);xe(E.auth,m,Ui);const k=zi(E.auth,_);yield el(!1,E,m.providerId),yield tr(k,E.auth);const V=yield Zn(E);return k._openRedirect(E.auth,m,"linkViaRedirect",V)})).apply(this,arguments)}function st(b,m){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,c.Z)(function*(b,m){return yield dn(b)._initializationPromise,_n(b,m,!1)})).apply(this,arguments)}function _n(b,m){return nr.apply(this,arguments)}function nr(){return(nr=(0,c.Z)(function*(b,m,_=!1){const E=dn(b),k=zi(E,m),ue=yield new jo(E,k,_).execute();return ue&&!_&&(delete ue.user._redirectEventId,yield E._persistUserIfCurrent(ue.user),yield E._setRedirectUser(null,m)),ue})).apply(this,arguments)}function Zn(b){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,c.Z)(function*(b){const m=lr(`${b.uid}:::`);return b._redirectEventId=m,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),m})).apply(this,arguments)}class sc{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let _=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(m,E)&&(_=!0,this.sendToConsumer(m,E),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Ei(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zr(b);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=m,_=!0)),_}sendToConsumer(m,_){var E;if(m.error&&!Zr(m)){const k=(null===(E=m.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";_.onError(ve(this.auth,k))}else _.onAuthEvent(m)}isEventForConsumer(m,_){const E=null===_.eventId||!!m.eventId&&m.eventId===_.eventId;return _.filter.includes(m.type)&&E}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(gs(m))}saveEventToCache(m){this.cachedEventUids.add(gs(m)),this.lastProcessedEventTime=Date.now()}}function gs(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(m=>m).join("-")}function Zr({type:b,error:m}){return"unknown"===b&&"auth/no-auth-event"===(null==m?void 0:m.code)}function Ho(b){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,c.Z)(function*(b,m={}){return tn(b,"GET","/v1/projects",m)})).apply(this,arguments)}const Ph=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$o=/^https?/;function Nh(){return(Nh=(0,c.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:m}=yield Ho(b);for(const _ of m)try{if(l_(_))return}catch(E){}Te(b,"unauthorized-domain")})).apply(this,arguments)}function l_(b){const m=K(),{protocol:_,hostname:E}=new URL(m);if(b.startsWith("chrome-extension://")){const ue=new URL(b);return""===ue.hostname&&""===E?"chrome-extension:"===_&&b.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===_&&ue.hostname===E}if(!$o.test(_))return!1;if(Ph.test(b))return E===b;const k=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(E)}const Jp=new et(3e4,6e4);function Fh(){const b=wn().___jsl;if(null==b?void 0:b.H)for(const m of Object.keys(b.H))if(b.H[m].r=b.H[m].r||[],b.H[m].L=b.H[m].L||[],b.H[m].r=[...b.H[m].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let Lh=null;function c_(b){return Lh=Lh||function F0(b){return new Promise((m,_)=>{var E,k,V;function ue(){Fh(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Fh(),_(ve(b,"network-request-failed"))},timeout:Jp.get()})}if(null===(k=null===(E=wn().gapi)||void 0===E?void 0:E.iframes)||void 0===k?void 0:k.Iframe)m(gapi.iframes.getContext());else{if(!(null===(V=wn().gapi)||void 0===V?void 0:V.load)){const Ne=ot("iframefcb");return wn()[Ne]=()=>{gapi.load?ue():_(ve(b,"network-request-failed"))},nn(`https://apis.google.com/js/api.js?onload=${Ne}`).catch(at=>_(at))}ue()}}).catch(m=>{throw Lh=null,m})}(b),Lh}const Vh=new et(5e3,15e3),ba={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L0(b){const m=b.config;he(m.authDomain,b,"auth-domain-config-required");const _=m.emulator?un(m,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,E={apiKey:m.apiKey,appName:b.name,v:N.SDK_VERSION},k=cd.get(b.config.apiHost);k&&(E.eid=k);const V=b._getFrameworks();return V.length&&(E.fw=V.join(",")),`${_}?${(0,H.xO)(E).slice(1)}`}function uo(){return uo=(0,c.Z)(function*(b){const m=yield c_(b),_=wn().gapi;return he(_,b,"internal-error"),m.open({where:document.body,url:L0(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ba,dontclear:!0},E=>new Promise(function(){var k=(0,c.Z)(function*(V,ue){yield E.restyle({setHideOnLeave:!1});const Ne=ve(b,"network-request-failed"),at=wn().setTimeout(()=>{ue(Ne)},Vh.get());function Dt(){wn().clearTimeout(at),V(E)}E.ping(Dt).then(Dt,()=>{ue(Ne)})});return function(V,ue){return k.apply(this,arguments)}}()))}),uo.apply(this,arguments)}const oc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Uh{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(m){}}}function qi(b,m,_,E,k,V){he(b.config.authDomain,b,"auth-domain-config-required"),he(b.config.apiKey,b,"invalid-api-key");const ue={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:E,v:N.SDK_VERSION,eventId:k};if(m instanceof Ui){m.setDefaultLanguage(b.languageCode),ue.providerId=m.providerId||"",(0,H.xb)(m.getCustomParameters())||(ue.customParameters=JSON.stringify(m.getCustomParameters()));for(const[at,Dt]of Object.entries(V||{}))ue[at]=Dt}if(m instanceof qa){const at=m.getScopes().filter(Dt=>""!==Dt);at.length>0&&(ue.scopes=at.join(","))}b.tenantId&&(ue.tid=b.tenantId);const Ne=ue;for(const at of Object.keys(Ne))void 0===Ne[at]&&delete Ne[at];return`${function lc({config:b}){return b.emulator?un(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,H.xO)(Ne).slice(1)}`}const Yc="webStorageSupport",Hh=class ig{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ar,this._completeRedirectFn=_n}_openPopup(m,_,E,k){var V=this;return(0,c.Z)(function*(){var ue;U(null===(ue=V.eventManagers[m._key()])||void 0===ue?void 0:ue.manager,"_initialize() not called before _openPopup()");const Ne=qi(m,_,E,K(),k);return function Bh(b,m,_,E=500,k=600){const V=Math.max((window.screen.availHeight-k)/2,0).toString(),ue=Math.max((window.screen.availWidth-E)/2,0).toString();let Ne="";const at=Object.assign(Object.assign({},oc),{width:E.toString(),height:k.toString(),top:V,left:ue}),Dt=(0,H.z$)().toLowerCase();_&&(Ne=Oe(Dt)?"_blank":_),ee(Dt)&&(m=m||"http://localhost",at.scrollbars="yes");const Wt=Object.entries(at).reduce((Rs,[Ps,qh])=>`${Rs}${Ps}=${qh},`,"");if(function si(b=(0,H.z$)()){var m;return Ft(b)&&!!(null===(m=window.navigator)||void 0===m?void 0:m.standalone)}(Dt)&&"_self"!==Ne)return function ng(b,m){const _=document.createElement("a");_.href=b,_.target=m;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(E)}(m||"",Ne),new Uh(null);const Rn=window.open(m||"",Ne,Wt);he(Rn,b,"popup-blocked");try{Rn.focus()}catch(Rs){}return new Uh(Rn)}(m,Ne,lr())})()}_openRedirect(m,_,E,k){var V=this;return(0,c.Z)(function*(){return yield V._originValidation(m),function Vr(b){wn().location.href=b}(qi(m,_,E,K(),k)),new Promise(()=>{})})()}_initialize(m){const _=m._key();if(this.eventManagers[_]){const{manager:k,promise:V}=this.eventManagers[_];return k?Promise.resolve(k):(U(V,"If manager is not set, promise should be"),V)}const E=this.initAndGetManager(m);return this.eventManagers[_]={promise:E},E.catch(()=>{delete this.eventManagers[_]}),E}initAndGetManager(m){var _=this;return(0,c.Z)(function*(){const E=yield function eg(b){return uo.apply(this,arguments)}(m),k=new sc(m);return E.register("authEvent",V=>(he(null==V?void 0:V.authEvent,m,"invalid-auth-event"),{status:k.onEvent(V.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[m._key()]={manager:k},_.iframes[m._key()]=E,k})()}_isIframeWebStorageSupported(m,_){this.iframes[m._key()].send(Yc,{type:Yc},k=>{var V;const ue=null===(V=null==k?void 0:k[0])||void 0===V?void 0:V[Yc];void 0!==ue&&_(!!ue),Te(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const _=m._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Kc(b){return Nh.apply(this,arguments)}(m)),this.originValidationPromises[_]}get _shouldInitProactively(){return Pr()||Q()||Ft()}};class ho extends class $h{constructor(m){this.factorId=m}_process(m,_,E){switch(_.type){case"enroll":return this._finalizeEnroll(m,_.credential,E);case"signin":return this._finalizeSignIn(m,_.credential);default:return it("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new ho(m)}_finalizeEnroll(m,_,E){return function Ts(b,m){return tn(b,"POST","/v2/accounts/mfaEnrollment:finalize",Ut(b,m))}(m,{idToken:_,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,_){return function Fo(b,m){return tn(b,"POST","/v2/accounts/mfaSignIn:finalize",Ut(b,m))}(m,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qc=(()=>{class b{constructor(){}static assertion(_){return ho._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var zh="@firebase/auth";class Xc{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var _=this;return(0,c.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const _=this.auth.onIdTokenChanged(E=>{var k;m((null===(k=E)||void 0===k?void 0:k.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,_),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const _=this.internalListeners.get(m);!_||(this.internalListeners.delete(m),_(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function CD(b=(0,N.getApp)()){const m=(0,N._getProvider)(b,"auth");return m.isInitialized()?m.getImmediate():function X(b,m){const _=(0,N._getProvider)(b,"auth");if(_.isInitialized()){const k=_.getImmediate(),V=_.getOptions();if((0,H.vZ)(V,null!=m?m:{}))return k;Te(k,"already-initialized")}return _.initialize({options:m})}(b,{popupRedirectResolver:Hh,persistence:[Ju,bi,ar]})}!function og(b){(0,N._registerComponent)(new Ce.wA("auth",(m,{options:_})=>{const E=m.getProvider("app").getImmediate(),{apiKey:k,authDomain:V}=E.options;return(ue=>{he(k&&!k.includes(":"),"invalid-api-key",{appName:ue.name}),he(!(null==V?void 0:V.includes(":")),"argument-error",{appName:ue.name});const Ne={apiKey:k,authDomain:V,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pr(b)},at=new Ba(ue,Ne);return function pe(b,m){const _=(null==m?void 0:m.persistence)||[],E=(Array.isArray(_)?_:[_]).map(z);(null==m?void 0:m.errorMap)&&b._updateErrorMap(m.errorMap),b._initializeWithPersistence(E,null==m?void 0:m.popupRedirectResolver)}(at,_),at})(E)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,_,E)=>{m.getProvider("auth-internal").initialize()})),(0,N._registerComponent)(new Ce.wA("auth-internal",m=>{const _=dn(m.getProvider("auth").getImmediate());return new Xc(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,N.registerVersion)(zh,"0.19.9",function ud(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,N.registerVersion)(zh,"0.19.9","esm2017")}("Browser")},2090:(ct,ke,F)=>{"use strict";F.d(ke,{BH:()=>je,LL:()=>K,ZR:()=>pe,gQ:()=>zn,zI:()=>Z,hu:()=>H,g5:()=>N,US:()=>Ce,tV:()=>ye,h$:()=>ce,$s:()=>Pt,r3:()=>Ut,Sg:()=>Re,ne:()=>es,p$:()=>G,vZ:()=>Rr,ZB:()=>W,gK:()=>sr,pd:()=>Li,m9:()=>pn,z$:()=>Fe,GJ:()=>Kt,jU:()=>fe,ru:()=>be,d:()=>ve,xb:()=>Mn,w1:()=>qe,hl:()=>it,uI:()=>Be,UG:()=>te,Yr:()=>nt,b$:()=>Te,G6:()=>he,Mn:()=>xe,w9:()=>Tn,cI:()=>cn,UI:()=>Fi,xO:()=>Ji,zd:()=>fi,DV:()=>tn,ug:()=>Bt,dS:()=>ts,Pz:()=>Le,Dv:()=>Er,Wj:()=>fn,lb:()=>or,eu:()=>U});const H=function($,Y){if(!$)throw N(Y)},N=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},de=function($){const Y=[];let J=0;for(let De=0;De<$.length;De++){let ae=$.charCodeAt(De);ae<128?Y[J++]=ae:ae<2048?(Y[J++]=ae>>6|192,Y[J++]=63&ae|128):55296==(64512&ae)&&De+1<$.length&&56320==(64512&$.charCodeAt(De+1))?(ae=65536+((1023&ae)<<10)+(1023&$.charCodeAt(++De)),Y[J++]=ae>>18|240,Y[J++]=ae>>12&63|128,Y[J++]=ae>>6&63|128,Y[J++]=63&ae|128):(Y[J++]=ae>>12|224,Y[J++]=ae>>6&63|128,Y[J++]=63&ae|128)}return Y},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,Y){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let ae=0;ae<$.length;ae+=3){const Ge=$[ae],Me=ae+1<$.length,Ie=Me?$[ae+1]:0,He=ae+2<$.length,ht=He?$[ae+2]:0;let rn=(15&Ie)<<2|ht>>6,le=63&ht;He||(le=64,Me||(rn=64)),De.push(J[Ge>>2],J[(3&Ge)<<4|Ie>>4],J[rn],J[le])}return De.join("")},encodeString($,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa($):this.encodeByteArray(de($),Y)},decodeString($,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob($):function($){const Y=[];let J=0,De=0;for(;J<$.length;){const ae=$[J++];if(ae<128)Y[De++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const Ge=$[J++];Y[De++]=String.fromCharCode((31&ae)<<6|63&Ge)}else if(ae>239&&ae<365){const He=((7&ae)<<18|(63&$[J++])<<12|(63&$[J++])<<6|63&$[J++])-65536;Y[De++]=String.fromCharCode(55296+(He>>10)),Y[De++]=String.fromCharCode(56320+(1023&He))}else{const Ge=$[J++],Me=$[J++];Y[De++]=String.fromCharCode((15&ae)<<12|(63&Ge)<<6|63&Me)}}return Y.join("")}(this.decodeStringToByteArray($,Y))},decodeStringToByteArray($,Y){this.init_();const J=Y?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let ae=0;ae<$.length;){const Ge=J[$.charAt(ae++)],Ie=ae<$.length?J[$.charAt(ae)]:0;++ae;const ht=ae<$.length?J[$.charAt(ae)]:64;++ae;const gt=ae<$.length?J[$.charAt(ae)]:64;if(++ae,null==Ge||null==Ie||null==ht||null==gt)throw Error();De.push(Ge<<2|Ie>>4),64!==ht&&(De.push(Ie<<4&240|ht>>2),64!==gt&&De.push(ht<<6&192|gt))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},ce=function($){const Y=de($);return Ce.encodeByteArray(Y,!0)},me=function($){return ce($).replace(/\./g,"")},ye=function($){try{return Ce.decodeString($,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function G($){return W(void 0,$)}function W($,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return Y}for(const J in Y)!Y.hasOwnProperty(J)||!oe(J)||($[J]=W($[J],Y[J]));return $}function oe($){return"__proto__"!==$}class je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,J)=>{this.resolve=Y,this.reject=J})}wrapCallback(Y){return(J,De)=>{J?this.reject(J):this.resolve(De),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(J):Y(J,De))}}}function Re($,Y){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=Y||"demo-project",ae=$.iat||0,Ge=$.sub||$.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Me=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:ae,exp:ae+3600,auth_time:ae,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},$);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(Me)),""].join(".")}function Fe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fe())}function te(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($){return!1}}function fe(){return"object"==typeof self&&self.self===self}function be(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Te(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ve(){return Fe().indexOf("Electron/")>=0}function qe(){const $=Fe();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function xe(){return Fe().indexOf("MSAppHost/")>=0}function nt(){return!1}function he(){return!te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function it(){return"object"==typeof indexedDB}function U(){return new Promise(($,Y)=>{try{let J=!0;const De="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(De);ae.onsuccess=()=>{ae.result.close(),J||self.indexedDB.deleteDatabase(De),$(!0)},ae.onupgradeneeded=()=>{J=!1},ae.onerror=()=>{var Ge;Y((null===(Ge=ae.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(J){Y(J)}})}function Z(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class pe extends Error{constructor(Y,J,De){super(J),this.code=Y,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,K.prototype.create)}}class K{constructor(Y,J,De){this.service=Y,this.serviceName=J,this.errors=De}create(Y,...J){const De=J[0]||{},ae=`${this.service}/${Y}`,Ge=this.errors[Y],Me=Ge?function $e($,Y){return $.replace(yt,(J,De)=>{const ae=Y[De];return null!=ae?String(ae):`<${De}?>`})}(Ge,De):"Error";return new pe(ae,`${this.serviceName}: ${Me} (${ae}).`,De)}}const yt=/\{\$([^}]+)}/g;function cn($){return JSON.parse($)}function Le($){return JSON.stringify($)}const et=function($){let Y={},J={},De={},ae="";try{const Ge=$.split(".");Y=cn(ye(Ge[0])||""),J=cn(ye(Ge[1])||""),ae=Ge[2],De=J.d||{},delete J.d}catch(Ge){}return{header:Y,claims:J,data:De,signature:ae}},Tn=function($){const J=et($).claims;return!!J&&"object"==typeof J&&J.hasOwnProperty("iat")},Kt=function($){const Y=et($).claims;return"object"==typeof Y&&!0===Y.admin};function Ut($,Y){return Object.prototype.hasOwnProperty.call($,Y)}function tn($,Y){if(Object.prototype.hasOwnProperty.call($,Y))return $[Y]}function Mn($){for(const Y in $)if(Object.prototype.hasOwnProperty.call($,Y))return!1;return!0}function Fi($,Y,J){const De={};for(const ae in $)Object.prototype.hasOwnProperty.call($,ae)&&(De[ae]=Y.call(J,$[ae],ae,$));return De}function Rr($,Y){if($===Y)return!0;const J=Object.keys($),De=Object.keys(Y);for(const ae of J){if(!De.includes(ae))return!1;const Ge=$[ae],Me=Y[ae];if(xn(Ge)&&xn(Me)){if(!Rr(Ge,Me))return!1}else if(Ge!==Me)return!1}for(const ae of De)if(!J.includes(ae))return!1;return!0}function xn($){return null!==$&&"object"==typeof $}function Ji($){const Y=[];for(const[J,De]of Object.entries($))Array.isArray(De)?De.forEach(ae=>{Y.push(encodeURIComponent(J)+"="+encodeURIComponent(ae))}):Y.push(encodeURIComponent(J)+"="+encodeURIComponent(De));return Y.length?"&"+Y.join("&"):""}function fi($){const Y={};return $.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[ae,Ge]=De.split("=");Y[decodeURIComponent(ae)]=decodeURIComponent(Ge)}}),Y}function Li($){const Y=$.indexOf("?");if(!Y)return"";const J=$.indexOf("#",Y);return $.substring(Y,J>0?J:void 0)}class zn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Y=1;Y<this.blockSize;++Y)this.pad_[Y]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Y,J){J||(J=0);const De=this.W_;if("string"==typeof Y)for(let gt=0;gt<16;gt++)De[gt]=Y.charCodeAt(J)<<24|Y.charCodeAt(J+1)<<16|Y.charCodeAt(J+2)<<8|Y.charCodeAt(J+3),J+=4;else for(let gt=0;gt<16;gt++)De[gt]=Y[J]<<24|Y[J+1]<<16|Y[J+2]<<8|Y[J+3],J+=4;for(let gt=16;gt<80;gt++){const rn=De[gt-3]^De[gt-8]^De[gt-14]^De[gt-16];De[gt]=4294967295&(rn<<1|rn>>>31)}let ht,St,ae=this.chain_[0],Ge=this.chain_[1],Me=this.chain_[2],Ie=this.chain_[3],He=this.chain_[4];for(let gt=0;gt<80;gt++){gt<40?gt<20?(ht=Ie^Ge&(Me^Ie),St=1518500249):(ht=Ge^Me^Ie,St=1859775393):gt<60?(ht=Ge&Me|Ie&(Ge|Me),St=2400959708):(ht=Ge^Me^Ie,St=3395469782);const rn=(ae<<5|ae>>>27)+ht+He+St+De[gt]&4294967295;He=Ie,Ie=Me,Me=4294967295&(Ge<<30|Ge>>>2),Ge=ae,ae=rn}this.chain_[0]=this.chain_[0]+ae&4294967295,this.chain_[1]=this.chain_[1]+Ge&4294967295,this.chain_[2]=this.chain_[2]+Me&4294967295,this.chain_[3]=this.chain_[3]+Ie&4294967295,this.chain_[4]=this.chain_[4]+He&4294967295}update(Y,J){if(null==Y)return;void 0===J&&(J=Y.length);const De=J-this.blockSize;let ae=0;const Ge=this.buf_;let Me=this.inbuf_;for(;ae<J;){if(0===Me)for(;ae<=De;)this.compress_(Y,ae),ae+=this.blockSize;if("string"==typeof Y){for(;ae<J;)if(Ge[Me]=Y.charCodeAt(ae),++Me,++ae,Me===this.blockSize){this.compress_(Ge),Me=0;break}}else for(;ae<J;)if(Ge[Me]=Y[ae],++Me,++ae,Me===this.blockSize){this.compress_(Ge),Me=0;break}}this.inbuf_=Me,this.total_+=J}digest(){const Y=[];let J=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ae=this.blockSize-1;ae>=56;ae--)this.buf_[ae]=255&J,J/=256;this.compress_(this.buf_);let De=0;for(let ae=0;ae<5;ae++)for(let Ge=24;Ge>=0;Ge-=8)Y[De]=this.chain_[ae]>>Ge&255,++De;return Y}}function es($,Y){const J=new wt($,Y);return J.subscribe.bind(J)}class wt{constructor(Y,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{Y(this)}).catch(De=>{this.error(De)})}next(Y){this.forEachObserver(J=>{J.next(Y)})}error(Y){this.forEachObserver(J=>{J.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,J,De){let ae;if(void 0===Y&&void 0===J&&void 0===De)throw new Error("Missing Observer.");ae=function Dn($,Y){if("object"!=typeof $||null===$)return!1;for(const J of Y)if(J in $&&"function"==typeof $[J])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:J,complete:De},void 0===ae.next&&(ae.next=Jt),void 0===ae.error&&(ae.error=Jt),void 0===ae.complete&&(ae.complete=Jt);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch(Me){}}),this.observers.push(ae),Ge}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,Y)}sendOne(Y,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{J(this.observers[Y])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jt(){}const Er=function($,Y,J,De){let ae;if(De<Y?ae="at least "+Y:De>J&&(ae=0===J?"none":"no more than "+J),ae)throw new Error($+" failed: Was called with "+De+(1===De?" argument.":" arguments.")+" Expects "+ae+".")};function sr($,Y){return`${$} failed: ${Y} argument `}function fn($,Y,J,De){if((!De||J)&&"function"!=typeof J)throw new Error(sr($,Y)+"must be a valid function.")}function or($,Y,J,De){if((!De||J)&&("object"!=typeof J||null===J))throw new Error(sr($,Y)+"must be a valid context object.")}const ts=function($){const Y=[];let J=0;for(let De=0;De<$.length;De++){let ae=$.charCodeAt(De);if(ae>=55296&&ae<=56319){const Ge=ae-55296;De++,H(De<$.length,"Surrogate pair missing trail surrogate."),ae=65536+(Ge<<10)+($.charCodeAt(De)-56320)}ae<128?Y[J++]=ae:ae<2048?(Y[J++]=ae>>6|192,Y[J++]=63&ae|128):ae<65536?(Y[J++]=ae>>12|224,Y[J++]=ae>>6&63|128,Y[J++]=63&ae|128):(Y[J++]=ae>>18|240,Y[J++]=ae>>12&63|128,Y[J++]=ae>>6&63|128,Y[J++]=63&ae|128)}return Y},Bt=function($){let Y=0;for(let J=0;J<$.length;J++){const De=$.charCodeAt(J);De<128?Y++:De<2048?Y+=2:De>=55296&&De<=56319?(Y+=4,J++):Y+=3}return Y};function Pt($,Y=1e3,J=2){const De=Y*Math.pow(J,$),ae=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+ae)}function pn($){return $&&$._delegate?$._delegate:$}},864:(ct,ke,F)=>{"use strict";var c=F(5e3);let H=null;function N(){return H}const ce=new c.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ye(){return(0,c.LFG)(W)}()},providedIn:"platform"}),n})();const G=new c.OlP("Location Initialized");let W=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return N().getBaseHref(this._doc)}onPopState(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=N().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){oe()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){oe()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function je(){return new W((0,c.LFG)(ce))}()},providedIn:"platform"}),n})();function oe(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Fe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Be(n){return n&&"?"!==n[0]?"?"+n:n}let te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function fe(n){const e=(0,c.LFG)(ce).location;return new Te((0,c.LFG)(me),e&&e.origin||"")}()},providedIn:"root"}),n})();const be=new c.OlP("appBaseHref");let Te=(()=>{class n extends te{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Be(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+Be(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+Be(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me),c.LFG(be,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),ve=(()=>{class n extends te{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+Be(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+Be(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me),c.LFG(be,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),qe=(()=>{class n{constructor(t,r){this._subject=new c.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Fe(he(i)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Be(r))}normalize(t){return n.stripTrailingSlash(function nt(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,he(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Be(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Be,n.joinWithSlash=Re,n.stripTrailingSlash=Fe,n.\u0275fac=function(t){return new(t||n)(c.LFG(te),c.LFG(me))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function xe(){return new qe((0,c.LFG)(te),(0,c.LFG)(me))}()},providedIn:"root"}),n})();function he(n){return n.replace(/\/index.html$/,"")}const it={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var U=(()=>((U=U||{})[U.Decimal=0]="Decimal",U[U.Percent=1]="Percent",U[U.Currency=2]="Currency",U[U.Scientific=3]="Scientific",U))(),Z=(()=>((Z=Z||{})[Z.Zero=0]="Zero",Z[Z.One=1]="One",Z[Z.Two=2]="Two",Z[Z.Few=3]="Few",Z[Z.Many=4]="Many",Z[Z.Other=5]="Other",Z))(),K=(()=>((K=K||{})[K.Decimal=0]="Decimal",K[K.Group=1]="Group",K[K.List=2]="List",K[K.PercentSign=3]="PercentSign",K[K.PlusSign=4]="PlusSign",K[K.MinusSign=5]="MinusSign",K[K.Exponential=6]="Exponential",K[K.SuperscriptingExponent=7]="SuperscriptingExponent",K[K.PerMille=8]="PerMille",K[K.Infinity=9]="Infinity",K[K.NaN=10]="NaN",K[K.TimeSeparator=11]="TimeSeparator",K[K.CurrencyDecimal=12]="CurrencyDecimal",K[K.CurrencyGroup=13]="CurrencyGroup",K))();function Mn(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(void 0===r){if(e===K.CurrencyDecimal)return t[c.wAp.NumberSymbols][K.Decimal];if(e===K.CurrencyGroup)return t[c.wAp.NumberSymbols][K.Group]}return r}const Li=c.kL8;const kt=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function dn(n,e,t,r,i){const u=function gn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],s=r[1],u=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],h=u[0],p=u[1]||"";t.posPre=h.substr(0,h.indexOf("#"));for(let C=0;C<p.length;C++){const D=p.charAt(C);"0"===D?t.minFrac=t.maxFrac=C+1:"#"===D?t.maxFrac=C+1:t.posSuf+=D}const y=h.split(",");if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,s){const C=i.length-t.posPre.length-t.posSuf.length,D=s.indexOf("#");t.negPre=s.substr(0,D).replace(/'/g,""),t.negSuf=s.substr(D+C).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Fi(n,e){return(0,c.cg1)(n)[c.wAp.NumberFormats][e]}(e,U.Currency),Mn(e,K.MinusSign));return u.minFrac=function Gr(n){let e;const t=it[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),u.maxFrac=u.minFrac,function Ba(n,e,t,r,i,s,u=!1){let h="",p=!1;if(isFinite(n)){let y=function rs(n){let r,i,s,u,h,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;"0"===e.charAt(s);s++);if(s===(h=e.length))r=[0],i=1;else{for(h--;"0"===e.charAt(h);)h--;for(i-=s,r=[],u=0;s<=h;s++,u++)r[u]=Number(e.charAt(s))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);u&&(y=function oi(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let C=e.minInt,D=e.minFrac,R=e.maxFrac;if(s){const dt=s.match(kt);if(null===dt)throw new Error(`${s} is not a valid digit info`);const At=dt[1],_t=dt[3],In=dt[5];null!=At&&(C=Wr(At)),null!=_t&&(D=Wr(_t)),null!=In?R=Wr(In):null!=_t&&D>R&&(R=D)}!function Xn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let u=s+n.integerLen,h=r[u];if(u>0){r.splice(Math.max(n.integerLen,u));for(let D=u;D<r.length;D++)r[D]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,u=s+1),r[0]=0;for(let D=1;D<u;D++)r[D]=0}if(h>=5)if(u-1<0){for(let D=0;D>u;D--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[u-1]++;for(;i<Math.max(0,s);i++)r.push(0);let p=0!==s;const y=e+n.integerLen,C=r.reduceRight(function(D,R,L,j){return j[L]=(R+=D)<10?R:R-10,p&&(0===j[L]&&L>=y?j.pop():p=!1),R>=10?1:0},0);C&&(r.unshift(C),n.integerLen++)}(y,D,R);let L=y.digits,j=y.integerLen;const ie=y.exponent;let Ae=[];for(p=L.every(dt=>!dt);j<C;j++)L.unshift(0);for(;j<0;j++)L.unshift(0);j>0?Ae=L.splice(j,L.length):(Ae=L,L=[0]);const tt=[];for(L.length>=e.lgSize&&tt.unshift(L.splice(-e.lgSize,L.length).join(""));L.length>e.gSize;)tt.unshift(L.splice(-e.gSize,L.length).join(""));L.length&&tt.unshift(L.join("")),h=tt.join(Mn(t,r)),Ae.length&&(h+=Mn(t,i)+Ae.join("")),ie&&(h+=Mn(t,K.Exponential)+"+"+ie)}else h=Mn(t,K.Infinity);return h=n<0&&!p?e.negPre+h+e.negSuf:e.posPre+h+e.posSuf,h}(n,u,e,K.CurrencyGroup,K.CurrencyDecimal,i).replace("\xa4",t).replace("\xa4","").trim()}function Wr(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class vn{}let Gn=(()=>{class n extends vn{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Li(r||this.locale)(t)){case Z.Zero:return"zero";case Z.One:return"one";case Z.Two:return"two";case Z.Few:return"few";case Z.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.soG))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),is=(()=>{class n{constructor(t,r,i,s){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,c.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,c.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.ZZ4),c.Y36(c.aQg),c.Y36(c.SBq),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Js{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Js(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,u),Io(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Io(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Io(n,e){n.context.$implicit=e.item}let Fn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new bn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Fl("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Fl("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class bn{constructor(){this.$implicit=null,this.ngIf=null}}function Fl(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}class Ha{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Nr=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),mi=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new Ha(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(Nr,9))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),$a=(()=>{class n{constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,s]=t.split(".");null!=(r=null!=r&&s?`${r}${s}`:r)?this._renderer.setStyle(this._ngEl.nativeElement,i,r):this._renderer.removeStyle(this._ngEl.nativeElement,i)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.aQg),c.Y36(c.Qsj))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})();function ai(n,e){return new c.vHH(2100,"")}class Hp{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class Cs{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const $p=new Cs,Lu=new Hp;let wh=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return $p;if((0,c.F4k)(t))return Lu;throw ai()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO,16))},n.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1}),n})(),Ga=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",s,u){if(!function Wa(n){return!(null==n||""===n||n!=n)}(t))return null;u=u||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let h=r||this._defaultCurrencyCode;"code"!==i&&(h="symbol"===i||"symbol-narrow"===i?function Er(n,e,t="en"){const r=function fi(n){return(0,c.cg1)(n)[c.wAp.Currencies]}(t)[n]||it[n]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||n}(h,"symbol"===i?"wide":"narrow",u):i);try{return dn(function Za(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),u,h,r,s)}catch(p){throw ai()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16),c.Y36(c.EJc,16))},n.\u0275pipe=c.Yjl({name:"currency",type:n,pure:!0}),n})();let Ya=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[{provide:vn,useClass:Gn}]}),n})();const Qa="browser";function Xa(n){return"server"===n}let jl=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new Ch((0,c.LFG)(ce),window)}),n})();class Ch{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function as(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ln(this.window.history)||Ln(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ln(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ua extends class el extends class Ce{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ge(n){H||(H=n)}(new ua)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Cr(){return ji=ji||document.querySelector("base"),ji?ji.getAttribute("href"):null}();return null==t?null:function To(n){tl=tl||document.createElement("a"),tl.setAttribute("href",n);const e=tl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ji=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Pl(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let tl,ji=null;const yi=new c.OlP("TRANSITION_ID"),Jn=[{provide:c.ip1,useFactory:function Fr(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=N(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[yi,ce,c.zs3],multi:!0}];class Do{static init(){(0,c.VLi)(new Do)}addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const h=function(p){u=u||p,s--,0==s&&r(u)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?N().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let $l=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const li=new c.OlP("EventManagerPlugins");let So=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const u=i[s];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(li),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Ao{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=N().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ct=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),no=(()=>{class n extends Ct{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Mo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Mo))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Mo(n){N().remove(n)}const xo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ko=/%COMP%/g;function An(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?An(n,i,t):(i=i.replace(ko,n),t.push(i))}return t}function da(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Lr=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Oo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ih(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case c.ifc.ShadowDom:return new fa(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=An(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(So),c.LFG(no),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Oo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(xo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=xo[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=xo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,da(r)):this.eventManager.addEventListener(e,t,da(r))}}class Ih extends Oo{constructor(e,t,r,i){super(e),this.component=r;const s=An(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function zt(n){return"_ngcontent-%COMP%".replace(ko,n)}(i+"-"+r.id),this.hostAttr=function ql(n){return"_nghost-%COMP%".replace(ko,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class fa extends Oo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=An(i.id,i.styles,[]);for(let u=0;u<s.length;u++){const h=document.createElement("style");h.textContent=s[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Gl=(()=>{class n extends Ao{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Ir=["alt","control","meta","shift"],$u={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Hi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Is={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wl=(()=>{class n extends Ao{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>N().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="";if(Ir.forEach(p=>{const y=r.indexOf(p);y>-1&&(r.splice(y,1),u+=p+".")}),u+=s,0!=r.length||0===s.length)return null;const h={};return h.domEventName=i,h.fullKey=u,h}static getEventFullKey(t){let r="",i=function Zl(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Hi.hasOwnProperty(e)&&(e=Hi[e]))}return $u[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Ir.forEach(s=>{s!=i&&Is[s](t)&&(r+=s+".")}),r+=i,r}static eventCallback(t,r,i){return s=>{n.getEventFullKey(s)===t&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const sl=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:Qa},{provide:c.g9A,useValue:function Oc(){ua.makeCurrent(),Do.init()},multi:!0},{provide:ce,useFactory:function rl(){return(0,c.RDi)(document),document},deps:[]}]),ol=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Rc(){return new c.qLn},deps:[]},{provide:li,useClass:Gl,multi:!0,deps:[ce,c.R0b,c.Lbi]},{provide:li,useClass:Wl,multi:!0,deps:[ce]},{provide:Lr,useClass:Lr,deps:[So,no,c.AFp]},{provide:c.FYo,useExisting:Lr},{provide:Ct,useExisting:no},{provide:no,useClass:no,deps:[ce]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b]},{provide:So,useClass:So,deps:[li,c.R0b]},{provide:class kn{},useClass:$l,deps:[]}];let Kl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:yi,useExisting:c.AFp},Jn]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(n,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:ol,imports:[Ya,c.hGG]}),n})();"undefined"!=typeof window&&window;let wn,Uc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):c.LFG(Ah),r},providedIn:"root"}),n})(),Ah=(()=>{class n extends Uc{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case c.q3G.NONE:return r;case c.q3G.HTML:return(0,c.qzn)(r,"HTML")?(0,c.z3N)(r):(0,c.EiD)(this._doc,String(r)).toString();case c.q3G.STYLE:return(0,c.qzn)(r,"Style")?(0,c.z3N)(r):r;case c.q3G.SCRIPT:if((0,c.qzn)(r,"Script"))return(0,c.z3N)(r);throw new Error("unsafe value used in a script context");case c.q3G.URL:return(0,c.yhl)(r),(0,c.qzn)(r,"URL")?(0,c.z3N)(r):(0,c.mCW)(String(r));case c.q3G.RESOURCE_URL:if((0,c.qzn)(r,"ResourceURL"))return(0,c.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,c.JVY)(t)}bypassSecurityTrustStyle(t){return(0,c.L6k)(t)}bypassSecurityTrustScript(t){return(0,c.eBb)(t)}bypassSecurityTrustUrl(t){return(0,c.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,c.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Zu(n){return new Ah(n.get(ce))}(c.LFG(c.zs3)),r},providedIn:"root"}),n})();function bi(n){return null!=n&&"false"!=`${n}`}function Bc(n){return Array.isArray(n)?n:[n]}function jn(n){return null==n?"":"string"==typeof n?n:`${n}px`}function lr(n){return n instanceof c.SBq?n.nativeElement:n}try{wn="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){wn=!1}let ul,Vr=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Sn(n){return n===Qa}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!wn)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Po=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function Jl(){if(ul)return ul;if("object"!=typeof document||!document)return ul=new Set(Po),ul;let n=document.createElement("input");return ul=new Set(Po.filter(e=>(n.setAttribute("type",e),n.type===e))),ul}let No,cs,dl;function Ds(n){return function Qu(){if(null==No&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>No=!0}))}finally{No=No||!1}return No}()?n:!!n.capture}function us(){if(null==cs){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return cs=!1,cs;if("scrollBehavior"in document.documentElement.style)cs=!0;else{const n=Element.prototype.scrollTo;cs=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return cs}function As(n){return n.composedPath?n.composedPath()[0]:n.target}function so(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}var mn=F(8996),On=F(8306);const{isArray:Ms}=Array,{getPrototypeOf:Xu,prototype:Ju,keys:ed}=Object;function Fo(n){if(1===n.length){const e=n[0];if(Ms(e))return{args:e,keys:null};if(function td(n){return n&&"object"==typeof n&&Xu(n)===Ju}(e)){const t=ed(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Tr=F(8421),xs=F(3269),nn=F(5403),ot=F(4004);const{isArray:oo}=Array;function ds(n){return(0,ot.U)(e=>function nd(n,e){return oo(e)?n(...e):n(e)}(n,e))}function Lo(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function jc(...n){const e=(0,xs.jO)(n),{args:t,keys:r}=Fo(n),i=new On.y(s=>{const{length:u}=t;if(!u)return void s.complete();const h=new Array(u);let p=u,y=u;for(let C=0;C<u;C++){let D=!1;(0,Tr.Xf)(t[C]).subscribe(new nn.Q(s,R=>{D||(D=!0,y--),h[C]=R},()=>p--,void 0,()=>{(!p||!D)&&(y||s.next(r?Lo(r,h):h),s.complete())}))}});return e?i.pipe(ds(e)):i}let xh=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),sn=(()=>{class n extends xh{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const hs=new c.OlP("NgValueAccessor"),o_={provide:hs,useExisting:(0,c.Gpc)(()=>nc),multi:!0},Xp=new c.OlP("CompositionEventMode");let nc=(()=>{class n extends xh{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function a_(){const n=N()?N().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(Xp,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[c._Bn([o_]),c.qOj]}),n})();function ci(n){return null==n||0===n.length}function id(n){return null!=n&&"number"==typeof n.length}const qt=new c.OlP("NgValidators"),fs=new c.OlP("NgAsyncValidators"),Vo=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ao{static min(e){return function rc(n){return e=>{if(ci(e.value)||ci(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function ui(n){return e=>{if(ci(e.value)||ci(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function wi(n){return ci(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function ga(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function lo(n){return ci(n.value)||Vo.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function ma(n){return e=>ci(e.value)||!id(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function _a(n){return e=>id(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Hc(n){if(!n)return zi;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ci(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return zc(e)}static composeAsync(e){return Gc(e)}}function zi(n){return null}function hl(n){return null!=n}function $c(n){const e=(0,c.QGY)(n)?(0,mn.D)(n):n;return(0,c.CqO)(e),e}function fl(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Dr(n,e){return e.map(t=>t(n))}function ps(n){return n.map(e=>function Uo(n){return!n.validate}(e)?e:t=>e.validate(t))}function zc(n){if(!n)return null;const e=n.filter(hl);return 0==e.length?null:function(t){return fl(Dr(t,e))}}function qc(n){return null!=n?zc(ps(n)):null}function Gc(n){if(!n)return null;const e=n.filter(hl);return 0==e.length?null:function(t){return jc(Dr(t,e).map($c)).pipe((0,ot.U)(fl))}}function sd(n){return null!=n?Gc(ps(n)):null}function ic(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function od(n){return n._rawValidators}function ks(n){return n._rawAsyncValidators}function Bo(n){return n?Array.isArray(n)?n:[n]:[]}function ya(n,e){return Array.isArray(n)?n.includes(e):n===e}function co(n,e){const t=Bo(e);return Bo(n).forEach(i=>{ya(t,i)||t.push(i)}),t}function jo(n,e){return Bo(e).filter(t=>!ya(n,t))}class va{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class er extends va{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class tr extends va{get formDirective(){return null}get path(){return null}}class Wc{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let pl=(()=>{class n extends Wc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(er,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[c.qOj]}),n})(),Zc=(()=>{class n extends Wc{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(tr,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[c.qOj]}),n})();function Zr(n,e){Ph(n,e),e.valueAccessor.writeValue(n.value),function Kc(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&l_(n,e)})}(n,e),function Jp(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Nh(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&l_(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Rh(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Ei(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),$o(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Ho(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ph(n,e){const t=od(n);null!==e.validator?n.setValidators(ic(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=ks(n);null!==e.asyncValidator?n.setAsyncValidators(ic(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Ho(e._rawValidators,i),Ho(e._rawAsyncValidators,i)}function $o(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=od(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=ks(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return Ho(e._rawValidators,r),Ho(e._rawAsyncValidators,r),t}function l_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Fh(n,e){Ph(n,e)}function ld(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function cd(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const uo="VALID",oc="INVALID",gl="PENDING",ac="DISABLED";function zo(n){return(jh(n)?n.validators:n)||null}function Uh(n){return Array.isArray(n)?qc(n):n||null}function Bh(n,e){return(jh(e)?e.asyncValidators:n)||null}function ng(n){return Array.isArray(n)?sd(n):n||null}function jh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const rg=n=>n instanceof ho,qi=n=>n instanceof Qc;function Yc(n){return rg(n)?n.value:n.getRawValue()}function ig(n,e){const t=qi(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[e])throw new c.vHH(1001,"")}function Hh(n,e){qi(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new c.vHH(1002,"")})}class $h{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Uh(this._rawValidators),this._composedAsyncValidatorFn=ng(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===uo}get invalid(){return this.status===oc}get pending(){return this.status==gl}get disabled(){return this.status===ac}get enabled(){return this.status!==ac}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Uh(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ng(e)}addValidators(e){this.setValidators(co(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(co(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jo(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jo(e,this._rawAsyncValidators))}hasValidator(e){return ya(this._rawValidators,e)}hasAsyncValidator(e){return ya(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=gl,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ac,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=uo,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===uo||this.status===gl)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ac:uo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=gl,this._hasOwnPendingAsyncValidator=!0;const t=$c(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function tg(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=qi(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof zh)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?ac:this.errors?oc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gl)?gl:this._anyControlsHaveStatus(oc)?oc:uo}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ho extends $h{constructor(e=null,t,r){super(zo(t),Bh(r,t)),this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){cd(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){cd(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Qc extends $h{constructor(e,t,r){super(zo(t),Bh(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Hh(this,e),Object.keys(e).forEach(r=>{ig(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Yc(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class zh extends $h{constructor(e,t,r){super(zo(t),Bh(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Hh(this,e),e.forEach((r,i)=>{ig(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Yc(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const sg={provide:tr,useExisting:(0,c.Gpc)(()=>ud)},Xc=(()=>Promise.resolve(null))();let ud=(()=>{class n extends tr{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new c.vpe,this.form=new Qc({},qc(t),sd(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Xc.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Zr(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Xc.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),cd(this._directives,t)})}addFormGroup(t){Xc.then(()=>{const r=this._findContainer(t.path),i=new Qc({});Fh(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Xc.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Xc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,ld(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(qt,10),c.Y36(fs,10))},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([sg]),c.qOj]}),n})(),at=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Ps=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const hd=new c.OlP("NgModelWithFormControlWarning"),Kh={provide:tr,useExisting:(0,c.Gpc)(()=>Ns)};let Ns=(()=>{class n extends tr{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&($o(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Zr(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ei(t.control||null,t,!1),cd(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,ld(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Ei(r||null,t),rg(i)&&(Zr(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);Fh(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function F0(n,e){return $o(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ph(this.form,this),this._oldForm&&$o(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(qt,10),c.Y36(fs,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Kh]),c.qOj,c.TTD]}),n})();const ID={provide:er,useExisting:(0,c.Gpc)(()=>fd)};let fd=(()=>{class n extends er{constructor(t,r,i,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function ba(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===nc?t=s:function ad(n){return Object.getPrototypeOf(n.constructor)===sn}(s)?r=s:i=s}),i||r||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function Vh(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function gs(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(tr,13),c.Y36(qt,10),c.Y36(fs,10),c.Y36(hs,10),c.Y36(hd,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([ID]),c.qOj,c.TTD]}),n})(),RD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Ps]]}),n})(),PD=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:hd,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[RD]}),n})();const FD=new c.OlP("cdk-dir-doc",{providedIn:"root",factory:function LD(){return(0,c.f3M)(ce)}}),VD=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let m_=(()=>{class n{constructor(t){if(this.value="ltr",this.change=new c.vpe,t){const i=t.documentElement?t.documentElement.dir:null;this.value=function W0(n){const e=(null==n?void 0:n.toLowerCase())||"";return"auto"===e&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?VD.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||i||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(FD,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Jh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();var Gt=F(7579),wa=F(727);class qo extends Gt.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function mt(...n){const e=(0,xs.yG)(n);return(0,mn.D)(n,e)}function gg(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}var Kr=F(8505),tu=F(4986),_r=F(4482);function A_(n,e=tu.z){return(0,_r.e)((t,r)=>{let i=null,s=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const y=s;s=null,r.next(y)}};function p(){const y=u+n,C=e.now();if(C<y)return i=this.schedule(void 0,y-C),void r.add(i);h()}t.subscribe(new nn.Q(r,y=>{s=y,u=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}function Ar(n,e){return(0,_r.e)((t,r)=>{let i=0;t.subscribe(new nn.Q(r,s=>n.call(e,s,i++)&&r.next(s)))})}var Fs=F(4671);function mg(n,e=Fs.y){return n=null!=n?n:pS,(0,_r.e)((t,r)=>{let i,s=!0;t.subscribe(new nn.Q(r,u=>{const h=e(u);(s||!n(i,h))&&(s=!1,i=h,r.next(u))}))})}function pS(n,e){return n===e}var nf=F(5032);function dc(n){return(0,_r.e)((e,t)=>{(0,Tr.Xf)(n).subscribe(new nn.Q(t,()=>t.complete(),nf.Z)),!t.closed&&e.subscribe(t)})}class k_ extends class _w{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Gt.x,this._typeaheadSubscription=wa.w0.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new Gt.x,this.change=new Gt.x,e instanceof c.n_E&&e.changes.subscribe(t=>{if(this._activeItem){const i=t.toArray().indexOf(this._activeItem);i>-1&&i!==this._activeItemIndex&&(this._activeItemIndex=i)}})}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,Kr.b)(t=>this._pressedLetters.push(t)),A_(e),Ar(()=>this._pressedLetters.length>0),(0,ot.U)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let i=1;i<r.length+1;i++){const s=(this._activeItemIndex+i)%r.length,u=r[s];if(!this._skipPredicateFn(u)&&0===u.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,i=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&i){this.setNextItemActive();break}return;case 38:if(this._vertical&&i){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&i){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&i){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&i){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&i){this.setLastItemActive();break}return;default:return void((i||gg(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e),i=t[r];this._activeItem=null==i?null:i,this._activeItemIndex=r}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const i=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof c.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function R_(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function P_(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Iw=new c.OlP("cdk-input-modality-detector-options"),wS={ignoreKeys:[18,17,224,91,16]},md=Ds({passive:!0,capture:!0});let ES=(()=>{class n{constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new qo(null),this._lastTouchMs=0,this._onKeydown=u=>{var h,p;(null===(p=null===(h=this._options)||void 0===h?void 0:h.ignoreKeys)||void 0===p?void 0:p.some(y=>y===u.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=As(u))},this._onMousedown=u=>{Date.now()-this._lastTouchMs<650||(this._modality.next(R_(u)?"keyboard":"mouse"),this._mostRecentTarget=As(u))},this._onTouchstart=u=>{P_(u)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=As(u))},this._options=Object.assign(Object.assign({},wS),s),this.modalityDetected=this._modality.pipe(function fS(n){return Ar((e,t)=>n<=t)}(1)),this.modalityChanged=this.modalityDetected.pipe(mg()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,md),i.addEventListener("mousedown",this._onMousedown,md),i.addEventListener("touchstart",this._onTouchstart,md)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,md),document.removeEventListener("mousedown",this._onMousedown,md),document.removeEventListener("touchstart",this._onTouchstart,md))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Vr),c.LFG(c.R0b),c.LFG(ce),c.LFG(Iw,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const IS=new c.OlP("cdk-focus-monitor-default-options"),_g=Ds({passive:!0,capture:!0});let Sw=(()=>{class n{constructor(t,r,i,s,u){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Gt.x,this._rootNodeFocusAndBlurListener=h=>{const p=As(h),y="focus"===h.type?this._onFocus:this._onBlur;for(let C=p;C;C=C.parentElement)y.call(this,h,C)},this._document=s,this._detectionMode=(null==u?void 0:u.detectionMode)||0}monitor(t,r=!1){const i=lr(t);if(!this._platform.isBrowser||1!==i.nodeType)return mt(null);const s=function $i(n){if(function ec(){if(null==dl){const n="undefined"!=typeof document?document.head:null;dl=!(!n||!n.createShadowRoot&&!n.attachShadow)}return dl}()){const e=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),u=this._elementInfo.get(i);if(u)return r&&(u.checkChildren=!0),u.subject;const h={checkChildren:r,subject:new Gt.x,rootNode:s};return this._elementInfo.set(i,h),this._registerGlobalListeners(h),h.subject}stopMonitoring(t){const r=lr(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=lr(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([h,p])=>this._originChanged(h,r,p)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=As(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i.subject,null))}_emitOrigin(t,r){this._ngZone.run(()=>t.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,_g),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,_g)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(dc(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,_g),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,_g),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(Vr),c.LFG(ES),c.LFG(ce,8),c.LFG(IS,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Aw="cdk-high-contrast-black-on-white",Mw="cdk-high-contrast-white-on-black",F_="cdk-high-contrast-active";let L_=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(F_),t.remove(Aw),t.remove(Mw),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(F_),t.add(Aw)):2===r&&(t.add(F_),t.add(Mw))}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Vr),c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class xw{}const Wo="*";function V_(n,e){return{type:7,name:n,definitions:e,options:{}}}function _d(n,e=null){return{type:4,styles:e,timings:n}}function U_(n,e=null){return{type:2,steps:n,options:e}}function yl(n){return{type:6,styles:n,offset:null}}function B_(n,e,t){return{type:0,name:n,styles:e,options:t}}function j_(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function H_(n){Promise.resolve(null).then(n)}class ms{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){H_(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class cf{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?H_(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==s&&this._onFinish()}),u.onDestroy(()=>{++r==s&&this._onDestroy()}),u.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function Rw(){return"undefined"!=typeof window&&void 0!==window.document}function Pw(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Ca(n){switch(n.length){case 0:return new ms;case 1:return n[0];default:return new cf(n)}}function z_(n,e,t,r,i={},s={}){const u=[],h=[];let p=-1,y=null;if(r.forEach(C=>{const D=C.offset,R=D==p,L=R&&y||{};Object.keys(C).forEach(j=>{let ie=j,Ae=C[j];if("offset"!==j)switch(ie=e.normalizePropertyName(ie,u),Ae){case"!":Ae=i[j];break;case Wo:Ae=s[j];break;default:Ae=e.normalizeStyleValue(j,ie,Ae,u)}L[ie]=Ae}),R||h.push(L),y=L,p=D}),u.length){const C="\n - ";throw new Error(`Unable to animate due to the following errors:${C}${u.join(C)}`)}return h}function uf(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&nu(t,"start",n)));break;case"done":n.onDone(()=>r(t&&nu(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&nu(t,"destroy",n)))}}function nu(n,e,t){const r=t.totalTime,s=q_(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(s._data=u),s}function q_(n,e,t,r,i="",s=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!u}}function Gi(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function G_(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let vg=(n,e)=>!1,W_=(n,e,t)=>[];(Pw()||"undefined"!=typeof Element)&&(vg=Rw()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),W_=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let ru=null,Nw=!1;function bg(n){ru||(ru=function yd(){return"undefined"!=typeof document?document.body:null}()||{},Nw=!!ru.style&&"WebkitAppearance"in ru.style);let e=!0;return ru.style&&!function Z_(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in ru.style,!e&&Nw&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in ru.style)),e}const wg=vg,K_=W_;function Fw(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let iu=(()=>{class n{validateStyleProperty(t){return bg(t)}matchesElement(t,r){return!1}containsElement(t,r){return wg(t,r)}query(t,r,i){return K_(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,u,h=[],p){return new ms(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Y_=(()=>{class n{}return n.NOOP=new iu,n})();const _s="ng-enter",vd="ng-leave",df="ng-trigger",hf=".ng-trigger",Q_="ng-animating",Eg=".ng-animating";function su(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:X_(parseFloat(e[1]),e[2])}function X_(n,e){return"s"===e?1e3*n:n}function Cg(n,e,t){return n.hasOwnProperty("duration")?n:function OS(n,e,t){let i,s=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=X_(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=X_(parseFloat(p),h[4]));const y=h[5];y&&(u=y)}else i=n;if(!t){let h=!1,p=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),h=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),h=!0),h&&e.splice(p,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:s,easing:u}}(n,e,t)}function ou(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function vl(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else ou(n,t);return t}function Vw(n,e,t){return t?e+":"+t+";":""}function Uw(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=Vw(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=Vw(0,jw(t),n.style[t]));n.setAttribute("style",e)}function bl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=Bw(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),Pw()&&Uw(n))}function bd(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=Bw(t);n.style[r]=""}),Pw()&&Uw(n))}function au(n){return Array.isArray(n)?1==n.length?n[0]:U_(n):n}const Ig=new RegExp("{{\\s*(.+?)\\s*}}","g");function J_(n){let e=[];if("string"==typeof n){let t;for(;t=Ig.exec(n);)e.push(t[1]);Ig.lastIndex=0}return e}function ey(n,e,t){const r=n.toString(),i=r.replace(Ig,(s,u)=>{let h=e[u];return e.hasOwnProperty(u)||(t.push(`Please provide a value for the animation param ${u}`),h=""),h.toString()});return i==r?n:i}function ys(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const XN=/-+([a-z0-9])/g;function Bw(n){return n.replace(XN,(...e)=>e[1].toUpperCase())}function jw(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ty(n,e){return 0===n||0===e}function ny(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let s=e[0],u=[];if(r.forEach(h=>{s.hasOwnProperty(h)||u.push(h),s[h]=t[h]}),u.length)for(var i=1;i<e.length;i++){let h=e[i];u.forEach(function(p){h[p]=Hw(n,p)})}}return e}function Ls(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Hw(n,e){return window.getComputedStyle(n)[e]}function ry(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function NS(n,e,t){if(":"==n[0]){const p=function iy(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],s=r[2],u=r[3];e.push($w(i,u));"<"==s[0]&&!("*"==i&&"*"==u)&&e.push($w(u,i))}(r,t,e)):t.push(n),t}const Tg=new Set(["true","1"]),Dg=new Set(["false","0"]);function $w(n,e){const t=Tg.has(n)||Dg.has(n),r=Tg.has(e)||Dg.has(e);return(i,s)=>{let u="*"==n||n==i,h="*"==e||e==s;return!u&&t&&"boolean"==typeof i&&(u=i?Tg.has(n):Dg.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?Tg.has(e):Dg.has(e)),u&&h}}const FS=new RegExp("s*:selfs*,?","g");function sy(n,e,t){return new wd(n).build(e,t)}class wd{constructor(e){this._driver=e}build(e,t){const r=new VS(t);return this._resetContextStyleTimingState(r),Ls(this,au(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,y=p.name;y.toString().split(/\s*,\s*/).forEach(C=>{p.name=C,s.push(this.visitState(p,t))}),p.name=y}else if(1==h.type){const p=this.visitTransition(h,t);r+=p.queryCount,i+=p.depCount,u.push(p)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,u=i||{};if(r.styles.forEach(h=>{if(Ed(h)){const p=h;Object.keys(p).forEach(y=>{J_(p[y]).forEach(C=>{u.hasOwnProperty(C)||s.add(C)})})}}),s.size){const h=ys(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${h.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Ls(this,au(e.animation),t);return{type:1,matchers:ry(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Zo(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Ls(this,r,t)),options:Zo(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(u=>{t.currentTime=r;const h=Ls(this,u,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:Zo(e.options)}}visitAnimate(e,t){const r=function Ia(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return Yr(Cg(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Yr(0,0,"");return s.dynamic=!0,s.strValue=r,s}return t=t||Cg(r,e),Yr(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:yl({});if(5==s.type)i=this.visitKeyframes(s,t);else{let u=e.styles,h=!1;if(!u){h=!0;const y={};r.easing&&(y.easing=r.easing),u=yl(y)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(u,t);p.isEmptyStep=h,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==Wo?r.push(u):t.errors.push(`The provided style string value ${u} is not allowed.`):r.push(u)}):r.push(e.styles);let i=!1,s=null;return r.forEach(u=>{if(Ed(u)){const h=u,p=h.easing;if(p&&(s=p,delete h.easing),!i)for(let y in h)if(h[y].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void t.errors.push(`The provided animation property "${h}" is not a supported CSS property for animations`);const p=t.collectedStyles[t.currentQuerySelector],y=p[h];let C=!0;y&&(s!=i&&s>=y.startTime&&i<=y.endTime&&(t.errors.push(`The CSS property "${h}" that exists between the times of "${y.startTime}ms" and "${y.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${i}ms"`),C=!1),s=y.startTime),C&&(p[h]={startTime:s,endTime:i}),t.options&&function PS(n,e,t){const r=e.params||{},i=J_(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(u[h],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let s=0;const u=[];let h=!1,p=!1,y=0;const C=e.steps.map(tt=>{const dt=this._makeStyleAst(tt,t);let At=null!=dt.offset?dt.offset:function US(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(Ed(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(Ed(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(dt.styles),_t=0;return null!=At&&(s++,_t=dt.offset=At),p=p||_t<0||_t>1,h=h||_t<y,y=_t,u.push(_t),dt});p&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),h&&t.errors.push("Please ensure that all keyframe offsets are in order");const D=e.steps.length;let R=0;s>0&&s<D?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(R=1/(D-1));const L=D-1,j=t.currentTime,ie=t.currentAnimateTimings,Ae=ie.duration;return C.forEach((tt,dt)=>{const At=R>0?dt==L?1:R*dt:u[dt],_t=At*Ae;t.currentTime=j+ie.delay+_t,ie.duration=_t,this._validateStyleAst(tt,t),tt.offset=At,r.styles.push(tt)}),r}visitReference(e,t){return{type:8,animation:Ls(this,au(e.animation),t),options:Zo(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Zo(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Zo(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,u]=function LS(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(FS,"")),n=n.replace(/@\*/g,hf).replace(/@\w+/g,t=>hf+"-"+t.substr(1)).replace(/:animating/g,Eg),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Gi(t.collectedStyles,t.currentQuerySelector,{});const h=Ls(this,au(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:Zo(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Cg(e.timings,t.errors,!0);return{type:12,animation:Ls(this,au(e.animation),t),timings:r,options:null}}}class VS{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ed(n){return!Array.isArray(n)&&"object"==typeof n}function Zo(n){return n?(n=ou(n)).params&&(n.params=function gf(n){return n?ou(n):null}(n.params)):n={},n}function Yr(n,e,t){return{duration:n,delay:e,easing:t}}function wl(n,e,t,r,i,s,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:u,subTimeline:h}}class lu{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Cd=new RegExp(":enter","g"),Td=new RegExp(":leave","g");function hc(n,e,t,r,i,s={},u={},h,p,y=[]){return(new Dd).buildKeyframes(n,e,t,r,i,s,u,h,p,y)}class Dd{buildKeyframes(e,t,r,i,s,u,h,p,y,C=[]){y=y||new lu;const D=new fc(e,t,y,i,s,C,[]);D.options=p,D.currentTimeline.setStyles([u],null,D.errors,p),Ls(this,r,D);const R=D.timelines.filter(L=>L.containsAnimation());if(Object.keys(h).length){let L;for(let j=R.length-1;j>=0;j--){const ie=R[j];if(ie.element===t){L=ie;break}}L&&!L.allowOnlyTimelineStyles()&&L.setStyles([h],null,D.errors,p)}return R.length?R.map(L=>L.buildKeyframes()):[wl(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);s!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const u=null!=r.duration?su(r.duration):null,h=null!=r.delay?su(r.delay):null;return 0!==u&&e.forEach(p=>{const y=t.appendInstructionToTimeline(p,u,h);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ls(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=El);const u=su(s.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Ls(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?su(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),Ls(this,u,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Cg(t.params?ey(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?su(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=El);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((y,C)=>{t.currentQueryIndex=C;const D=t.createSubContext(e.options,y);s&&D.delayNextStep(s),y===t.element&&(p=D.currentTimeline),Ls(this,e.animation,D),D.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,D.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,u=Math.abs(s.duration),h=u*(t.currentQueryTotal-1);let p=u*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const C=t.currentTimeline;p&&C.delayNextStep(p);const D=C.currentTime;Ls(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-D+(i.startTime-r.currentTimeline.startTime)}}const El={};class fc{constructor(e,t,r,i,s,u,h,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=El,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new Cl(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=su(r.duration)),null!=r.delay&&(i.delay=su(r.delay));const s=r.params;if(s){let u=i.params;u||(u=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=ey(s[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new fc(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=El,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},s=new Sd(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,u){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(Cd,"."+this._enterClassName)).replace(Td,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=r);0!==r&&(y=r<0?y.slice(y.length+r,y.length):y.slice(0,r)),h.push(...y)}return!s&&0==h.length&&u.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),h}}class Cl{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Cl(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Wo,this._currentKeyframe[t]=Wo}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},u=function qw(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(s=>{t[s]=Wo})):vl(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(h=>{const p=ey(u[h],s,r);this._pendingStyles[h]=p,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:Wo),this._updateStyle(h,p)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,p)=>{const y=vl(h,!0);Object.keys(y).forEach(C=>{const D=y[C];"!"==D?e.add(C):D==Wo&&t.add(C)}),r||(y.offset=p/this.duration),i.push(y)});const s=e.size?ys(e.values()):[],u=t.size?ys(t.values()):[];if(r){const h=i[0],p=ou(h);h.offset=0,p.offset=1,i=[h,p]}return wl(this.element,i,s,u,this.duration,this.startTime,this.easing,!1)}}class Sd extends Cl{constructor(e,t,r,i,s,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],u=r+t,h=t/u,p=vl(e[0],!1);p.offset=0,s.push(p);const y=vl(e[0],!1);y.offset=ay(h),s.push(y);const C=e.length-1;for(let D=1;D<=C;D++){let R=vl(e[D],!1);R.offset=ay((t+R.offset*r)/u),s.push(R)}r=u,t=0,i="",e=s}return wl(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function ay(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class Sg{}class Gw extends Sg{normalizePropertyName(e,t){return Bw(e)}normalizeStyleValue(e,t,r,i){let s="";const u=r.toString().trim();if(Ww[t]&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return u+s}}const Ww=(()=>function Zw(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function ly(n,e,t,r,i,s,u,h,p,y,C,D,R){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:u,timelines:h,queriedElements:p,preStyleProps:y,postStyleProps:C,totalTime:D,errors:R}}const cy={};class uy{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function HS(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],s=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return s?s.buildStyles(t,r):u}build(e,t,r,i,s,u,h,p,y,C){const D=[],R=this.ast.options&&this.ast.options.params||cy,j=this.buildStyles(r,h&&h.params||cy,D),ie=p&&p.params||cy,Ae=this.buildStyles(i,ie,D),tt=new Set,dt=new Map,At=new Map,_t="void"===i,In={params:Object.assign(Object.assign({},R),ie)},Or=C?[]:hc(e,t,this.ast.animation,s,u,j,Ae,In,y,D);let ii=0;if(Or.forEach(Pu=>{ii=Math.max(Pu.duration+Pu.delay,ii)}),D.length)return ly(t,this._triggerName,r,i,_t,j,Ae,[],[],dt,At,ii,D);Or.forEach(Pu=>{const Nu=Pu.element,v3=Gi(dt,Nu,{});Pu.preStyleProps.forEach(Up=>v3[Up]=!0);const R0=Gi(At,Nu,{});Pu.postStyleProps.forEach(Up=>R0[Up]=!0),Nu!==t&&tt.add(Nu)});const Ru=ys(tt.values());return ly(t,this._triggerName,r,i,_t,j,Ae,Or,Ru,dt,At,ii)}}class Kw{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=ou(this.defaultParams);return Object.keys(e).forEach(s=>{const u=e[s];null!=u&&(i[s]=u)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const u=s;Object.keys(u).forEach(h=>{let p=u[h];p.length>1&&(p=ey(p,i,t));const y=this.normalizer.normalizePropertyName(h,t);p=this.normalizer.normalizeStyleValue(h,y,p,t),r[y]=p})}}),r}}class $S{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new Kw(i.style,i.options&&i.options.params||{},r)}),dy(this.states,"true","1"),dy(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new uy(e,i,this.states))}),this.fallbackTransition=function zS(n,e,t){return new uy(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function dy(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const qS=new lu;class Qw{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=sy(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,s=z_(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations[e];let u;const h=new Map;if(s?(u=hc(this._driver,t,s,_s,vd,{},{},r,qS,i),u.forEach(C=>{const D=Gi(h,C.element,{});C.postStyleProps.forEach(R=>D[R]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),u=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);h.forEach((C,D)=>{Object.keys(C).forEach(R=>{C[R]=this._driver.computeStyle(D,R,Wo)})});const y=Ca(u.map(C=>{const D=h.get(C.element);return this._buildPlayer(C,{},D)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const s=q_(t,"","","");return uf(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Xw="ng-animate-queued",Jw="ng-animate-disabled",ZS=[],KS={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},JN={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ko="__ng_removed";class py{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function QS(n){return null!=n?n:null}(r?e.value:e),r){const s=ou(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Ad="void",eE=new py(Ad);class YS{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,go(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function Ag(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);const s=Gi(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};s.push(u);const h=Gi(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(go(e,df),go(e,df+"-"+t),h[t]=eE),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(u);p>=0&&s.splice(p,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),u=new gy(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(go(e,df),go(e,df+"-"+t),this._engine.statesByElement.set(e,h={}));let p=h[t];const y=new py(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&y.absorbOptions(p.options),h[t]=y,p||(p=eE),y.value!==Ad&&p.value===y.value){if(!function eA(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,y.params)){const ie=[],Ae=s.matchStyles(p.value,p.params,ie),tt=s.matchStyles(y.value,y.params,ie);ie.length?this._engine.reportError(ie):this._engine.afterFlush(()=>{bd(e,Ae),bl(e,tt)})}return}const R=Gi(this._engine.playersByElement,e,[]);R.forEach(ie=>{ie.namespaceId==this.id&&ie.triggerName==t&&ie.queued&&ie.destroy()});let L=s.matchTransition(p.value,y.value,e,y.params),j=!1;if(!L){if(!i)return;L=s.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:L,fromState:p,toState:y,player:u,isFallbackTransition:j}),j||(go(e,Xw),u.onStart(()=>{xd(e,Xw)})),u.onDone(()=>{let ie=this.players.indexOf(u);ie>=0&&this.players.splice(ie,1);const Ae=this._engine.playersByElement.get(e);if(Ae){let tt=Ae.indexOf(u);tt>=0&&Ae.splice(tt,1)}}),this.players.push(u),R.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,hf,!0);r.forEach(i=>{if(i[Ko])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),u=new Map;if(s){const h=[];if(Object.keys(s).forEach(p=>{if(u.set(p,s[p].value),this._triggers[p]){const y=this.trigger(e,p,Ad,i);y&&h.push(y)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&Ca(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const u=s.name;if(i.has(u))return;i.add(u);const p=this._triggers[u].fallbackTransition,y=r[u]||eE,C=new py(Ad),D=new gy(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:p,fromState:y,toState:C,player:D,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ko];(!s||s===KS)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){go(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,u=this._elementListeners.get(s);u&&u.forEach(h=>{if(h.name==r.triggerName){const p=q_(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,uf(r.player,h.phase,p,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Md{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new YS(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let s=r;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let s=0;s<i.length;s++){const u=r[i[s]].namespaceId;if(u){const h=this._fetchNamespace(u);h&&t.add(h)}}}return t}trigger(e,t,r,i){if(mf(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!mf(t))return;const s=t[Ko];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),go(e,Jw)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),xd(e,Jw))}removeNode(e,t,r,i){if(mf(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[Ko]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return mf(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,hf,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Eg,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Ca(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Ko];if(r&&r.setForRemoval){if(e[Ko]=KS,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(Jw))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)go(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Ca(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new lu,i=[],s=new Map,u=[],h=new Map,p=new Map,y=new Map,C=new Set;this.disabledNodes.forEach(pt=>{C.add(pt);const Tt=this.driver.query(pt,".ng-animate-queued",!0);for(let Mt=0;Mt<Tt.length;Mt++)C.add(Tt[Mt])});const D=this.bodyNode,R=Array.from(this.statesByElement.keys()),L=rE(R,this.collectedEnterElements),j=new Map;let ie=0;L.forEach((pt,Tt)=>{const Mt=_s+ie++;j.set(Tt,Mt),pt.forEach(yn=>go(yn,Mt))});const Ae=[],tt=new Set,dt=new Set;for(let pt=0;pt<this.collectedLeaveElements.length;pt++){const Tt=this.collectedLeaveElements[pt],Mt=Tt[Ko];Mt&&Mt.setForRemoval&&(Ae.push(Tt),tt.add(Tt),Mt.hasAnimation?this.driver.query(Tt,".ng-star-inserted",!0).forEach(yn=>tt.add(yn)):dt.add(Tt))}const At=new Map,_t=rE(R,Array.from(tt));_t.forEach((pt,Tt)=>{const Mt=vd+ie++;At.set(Tt,Mt),pt.forEach(yn=>go(yn,Mt))}),e.push(()=>{L.forEach((pt,Tt)=>{const Mt=j.get(Tt);pt.forEach(yn=>xd(yn,Mt))}),_t.forEach((pt,Tt)=>{const Mt=At.get(Tt);pt.forEach(yn=>xd(yn,Mt))}),Ae.forEach(pt=>{this.processLeaveNode(pt)})});const In=[],Or=[];for(let pt=this._namespaceList.length-1;pt>=0;pt--)this._namespaceList[pt].drainQueuedTransitions(t).forEach(Mt=>{const yn=Mt.player,Ni=Mt.element;if(In.push(yn),this.collectedEnterElements.length){const Qs=Ni[Ko];if(Qs&&Qs.setForMove){if(Qs.previousTriggersValues&&Qs.previousTriggersValues.has(Mt.triggerName)){const Bp=Qs.previousTriggersValues.get(Mt.triggerName),bh=this.statesByElement.get(Mt.element);bh&&bh[Mt.triggerName]&&(bh[Mt.triggerName].value=Bp)}return void yn.destroy()}}const Sc=!D||!this.driver.containsElement(D,Ni),aa=At.get(Ni),vh=j.get(Ni),wr=this._buildInstruction(Mt,r,vh,aa,Sc);if(wr.errors&&wr.errors.length)return void Or.push(wr);if(Sc)return yn.onStart(()=>bd(Ni,wr.fromStyles)),yn.onDestroy(()=>bl(Ni,wr.toStyles)),void i.push(yn);if(Mt.isFallbackTransition)return yn.onStart(()=>bd(Ni,wr.fromStyles)),yn.onDestroy(()=>bl(Ni,wr.toStyles)),void i.push(yn);const E3=[];wr.timelines.forEach(Qs=>{Qs.stretchStartingKeyframe=!0,this.disabledNodes.has(Qs.element)||E3.push(Qs)}),wr.timelines=E3,r.append(Ni,wr.timelines),u.push({instruction:wr,player:yn,element:Ni}),wr.queriedElements.forEach(Qs=>Gi(h,Qs,[]).push(yn)),wr.preStyleProps.forEach((Qs,Bp)=>{const bh=Object.keys(Qs);if(bh.length){let jp=p.get(Bp);jp||p.set(Bp,jp=new Set),bh.forEach(nN=>jp.add(nN))}}),wr.postStyleProps.forEach((Qs,Bp)=>{const bh=Object.keys(Qs);let jp=y.get(Bp);jp||y.set(Bp,jp=new Set),bh.forEach(nN=>jp.add(nN))})});if(Or.length){const pt=[];Or.forEach(Tt=>{pt.push(`@${Tt.triggerName} has failed due to:\n`),Tt.errors.forEach(Mt=>pt.push(`- ${Mt}\n`))}),In.forEach(Tt=>Tt.destroy()),this.reportError(pt)}const ii=new Map,Ru=new Map;u.forEach(pt=>{const Tt=pt.element;r.has(Tt)&&(Ru.set(Tt,Tt),this._beforeAnimationBuild(pt.player.namespaceId,pt.instruction,ii))}),i.forEach(pt=>{const Tt=pt.element;this._getPreviousPlayers(Tt,!1,pt.namespaceId,pt.triggerName,null).forEach(yn=>{Gi(ii,Tt,[]).push(yn),yn.destroy()})});const Pu=Ae.filter(pt=>yy(pt,p,y)),Nu=new Map;my(Nu,this.driver,dt,y,Wo).forEach(pt=>{yy(pt,p,y)&&Pu.push(pt)});const R0=new Map;L.forEach((pt,Tt)=>{my(R0,this.driver,new Set(pt),p,"!")}),Pu.forEach(pt=>{const Tt=Nu.get(pt),Mt=R0.get(pt);Nu.set(pt,Object.assign(Object.assign({},Tt),Mt))});const Up=[],b3=[],w3={};u.forEach(pt=>{const{element:Tt,player:Mt,instruction:yn}=pt;if(r.has(Tt)){if(C.has(Tt))return Mt.onDestroy(()=>bl(Tt,yn.toStyles)),Mt.disabled=!0,Mt.overrideTotalTime(yn.totalTime),void i.push(Mt);let Ni=w3;if(Ru.size>1){let aa=Tt;const vh=[];for(;aa=aa.parentNode;){const wr=Ru.get(aa);if(wr){Ni=wr;break}vh.push(aa)}vh.forEach(wr=>Ru.set(wr,Ni))}const Sc=this._buildAnimation(Mt.namespaceId,yn,ii,s,R0,Nu);if(Mt.setRealPlayer(Sc),Ni===w3)Up.push(Mt);else{const aa=this.playersByElement.get(Ni);aa&&aa.length&&(Mt.parentPlayer=Ca(aa)),i.push(Mt)}}else bd(Tt,yn.fromStyles),Mt.onDestroy(()=>bl(Tt,yn.toStyles)),b3.push(Mt),C.has(Tt)&&i.push(Mt)}),b3.forEach(pt=>{const Tt=s.get(pt.element);if(Tt&&Tt.length){const Mt=Ca(Tt);pt.setRealPlayer(Mt)}}),i.forEach(pt=>{pt.parentPlayer?pt.syncPlayerEvents(pt.parentPlayer):pt.destroy()});for(let pt=0;pt<Ae.length;pt++){const Tt=Ae[pt],Mt=Tt[Ko];if(xd(Tt,vd),Mt&&Mt.hasAnimation)continue;let yn=[];if(h.size){let Sc=h.get(Tt);Sc&&Sc.length&&yn.push(...Sc);let aa=this.driver.query(Tt,Eg,!0);for(let vh=0;vh<aa.length;vh++){let wr=h.get(aa[vh]);wr&&wr.length&&yn.push(...wr)}}const Ni=yn.filter(Sc=>!Sc.destroyed);Ni.length?XS(this,Tt,Ni):this.processLeaveNode(Tt)}return Ae.length=0,Up.forEach(pt=>{this.players.push(pt),pt.onDone(()=>{pt.destroy();const Tt=this.players.indexOf(pt);this.players.splice(Tt,1)}),pt.play()}),Up}elementContainsData(e,t){let r=!1;const i=t[Ko];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const p=!s||s==Ad;h.forEach(y=>{y.queued||!p&&y.triggerName!=i||u.push(y)})}}return(r||i)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const s=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const y=p.element,C=y!==s,D=Gi(r,y,[]);this._getPreviousPlayers(y,C,u,h,t.toState).forEach(L=>{const j=L.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),L.destroy(),D.push(L)})}bd(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,u){const h=t.triggerName,p=t.element,y=[],C=new Set,D=new Set,R=t.timelines.map(j=>{const ie=j.element;C.add(ie);const Ae=ie[Ko];if(Ae&&Ae.removedBeforeQueried)return new ms(j.duration,j.delay);const tt=ie!==p,dt=function JS(n){const e=[];return _y(n,e),e}((r.get(ie)||ZS).map(ii=>ii.getRealPlayer())).filter(ii=>!!ii.element&&ii.element===ie),At=s.get(ie),_t=u.get(ie),In=z_(0,this._normalizer,0,j.keyframes,At,_t),Or=this._buildPlayer(j,In,dt);if(j.subTimeline&&i&&D.add(ie),tt){const ii=new gy(e,h,ie);ii.setRealPlayer(Or),y.push(ii)}return Or});y.forEach(j=>{Gi(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function tE(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,j.element,j))}),C.forEach(j=>go(j,Q_));const L=Ca(R);return L.onDestroy(()=>{C.forEach(j=>xd(j,Q_)),bl(p,t.toStyles)}),D.forEach(j=>{Gi(i,j,[]).push(L)}),L}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new ms(e.duration,e.delay)}}class gy{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new ms,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>uf(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Gi(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function mf(n){return n&&1===n.nodeType}function nE(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function my(n,e,t,r,i){const s=[];t.forEach(p=>s.push(nE(p)));const u=[];r.forEach((p,y)=>{const C={};p.forEach(D=>{const R=C[D]=e.computeStyle(y,D,i);(!R||0==R.length)&&(y[Ko]=JN,u.push(y))}),n.set(y,C)});let h=0;return t.forEach(p=>nE(p,s[h++])),u}function rE(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),s=new Map;function u(h){if(!h)return 1;let p=s.get(h);if(p)return p;const y=h.parentNode;return p=t.has(y)?y:i.has(y)?1:u(y),s.set(h,p),p}return e.forEach(h=>{const p=u(h);1!==p&&t.get(p).push(h)}),t}function go(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function xd(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function XS(n,e,t){Ca(t).onDone(()=>n.processLeaveNode(e))}function _y(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof cf?_y(r.players,e):e.push(r)}}function yy(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class _f{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Md(e,t,r),this._timelineEngine=new Qw(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const u=e+"-"+i;let h=this._triggerCache[u];if(!h){const p=[],y=sy(this._driver,s,p);if(p.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${p.join("\n - ")}`);h=function Yw(n,e,t){return new $S(n,e,t)}(i,y,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,u]=G_(r);this._timelineEngine.command(s,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[u,h]=G_(r);return this._timelineEngine.listen(u,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Mg(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=yf(e[0]),e.length>1&&(r=yf(e[e.length-1]))):e&&(t=yf(e)),t||r?new e1(n,t,r):null}let e1=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&bl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(bl(this._element,this._initialStyles),this._endStyles&&(bl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(bd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(bd(this._element,this._endStyles),this._endStyles=null),bl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function yf(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];tA(i)&&(e=e||{},e[i]=n[i])}return e}function tA(n){return"display"===n||"position"===n}const kd="animation",vy="animationend";class wy{constructor(e,t,r,i,s,u,h){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=s,this._fillMode=u,this._onDoneFn=h,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=p=>this._handleCallback(p)}apply(){(function Ey(n,e){const t=vf(n,"").trim();let r=0;t.length&&(r=function aE(n,e){let t=0;for(let r=0;r<n.length;r++)n.charAt(r)===e&&t++;return t}(t,",")+1,e=`${t}, ${e}`),Od(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),oE(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){iE(this._element,this._name,"paused")}resume(){iE(this._element,this._name,"running")}setPosition(e){const t=Iy(this._element,this._name);this._position=e*this._duration,Od(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),oE(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function Cy(n,e){const r=vf(n,"").split(","),i=sE(r,e);i>=0&&(r.splice(i,1),Od(n,"",r.join(",")))}(this._element,this._name))}}function iE(n,e,t){Od(n,"PlayState",t,Iy(n,e))}function Iy(n,e){const t=vf(n,"");return t.indexOf(",")>0?sE(t.split(","),e):sE([t],e)}function sE(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function oE(n,e,t){t?n.removeEventListener(vy,e):n.addEventListener(vy,e)}function Od(n,e,t,r){const i=kd+e;if(null!=r){const s=n.style[i];if(s.length){const u=s.split(",");u[r]=t,t=u.join(",")}}n.style[i]=t}function vf(n,e){return n.style[kd+e]||""}class Dy{constructor(e,t,r,i,s,u,h,p){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=s,this._finalStyles=h,this._specialStyles=p,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=i+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new wy(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:Hw(this.element,r))})}this.currentSnapshot=e}}class cE extends ms{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=Fw(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class uE{constructor(){this._count=0}validateStyleProperty(e){return bg(e)}matchesElement(e,t){return!1}containsElement(e,t){return wg(e,t)}query(e,t,r){return K_(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(h=>Fw(h));let i=`@keyframes ${t} {\n`,s="";r.forEach(h=>{s=" ";const p=parseFloat(h.offset);i+=`${s}${100*p}% {\n`,s+=" ",Object.keys(h).forEach(y=>{const C=h[y];switch(y){case"offset":return;case"easing":return void(C&&(i+=`${s}animation-timing-function: ${C};\n`));default:return void(i+=`${s}${y}: ${C};\n`)}}),i+=`${s}}\n`}),i+="}\n";const u=document.createElement("style");return u.textContent=i,u}animate(e,t,r,i,s,u=[],h){const p=u.filter(Ae=>Ae instanceof Dy),y={};ty(r,i)&&p.forEach(Ae=>{let tt=Ae.currentSnapshot;Object.keys(tt).forEach(dt=>y[dt]=tt[dt])});const C=function hE(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=ny(e,t,y));if(0==r)return new cE(e,C);const D="gen_css_kf_"+this._count++,R=this.buildKeyframeElement(e,D,t);(function dE(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(R);const j=Mg(e,t),ie=new Dy(e,t,D,r,i,s,C,j);return ie.onDestroy(()=>function My(n){n.parentNode.removeChild(n)}(R)),ie}}class ky{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:Hw(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class fE{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(xg().toString()),this._cssKeyframesDriver=new uE}validateStyleProperty(e){return bg(e)}matchesElement(e,t){return!1}containsElement(e,t){return wg(e,t)}query(e,t,r){return K_(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,s,u=[],h){if(!h&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,s,u);const C={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(C.easing=s);const D={},R=u.filter(j=>j instanceof ky);ty(r,i)&&R.forEach(j=>{let ie=j.currentSnapshot;Object.keys(ie).forEach(Ae=>D[Ae]=ie[Ae])});const L=Mg(e,t=ny(e,t=t.map(j=>vl(j,!1)),D));return new ky(e,t,C,L)}}function xg(){return Rw()&&Element.prototype.animate||{}}let pE=(()=>{class n extends xw{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?U_(t):t;return Ry(this._renderer,null,r,"register",[i]),new gE(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class gE extends class yg{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new mE(this._id,e,t||{},this._renderer)}}class mE{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Ry(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function Ry(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Py="@.disabled";let _E=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,u)=>{const h=null==u?void 0:u.parentNode(s);h&&u.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(s);return C||(C=new Ny("",s,this.engine),this._rendererCache.set(s,C)),C}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=C=>{Array.isArray(C)?C.forEach(p):this.engine.registerTrigger(u,h,t,C.name,C)};return r.data.animation.forEach(p),new r1(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,h]=s;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(_f),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Ny{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Py?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class r1 extends Ny{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Py?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function nA(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),u="";return"@"!=s.charAt(0)&&([s,u]=function rA(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let yE=(()=>{class n extends _f{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce),c.LFG(Y_),c.LFG(Sg))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const wf=new c.OlP("AnimationModuleType"),bE=[{provide:xw,useClass:pE},{provide:Sg,useFactory:function Ur(){return new Gw}},{provide:_f,useClass:yE},{provide:c.FYo,useFactory:function vE(n,e,t){return new _E(n,e,t)},deps:[Lr,_f,c.R0b]}],Fy=[{provide:Y_,useFactory:function iA(){return function Oy(){return"function"==typeof xg()}()?new fE:new uE}},{provide:wf,useValue:"BrowserAnimations"},...bE],sA=[{provide:Y_,useClass:iu},{provide:wf,useValue:"NoopAnimations"},...bE];let wE=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?sA:Fy}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:Fy,imports:[Kl]}),n})();const Ta=new c.OlP("mat-sanity-checks",{providedIn:"root",factory:function Vy(){return!0}});let Vs=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!so()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(L_),c.LFG(Ta,8),c.LFG(ce))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Jh],Jh]}),n})();function mo(n){return class extends n{constructor(...e){super(...e),this._disabled=!1}get disabled(){return this._disabled}set disabled(e){this._disabled=bi(e)}}}function Cf(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function Uy(n){return class extends n{constructor(...e){super(...e),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=bi(e)}}}function lA(n){return class extends n{constructor(...e){super(...e),this.stateChanges=new Gt.x,this.errorState=!1}updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}}}let Hy=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class IE{constructor(e,t,r){this._renderer=e,this.element=t,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const zy={enterDuration:225,exitDuration:150},Og=Ds({passive:!0}),qy=["mousedown","touchstart"],Gy=["mouseup","mouseleave","touchend","touchcancel"];class pA{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=lr(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},zy),r.animation);r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const u=r.radius||function mA(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),h=e-i.left,p=t-i.top,y=s.enterDuration,C=document.createElement("div");C.classList.add("mat-ripple-element"),C.style.left=h-u+"px",C.style.top=p-u+"px",C.style.height=2*u+"px",C.style.width=2*u+"px",null!=r.color&&(C.style.backgroundColor=r.color),C.style.transitionDuration=`${y}ms`,this._containerElement.appendChild(C),function gA(n){window.getComputedStyle(n).getPropertyValue("opacity")}(C),C.style.transform="scale(1)";const D=new IE(this,C,r);return D.state=0,this._activeRipples.add(D),r.persistent||(this._mostRecentTransientRipple=D),this._runTimeoutOutsideZone(()=>{const R=D===this._mostRecentTransientRipple;D.state=1,!r.persistent&&(!R||!this._isPointerDown)&&D.fadeOut()},y),D}fadeOutRipple(e){const t=this._activeRipples.delete(e);if(e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!t)return;const r=e.element,i=Object.assign(Object.assign({},zy),e.config.animation);r.style.transitionDuration=`${i.exitDuration}ms`,r.style.opacity="0",e.state=2,this._runTimeoutOutsideZone(()=>{e.state=3,r.remove()},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=lr(e);!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,this._registerEvents(qy))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(Gy),this._pointerUpEventsRegistered=!0)}_onMousedown(e){const t=R_(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!P_(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_runTimeoutOutsideZone(e,t=0){this._ngZone.runOutsideAngular(()=>setTimeout(e,t))}_registerEvents(e){this._ngZone.runOutsideAngular(()=>{e.forEach(t=>{this._triggerElement.addEventListener(t,this,Og)})})}_removeTriggerEvents(){this._triggerElement&&(qy.forEach(e=>{this._triggerElement.removeEventListener(e,this,Og)}),this._pointerUpEventsRegistered&&Gy.forEach(e=>{this._triggerElement.removeEventListener(e,this,Og)}))}}const _A=new c.OlP("mat-ripple-global-options");let Wy=(()=>{class n{constructor(t,r,i,s,u){this._elementRef=t,this._animationMode=u,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new pA(this,r,t,i)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,Object.assign(Object.assign({},this.rippleConfig),i)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(Vr),c.Y36(_A,8),c.Y36(wf,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&c.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),DE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vs],Vs]}),n})(),Zy=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SE=(()=>{class n{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,r)=>this._cleanupObserver(r))}observe(t){const r=lr(t);return new On.y(i=>{const u=this._observeElement(r).subscribe(i);return()=>{u.unsubscribe(),this._unobserveElement(r)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const r=new Gt.x,i=this._mutationObserverFactory.create(s=>r.next(s));i&&i.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:i,stream:r,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:r,stream:i}=this._observedElements.get(t);r&&r.disconnect(),i.complete(),this._observedElements.delete(t)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Zy))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),AE=(()=>{class n{constructor(t,r,i){this._contentObserver=t,this._elementRef=r,this._ngZone=i,this.event=new c.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=bi(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=function Yu(n,e=0){return function ar(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):e}(t),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(A_(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(SE),c.Y36(c.SBq),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),ME=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Zy]}),n})();var Tl=F(6451),Br=F(5577),Ky=F(1144),Yo=F(576);const cu=["addListener","removeListener"],wA=["addEventListener","removeEventListener"],EA=["on","off"];function Dl(n,e,t,r){if((0,Yo.m)(t)&&(r=t,t=void 0),r)return Dl(n,e,t).pipe(ds(r));const[i,s]=function xE(n){return(0,Yo.m)(n.addEventListener)&&(0,Yo.m)(n.removeEventListener)}(n)?wA.map(u=>h=>n[u](e,h,t)):function Yy(n){return(0,Yo.m)(n.addListener)&&(0,Yo.m)(n.removeListener)}(n)?cu.map(CA(n,e)):function S1(n){return(0,Yo.m)(n.on)&&(0,Yo.m)(n.off)}(n)?EA.map(CA(n,e)):[];if(!i&&(0,Ky.z)(n))return(0,Br.z)(u=>Dl(u,e,t))((0,Tr.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new On.y(u=>{const h=(...p)=>u.next(1<p.length?p:p[0]);return i(h),()=>s(h)})}function CA(n,e){return t=>r=>n[t](e,r)}var If=F(8189);function Et(...n){return function A1(){return(0,If.J)(1)}()((0,mn.D)(n,(0,xs.yG)(n)))}function Sa(...n){const e=(0,xs.yG)(n);return(0,_r.e)((t,r)=>{(e?Et(n,t,e):Et(n,t)).subscribe(r)})}var _o=F(5698);const IA=["connectionContainer"],Rg=["inputContainer"],TA=["label"];function Pg(n,e){1&n&&(c.ynx(0),c.TgZ(1,"div",14),c._UZ(2,"div",15),c._UZ(3,"div",16),c._UZ(4,"div",17),c.qZA(),c.TgZ(5,"div",18),c._UZ(6,"div",15),c._UZ(7,"div",16),c._UZ(8,"div",17),c.qZA(),c.BQk())}function Ng(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",19),c.NdJ("cdkObserveContent",function(){return c.CHM(t),c.oxw().updateOutlineGap()}),c.Hsn(1,1),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)}}function cr(n,e){if(1&n&&(c.ynx(0),c.Hsn(1,2),c.TgZ(2,"span"),c._uU(3),c.qZA(),c.BQk()),2&n){const t=c.oxw(2);c.xp6(3),c.Oqu(t._control.placeholder)}}function M1(n,e){1&n&&c.Hsn(0,3,["*ngSwitchCase","true"])}function kE(n,e){1&n&&(c.TgZ(0,"span",23),c._uU(1," *"),c.qZA())}function DA(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"label",20,21),c.NdJ("cdkObserveContent",function(){return c.CHM(t),c.oxw().updateOutlineGap()}),c.YNc(2,cr,4,1,"ng-container",12),c.YNc(3,M1,1,0,"ng-content",12),c.YNc(4,kE,2,0,"span",22),c.qZA()}if(2&n){const t=c.oxw();c.ekj("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),c.Q6J("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),c.uIk("for",t._control.id)("aria-owns",t._control.id),c.xp6(2),c.Q6J("ngSwitchCase",!1),c.xp6(1),c.Q6J("ngSwitchCase",!0),c.xp6(1),c.Q6J("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function SA(n,e){1&n&&(c.TgZ(0,"div",24),c.Hsn(1,4),c.qZA())}function OE(n,e){if(1&n&&(c.TgZ(0,"div",25),c._UZ(1,"span",26),c.qZA()),2&n){const t=c.oxw();c.xp6(1),c.ekj("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function RE(n,e){if(1&n&&(c.TgZ(0,"div"),c.Hsn(1,5),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState)}}function PE(n,e){if(1&n&&(c.TgZ(0,"div",30),c._uU(1),c.qZA()),2&n){const t=c.oxw(2);c.Q6J("id",t._hintLabelId),c.xp6(1),c.Oqu(t.hintLabel)}}function NE(n,e){if(1&n&&(c.TgZ(0,"div",27),c.YNc(1,PE,2,2,"div",28),c.Hsn(2,6),c._UZ(3,"div",29),c.Hsn(4,7),c.qZA()),2&n){const t=c.oxw();c.Q6J("@transitionMessages",t._subscriptAnimationState),c.xp6(1),c.Q6J("ngIf",t.hintLabel)}}const AA=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],MA=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"];let xA=0;const Pd=new c.OlP("MatError");let FE=(()=>{class n{constructor(t,r){this.id="mat-error-"+xA++,t||r.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(t){return new(t||n)(c.$8M("aria-live"),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:function(t,r){2&t&&c.uIk("id",r.id)},inputs:{id:"id"},features:[c._Bn([{provide:Pd,useExisting:n}])]}),n})();const kA={transitionMessages:V_("transitionMessages",[B_("enter",yl({opacity:1,transform:"translateY(0%)"})),j_("void => enter",[yl({opacity:0,transform:"translateY(-5px)"}),_d("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let Qy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n}),n})();const NA=new c.OlP("MatHint");let Nd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-label"]]}),n})(),FA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-placeholder"]]}),n})();const LA=new c.OlP("MatPrefix"),LE=new c.OlP("MatSuffix");let Jy=0;const BA=Cf(class{constructor(n){this._elementRef=n}},"primary"),jA=new c.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),HA=new c.OlP("MatFormField");let $A=(()=>{class n extends BA{constructor(t,r,i,s,u,h,p){super(t),this._changeDetectorRef=r,this._dir=i,this._defaults=s,this._platform=u,this._ngZone=h,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new Gt.x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+Jy++,this._labelId="mat-form-field-label-"+Jy++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==p,this.appearance=s&&s.appearance?s.appearance:"legacy",this._hideRequiredMarker=!(!s||null==s.hideRequiredMarker)&&s.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=bi(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Sa(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(dc(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(dc(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,Tl.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Sa(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Sa(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(dc(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Dl(this._label.nativeElement,"transitionend").pipe((0,_o.q)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null,r=this._connectionContainerRef.nativeElement,i=".mat-form-field-outline-start",s=".mat-form-field-outline-gap";if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!t||!t.children.length||!t.textContent.trim()){const C=r.querySelectorAll(`${i}, ${s}`);for(let D=0;D<C.length;D++)C[D].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let u=0,h=0;const p=r.querySelectorAll(i),y=r.querySelectorAll(s);if(this._label&&this._label.nativeElement.children.length){const C=r.getBoundingClientRect();if(0===C.width&&0===C.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const D=this._getStartEnd(C),R=t.children,L=this._getStartEnd(R[0].getBoundingClientRect());let j=0;for(let ie=0;ie<R.length;ie++)j+=R[ie].offsetWidth;u=Math.abs(L-D)-5,h=j>0?.75*j+10:0}for(let C=0;C<p.length;C++)p[C].style.width=`${u}px`;for(let C=0;C<y.length;C++)y[C].style.width=`${h}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.sBO),c.Y36(m_,8),c.Y36(jA,8),c.Y36(Vr),c.Y36(c.R0b),c.Y36(wf,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,Qy,5),c.Suo(i,Qy,7),c.Suo(i,Nd,5),c.Suo(i,Nd,7),c.Suo(i,FA,5),c.Suo(i,Pd,5),c.Suo(i,NA,5),c.Suo(i,LA,5),c.Suo(i,LE,5)),2&t){let s;c.iGM(s=c.CRH())&&(r._controlNonStatic=s.first),c.iGM(s=c.CRH())&&(r._controlStatic=s.first),c.iGM(s=c.CRH())&&(r._labelChildNonStatic=s.first),c.iGM(s=c.CRH())&&(r._labelChildStatic=s.first),c.iGM(s=c.CRH())&&(r._placeholderChild=s.first),c.iGM(s=c.CRH())&&(r._errorChildren=s),c.iGM(s=c.CRH())&&(r._hintChildren=s),c.iGM(s=c.CRH())&&(r._prefixChildren=s),c.iGM(s=c.CRH())&&(r._suffixChildren=s)}},viewQuery:function(t,r){if(1&t&&(c.Gf(IA,7),c.Gf(Rg,5),c.Gf(TA,5)),2&t){let i;c.iGM(i=c.CRH())&&(r._connectionContainerRef=i.first),c.iGM(i=c.CRH())&&(r._inputContainerRef=i.first),c.iGM(i=c.CRH())&&(r._label=i.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,r){2&t&&c.ekj("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[c._Bn([{provide:HA,useExisting:n}]),c.qOj],ngContentSelectors:MA,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,r){1&t&&(c.F$t(AA),c.TgZ(0,"div",0),c.TgZ(1,"div",1,2),c.NdJ("click",function(s){return r._control.onContainerClick&&r._control.onContainerClick(s)}),c.YNc(3,Pg,9,0,"ng-container",3),c.YNc(4,Ng,2,1,"div",4),c.TgZ(5,"div",5,6),c.Hsn(7),c.TgZ(8,"span",7),c.YNc(9,DA,5,16,"label",8),c.qZA(),c.qZA(),c.YNc(10,SA,2,0,"div",9),c.qZA(),c.YNc(11,OE,2,4,"div",10),c.TgZ(12,"div",11),c.YNc(13,RE,2,1,"div",12),c.YNc(14,NE,5,2,"div",13),c.qZA(),c.qZA()),2&t&&(c.xp6(3),c.Q6J("ngIf","outline"==r.appearance),c.xp6(1),c.Q6J("ngIf",r._prefixChildren.length),c.xp6(5),c.Q6J("ngIf",r._hasFloatingLabel()),c.xp6(1),c.Q6J("ngIf",r._suffixChildren.length),c.xp6(1),c.Q6J("ngIf","outline"!=r.appearance),c.xp6(1),c.Q6J("ngSwitch",r._getDisplayedMessages()),c.xp6(1),c.Q6J("ngSwitchCase","error"),c.xp6(1),c.Q6J("ngSwitchCase","hint"))},directives:[Fn,AE,Nr,mi],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[kA.transitionMessages]},changeDetection:0}),n})(),VE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Ya,Vs,ME],Vs]}),n})();var Fd=F(515);const tv=Ds({passive:!0});let Lg=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Fd.E;const r=lr(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new Gt.x,u="cdk-text-field-autofilled",h=p=>{"cdk-text-field-autofill-start"!==p.animationName||r.classList.contains(u)?"cdk-text-field-autofill-end"===p.animationName&&r.classList.contains(u)&&(r.classList.remove(u),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!1}))):(r.classList.add(u),this._ngZone.run(()=>s.next({target:p.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",h,tv),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",h,tv)}}),s}stopMonitoring(t){const r=lr(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Vr),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nv=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const zA=new c.OlP("MAT_INPUT_VALUE_ACCESSOR"),qA=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let GA=0;const WA=lA(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r}});let UE=(()=>{class n extends WA{constructor(t,r,i,s,u,h,p,y,C,D){super(h,s,u,i),this._elementRef=t,this._platform=r,this._autofillMonitor=y,this._formField=D,this._uid="mat-input-"+GA++,this.focused=!1,this.stateChanges=new Gt.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(j=>Jl().has(j));const R=this._elementRef.nativeElement,L=R.nodeName.toLowerCase();this._inputValueAccessor=p||R,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&C.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",j=>{const ie=j.target;!ie.value&&0===ie.selectionStart&&0===ie.selectionEnd&&(ie.setSelectionRange(1,1),ie.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===L,this._isTextarea="textarea"===L,this._isInFormField=!!D,this._isNativeSelect&&(this.controlType=R.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=bi(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){var t,r,i,s;return null!==(s=null!==(t=this._required)&&void 0!==t?t:null===(i=null===(r=this.ngControl)||void 0===r?void 0:r.control)||void 0===i?void 0:i.hasValidator(ao.required))&&void 0!==s&&s}set required(t){this._required=bi(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&Jl().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=bi(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,r;const i=(null===(r=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===r?void 0:r.call(t))?null:this.placeholder;if(i!==this._previousPlaceholder){const s=this._elementRef.nativeElement;this._previousPlaceholder=i,i?s.setAttribute("placeholder",i):s.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){qA.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Vr),c.Y36(er,10),c.Y36(ud,8),c.Y36(Ns,8),c.Y36(Hy),c.Y36(zA,10),c.Y36(Lg),c.Y36(c.R0b),c.Y36(HA,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:function(t,r){1&t&&c.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(c.Ikx("disabled",r.disabled)("required",r.required),c.uIk("id",r.id)("data-placeholder",r.placeholder)("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required),c.ekj("mat-input-server",r._isServer)("mat-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[c._Bn([{provide:Qy,useExisting:n}]),c.qOj,c.TTD]}),n})(),BE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[Hy],imports:[[nv,VE,Vs],nv,VE]}),n})();const ZA=["mat-button",""],KA=["*"],jE=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],QA=Cf(mo(Uy(class{constructor(n){this._elementRef=n}})));let Ug=(()=>{class n extends QA{constructor(t,r,i){super(t),this._focusMonitor=r,this._animationMode=i,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const s of jE)this._hasHostAttributes(s)&&this._getHostElement().classList.add(s);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,r){t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Sw),c.Y36(wf,8))},n.\u0275cmp=c.Xpm({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,r){if(1&t&&c.Gf(Wy,5),2&t){let i;c.iGM(i=c.CRH())&&(r.ripple=i.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,r){2&t&&(c.uIk("disabled",r.disabled||null),c.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[c.qOj],attrs:ZA,ngContentSelectors:KA,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"span",0),c.Hsn(1),c.qZA(),c._UZ(2,"span",1),c._UZ(3,"span",2)),2&t&&(c.xp6(2),c.ekj("mat-button-ripple-round",r.isRoundButton||r.isIconButton),c.Q6J("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Wy],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),HE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[DE,Vs],Vs]}),n})();function Qo(n){return(0,_r.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe(new nn.Q(t,void 0,void 0,u=>{s=(0,Tr.Xf)(n(u,Qo(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function $E(n){return(0,_r.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Bg=F(3099);function uu(n,e){return(0,Yo.m)(e)?(0,Br.z)(n,e,1):(0,Br.z)(n,1)}class JA{}class pc{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(u):this.headers.set(s,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof pc?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new pc;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof pc?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let u=this.headers.get(t);if(!u)return;u=u.filter(h=>-1===s.indexOf(h)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class rv{encodeKey(e){return qE(e)}encodeValue(e){return qE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const zE=/%(\d[a-f0-9])/gi,tM={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function qE(n){return encodeURIComponent(n).replace(zE,(e,t)=>{var r;return null!==(r=tM[t])&&void 0!==r?r:e})}function GE(n){return`${n}`}class gc{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new rv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function eM(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[u,h]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],p=t.get(u)||[];p.push(h),t.set(u,p)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new gc({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(GE(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(GE(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class nM{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function WE(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function iv(n){return"undefined"!=typeof Blob&&n instanceof Blob}function sv(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Df{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function rM(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new pc),this.context||(this.context=new nM),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+u}}else this.params=new gc,this.urlWithParams=t}serializeBody(){return null===this.body?null:WE(this.body)||iv(this.body)||sv(this.body)||function iM(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof gc?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||sv(this.body)?null:iv(this.body)?this.body.type||null:WE(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof gc?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,C=e.params||this.params;const D=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((R,L)=>R.set(L,e.setHeaders[L]),y)),e.setParams&&(C=Object.keys(e.setParams).reduce((R,L)=>R.set(L,e.setParams[L]),C)),new Df(r,i,u,{params:C,headers:y,context:D,reportProgress:p,responseType:s,withCredentials:h})}}var Qr=(()=>((Qr=Qr||{})[Qr.Sent=0]="Sent",Qr[Qr.UploadProgress=1]="UploadProgress",Qr[Qr.ResponseHeader=2]="ResponseHeader",Qr[Qr.DownloadProgress=3]="DownloadProgress",Qr[Qr.Response=4]="Response",Qr[Qr.User=5]="User",Qr))();class ov extends class sM{constructor(e,t=200,r="OK"){this.headers=e.headers||new pc,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=Qr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ov({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function Sf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let av=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Df)s=t;else{let p,y;p=i.headers instanceof pc?i.headers:new pc(i.headers),i.params&&(y=i.params instanceof gc?i.params:new gc({fromObject:i.params})),s=new Df(t,r,void 0!==i.body?i.body:null,{headers:p,context:i.context,params:y,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=mt(s).pipe(uu(p=>this.handler.handle(p)));if(t instanceof Df||"events"===i.observe)return u;const h=u.pipe(Ar(p=>p instanceof ov));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return h.pipe((0,ot.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return h.pipe((0,ot.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return h.pipe((0,ot.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return h.pipe((0,ot.U)(p=>p.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new gc).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Sf(i,r))}post(t,r,i={}){return this.request("POST",t,Sf(i,r))}put(t,r,i={}){return this.request("PUT",t,Sf(i,r))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(JA))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const cv=["*"];let du;function xf(n){var e;return(null===(e=function Mf(){if(void 0===du&&(du=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(du=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return du}())||void 0===e?void 0:e.createHTML(n))||n}function uv(n){return Error(`Unable to find icon with the name "${n}"`)}function XE(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function JE(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class hu{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let Ld=(()=>{class n{constructor(t,r,i,s){this._httpClient=t,this._sanitizer=r,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,s){return this._addSvgIconConfig(t,r,new hu(i,null,s))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,s){const u=this._sanitizer.sanitize(c.q3G.HTML,i);if(!u)throw JE(i);const h=xf(u);return this._addSvgIconConfig(t,r,new hu("",h,s))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new hu(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const s=this._sanitizer.sanitize(c.q3G.HTML,r);if(!s)throw JE(r);const u=xf(s);return this._addSvgIconSetConfig(t,new hu("",u,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,t);if(!r)throw XE(t);const i=this._cachedIconsByUrl.get(r);return i?mt($g(i)):this._loadSvgIconFromConfig(new hu(t,null)).pipe((0,Kr.b)(s=>this._cachedIconsByUrl.set(r,s)),(0,ot.U)(s=>$g(s)))}getNamedSvgIcon(t,r=""){const i=eC(r,t);let s=this._svgIconConfigs.get(i);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(r,t),s)return this._svgIconConfigs.set(i,s),this._getSvgFromConfig(s);const u=this._iconSetConfigs.get(r);return u?this._getSvgFromIconSetConfigs(t,u):function XA(n,e){const t=(0,Yo.m)(n)?n:()=>n,r=i=>i.error(t());return new On.y(e?i=>e.schedule(r,0,i):r)}(uv(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?mt($g(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,ot.U)(r=>$g(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?mt(i):jc(r.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(Qo(h=>{const y=`Loading icon set URL: ${this._sanitizer.sanitize(c.q3G.RESOURCE_URL,u.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(y)),mt(null)})))).pipe((0,ot.U)(()=>{const u=this._extractIconWithNameFromAnySet(t,r);if(!u)throw uv(t);return u}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const s=r[i];if(s.svgText&&s.svgText.toString().indexOf(t)>-1){const u=this._svgElementFromConfig(s),h=this._extractSvgIconFromSet(u,t,s.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Kr.b)(r=>t.svgText=r),(0,ot.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?mt(null):this._fetchIcon(t).pipe((0,Kr.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const s=t.querySelector(`[id="${r}"]`);if(!s)return null;const u=s.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,i);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),i);const h=this._svgElementFromString(xf("<svg></svg>"));return h.appendChild(u),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(xf("<svg></svg>")),i=t.attributes;for(let s=0;s<i.length;s++){const{name:u,value:h}=i[s];"id"!==u&&r.setAttribute(u,h)}for(let s=0;s<t.childNodes.length;s++)t.childNodes[s].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[s].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:i,options:s}=t,u=null!==(r=null==s?void 0:s.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function QE(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const h=this._sanitizer.sanitize(c.q3G.RESOURCE_URL,i);if(!h)throw XE(i);const p=this._inProgressUrlFetches.get(h);if(p)return p;const y=this._httpClient.get(h,{responseType:"text",withCredentials:u}).pipe((0,ot.U)(C=>xf(C)),$E(()=>this._inProgressUrlFetches.delete(h)),(0,Bg.B)());return this._inProgressUrlFetches.set(h,y),y}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(eC(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const s=this._resolvers[i](r,t);if(s)return Vd(s)?new hu(s.url,null,s.options):new hu(s,null)}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(av,8),c.LFG(Uc),c.LFG(ce,8),c.LFG(c.qLn))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $g(n){return n.cloneNode(!0)}function eC(n,e){return n+":"+e}function Vd(n){return!(!n.url||!n.options)}const tC=Cf(class{constructor(n){this._elementRef=n}}),Ud=new c.OlP("mat-icon-location",{providedIn:"root",factory:function Z1(){const n=(0,c.f3M)(ce),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),dv=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],fM=dv.map(n=>`[${n}]`).join(", "),K1=/^url\(['"]?#(.*?)['"]?\)$/;let nC=(()=>{class n extends tC{constructor(t,r,i,s,u){super(t),this._iconRegistry=r,this._location=s,this._errorHandler=u,this._inline=!1,this._currentIconFetch=wa.w0.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=bi(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=t.querySelectorAll("style");for(let s=0;s<r.length;s++)r[s].textContent+=" ";const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,s)=>{i.forEach(u=>{s.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(fM),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<r.length;s++)dv.forEach(u=>{const h=r[s],p=h.getAttribute(u),y=p?p.match(K1):null;if(y){let C=i.get(h);C||(C=[],i.set(h,C)),C.push({name:u,value:y[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe((0,_o.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${s.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Ld),c.$8M("aria-hidden"),c.Y36(Ud),c.Y36(c.qLn))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(c.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),c.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[c.qOj],ngContentSelectors:cv,decls:1,vars:0,template:function(t,r){1&t&&(c.F$t(),c.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),Y1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vs],Vs]}),n})();const rC=["*",[["mat-toolbar-row"]]],hv=["*","mat-toolbar-row"],pM=Cf(class{constructor(n){this._elementRef=n}});let gM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),iC=(()=>{class n extends pM{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(Vr),c.Y36(ce))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&c.Suo(i,gM,5),2&t){let s;c.iGM(s=c.CRH())&&(r._toolbarRows=s)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&c.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[c.qOj],ngContentSelectors:hv,decls:2,vars:0,template:function(t,r){1&t&&(c.F$t(rC),c.Hsn(0),c.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),sC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Vs],Vs]}),n})();var mM=F(9672);function oC(n,e,t){n?(0,mM.f)(t,n,e):e()}const mc=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function zg(n){return new On.y(e=>{(0,Tr.Xf)(n()).subscribe(e)})}function fv(){return(0,_r.e)((n,e)=>{let t=null;n._refCount++;const r=new nn.Q(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class aC extends On.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,_r.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wa.w0;const t=this.getSubject();e.add(this.source.subscribe(new nn.Q(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wa.w0.EMPTY)}return e}refCount(){return fv()(this)}}function Mr(n,e){return(0,_r.e)((t,r)=>{let i=null,s=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe(new nn.Q(r,p=>{null==i||i.unsubscribe();let y=0;const C=s++;(0,Tr.Xf)(n(p,C)).subscribe(i=new nn.Q(r,D=>r.next(e?e(p,D,C,y++):D),()=>{i=null,h()}))},()=>{u=!0,h()}))})}function lC(n,e,t,r,i){return(s,u)=>{let h=t,p=e,y=0;s.subscribe(new nn.Q(u,C=>{const D=y++;p=h?n(p,C,D):(h=!0,C),r&&u.next(p)},i&&(()=>{h&&u.next(p),u.complete()})))}}function _c(n,e){return(0,_r.e)(lC(n,e,arguments.length>=2,!0))}function pv(n){return n<=0?()=>Fd.E:(0,_r.e)((e,t)=>{let r=[];e.subscribe(new nn.Q(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function gv(n=cC){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe(new nn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cC(){return new mc}function uC(n){return(0,_r.e)((e,t)=>{let r=!1;e.subscribe(new nn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function fu(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ar((i,s)=>n(i,s,r)):Fs.y,(0,_o.q)(1),t?uC(e):gv(()=>new mc))}class Us{constructor(e,t){this.id=e,this.url=t}}class mv extends Us{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class pu extends Us{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xo extends Us{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wM extends Us{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class qg extends Us{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kf extends Us{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EM extends Us{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class CM extends Us{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class IM extends Us{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Of{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Rf{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class TM{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class DM{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dC{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hC{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gg{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Zt="primary";class SM{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Bd(n){return new SM(n)}const AM="ngNavigationCancelingError";function Pf(n){const e=Error("NavigationCancelingError: "+n);return e[AM]=!0,e}function fC(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],h=n[s];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function yo(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!pC(n[i],e[i]))return!1;return!0}function pC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function gC(n){return Array.prototype.concat.apply([],n)}function mC(n){return n.length>0?n[n.length-1]:null}function Xr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function vo(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,mn.D)(Promise.resolve(n)):mt(n)}const yC={exact:function wv(n,e,t){if(!jd(n.segments,e.segments)||!Nf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!wv(n.children[r],e.children[r],t))return!1;return!0},subset:bC},vv={exact:function MM(n,e){return yo(n,e)},subset:function vC(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>pC(n[t],e[t]))},ignored:()=>!0};function bv(n,e,t){return yC[t.paths](n.root,e.root,t.matrixParams)&&vv[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function bC(n,e,t){return Ev(n,e,e.segments,t)}function Ev(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!jd(i,t)||e.hasChildren()||!Nf(i,t,r))}if(n.segments.length===t.length){if(!jd(n.segments,t)||!Nf(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!bC(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(jd(n.segments,i)&&Nf(n.segments,i,r)&&n.children[Zt])&&Ev(n.children[Zt],e,s,r)}}function Nf(n,e,t){return e.every((r,i)=>vv[t](n[i].parameters,r.parameters))}class yr{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bd(this.queryParams)),this._queryParamMap}toString(){return kM.serialize(this)}}class jt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vf(this)}}class Ff{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Bd(this.parameters)),this._parameterMap}toString(){return OM(this)}}function jd(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class wC{}class Wg{parse(e){const t=new J1(e);return new yr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Uf(e.root,!0)}`,r=function RM(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Hd(t)}=${Hd(i)}`).join("&"):`${Hd(t)}=${Hd(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function CC(n){return encodeURI(n)}(e.fragment)}`:""}`}}const kM=new Wg;function Vf(n){return n.segments.map(e=>OM(e)).join("/")}function Uf(n,e){if(!n.hasChildren())return Vf(n);if(e){const t=n.children[Zt]?Uf(n.children[Zt],!1):"",r=[];return Xr(n.children,(i,s)=>{s!==Zt&&r.push(`${s}:${Uf(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Lf(n,e){let t=[];return Xr(n.children,(r,i)=>{i===Zt&&(t=t.concat(e(r,i)))}),Xr(n.children,(r,i)=>{i!==Zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Zt?[Uf(n.children[Zt],!1)]:[`${i}:${Uf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Zt]?`${Vf(n)}/${t[0]}`:`${Vf(n)}/(${t.join("//")})`}}function EC(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hd(n){return EC(n).replace(/%3B/gi,";")}function Zg(n){return EC(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gu(n){return decodeURIComponent(n)}function Kg(n){return gu(n.replace(/\+/g,"%20"))}function OM(n){return`${Zg(n.path)}${function IC(n){return Object.keys(n).map(e=>`;${Zg(e)}=${Zg(n[e])}`).join("")}(n.parameters)}`}const TC=/^[^\/()?;=#]+/;function mu(n){const e=n.match(TC);return e?e[0]:""}const DC=/^[^=?&#]+/,Cv=/^[^&#]+/;class J1{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new jt([],{}):new jt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Zt]=new jt(e,t)),r}parseSegment(){const e=mu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ff(gu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=mu(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=mu(this.remaining);i&&(r=i,this.capture(r))}e[gu(t)]=gu(r)}parseQueryParam(e){const t=function PM(n){const e=n.match(DC);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function Iv(n){const e=n.match(Cv);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=Kg(t),s=Kg(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=mu(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.substr(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Zt);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[Zt]:new jt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class SC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Tv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Tv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Yg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Yg(e,this._root).map(t=>t.value)}}function Tv(n,e){if(n===e.value)return e;for(const t of e.children){const r=Tv(n,t);if(r)return r}return null}function Yg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Yg(n,t);if(r.length)return r.unshift(e),r}return[]}class Aa{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function $d(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Dv extends SC{constructor(e,t){super(e),this.snapshot=t,Qg(this,e)}toString(){return this.snapshot.toString()}}function Sv(n,e){const t=function NM(n,e){const u=new Bf([],{},{},"",{},Zt,e,null,n.root,-1,{});return new Mv("",new Aa(u,[]))}(n,e),r=new qo([new Ff("",{})]),i=new qo({}),s=new qo({}),u=new qo({}),h=new qo(""),p=new _u(r,i,u,h,s,Zt,e,t.root);return p.snapshot=t.root,new Dv(new Aa(p,[]),t)}class _u{constructor(e,t,r,i,s,u,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(e=>Bd(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(e=>Bd(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Av(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function FM(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Bf{constructor(e,t,r,i,s,u,h,p,y,C,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this.routeConfig=p,this._urlSegment=y,this._lastPathIndex=C,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bd(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bd(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Mv extends SC{constructor(e,t){super(t),this.url=e,Qg(this,t)}toString(){return xv(this._root)}}function Qg(n,e){e.value._routerState=n,e.children.forEach(t=>Qg(n,t))}function xv(n){const e=n.children.length>0?` { ${n.children.map(xv).join(", ")} } `:"";return`${n.value}${e}`}function kv(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,yo(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),yo(e.params,t.params)||n.params.next(t.params),function yv(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!yo(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),yo(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ov(n,e){const t=yo(n.params,e.params)&&function xM(n,e){return jd(n,e)&&n.every((t,r)=>yo(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ov(n.parent,e.parent))}function zd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function tF(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return zd(n,r,i);return zd(n,r)})}(n,e,t);return new Aa(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>zd(n,h)),u}}const r=function nF(n){return new _u(new qo(n.url),new qo(n.params),new qo(n.queryParams),new qo(n.fragment),new qo(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>zd(n,s));return new Aa(r,i)}}function Rv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Xg(n){return"object"==typeof n&&null!=n&&n.outlets}function AC(n,e,t,r,i){let s={};return r&&Xr(r,(u,h)=>{s[h]=Array.isArray(u)?u.map(p=>`${p}`):`${u}`}),new yr(t.root===n?e:LM(t.root,n,e),s,i)}function LM(n,e,t){const r={};return Xr(n.children,(i,s)=>{r[s]=i===e?t:LM(i,e,t)}),new jt(n.segments,r)}class VM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Rv(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Xg);if(i&&i!==mC(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class MC{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function kC(n,e,t){if(n||(n=new jt([],{})),0===n.segments.length&&n.hasChildren())return em(n,e,t);const r=function Nv(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],h=t[r];if(Xg(h))break;const p=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&y&&"object"==typeof y&&void 0===y.outlets){if(!UM(p,y,u))return s;r+=2}else{if(!UM(p,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new jt(n.segments.slice(0,r.pathIndex),{});return s.children[Zt]=new jt(n.segments.slice(r.pathIndex),n.children),em(s,0,i)}return r.match&&0===i.length?new jt(n.segments,{}):r.match&&!n.hasChildren()?tm(n,e,t):r.match?em(n,0,i):tm(n,e,t)}function em(n,e,t){if(0===t.length)return new jt(n.segments,{});{const r=function xC(n){return Xg(n[0])?n[0].outlets:{[Zt]:n}}(t),i={};return Xr(r,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[u]=kC(n.children[u],e,s))}),Xr(n.children,(s,u)=>{void 0===r[u]&&(i[u]=s)}),new jt(n.segments,i)}}function tm(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Xg(s)){const p=OC(s.outlets);return new jt(r,p)}if(0===i&&Rv(t[0])){r.push(new Ff(n.segments[e].path,Fv(t[0]))),i++;continue}const u=Xg(s)?s.outlets[Zt]:`${s}`,h=i<t.length-1?t[i+1]:null;u&&h&&Rv(h)?(r.push(new Ff(u,Fv(h))),i+=2):(r.push(new Ff(u,{})),i++)}return new jt(r,{})}function OC(n){const e={};return Xr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=tm(new jt([],{}),0,t))}),e}function Fv(n){const e={};return Xr(n,(t,r)=>e[r]=`${t}`),e}function UM(n,e,t){return n==t.path&&yo(e,t.parameters)}class nm{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),kv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=$d(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),Xr(i,(s,u)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=$d(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=$d(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=$d(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new hC(s.value.snapshot))}),e.children.length&&this.forwardEvent(new DM(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(kv(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),kv(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=function PC(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),p=h?h.module.componentFactoryResolver:null;u.attachRef=null,u.route=i,u.resolver=p,u.outlet&&u.outlet.activateWith(i,p),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class NC{constructor(e,t){this.routes=e,this.module=t}}function yu(n){return"function"==typeof n}function vu(n){return n instanceof yr}const bu=Symbol("INITIAL_VALUE");function jf(){return Mr(n=>function _M(...n){const e=(0,xs.yG)(n),t=(0,xs.jO)(n),{args:r,keys:i}=Fo(n);if(0===r.length)return(0,mn.D)([],e);const s=new On.y(function yM(n,e,t=Fs.y){return r=>{oC(e,()=>{const{length:i}=n,s=new Array(i);let u=i,h=i;for(let p=0;p<i;p++)oC(e,()=>{const y=(0,mn.D)(n[p],e);let C=!1;y.subscribe(new nn.Q(r,D=>{s[p]=D,C||(C=!0,h--),h||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Lo(i,u):Fs.y));return t?s.pipe(ds(t)):s}(n.map(e=>e.pipe((0,_o.q)(1),Sa(bu)))).pipe(_c((e,t)=>{let r=!1;return t.reduce((i,s,u)=>i!==bu?i:(s===bu&&(r=!0),r||!1!==s&&u!==t.length-1&&!vu(s)?i:s),e)},bu),Ar(e=>e!==bu),(0,ot.U)(e=>vu(e)?e:!0===e),(0,_o.q)(1)))}class Bs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Hf,this.attachRef=null}}class Hf{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Bs,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Gd=(()=>{class n{constructor(t,r,i,s,u){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=s||Zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const u=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,p=new HM(t,h,this.location.injector);this.activated=this.location.createComponent(u,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Hf),c.Y36(c.s_b),c.Y36(c._Vd),c.$8M("name"),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class HM{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===_u?this.route:e===Hf?this.childContexts:this.parent.get(e,t)}}let FC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[Gd],encapsulation:2}),n})();function rm(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];LC(r,VC(e,r))}}function LC(n,e){n.children&&rm(n.children,e)}function VC(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Vv(n){const e=n.children&&n.children.map(Vv),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Zt&&(t.component=FC),t}function js(n){return n.outlet||Zt}function Uv(n,e){const t=n.filter(r=>js(r)===e);return t.push(...n.filter(r=>js(r)!==e)),t}const UC={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function im(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},UC):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const s=(e.matcher||fC)(t,n,e);if(!s)return Object.assign({},UC);const u={};Xr(s.posParams,(p,y)=>{u[y]=p.path});const h=s.consumed.length>0?Object.assign(Object.assign({},u),s.consumed[s.consumed.length-1].parameters):u;return{matched:!0,consumedSegments:s.consumed,lastChild:s.consumed.length,parameters:h,positionalParamSegments:null!==(r=s.posParams)&&void 0!==r?r:{}}}function Wd(n,e,t,r,i="corrected"){if(t.length>0&&function oF(n,e,t){return t.some(r=>$f(n,e,r)&&js(r)!==Zt)}(n,t,r)){const u=new jt(e,function $M(n,e,t,r){const i={};i[Zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&js(s)!==Zt){const u=new jt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[js(s)]=u}return i}(n,e,r,new jt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function zM(n,e,t){return t.some(r=>$f(n,e,r))}(n,t,r)){const u=new jt(n.segments,function Jo(n,e,t,r,i,s){const u={};for(const h of r)if($f(n,t,h)&&!i[js(h)]){const p=new jt([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,u[js(h)]=p}return Object.assign(Object.assign({},i),u)}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new jt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function $f(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function BC(n,e,t,r){return!!(js(n)===r||r!==Zt&&$f(e,t,n))&&("**"===n.path||im(e,n,t).matched)}function jC(n,e,t){return 0===e.length&&!n.children[t]}class Zd{constructor(e){this.segmentGroup=e||null}}class HC{constructor(e){this.urlTree=e}}function Bv(n){return new On.y(e=>e.error(new Zd(n)))}function jv(n){return new On.y(e=>e.error(new HC(n)))}function $C(n){return new On.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class zC{constructor(e,t,r,i,s){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(c.h0i)}apply(){const e=Wd(this.urlTree.root,[],[],this.config).segmentGroup,t=new jt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Zt).pipe((0,ot.U)(s=>this.createUrlTree(qf(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qo(s=>{if(s instanceof HC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Zd?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Zt).pipe((0,ot.U)(i=>this.createUrlTree(qf(i),e.queryParams,e.fragment))).pipe(Qo(i=>{throw i instanceof Zd?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new jt([],{[Zt]:e}):e;return new yr(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ot.U)(s=>new jt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,mn.D)(i).pipe(uu(s=>{const u=r.children[s],h=Uv(t,s);return this.expandSegmentGroup(e,h,u,s).pipe((0,ot.U)(p=>({segment:p,outlet:s})))}),_c((s,u)=>(s[u.outlet]=u.segment,s),{}),function bM(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ar((i,s)=>n(i,s,r)):Fs.y,pv(1),t?uC(e):gv(()=>new mc))}())}expandSegment(e,t,r,i,s,u){return(0,mn.D)(r).pipe(uu(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,u).pipe(Qo(y=>{if(y instanceof Zd)return mt(null);throw y}))),fu(h=>!!h),Qo((h,p)=>{if(h instanceof mc||"EmptyError"===h.name){if(jC(t,i,s))return mt(new jt([],{}));throw new Zd(t)}throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,u,h){return BC(i,t,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u):Bv(t):Bv(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?jv(s):this.lineralizeSegments(r,s).pipe((0,Br.z)(u=>{const h=new jt(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:h,consumedSegments:p,lastChild:y,positionalParamSegments:C}=im(t,i,s);if(!h)return Bv(t);const D=this.applyRedirectCommands(p,i.redirectTo,C);return i.redirectTo.startsWith("/")?jv(D):this.lineralizeSegments(i,D).pipe((0,Br.z)(R=>this.expandSegment(e,t,r,R.concat(s.slice(y)),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){if("**"===r.path)return r.loadChildren?(r._loadedConfig?mt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ot.U)(R=>(r._loadedConfig=R,new jt(i,{})))):mt(new jt(i,{}));const{matched:u,consumedSegments:h,lastChild:p}=im(t,r,i);if(!u)return Bv(t);const y=i.slice(p);return this.getChildConfig(e,r,i).pipe((0,Br.z)(D=>{const R=D.module,L=D.routes,{segmentGroup:j,slicedSegments:ie}=Wd(t,h,y,L),Ae=new jt(j.segments,j.children);if(0===ie.length&&Ae.hasChildren())return this.expandChildren(R,L,Ae).pipe((0,ot.U)(_t=>new jt(h,_t)));if(0===L.length&&0===ie.length)return mt(new jt(h,{}));const tt=js(r)===s;return this.expandSegment(R,Ae,L,ie,tt?Zt:s,!0).pipe((0,ot.U)(At=>new jt(h.concat(At.segments),At.children)))}))}getChildConfig(e,t,r){return t.children?mt(new NC(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?mt(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Br.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,ot.U)(s=>(t._loadedConfig=s,s))):function qM(n){return new On.y(e=>e.error(Pf(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):mt(new NC([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?mt(i.map(u=>{const h=e.get(u);let p;if(function Lv(n){return n&&yu(n.canLoad)}(h))p=h.canLoad(t,r);else{if(!yu(h))throw new Error("Invalid CanLoad guard");p=h(t,r)}return vo(p)})).pipe(jf(),(0,Kr.b)(u=>{if(!vu(u))return;const h=Pf(`Redirecting to "${this.urlSerializer.serialize(u)}"`);throw h.url=u,h}),(0,ot.U)(u=>!0===u)):mt(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return mt(r);if(i.numberOfChildren>1||!i.children[Zt])return $C(e.redirectTo);i=i.children[Zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new yr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Xr(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return Xr(t.children,(h,p)=>{u[p]=this.createSegmentGroup(e,h,r,i)}),new jt(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function qf(n){const e={};for(const r of Object.keys(n.children)){const s=qf(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function zf(n){if(1===n.numberOfChildren&&n.children[Zt]){const e=n.children[Zt];return new jt(n.segments.concat(e.segments),e.children)}return n}(new jt(n.segments,e))}class GC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Gf{constructor(e,t){this.component=e,this.route=t}}function WC(n,e,t){const r=n._root;return om(r,e?e._root:null,t,[r.value])}function sm(n,e,t){const r=function aF(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function om(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=$d(e);return n.children.forEach(u=>{(function ZC(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const p=function ZM(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!jd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!jd(n.url,e.url)||!yo(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ov(n,e)||!yo(n.queryParams,e.queryParams);default:return!Ov(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new GC(r)):(s.data=u.data,s._resolvedData=u._resolvedData),om(n,e,s.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Gf(h.outlet.component,u))}else u&&Wf(e,h,i),i.canActivateChecks.push(new GC(r)),om(n,null,s.component?h?h.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),Xr(s,(u,h)=>Wf(u,t.getContext(h),i)),i}function Wf(n,e,t){const r=$d(n),i=n.value;Xr(r,(s,u)=>{Wf(s,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Gf(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class QM{}function KC(n){return new On.y(e=>e.error(n))}class wu{constructor(e,t,r,i,s,u){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=u}recognize(){const e=Wd(this.urlTree.root,[],[],this.config.filter(u=>void 0===u.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Zt);if(null===t)return null;const r=new Bf([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Aa(r,t),s=new Mv(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,r=Av(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const s of Object.keys(t.children)){const u=t.children[s],h=Uv(e,s),p=this.processSegmentGroup(h,u,s);if(null===p)return null;r.push(...p)}const i=XC(r);return function QC(n){n.sort((e,t)=>e.value.outlet===Zt?-1:t.value.outlet===Zt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const s of e){const u=this.processSegmentAgainstRoute(s,t,r,i);if(null!==u)return u}return jC(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!BC(e,t,r,i))return null;let s,u=[],h=[];if("**"===e.path){const L=r.length>0?mC(r).parameters:{};s=new Bf(r,L,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qv(e),js(e),e.component,e,lm(t),zv(t)+r.length,XM(e))}else{const L=im(t,e,r);if(!L.matched)return null;u=L.consumedSegments,h=r.slice(L.lastChild),s=new Bf(u,L.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,qv(e),js(e),e.component,e,lm(t),zv(t)+u.length,XM(e))}const p=function Hv(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:C}=Wd(t,u,h,p.filter(L=>void 0===L.redirectTo),this.relativeLinkResolution);if(0===C.length&&y.hasChildren()){const L=this.processChildren(p,y);return null===L?null:[new Aa(s,L)]}if(0===p.length&&0===C.length)return[new Aa(s,[])];const D=js(e)===i,R=this.processSegment(p,y,C,D?Zt:i);return null===R?null:[new Aa(s,R)]}}function $v(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function XC(n){const e=[],t=new Set;for(const r of n){if(!$v(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=XC(r.children);e.push(new Aa(r.value,i))}return e.filter(r=>!t.has(r))}function lm(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function zv(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function qv(n){return n.data||{}}function XM(n){return n.resolve||{}}function eI(n){return Mr(e=>{const t=n(e);return t?(0,mn.D)(t).pipe((0,ot.U)(()=>e)):mt(e)})}class ex extends class JM{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Gv=new c.OlP("ROUTES");class nI{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,ot.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const u=s.create(e);return new NC(gC(u.injector.get(Gv,void 0,c.XFs.Self|c.XFs.Optional)).map(Vv),u)}),Qo(s=>{throw t._loader$=void 0,s}));return t._loader$=new aC(i,()=>new Gt.x).pipe(fv()),t._loader$}loadModuleFactory(e){return vo(e()).pipe((0,Br.z)(t=>t instanceof c.YKP?mt(t):(0,mn.D)(this.compiler.compileModuleAsync(t))))}}class iI{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function sI(n){throw n}function tx(n,e,t){return e.parse("/")}function oI(n,e){return mt(null)}const aI={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},cm={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let jr=(()=>{class n{constructor(t,r,i,s,u,h,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Gt.x,this.errorHandler=sI,this.malformedUriErrorHandler=tx,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:oI,afterPreactivation:oI},this.urlHandlingStrategy=new iI,this.routeReuseStrategy=new ex,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=u.get(c.h0i),this.console=u.get(c.c2e);const D=u.get(c.R0b);this.isNgZoneEnabled=D instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function _C(){return new yr(new jt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new nI(u,h,R=>this.triggerEvent(new Of(R)),R=>this.triggerEvent(new Rf(R))),this.routerState=Sv(this.currentUrlTree,this.rootComponentType),this.transitions=new qo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ar(i=>0!==i.id),(0,ot.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Mr(i=>{let s=!1,u=!1;return mt(i).pipe((0,Kr.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Mr(h=>{const p=this.browserUrlTree.toString(),y=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return Eu(h.source)&&(this.browserUrlTree=h.extractedUrl),mt(h).pipe(Mr(D=>{const R=this.transitions.getValue();return r.next(new mv(D.id,this.serializeUrl(D.extractedUrl),D.source,D.restoredState)),R!==this.transitions.getValue()?Fd.E:Promise.resolve(D)}),function qC(n,e,t,r){return Mr(i=>function GM(n,e,t,r,i){return new zC(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ot.U)(s=>Object.assign(Object.assign({},i),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Kr.b)(D=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:D.urlAfterRedirects})}),function fF(n,e,t,r,i){return(0,Br.z)(s=>function YC(n,e,t,r,i="emptyOnly",s="legacy"){try{const u=new wu(n,e,t,r,i,s).recognize();return null===u?KC(new QM):mt(u)}catch(u){return KC(u)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),r,i).pipe((0,ot.U)(u=>Object.assign(Object.assign({},s),{targetSnapshot:u}))))}(this.rootComponentType,this.config,D=>this.serializeUrl(D),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Kr.b)(D=>{if("eager"===this.urlUpdateStrategy){if(!D.extras.skipLocationChange){const L=this.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);this.setBrowserUrl(L,D)}this.browserUrlTree=D.urlAfterRedirects}const R=new qg(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);r.next(R)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:R,extractedUrl:L,source:j,restoredState:ie,extras:Ae}=h,tt=new mv(R,this.serializeUrl(L),j,ie);r.next(tt);const dt=Sv(L,this.rootComponentType).snapshot;return mt(Object.assign(Object.assign({},h),{targetSnapshot:dt,urlAfterRedirects:L,extras:Object.assign(Object.assign({},Ae),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Fd.E}),eI(h=>{const{targetSnapshot:p,id:y,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:R,replaceUrl:L}}=h;return this.hooks.beforePreactivation(p,{navigationId:y,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!R,replaceUrl:!!L})}),(0,Kr.b)(h=>{const p=new kf(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,ot.U)(h=>Object.assign(Object.assign({},h),{guards:WC(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function KM(n,e){return(0,Br.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?mt(Object.assign(Object.assign({},t),{guardsResult:!0})):function lF(n,e,t,r){return(0,mn.D)(n).pipe((0,Br.z)(i=>function am(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?mt(s.map(h=>{const p=sm(h,e,i);let y;if(function jM(n){return n&&yu(n.canDeactivate)}(p))y=vo(p.canDeactivate(n,e,t,r));else{if(!yu(p))throw new Error("Invalid CanDeactivate guard");y=vo(p(n,e,t,r))}return y.pipe(fu())})).pipe(jf()):mt(!0)}(i.component,i.route,t,e,r)),fu(i=>!0!==i,!0))}(u,r,i,n).pipe((0,Br.z)(h=>h&&function iF(n){return"boolean"==typeof n}(h)?function cF(n,e,t,r){return(0,mn.D)(e).pipe(uu(i=>Et(function dF(n,e){return null!==n&&e&&e(new TM(n)),mt(!0)}(i.route.parent,r),function uF(n,e){return null!==n&&e&&e(new dC(n)),mt(!0)}(i.route,r),function YM(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function WM(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>zg(()=>mt(u.guards.map(p=>{const y=sm(p,u.node,t);let C;if(function sF(n){return n&&yu(n.canActivateChild)}(y))C=vo(y.canActivateChild(r,n));else{if(!yu(y))throw new Error("Invalid CanActivateChild guard");C=vo(y(r,n))}return C.pipe(fu())})).pipe(jf())));return mt(s).pipe(jf())}(n,i.path,t),function hF(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return mt(!0);const i=r.map(s=>zg(()=>{const u=sm(s,e,t);let h;if(function BM(n){return n&&yu(n.canActivate)}(u))h=vo(u.canActivate(e,n));else{if(!yu(u))throw new Error("Invalid CanActivate guard");h=vo(u(e,n))}return h.pipe(fu())}));return mt(i).pipe(jf())}(n,i.route,t))),fu(i=>!0!==i,!0))}(r,s,n,e):mt(h)),(0,ot.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Kr.b)(h=>{if(vu(h.guardsResult)){const y=Pf(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw y.url=h.guardsResult,y}const p=new EM(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),Ar(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),eI(h=>{if(h.guards.canActivateChecks.length)return mt(h).pipe((0,Kr.b)(p=>{const y=new CM(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}),Mr(p=>{let y=!1;return mt(p).pipe(function pF(n,e){return(0,Br.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return mt(t);let s=0;return(0,mn.D)(i).pipe(uu(u=>function gF(n,e,t,r){return function mF(n,e,t,r){const i=Object.keys(n);if(0===i.length)return mt({});const s={};return(0,mn.D)(i).pipe((0,Br.z)(u=>function _F(n,e,t,r){const i=sm(n,e,r);return vo(i.resolve?i.resolve(e,t):i(e,t))}(n[u],e,t,r).pipe((0,Kr.b)(h=>{s[u]=h}))),pv(1),(0,Br.z)(()=>Object.keys(s).length===i.length?mt(s):Fd.E))}(n._resolve,n,e,r).pipe((0,ot.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),Av(n,t).resolve),null)))}(u.route,r,n,e)),(0,Kr.b)(()=>s++),pv(1),(0,Br.z)(u=>s===i.length?mt(t):Fd.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Kr.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,Kr.b)(p=>{const y=new IM(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(y)}))}),eI(h=>{const{targetSnapshot:p,id:y,extractedUrl:C,rawUrl:D,extras:{skipLocationChange:R,replaceUrl:L}}=h;return this.hooks.afterPreactivation(p,{navigationId:y,appliedUrlTree:C,rawUrlTree:D,skipLocationChange:!!R,replaceUrl:!!L})}),(0,ot.U)(h=>{const p=function eF(n,e,t){const r=zd(n,e._root,t?t._root:void 0);return new Dv(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:p})}),(0,Kr.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,ot.U)(r=>(new nm(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Kr.b)({next(){s=!0},complete(){s=!0}}),$E(()=>{var h;s||u||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),Qo(h=>{if(u=!0,function _v(n){return n&&n[AM]}(h)){const p=vu(h.url);p||(this.navigated=!0,this.restoreHistory(i,!0));const y=new Xo(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(y),p?setTimeout(()=>{const C=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),D={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Eu(i.source)};this.scheduleNavigation(C,"imperative",null,D,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new wM(i.id,this.serializeUrl(i.extractedUrl),h);r.next(p);try{i.resolve(this.errorHandler(h))}catch(y){i.reject(y)}}return Fd.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const s={replaceUrl:!0},u=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(u){const p=Object.assign({},u);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,u,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){rm(t),this.config=t.map(Vv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:h,preserveFragment:p}=r,y=i||this.routerState.root,C=p?this.currentUrlTree.fragment:u;let D=null;switch(h){case"merge":D=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),function rF(n,e,t,r,i){if(0===t.length)return AC(e.root,e.root,e,r,i);const s=function Jg(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new VM(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Xr(s.outlets,(p,y)=>{h[y]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new VM(t,e,r)}(t);if(s.toRoot())return AC(e.root,new jt([],{}),e,r,i);const u=function Pv(n,e,t){if(n.isAbsolute)return new MC(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new MC(s,s===e.root,0)}const r=Rv(n.commands[0])?0:1;return function qd(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new MC(r,!1,i-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(s,e,n),h=u.processChildren?em(u.segmentGroup,u.index,s.commands):kC(u.segmentGroup,u.index,s.commands);return AC(u.segmentGroup,h,e,r,i)}(y,this.currentUrlTree,t,D,null!=C?C:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=vu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function lI(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},aI):!1===r?Object.assign({},cm):r,vu(t))return bv(this.currentUrlTree,t,i);const s=this.parseUrl(t);return bv(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new pu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,u){var h,p,y;if(this.disposed)return Promise.resolve(!1);const C=this.transitions.value,D=Eu(r)&&C&&!Eu(C.source),R=C.rawUrl.toString()===t.toString(),L=C.id===(null===(h=this.currentNavigation)||void 0===h?void 0:h.id);if(D&&R&&L)return Promise.resolve(!0);let ie,Ae,tt;u?(ie=u.resolve,Ae=u.reject,tt=u.promise):tt=new Promise((_t,In)=>{ie=_t,Ae=In});const dt=++this.navigationId;let At;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),At=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(y=this.browserPageId)&&void 0!==y?y:0)+1):At=0,this.setTransition({id:dt,targetPageId:At,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:ie,reject:Ae,promise:tt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),tt.catch(_t=>Promise.reject(_t))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){var i,s;if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===u?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(u)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Xo(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Eu(n){return"imperative"!==n}let Zf=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=u,this.commands=null,this.onChanges=new Gt.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Kd(this.skipLocationChange),replaceUrl:Kd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Kd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(jr),c.Y36(_u),c.$8M("tabindex"),c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&c.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})(),Kf=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Gt.x,this.subscription=t.events.subscribe(s=>{s instanceof pu&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,u){if(0!==t||r||i||s||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:Kd(this.skipLocationChange),replaceUrl:Kd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Kd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(jr),c.Y36(_u),c.Y36(te))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[c.TTD]}),n})();function Kd(n){return""===n||!!n}class cI{}class uI{preload(e,t){return mt(null)}}let dI=(()=>{class n{constructor(t,r,i,s){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=new nI(i,r,p=>t.triggerEvent(new Of(p)),p=>t.triggerEvent(new Rf(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ar(t=>t instanceof pu),uu(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(c.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const u=s._loadedConfig;i.push(this.processRoutes(u.module,u.routes))}else s.loadChildren&&!s.canLoad?i.push(this.preloadConfig(t,s)):s.children&&i.push(this.processRoutes(t,s.children));return(0,mn.D)(i).pipe((0,If.J)(),(0,ot.U)(s=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?mt(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Br.z)(s=>(r._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(jr),c.LFG(c.Sil),c.LFG(c.zs3),c.LFG(cI))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Wv=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof mv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof pu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Gg&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Gg(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Cu=new c.OlP("ROUTER_CONFIGURATION"),hI=new c.OlP("ROUTER_FORROOT_GUARD"),bF=[qe,{provide:wC,useClass:Wg},{provide:jr,useFactory:function IF(n,e,t,r,i,s,u={},h,p){const y=new jr(null,n,e,t,r,i,gC(s));return h&&(y.urlHandlingStrategy=h),p&&(y.routeReuseStrategy=p),function TF(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,y),u.enableTracing&&y.events.subscribe(C=>{var D,R;null===(D=console.group)||void 0===D||D.call(console,`Router Event: ${C.constructor.name}`),console.log(C.toString()),console.log(C),null===(R=console.groupEnd)||void 0===R||R.call(console)}),y},deps:[wC,Hf,qe,c.zs3,c.Sil,Gv,Cu,[class rI{},new c.FiY],[class tI{},new c.FiY]]},Hf,{provide:_u,useFactory:function DF(n){return n.routerState.root},deps:[jr]},dI,uI,class rx{preload(e,t){return t().pipe(Qo(()=>mt(null)))}},{provide:Cu,useValue:{enableTracing:!1}}];function wF(){return new c.PXZ("Router",jr)}let ix=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[bF,ox(t),{provide:hI,useFactory:sx,deps:[[jr,new c.FiY,new c.tp0]]},{provide:Cu,useValue:r||{}},{provide:te,useFactory:CF,deps:[me,[new c.tBr(be),new c.FiY],Cu]},{provide:Wv,useFactory:EF,deps:[jr,jl,Cu]},{provide:cI,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:uI},{provide:c.PXZ,multi:!0,useFactory:wF},[o,{provide:c.ip1,multi:!0,useFactory:a,deps:[o]},{provide:d,useFactory:l,deps:[o]},{provide:c.tb,multi:!0,useExisting:d}]]}}static forChild(t){return{ngModule:n,providers:[ox(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(hI,8),c.LFG(jr,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function EF(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Wv(n,e,t)}function CF(n,e,t={}){return t.useHash?new ve(n,e):new Te(n,e)}function sx(n){return"guarded"}function ox(n){return[{provide:c.deG,multi:!0,useValue:n},{provide:Gv,multi:!0,useValue:n}]}let o=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Gt.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),s=this.injector.get(jr),u=this.injector.get(Cu);return"disabled"===u.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabled"===u.initialNavigation||"enabledBlocking"===u.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?mt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Cu),i=this.injector.get(dI),s=this.injector.get(Wv),u=this.injector.get(jr),h=this.injector.get(c.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&u.initialNavigation(),i.setUpPreloading(),s.init(),u.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function a(n){return n.appInitializer.bind(n)}function l(n){return n.bootstrapListener.bind(n)}const d=new c.OlP("Router Initializer");var v=F(5813);function w(){return(0,_r.e)((n,e)=>{let t,r=!1;n.subscribe(new nn.Q(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var se,I=F(2011),O=(F(5881),F(3942)),M=F(5861),q=F(9681),re=F(4859),we=F(1877),x=F(2090),Ke="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Je={},bt=bt||{},Ze=Ke||self;function an(){}function Wi(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ea(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Yf="closure_uid_"+(1e9*Math.random()>>>0),Kv=0;function Yv(n,e,t){return n.call.apply(n.bind,arguments)}function Qv(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Hr(n,e,t){return(Hr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Yv:Qv).apply(null,arguments)}function Yd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function $r(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,s){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function Ma(){this.s=this.s,this.o=this.o}var K3={};Ma.prototype.s=!1,Ma.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Zv(n){return Object.prototype.hasOwnProperty.call(n,Yf)&&n[Yf]||(n[Yf]=++Kv)}(this);delete K3[n]}},Ma.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const SF=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},AF=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let s=0;s<r;s++)s in i&&e.call(t,i[s],s,n)};function MF(n){return Array.prototype.concat.apply([],arguments)}function ax(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function fI(n){return/^[\s\xa0]*$/.test(n)}var $s,xF=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Hs(n,e){return-1!=n.indexOf(e)}function lx(n,e){return n<e?-1:n>e?1:0}e:{var kF=Ze.navigator;if(kF){var OF=kF.userAgent;if(OF){$s=OF;break e}}$s=""}function cx(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function RF(n){const e={};for(const t in n)e[t]=n[t];return e}var PF="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function NF(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<PF.length;s++)t=PF[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function ux(n){return ux[" "](n),n}ux[" "]=an;var pI,n,X3=Hs($s,"Opera"),um=Hs($s,"Trident")||Hs($s,"MSIE"),FF=Hs($s,"Edge"),dx=FF||um,LF=Hs($s,"Gecko")&&!(Hs($s.toLowerCase(),"webkit")&&!Hs($s,"Edge"))&&!(Hs($s,"Trident")||Hs($s,"MSIE"))&&!Hs($s,"Edge"),J3=Hs($s.toLowerCase(),"webkit")&&!Hs($s,"Edge");function VF(){var n=Ze.document;return n?n.documentMode:void 0}e:{var hx="",fx=(n=$s,LF?/rv:([^\);]+)(\)|;)/.exec(n):FF?/Edge\/([\d\.]+)/.exec(n):um?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):J3?/WebKit\/(\S+)/.exec(n):X3?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(fx&&(hx=fx?fx[1]:""),um){var px=VF();if(null!=px&&px>parseFloat(hx)){pI=String(px);break e}}pI=hx}var e$={};var n$=Ze.document&&um&&(VF()||parseInt(pI,10))||void 0,r$=function(){if(!Ze.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ze.addEventListener("test",an,e),Ze.removeEventListener("test",an,e)}catch(t){}return n}();function vs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Xv(n,e){if(vs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(LF){e:{try{ux(e.nodeName);var i=!0;break e}catch(s){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:i$[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Xv.Z.h.call(this)}}vs.prototype.h=function(){this.defaultPrevented=!0},$r(Xv,vs);var i$={2:"touch",3:"pen",4:"mouse"};Xv.prototype.h=function(){Xv.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Jv="closure_listenable_"+(1e6*Math.random()|0),s$=0;function o$(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++s$,this.ca=this.fa=!1}function gI(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function mI(n){this.src=n,this.g={},this.h=0}function mx(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=SF(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(gI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function _x(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ca&&s.listener==e&&s.capture==!!t&&s.ia==r)return i}return-1}mI.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=_x(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new o$(e,this.src,s,!!r,i)).fa=t,n.push(e)),e};var yx="closure_lm_"+(1e6*Math.random()|0),vx={};function BF(n,e,t,r,i){if(r&&r.once)return HF(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)BF(n,e[s],t,r,i);return null}return t=Cx(t),n&&n[Jv]?n.N(e,t,ea(r)?!!r.capture:!!r,i):jF(n,e,t,!1,r,i)}function jF(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=ea(i)?!!i.capture:!!i,h=wx(n);if(h||(n[yx]=h=new mI(n)),(t=h.add(e,t,r,u,s)).proxy)return t;if(r=function a$(){var e=l$;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)r$||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(zF(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function HF(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)HF(n,e[s],t,r,i);return null}return t=Cx(t),n&&n[Jv]?n.O(e,t,ea(r)?!!r.capture:!!r,i):jF(n,e,t,!0,r,i)}function $F(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)$F(n,e[s],t,r,i);else r=ea(r)?!!r.capture:!!r,t=Cx(t),n&&n[Jv]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=_x(s=n.g[e],t,r,i))&&(gI(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=wx(n))&&(e=n.g[e.toString()],n=-1,e&&(n=_x(e,t,r,i)),(t=-1<n?e[n]:null)&&bx(t))}function bx(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Jv])mx(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(zF(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=wx(e))?(mx(t,n),0==t.h&&(t.src=null,e[yx]=null)):gI(n)}}}function zF(n){return n in vx?vx[n]:vx[n]="on"+n}function l$(n,e){if(n.ca)n=!0;else{e=new Xv(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&bx(n),n=t.call(r,e)}return n}function wx(n){return(n=n[yx])instanceof mI?n:null}var Ex="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cx(n){return"function"==typeof n?n:(n[Ex]||(n[Ex]=function(e){return n.handleEvent(e)}),n[Ex])}function Ci(){Ma.call(this),this.i=new mI(this),this.P=this,this.I=null}function Zi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new vs(e,n);else if(e instanceof vs)e.target=e.target||n;else{var i=e;NF(e=new vs(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=_I(u,r,!0,e)&&i}if(i=_I(u=e.g=n,r,!0,e)&&i,i=_I(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=_I(u=e.g=t[s],r,!1,e)&&i}function _I(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.ca&&u.capture==t){var h=u.listener,p=u.ia||u.src;u.fa&&mx(n.i,u),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}$r(Ci,Ma),Ci.prototype[Jv]=!0,Ci.prototype.removeEventListener=function(n,e,t,r){$F(this,n,e,t,r)},Ci.prototype.M=function(){if(Ci.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)gI(t[r]);delete n.g[e],n.h--}}this.I=null},Ci.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ci.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ix=Ze.JSON.stringify;function c$(){var n=GF;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Dx,qF=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new d$,n=>n.reset());class d${constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function h$(n){Ze.setTimeout(()=>{throw n},0)}function Tx(n,e){Dx||function f$(){var n=Ze.Promise.resolve(void 0);Dx=function(){n.then(p$)}}(),Sx||(Dx(),Sx=!0),GF.add(n,e)}var Sx=!1,GF=new class u${constructor(){this.h=this.g=null}add(e,t){const r=qF.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function p$(){for(var n;n=c$();){try{n.h.call(n.g)}catch(t){h$(t)}var e=qF;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Sx=!1}function yI(n,e){Ci.call(this),this.h=n||1,this.g=e||Ze,this.j=Hr(this.kb,this),this.l=Date.now()}function Ax(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Mx(n,e,t){if("function"==typeof n)t&&(n=Hr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ze.setTimeout(n,e||0)}function WF(n){n.g=Mx(()=>{n.g=null,n.i&&(n.i=!1,WF(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}$r(yI,Ci),(se=yI.prototype).da=!1,se.S=null,se.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Zi(this,"tick"),this.da&&(Ax(this),this.start()))}},se.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},se.M=function(){yI.Z.M.call(this),Ax(this),delete this.g};class g$ extends Ma{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:WF(this)}M(){super.M(),this.g&&(Ze.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function eb(n){Ma.call(this),this.h=n,this.g={}}$r(eb,Ma);var ZF=[];function KF(n,e,t,r){Array.isArray(t)||(t&&(ZF[0]=t.toString()),t=ZF);for(var i=0;i<t.length;i++){var s=BF(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function YF(n){cx(n.g,function(e,t){this.g.hasOwnProperty(t)&&bx(e)},n),n.g={}}function vI(){this.g=!0}function dm(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function v$(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return Ix(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}eb.prototype.M=function(){eb.Z.M.call(this),YF(this)},eb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},vI.prototype.Aa=function(){this.g=!1},vI.prototype.info=function(){};var Qf={},QF=null;function bI(){return QF=QF||new Ci}function XF(n){vs.call(this,Qf.Ma,n)}function tb(n){const e=bI();Zi(e,new XF(e,n))}function JF(n,e){vs.call(this,Qf.STAT_EVENT,n),this.stat=e}function zs(n){const e=bI();Zi(e,new JF(e,n))}function eL(n,e){vs.call(this,Qf.Na,n),this.size=e}function nb(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ze.setTimeout(function(){n()},e)}Qf.Ma="serverreachability",$r(XF,vs),Qf.STAT_EVENT="statevent",$r(JF,vs),Qf.Na="timingevent",$r(eL,vs);var wI={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},tL={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function xx(){}function rL(){}xx.prototype.h=null;var Rx,rb={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function kx(){vs.call(this,"d")}function Ox(){vs.call(this,"c")}function EI(){}function ib(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new eb(this),this.P=b$,this.W=new yI(n=dx?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new iL}function iL(){this.i=null,this.g="",this.h=!1}$r(kx,vs),$r(Ox,vs),$r(EI,xx),EI.prototype.g=function(){return new XMLHttpRequest},EI.prototype.i=function(){return{}},Rx=new EI;var b$=45e3,Px={},CI={};function Nx(n,e,t){n.K=1,n.v=AI(Iu(e)),n.s=t,n.U=!0,sL(n,null)}function sL(n,e){n.F=Date.now(),sb(n),n.A=Iu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),pL(t.h,"t",r),n.C=0,t=n.l.H,n.h=new iL,n.g=LL(n.l,t?e:null,!n.s),0<n.O&&(n.L=new g$(Hr(n.Ia,n,n.g),n.O)),KF(n.V,n.g,"readystatechange",n.gb),e=n.H?RF(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),tb(1),function m$(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",h=s.split("&"),p=0;p<h.length;p++){var y=h[p].split("=");if(1<y.length){var C=y[0];y=y[1];var D=C.split("_");u=2<=D.length&&"type"==D[1]?u+(C+"=")+y+"&":u+(C+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function oL(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function aL(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=w$(n,t),i==CI){4==e&&(n.o=4,zs(14),r=!1),dm(n.j,n.m,null,"[Incomplete Response]");break}if(i==Px){n.o=4,zs(15),dm(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}dm(n.j,n.m,i,null),Fx(n,i)}oL(n)&&i!=CI&&i!=Px&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,zs(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Wx(e),e.L=!0,zs(11))):(dm(n.j,n.m,t,"[Invalid Chunked Response]"),Xf(n),ob(n))}function w$(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?CI:(t=Number(e.substring(t,r)),isNaN(t)?Px:(r+=1)+t>e.length?CI:(e=e.substr(r,t),n.C=r+t,e))}function sb(n){n.Y=Date.now()+n.P,lL(n,n.P)}function lL(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=nb(Hr(n.eb,n),e)}function II(n){n.B&&(Ze.clearTimeout(n.B),n.B=null)}function ob(n){0==n.l.G||n.I||RL(n.l,n)}function Xf(n){II(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Ax(n.W),YF(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Fx(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Ux(t.i,n)))if(t.I=n.N,!n.J&&Ux(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(y){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=nb(Hr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;PI(t),OI(t)}Gx(t),zs(18)}if(1>=_L(t.i)&&t.ka){try{t.ka()}catch(y){}t.ka=void 0}}else tp(t,11)}else if((n.J||t.g==n)&&PI(t),!fI(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.U=y[0],y=y[1],2==t.G)if("c"==y[0]){t.J=y[1],t.la=y[2];const C=y[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const D=y[4];null!=D&&(t.za=D,t.h.info("SVER="+t.za));const R=y[5];null!=R&&"number"==typeof R&&0<R&&(t.K=r=1.5*R,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const L=n.g;if(L){const j=L.g?L.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var s=r.i;!s.g&&(Hs(j,"spdy")||Hs(j,"quic")||Hs(j,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Bx(s,s.h),s.h=null))}if(r.D){const ie=L.g?L.g.getResponseHeader("X-HTTP-Session-Id"):null;ie&&(r.sa=ie,ur(r.F,r.D,ie))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=FL(r,r.H?r.la:null,r.W),u.J){yL(r.i,u);var h=u,p=r.K;p&&h.setTimeout(p),h.B&&(II(h),sb(h)),r.g=u}else kL(r);0<t.l.length&&RI(t)}else"stop"!=y[0]&&"close"!=y[0]||tp(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?tp(t,7):zx(t):"noop"!=y[0]&&t.j&&t.j.wa(y),t.A=0)}tb(4)}catch(y){}}function Lx(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Wi(n)||"string"==typeof n)AF(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Wi(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function E$(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Wi(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}}function hm(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof hm)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Vx(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Jf(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Jf(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Jf(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(se=ib.prototype).setTimeout=function(n){this.P=n},se.gb=function(n){n=n.target;const e=this.L;e&&3==Tu(n)?e.l():this.Ia(n)},se.Ia=function(n){try{if(n==this.g)e:{const C=Tu(this.g);var e=this.g.Da();const D=this.g.ba();if(!(3>C)&&(3!=C||dx||this.g&&(this.h.h||this.g.ga()||DL(this.g)))){this.I||4!=C||7==e||tb(8==e||0>=D?3:2),II(this);var t=this.g.ba();this.N=t;t:if(oL(this)){var r=DL(this.g);n="";var i=r.length,s=4==Tu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Xf(this),ob(this);var u="";break t}this.h.i=new Ze.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function _$(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fI(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,zs(12),Xf(this),ob(this);break e}dm(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fx(this,t)}this.U?(aL(this,C,u),dx&&this.i&&3==C&&(KF(this.V,this.W,"tick",this.fb),this.W.start())):(dm(this.j,this.m,u,null),Fx(this,u)),4==C&&Xf(this),this.i&&!this.I&&(4==C?RL(this.l,this):(this.i=!1,sb(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,zs(12)):(this.o=0,zs(13)),Xf(this),ob(this)}}}catch(C){}},se.fb=function(){if(this.g){var n=Tu(this.g),e=this.g.ga();this.C<e.length&&(II(this),aL(this,n,e),this.i&&4!=n&&sb(this))}},se.cancel=function(){this.I=!0,Xf(this)},se.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function y$(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(tb(3),zs(17)),Xf(this),this.o=2,ob(this)):lL(this,this.Y-n)},(se=hm.prototype).R=function(){Vx(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},se.T=function(){return Vx(this),this.g.concat()},se.get=function(n,e){return Jf(this.h,n)?this.h[n]:e},se.set=function(n,e){Jf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},se.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],s=this.get(i);n.call(e,s,i,this)}};var cL=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ep(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof ep){this.g=void 0!==e?e:n.g,TI(this,n.j),this.s=n.s,DI(this,n.i),SI(this,n.m),this.l=n.l,e=n.h;var t=new cb;t.i=e.i,e.g&&(t.g=new hm(e.g),t.h=e.h),uL(this,t),this.o=n.o}else n&&(t=String(n).match(cL))?(this.g=!!e,TI(this,t[1]||"",!0),this.s=ab(t[2]||""),DI(this,t[3]||"",!0),SI(this,t[4]),this.l=ab(t[5]||"",!0),uL(this,t[6]||"",!0),this.o=ab(t[7]||"")):(this.g=!!e,this.h=new cb(null,this.g))}function Iu(n){return new ep(n)}function TI(n,e,t){n.j=t?ab(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function DI(n,e,t){n.i=t?ab(e,!0):e}function SI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function uL(n,e,t){e instanceof cb?(n.h=e,function k$(n,e){e&&!n.j&&(Qd(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(hL(this,r),pL(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=lb(e,M$)),n.h=new cb(e,n.g))}function ur(n,e,t){n.h.set(e,t)}function AI(n){return ur(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ab(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function lb(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,D$),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function D$(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ep.prototype.toString=function(){var n=[],e=this.j;e&&n.push(lb(e,dL,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(lb(e,dL,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(lb(t,"/"==t.charAt(0)?A$:S$,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",lb(t,x$)),n.join("")};var dL=/[#\/\?@]/g,S$=/[#\?:]/g,A$=/[#\?]/g,M$=/[#\?@]/g,x$=/#/g;function cb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Qd(n){n.g||(n.g=new hm,n.h=0,n.i&&function C$(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function hL(n,e){Qd(n),e=fm(n,e),Jf(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Jf((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Vx(n)))}function fL(n,e){return Qd(n),e=fm(n,e),Jf(n.g.h,e)}function pL(n,e,t){hL(n,e),0<t.length&&(n.i=null,n.g.set(fm(n,e),ax(t)),n.h+=t.length)}function fm(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function gL(n){this.l=n||R$,n=Ze.PerformanceNavigationTiming?0<(n=Ze.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ze.g&&Ze.g.Ea&&Ze.g.Ea()&&Ze.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(se=cb.prototype).add=function(n,e){Qd(this),this.i=null,n=fm(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},se.forEach=function(n,e){Qd(this),this.g.forEach(function(t,r){AF(t,function(i){n.call(e,i,r,this)},this)},this)},se.T=function(){Qd(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],s=0;s<i.length;s++)t.push(e[r]);return t},se.R=function(n){Qd(this);var e=[];if("string"==typeof n)fL(this,n)&&(e=MF(e,this.g.get(fm(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=MF(e,n[t])}return e},se.set=function(n,e){return Qd(this),this.i=null,fL(this,n=fm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},se.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},se.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var u=i;""!==r[s]&&(u+="="+encodeURIComponent(String(r[s]))),n.push(u)}}return this.i=n.join("&")};var R$=10;function mL(n){return!!n.h||!!n.g&&n.g.size>=n.j}function _L(n){return n.h?1:n.g?n.g.size:0}function Ux(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Bx(n,e){n.g?n.g.add(e):n.h=e}function yL(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function vL(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return ax(n.i)}function jx(){}function P$(){this.g=new jx}function N$(n,e,t){const r=t||"";try{Lx(n,function(i,s){let u=i;ea(i)&&(u=Ix(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function MI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(s){}}function ub(n){this.l=n.$b||null,this.j=n.ib||!1}function xI(n,e){Ci.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Hx,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gL.prototype.cancel=function(){if(this.i=vL(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},jx.prototype.stringify=function(n){return Ze.JSON.stringify(n,void 0)},jx.prototype.parse=function(n){return Ze.JSON.parse(n,void 0)},$r(ub,xx),ub.prototype.g=function(){return new xI(this.l,this.j)},ub.prototype.i=function(n){return function(){return n}}({}),$r(xI,Ci);var Hx=0;function bL(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function db(n){n.readyState=4,n.l=null,n.j=null,n.A=null,hb(n)}function hb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(se=xI.prototype).open=function(n,e){if(this.readyState!=Hx)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,hb(this)},se.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ze).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},se.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,db(this)),this.readyState=Hx},se.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,hb(this)),this.g&&(this.readyState=3,hb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ze.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bL(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},se.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?db(this):hb(this),3==this.readyState&&bL(this)}},se.Ua=function(n){this.g&&(this.response=this.responseText=n,db(this))},se.Ta=function(n){this.g&&(this.response=n,db(this))},se.ha=function(){this.g&&db(this)},se.setRequestHeader=function(n,e){this.v.append(n,e)},se.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},se.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var L$=Ze.JSON.parse;function Jr(n){Ci.call(this),this.headers=new hm,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=wL,this.K=this.L=!1}$r(Jr,Ci);var wL="",V$=/^https?$/i,U$=["POST","PUT"];function j$(n){return"content-type"==n.toLowerCase()}function EL(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,CL(n),kI(n)}function CL(n){n.D||(n.D=!0,Zi(n,"complete"),Zi(n,"error"))}function IL(n){if(n.h&&void 0!==bt&&(!n.C[1]||4!=Tu(n)||2!=n.ba()))if(n.v&&4==Tu(n))Mx(n.Fa,0,n);else if(Zi(n,"readystatechange"),4==Tu(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(cL)[1]||null;if(!i&&Ze.self&&Ze.self.location){var s=Ze.self.location.protocol;i=s.substr(0,s.length-1)}r=!V$.test(i?i.toLowerCase():"")}t=r}if(t)Zi(n,"complete"),Zi(n,"success");else{n.m=6;try{var u=2<Tu(n)?n.g.statusText:""}catch(p){u=""}n.j=u+" ["+n.ba()+"]",CL(n)}}finally{kI(n)}}}function kI(n,e){if(n.g){TL(n);const t=n.g,r=n.C[0]?an:null;n.g=null,n.C=null,e||Zi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function TL(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ze.clearTimeout(n.A),n.A=null)}function Tu(n){return n.g?n.g.readyState:0}function DL(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case wL:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function $x(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function H$(n){let e="";return cx(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ur(n,e,t))}function fb(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function SL(n){this.za=0,this.l=[],this.h=new vI,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fb("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fb("baseRetryDelayMs",5e3,n),this.$a=fb("retryDelaySeedMs",1e4,n),this.Ya=fb("forwardChannelMaxRetries",2,n),this.ra=fb("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new gL(n&&n.concurrentRequestLimit),this.Ca=new P$,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function zx(n){if(AL(n),3==n.G){var e=n.V++,t=Iu(n.F);ur(t,"SID",n.J),ur(t,"RID",e),ur(t,"TYPE","terminate"),pb(n,t),(e=new ib(n,n.h,e,void 0)).K=2,e.v=AI(Iu(t)),t=!1,Ze.navigator&&Ze.navigator.sendBeacon&&(t=Ze.navigator.sendBeacon(e.v.toString(),"")),!t&&Ze.Image&&((new Image).src=e.v,t=!0),t||(e.g=LL(e.l,null),e.g.ea(e.v)),e.F=Date.now(),sb(e)}NL(n)}function OI(n){n.g&&(Wx(n),n.g.cancel(),n.g=null)}function AL(n){OI(n),n.u&&(Ze.clearTimeout(n.u),n.u=null),PI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ze.clearTimeout(n.m),n.m=null)}function qx(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&RI(n)}function RI(n){mL(n.i)||n.m||(n.m=!0,Tx(n.Ha,n),n.C=0)}function ML(n,e){var t;t=e?e.m:n.V++;const r=Iu(n.F);ur(r,"SID",n.J),ur(r,"RID",t),ur(r,"AID",n.U),pb(n,r),n.o&&n.s&&$x(r,n.o,n.s),t=new ib(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=xL(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Bx(n.i,t),Nx(t,r,e)}function pb(n,e){n.j&&Lx({},function(t,r){ur(e,r,t)})}function xL(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Hr(n.j.Oa,n.j,n):null;e:{var i=n.l;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let y=i[p].h;const C=i[p].g;if(y-=s,0>y)s=Math.max(0,i[p].h-100),h=!1;else try{N$(C,u,"req"+y+"_")}catch(D){r&&r(C)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function kL(n){n.g||n.u||(n.Y=1,Tx(n.Ga,n),n.A=0)}function Gx(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=nb(Hr(n.Ga,n),PL(n,n.A)),n.A++,0))}function Wx(n){null!=n.B&&(Ze.clearTimeout(n.B),n.B=null)}function OL(n){n.g=new ib(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Iu(n.oa);ur(e,"RID","rpc"),ur(e,"SID",n.J),ur(e,"CI",n.N?"0":"1"),ur(e,"AID",n.U),pb(n,e),ur(e,"TYPE","xmlhttp"),n.o&&n.s&&$x(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=AI(Iu(e)),t.s=null,t.U=!0,sL(t,n)}function PI(n){null!=n.v&&(Ze.clearTimeout(n.v),n.v=null)}function RL(n,e){var t=null;if(n.g==e){PI(n),Wx(n),n.g=null;var r=2}else{if(!Ux(n.i,e))return;t=e.D,yL(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Zi(r=bI(),new eL(r,t,e,i)),RI(n)}else kL(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function $$(n,e){return!(_L(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=nb(Hr(n.Ha,n,e),PL(n,n.C)),n.C++,0)))}(n,e)||2==r&&Gx(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:tp(n,5);break;case 4:tp(n,10);break;case 3:tp(n,6);break;default:tp(n,2)}}function PL(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function tp(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Hr(n.jb,n);t||(t=new ep("//www.google.com/images/cleardot.gif"),Ze.location&&"http"==Ze.location.protocol||TI(t,"https"),AI(t)),function F$(n,e){const t=new vI;if(Ze.Image){const r=new Image;r.onload=Yd(MI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Yd(MI,t,r,"TestLoadImage: error",!1,e),r.onabort=Yd(MI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yd(MI,t,r,"TestLoadImage: timeout",!1,e),Ze.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else zs(2);n.G=0,n.j&&n.j.va(e),NL(n),AL(n)}function NL(n){n.G=0,n.I=-1,n.j&&((0!=vL(n.i).length||0!=n.l.length)&&(n.i.i.length=0,ax(n.l),n.l.length=0),n.j.ua())}function FL(n,e,t){let r=function I$(n){return n instanceof ep?Iu(n):new ep(n,void 0)}(t);if(""!=r.i)e&&DI(r,e+"."+r.i),SI(r,r.m);else{const i=Ze.location;r=function T$(n,e,t,r){var i=new ep(null,void 0);return n&&TI(i,n),e&&DI(i,e),t&&SI(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&cx(n.aa,function(i,s){ur(r,s,i)}),t=n.sa,(e=n.D)&&t&&ur(r,e,t),ur(r,"VER",n.ma),pb(n,r),r}function LL(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jr(t&&n.Ba&&!n.qa?new ub({ib:!0}):n.qa)).L=n.H,e}function VL(){}function NI(){if(um&&!(10<=Number(n$)))throw Error("Environmental error: no available transport.")}function ta(n,e){Ci.call(this),this.g=new SL(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!fI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fI(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new pm(this)}function UL(n){kx.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function BL(){Ox.call(this),this.status=1}function pm(n){this.g=n}(se=Jr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rx.g(),this.C=function nL(n){return n.h||(n.h=n.i())}(this.u?this.u:Rx),this.g.onreadystatechange=Hr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void EL(this,s)}n=t||"";const i=new hm(this.headers);r&&Lx(r,function(s,u){i.set(u,s)}),r=function Y3(n){e:{var e=j$;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ze.FormData&&n instanceof Ze.FormData,!(0<=SF(U$,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(s,u){this.g.setRequestHeader(u,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{TL(this),0<this.B&&((this.K=function B$(n){return um&&function t$(){return function Q3(n){var e=e$;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=xF(String(pI)).split("."),t=xF("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",s=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=lx(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||lx(0==i[2].length,0==s[2].length)||lx(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hr(this.pa,this)):this.A=Mx(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){EL(this,s)}},se.pa=function(){void 0!==bt&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Zi(this,"timeout"),this.abort(8))},se.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Zi(this,"complete"),Zi(this,"abort"),kI(this))},se.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kI(this,!0)),Jr.Z.M.call(this)},se.Fa=function(){this.s||(this.F||this.v||this.l?IL(this):this.cb())},se.cb=function(){IL(this)},se.ba=function(){try{return 2<Tu(this)?this.g.status:-1}catch(n){return-1}},se.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},se.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),L$(e)}},se.Da=function(){return this.m},se.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(se=SL.prototype).ma=8,se.G=1,se.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},se.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new ib(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=RF(s),NF(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=xL(this,i,e),ur(t=Iu(this.F),"RID",n),ur(t,"CVER",22),this.D&&ur(t,"X-HTTP-Session-Id",this.D),pb(this,t),this.o&&s&&$x(t,this.o,s),Bx(this.i,i),this.Ra&&ur(t,"TYPE","init"),this.ja?(ur(t,"$req",e),ur(t,"SID","null"),i.$=!0,Nx(i,t,null)):Nx(i,t,e),this.G=2}}else 3==this.G&&(n?ML(this,n):0==this.l.length||mL(this.i)||ML(this))},se.Ga=function(){if(this.u=null,OL(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=nb(Hr(this.bb,this),n)}},se.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,zs(10),OI(this),OL(this))},se.ab=function(){null!=this.v&&(this.v=null,OI(this),Gx(this),zs(19))},se.jb=function(n){n?(this.h.info("Successfully pinged google.com"),zs(2)):(this.h.info("Failed to ping google.com"),zs(1))},(se=VL.prototype).xa=function(){},se.wa=function(){},se.va=function(){},se.ua=function(){},se.Oa=function(){},NI.prototype.g=function(n,e){return new ta(n,e)},$r(ta,Ci),ta.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Tx(Hr(n.hb,n,e))),zs(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=FL(n,null,n.W),RI(n)},ta.prototype.close=function(){zx(this.g)},ta.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,qx(this.g,e)}else this.v?((e={}).__data__=Ix(n),qx(this.g,e)):qx(this.g,n)},ta.prototype.M=function(){this.g.j=null,delete this.j,zx(this.g),delete this.g,ta.Z.M.call(this)},$r(UL,kx),$r(BL,Ox),$r(pm,VL),pm.prototype.xa=function(){Zi(this.g,"a")},pm.prototype.wa=function(n){Zi(this.g,new UL(n))},pm.prototype.va=function(n){Zi(this.g,new BL(n))},pm.prototype.ua=function(){Zi(this.g,"b")},NI.prototype.createWebChannel=NI.prototype.g,ta.prototype.send=ta.prototype.u,ta.prototype.open=ta.prototype.m,ta.prototype.close=ta.prototype.close,wI.NO_ERROR=0,wI.TIMEOUT=8,wI.HTTP_ERROR=6,tL.COMPLETE="complete",rL.EventType=rb,rb.OPEN="a",rb.CLOSE="b",rb.ERROR="c",rb.MESSAGE="d",Ci.prototype.listen=Ci.prototype.N,Jr.prototype.listenOnce=Jr.prototype.O,Jr.prototype.getLastError=Jr.prototype.La,Jr.prototype.getLastErrorCode=Jr.prototype.Da,Jr.prototype.getStatus=Jr.prototype.ba,Jr.prototype.getResponseJson=Jr.prototype.Qa,Jr.prototype.getResponseText=Jr.prototype.ga,Jr.prototype.send=Jr.prototype.ea;var z$=Je.createWebChannelTransport=function(){return new NI},q$=Je.getStatEventTarget=function(){return bI()},Zx=Je.ErrorCode=wI,G$=Je.EventType=tL,W$=Je.Event=Qf,jL=Je.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Z$=Je.FetchXmlHttpFactory=ub,FI=Je.WebChannel=rL,K$=Je.XhrIo=Jr;const HL="@firebase/firestore";class Ki{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid"),Ki.MOCK_USER=new Ki("mock-user");let gm="9.6.7";const Xd=new we.Yd("@firebase/firestore");function Kx(){return Xd.logLevel}function ze(n,...e){if(Xd.logLevel<=we.in.DEBUG){const t=e.map(Yx);Xd.debug(`Firestore (${gm}): ${n}`,...t)}}function ei(n,...e){if(Xd.logLevel<=we.in.ERROR){const t=e.map(Yx);Xd.error(`Firestore (${gm}): ${n}`,...t)}}function gb(n,...e){if(Xd.logLevel<=we.in.WARN){const t=e.map(Yx);Xd.warn(`Firestore (${gm}): ${n}`,...t)}}function Yx(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function vt(n="Unexpected state"){const e=`FIRESTORE (${gm}) INTERNAL ASSERTION FAILED: `+n;throw ei(e),new Error(e)}function Rt(n,e){n||vt()}function Xe(n,e){return n}const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends x.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ii{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class $L{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class X${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ki.UNAUTHENTICATED))}shutdown(){}}class J${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ez{constructor(e){this.t=e,this.currentUser=Ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let u=new Ii;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ii,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=u;e.enqueueRetryable((0,M.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},p=y=>{ze("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>p(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?p(y):(ze("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ii)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ze("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new $L(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new Ki(e)}}class tz{constructor(e,t,r){this.type="FirstParty",this.user=Ki.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class nz{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new tz(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rz{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=s=>{null!=s.error&&ze("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.p;return this.p=s.token,ze("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ze("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?i(s):ze("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.p=t.token,new zL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class na{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function iz(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}na.A=-1;class qL{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=iz(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function on(n,e){return n<e?-1:n>e?1:0}function mm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function GL(n){return n+"\0"}class Ti{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ti.fromMillis(Date.now())}static fromDate(e){return Ti.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ti(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?on(this.nanoseconds,e.nanoseconds):on(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new xt(e)}static min(){return new xt(new Ti(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function WL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function np(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ZL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mb{constructor(e,t,r){void 0===t?t=0:t>e.length&&vt(),void 0===r?r=e.length-t:r>e.length-t&&vt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===mb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mb?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class En extends mb{construct(e,t,r){return new En(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new En(t)}static emptyPath(){return new En([])}}const sz=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Di extends mb{construct(e,t,r){return new Di(e,t,r)}static isValidIdentifier(e){return sz.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Di.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Di(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Ue(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new Ue(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(s(),i++)}if(s(),u)throw new Ue(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Di(t)}static emptyPath(){return new Di([])}}class _m{constructor(e){this.fields=e,e.sort(Di.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new hi(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new hi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return on(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const az=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jd(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=az.exec(n);if(Rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xr(n.seconds),nanos:xr(n.nanos)}}function xr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function rp(n){return"string"==typeof n?hi.fromBase64String(n):hi.fromUint8Array(n)}function Qx(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function KL(n){const e=n.mapValue.fields.__previous_value__;return Qx(e)?KL(e):e}function _b(n){const e=Jd(n.mapValue.fields.__local_write_time__.timestampValue);return new Ti(e.seconds,e.nanos)}class lz{constructor(e,t,r,i,s,u,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class ip{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ip("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ip&&e.projectId===this.projectId&&e.database===this.database}}function sp(n){return null==n}function yb(n){return 0===n&&1/n==-1/0}function YL(n){return"number"==typeof n&&Number.isInteger(n)&&!yb(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class lt{constructor(e){this.path=e}static fromPath(e){return new lt(En.fromString(e))}static fromName(e){return new lt(En.fromString(e).popFirst(5))}static empty(){return new lt(En.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===En.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return En.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new En(e.slice()))}}const cz={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function op(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Qx(n)?4:10:vt()}function Sl(n,e){if(n===e)return!0;const t=op(n);if(t!==op(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _b(n).isEqual(_b(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Jd(r.timestampValue),u=Jd(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,rp(n.bytesValue).isEqual(rp(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return xr(r.geoPointValue.latitude)===xr(i.geoPointValue.latitude)&&xr(r.geoPointValue.longitude)===xr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return xr(r.integerValue)===xr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=xr(r.doubleValue),u=xr(i.doubleValue);return s===u?yb(s)===yb(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return mm(n.arrayValue.values||[],e.arrayValue.values||[],Sl);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(WL(s)!==WL(u))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===u[h]||!Sl(s[h],u[h])))return!1;return!0}(n,e);default:return vt()}var i}function vb(n,e){return void 0!==(n.values||[]).find(t=>Sl(t,e))}function ym(n,e){if(n===e)return 0;const t=op(n),r=op(e);if(t!==r)return on(t,r);switch(t){case 0:return 0;case 1:return on(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=xr(i.integerValue||i.doubleValue),h=xr(s.integerValue||s.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return QL(n.timestampValue,e.timestampValue);case 4:return QL(_b(n),_b(e));case 5:return on(n.stringValue,e.stringValue);case 6:return function(i,s){const u=rp(i),h=rp(s);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),h=s.split("/");for(let p=0;p<u.length&&p<h.length;p++){const y=on(u[p],h[p]);if(0!==y)return y}return on(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=on(xr(i.latitude),xr(s.latitude));return 0!==u?u:on(xr(i.longitude),xr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],h=s.values||[];for(let p=0;p<u.length&&p<h.length;++p){const y=ym(u[p],h[p]);if(y)return y}return on(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){const u=i.fields||{},h=Object.keys(u),p=s.fields||{},y=Object.keys(p);h.sort(),y.sort();for(let C=0;C<h.length&&C<y.length;++C){const D=on(h[C],y[C]);if(0!==D)return D;const R=ym(u[h[C]],p[y[C]]);if(0!==R)return R}return on(h.length,y.length)}(n.mapValue,e.mapValue);default:throw vt()}}function QL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return on(n,e);const t=Jd(n),r=Jd(e),i=on(t.seconds,r.seconds);return 0!==i?i:on(t.nanos,r.nanos)}function vm(n){return Xx(n)}function Xx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Jd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?rp(n.bytesValue).toBase64():"referenceValue"in n?lt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=Xx(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const h of i)u?u=!1:s+=",",s+=`${h}:${Xx(r.fields[h])}`;return s+"}"}(n.mapValue):vt();var e}function LI(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jx(n){return!!n&&"integerValue"in n}function VI(n){return!!n&&"arrayValue"in n}function XL(n){return!!n&&"nullValue"in n}function JL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function UI(n){return!!n&&"mapValue"in n}function bb(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return np(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bb(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bb(n.arrayValue.values[t]);return e}return Object.assign({},n)}class bs{constructor(e){this.value=e}static empty(){return new bs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!UI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bb(t)}setAll(e){let t=Di.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=bb(u):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());UI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sl(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];UI(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){np(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new bs(bb(this.value))}}function eV(n){const e=[];return np(n.fields,(t,r)=>{const i=new Di([t]);if(UI(r)){const s=eV(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new _m(e)}class vr{constructor(e,t,r,i,s,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=u}static newInvalidDocument(e){return new vr(e,0,xt.min(),xt.min(),bs.empty(),0)}static newFoundDocument(e,t,r){return new vr(e,1,t,xt.min(),r,0)}static newNoDocument(e,t){return new vr(e,2,t,xt.min(),bs.empty(),0)}static newUnknownDocument(e,t){return new vr(e,3,t,xt.min(),bs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof vr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let ek=(()=>{class n{constructor(t,r,i,s){this.indexId=t,this.collectionGroup=r,this.fields=i,this.indexState=s}}return n.UNKNOWN_ID=-1,n})();class BI{constructor(e,t){this.fieldPath=e,this.kind=t}}class wb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new wb(0,jI.min())}}class jI{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new jI(xt.min(),lt.empty(),-1)}}class uz{constructor(e,t=null,r=[],i=[],s=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=h,this.P=null}}function tV(n,e=null,t=[],r=[],i=null,s=null,u=null){return new uz(n,e,t,r,i,s,u)}function Eb(n){const e=Xe(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+vm(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),sp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vm(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vm(r)).join(",")),e.P=t}return e.P}function HI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!vz(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Sl(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!iV(n.startAt,e.startAt)&&iV(n.endAt,e.endAt)}function $I(n){return lt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class qs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new hz(e,t,r):"array-contains"===t?new gz(e,r):"in"===t?new mz(e,r):"not-in"===t?new _z(e,r):"array-contains-any"===t?new yz(e,r):new qs(e,t,r)}static v(e,t,r){return"in"===t?new fz(e,r):new pz(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(ym(t,this.value)):null!==t&&op(this.value)===op(t)&&this.V(ym(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return vt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class hz extends qs{constructor(e,t,r){super(e,t,r),this.key=lt.fromName(r.referenceValue)}matches(e){const t=lt.comparator(e.key,this.key);return this.V(t)}}class fz extends qs{constructor(e,t){super(e,"in",t),this.keys=nV(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class pz extends qs{constructor(e,t){super(e,"not-in",t),this.keys=nV(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nV(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>lt.fromName(r.referenceValue))}class gz extends qs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return VI(t)&&vb(t.arrayValue,this.value)}}class mz extends qs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vb(this.value.arrayValue,t)}}class _z extends qs{constructor(e,t){super(e,"not-in",t)}matches(e){if(vb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vb(this.value.arrayValue,t)}}class yz extends qs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!VI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vb(this.value.arrayValue,r))}}class bm{constructor(e,t){this.position=e,this.inclusive=t}}class wm{constructor(e,t="asc"){this.field=e,this.dir=t}}function vz(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function rV(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?lt.comparator(lt.fromName(u.referenceValue),t.key):ym(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function iV(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Sl(n.position[t],e.position[t]))return!1;return!0}class Du{constructor(e,t=null,r=[],i=[],s=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=h,this.endAt=p,this.D=null,this.C=null}}function sV(n,e,t,r,i,s,u,h){return new Du(n,e,t,r,i,s,u,h)}function Em(n){return new Du(n)}function zI(n){return!sp(n.limit)&&"F"===n.limitType}function qI(n){return!sp(n.limit)&&"L"===n.limitType}function tk(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function nk(n){for(const e of n.filters)if(e.S())return e.field;return null}function rk(n){return null!==n.collectionGroup}function Cm(n){const e=Xe(n);if(null===e.D){e.D=[];const t=nk(e),r=tk(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new wm(t)),e.D.push(new wm(Di.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.D.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new wm(Di.keyField(),s))}}}return e.D}function xa(n){const e=Xe(n);if(!e.C)if("F"===e.limitType)e.C=tV(e.path,e.collectionGroup,Cm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Cm(e))t.push(new wm(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new bm(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new bm(e.startAt.position,!e.startAt.inclusive):null;e.C=tV(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function oV(n,e,t){return new Du(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Cb(n,e){return HI(xa(n),xa(e))&&n.limitType===e.limitType}function aV(n){return`${Eb(xa(n))}|lt:${n.limitType}`}function ik(n){return`Query(target=${function dz(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${vm(r.value)}`;var r}).join(", ")}]`),sp(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>vm(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>vm(t)).join(",")),`Target(${e})`}(xa(n))}; limitType=${n.limitType})`}function sk(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):lt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const h=rV(i,s,u);return i.inclusive?h<=0:h<0}(t.startAt,Cm(t),r)||t.endAt&&!function(i,s,u){const h=rV(i,s,u);return i.inclusive?h>=0:h>0}(t.endAt,Cm(t),r)));var t,r}function lV(n){return(e,t)=>{let r=!1;for(const i of Cm(n)){const s=bz(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function bz(n,e,t){const r=n.field.isKeyField()?lt.comparator(e.key,t.key):function(i,s,u){const h=s.data.field(i),p=u.data.field(i);return null!==h&&null!==p?ym(h,p):vt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return vt()}}function cV(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yb(e)?"-0":e}}function uV(n){return{integerValue:""+n}}function dV(n,e){return YL(e)?uV(e):cV(n,e)}class GI{constructor(){this._=void 0}}function wz(n,e,t){return n instanceof Im?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof ap?fV(n,e):n instanceof lp?pV(n,e):function(r,i){const s=hV(r,i),u=gV(s)+gV(r.k);return Jx(s)&&Jx(r.k)?uV(u):cV(r.O,u)}(n,e)}function Ez(n,e,t){return n instanceof ap?fV(n,e):n instanceof lp?pV(n,e):t}function hV(n,e){return n instanceof Tm?Jx(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Im extends GI{}class ap extends GI{constructor(e){super(),this.elements=e}}function fV(n,e){const t=mV(e);for(const r of n.elements)t.some(i=>Sl(i,r))||t.push(r);return{arrayValue:{values:t}}}class lp extends GI{constructor(e){super(),this.elements=e}}function pV(n,e){let t=mV(e);for(const r of n.elements)t=t.filter(i=>!Sl(i,r));return{arrayValue:{values:t}}}class Tm extends GI{constructor(e,t){super(),this.O=e,this.k=t}}function gV(n){return xr(n.integerValue||n.doubleValue)}function mV(n){return VI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ib{constructor(e,t){this.field=e,this.transform=t}}class Iz{constructor(e,t){this.version=e,this.transformResults=t}}class ti{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ti}static exists(e){return new ti(void 0,e)}static updateTime(e){return new ti(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function WI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ZI{}function Tz(n,e,t){n instanceof Tb?function(r,i,s){const u=r.value.clone(),h=bV(r.fieldTransforms,i,s.transformResults);u.setAll(h),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof cp?function(r,i,s){if(!WI(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=bV(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(vV(r)),h.setAll(u),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ok(n,e,t){var i;n instanceof Tb?function(r,i,s){if(!WI(r.precondition,i))return;const u=r.value.clone(),h=wV(r.fieldTransforms,s,i);u.setAll(h),i.convertToFoundDocument(yV(i),u).setHasLocalMutations()}(n,e,t):n instanceof cp?function(r,i,s){if(!WI(r.precondition,i))return;const u=wV(r.fieldTransforms,s,i),h=i.data;h.setAll(vV(r)),h.setAll(u),i.convertToFoundDocument(yV(i),h).setHasLocalMutations()}(n,e,t):WI(n.precondition,i=e)&&i.convertToNoDocument(xt.min())}function Dz(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=hV(r.transform,i||null);null!=s&&(null==t&&(t=bs.empty()),t.set(r.field,s))}return t||null}function _V(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&mm(t,r,(i,s)=>function Cz(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof ap&&r instanceof ap||t instanceof lp&&r instanceof lp?mm(t.elements,r.elements,Sl):t instanceof Tm&&r instanceof Tm?Sl(t.k,r.k):t instanceof Im&&r instanceof Im);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function yV(n){return n.isFoundDocument()?n.version:xt.min()}class Tb extends ZI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class cp extends ZI{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}}function vV(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function bV(n,e,t){const r=new Map;Rt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,h=e.data.field(s.field);r.set(s.field,Ez(u,h,t[i]))}return r}function wV(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,wz(s,u,e))}return r}class Db extends ZI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class ak extends ZI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Sz{constructor(e){this.count=e}}var ni,hn;function EV(n){switch(n){default:return vt();case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0}}function CV(n){if(void 0===n)return ei("GRPC error has no .code"),Ee.UNKNOWN;switch(n){case ni.OK:return Ee.OK;case ni.CANCELLED:return Ee.CANCELLED;case ni.UNKNOWN:return Ee.UNKNOWN;case ni.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case ni.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case ni.INTERNAL:return Ee.INTERNAL;case ni.UNAVAILABLE:return Ee.UNAVAILABLE;case ni.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case ni.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case ni.NOT_FOUND:return Ee.NOT_FOUND;case ni.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case ni.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case ni.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case ni.ABORTED:return Ee.ABORTED;case ni.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case ni.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case ni.DATA_LOSS:return Ee.DATA_LOSS;default:return vt()}}(hn=ni||(ni={}))[hn.OK=0]="OK",hn[hn.CANCELLED=1]="CANCELLED",hn[hn.UNKNOWN=2]="UNKNOWN",hn[hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hn[hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hn[hn.NOT_FOUND=5]="NOT_FOUND",hn[hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",hn[hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",hn[hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",hn[hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hn[hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hn[hn.ABORTED=10]="ABORTED",hn[hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",hn[hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",hn[hn.INTERNAL=13]="INTERNAL",hn[hn.UNAVAILABLE=14]="UNAVAILABLE",hn[hn.DATA_LOSS=15]="DATA_LOSS";class zr{constructor(e,t){this.comparator=e,this.root=t||Yi.EMPTY}insert(e,t){return new zr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(e){return new zr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new KI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new KI(this.root,e,this.comparator,!1)}getReverseIterator(){return new KI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new KI(this.root,e,this.comparator,!0)}}class KI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=null!=r?r:Yi.RED,this.left=null!=i?i:Yi.EMPTY,this.right=null!=s?s:Yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Yi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Yi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw vt();const e=this.left.check();if(e!==this.right.check())throw vt();return e+(this.isRed()?0:1)}}Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1,Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw vt()}get value(){throw vt()}get color(){throw vt()}get left(){throw vt()}get right(){throw vt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Yi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dr{constructor(e){this.comparator=e,this.data=new zr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IV(this.data.getIterator())}getIteratorFrom(e){return new IV(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof dr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dr(this.comparator);return t.data=e,t}}class IV{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dm(n){return n.hasNext()?n.getNext():void 0}const Az=new zr(lt.comparator);function ka(){return Az}const Mz=new zr(lt.comparator);function lk(){return Mz}const xz=new zr(lt.comparator),kz=new dr(lt.comparator);function Pn(...n){let e=kz;for(const t of n)e=e.add(t);return e}const Oz=new dr(on);function YI(){return Oz}class Sb{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Ab.createSynthesizedTargetChangeForCurrentChange(e,t)),new Sb(xt.min(),r,YI(),ka(),Pn())}}class Ab{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Ab(hi.EMPTY_BYTE_STRING,t,Pn(),Pn(),Pn())}}class QI{constructor(e,t,r,i){this.M=e,this.removedTargetIds=t,this.key=r,this.$=i}}class TV{constructor(e,t){this.targetId=e,this.F=t}}class DV{constructor(e,t,r=hi.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class SV{constructor(){this.B=0,this.L=MV(),this.U=hi.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=Pn(),t=Pn(),r=Pn();return this.L.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:vt()}}),new Ab(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=MV()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Rz{constructor(e){this.nt=e,this.st=new Map,this.it=ka(),this.rt=AV(),this.ot=new dr(on)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:vt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.F.count,i=this.wt(t);if(i){const s=i.target;if($I(s))if(0===r){const u=new lt(s.path);this.at(t,u,vr.newNoDocument(u,xt.min()))}else Rt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((s,u)=>{const h=this.wt(u);if(h){if(s.current&&$I(h.target)){const p=new lt(h.target.path);null!==this.it.get(p)||this.It(u,p)||this.at(u,p,vr.newNoDocument(p,e))}s.j&&(t.set(u,s.H()),s.J())}});let r=Pn();this.rt.forEach((s,u)=>{let h=!0;u.forEachWhile(p=>{const y=this.wt(p);return!y||2===y.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.it.forEach((s,u)=>u.setReadTime(e));const i=new Sb(e,t,this.ot,this.it,r);return this.it=ka(),this.rt=AV(),this.ot=new dr(on),i}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new SV,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new dr(on),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new SV),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function AV(){return new zr(lt.comparator)}function MV(){return new zr(lt.comparator)}const Pz={asc:"ASCENDING",desc:"DESCENDING"},Nz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Fz{constructor(e,t){this.databaseId=e,this.N=t}}function Mb(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xV(n,e){return n.N?e.toBase64():e.toUint8Array()}function Lz(n,e){return Mb(n,e.toTimestamp())}function Si(n){return Rt(!!n),xt.fromTimestamp(function(e){const t=Jd(e);return new Ti(t.seconds,t.nanos)}(n))}function ck(n,e){return(t=n,new En(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function kV(n){const e=En.fromString(n);return Rt(BV(e)),e}function xb(n,e){return ck(n.databaseId,e.path)}function yc(n,e){const t=kV(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new lt(RV(t))}function uk(n,e){return ck(n.databaseId,e)}function OV(n){const e=kV(n);return 4===e.length?En.emptyPath():RV(e)}function kb(n){return new En(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RV(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function PV(n,e,t){return{name:xb(n,e),fields:t.value.mapValue.fields}}function NV(n,e,t){const r=yc(n,e.name),i=Si(e.updateTime),s=new bs({mapValue:{fields:e.fields}}),u=vr.newFoundDocument(r,i,s);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function Ob(n,e){let t;if(e instanceof Tb)t={update:PV(n,e.key,e.value)};else if(e instanceof Db)t={delete:xb(n,e.key)};else if(e instanceof cp)t={update:PV(n,e.key,e.data),updateMask:Gz(e.fieldMask)};else{if(!(e instanceof ak))return vt();t={verify:xb(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof Im)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ap)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof lp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Tm)return{fieldPath:s.field.canonicalString(),increment:u.k};throw vt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Lz(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:vt()),t;var i}function dk(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ti.updateTime(Si(i.updateTime)):void 0!==i.exists?ti.exists(i.exists):ti.none():ti.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let h=null;"setToServerValue"in u?(Rt("REQUEST_TIME"===u.setToServerValue),h=new Im):"appendMissingElements"in u?h=new ap(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new lp(u.removeAllFromArray.values||[]):"increment"in u?h=new Tm(s,u.increment):vt();const p=Di.fromServerFormat(u.fieldPath);return new Ib(p,h)}(n,i)):[];var i;if(e.update){const i=yc(n,e.update.name),s=new bs({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new _m((e.updateMask.fieldPaths||[]).map(y=>Di.fromServerFormat(y)));return new cp(i,s,u,t,r)}return new Tb(i,s,t,r)}if(e.delete){const i=yc(n,e.delete);return new Db(i,t)}if(e.verify){const i=yc(n,e.verify);return new ak(i,t)}return vt()}function FV(n,e){return{documents:[uk(n,e.path)]}}function LV(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=uk(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=uk(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const y=p.map(C=>function(D){if("=="===D.op){if(JL(D.value))return{unaryFilter:{field:Sm(D.field),op:"IS_NAN"}};if(XL(D.value))return{unaryFilter:{field:Sm(D.field),op:"IS_NULL"}}}else if("!="===D.op){if(JL(D.value))return{unaryFilter:{field:Sm(D.field),op:"IS_NOT_NAN"}};if(XL(D.value))return{unaryFilter:{field:Sm(D.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sm(D.field),op:$z(D.op),value:D.value}}}(C));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(y=>{return{field:Sm((C=y).field),direction:Hz(C.dir)};var C})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=(y=e.limit,n.N||sp(y)?y:{value:y});var y,h,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function VV(n){let e=OV(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Rt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let s=[];t.where&&(s=UV(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(C=>{return new wm(Am((D=C).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction));var D}));let h=null;t.limit&&(h=function(C){let D;return D="object"==typeof C?C.value:C,sp(D)?null:D}(t.limit));let p=null;var C;t.startAt&&(p=new bm((C=t.startAt).values||[],!!C.before));let y=null;return t.endAt&&(y=function(C){return new bm(C.values||[],!C.before)}(t.endAt)),sV(e,i,u,s,h,"F",p,y)}function UV(n){return n?void 0!==n.unaryFilter?[qz(n)]:void 0!==n.fieldFilter?[zz(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>UV(e)).reduce((e,t)=>e.concat(t)):vt():[]}function Hz(n){return Pz[n]}function $z(n){return Nz[n]}function Sm(n){return{fieldPath:n.canonicalString()}}function Am(n){return Di.fromServerFormat(n.fieldPath)}function zz(n){return qs.create(Am(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return vt()}}(n.fieldFilter.op),n.fieldFilter.value)}function qz(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Am(n.unaryFilter.field);return qs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Am(n.unaryFilter.field);return qs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Am(n.unaryFilter.field);return qs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Am(n.unaryFilter.field);return qs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return vt()}}function Gz(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function BV(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ai(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=jV(e)),e=Wz(n.get(t),e);return jV(e)}function Wz(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function jV(n){return n+"\x01\x01"}function vc(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),En.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&vt(),n.charAt(u+1)){case"\x01":const h=n.substring(s,u);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:vt()}s=u+2}return new En(r)}class Zz{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class ra{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}ra.store="owner",ra.key="owner";class eh{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}eh.store="mutationQueues",eh.keyPath="userId";class rr{constructor(e,t,r,i,s){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=s}}rr.store="mutations",rr.keyPath="batchId",rr.userMutationsIndex="userMutationsIndex",rr.userMutationsKeyPath=["userId","batchId"];class ws{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Ai(t)]}static key(e,t,r){return[e,Ai(t),r]}}ws.store="documentMutations",ws.PLACEHOLDER=new ws;class Kz{constructor(e,t){this.path=e,this.readTime=t}}class Yz{constructor(e,t){this.path=e,this.version=t}}class kr{constructor(e,t,r,i,s,u){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=s,this.parentPath=u}}kr.store="remoteDocuments",kr.readTimeIndex="readTimeIndex",kr.readTimeIndexPath="readTime",kr.collectionReadTimeIndex="collectionReadTimeIndex",kr.collectionReadTimeIndexPath=["parentPath","readTime"];class bc{constructor(e){this.byteSize=e}}bc.store="remoteDocumentGlobal",bc.key="remoteDocumentGlobalKey";class bo{constructor(e,t,r,i,s,u,h){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=s,this.lastLimboFreeSnapshotVersion=u,this.query=h}}bo.store="targets",bo.keyPath="targetId",bo.queryTargetsIndexName="queryTargetsIndex",bo.queryTargetsKeyPath=["canonicalId","targetId"];class Qi{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Qi.store="targetDocuments",Qi.keyPath=["targetId","path"],Qi.documentTargetsIndex="documentTargetsIndex",Qi.documentTargetsKeyPath=["path","targetId"];class ia{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}ia.key="targetGlobalKey",ia.store="targetGlobal";class up{constructor(e,t){this.collectionId=e,this.parent=t}}up.store="collectionParents",up.keyPath=["collectionId","parent"];class Su{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Su.store="clientMetadata",Su.keyPath="clientId";class Mm{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Mm.store="bundles",Mm.keyPath="bundleId";class xm{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}xm.store="namedQueries",xm.keyPath="name";class sa{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}sa.store="indexConfiguration",sa.keyPath="indexId",sa.collectionGroupIndex="collectionGroupIndex",sa.collectionGroupIndexPath="collectionGroup";class Oa{constructor(e,t,r,i,s,u){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=i,this.documentKey=s,this.largestBatchId=u}}Oa.store="indexState",Oa.keyPath=["indexId","uid"],Oa.sequenceNumberIndex="sequenceNumberIndex",Oa.sequenceNumberIndexPath=["uid","sequenceNumber"];class Ra{constructor(e,t,r,i,s){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=i,this.documentKey=s}}Ra.store="indexEntries",Ra.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Ra.documentKeyIndex="documentKeyIndex",Ra.documentKeyIndexPath=["indexId","uid","documentKey"];class Mi{constructor(e,t,r,i,s,u){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=i,this.largestBatchId=s,this.overlayMutation=u}}Mi.store="documentOverlays",Mi.keyPath=["userId","collectionPath","documentId"],Mi.collectionPathOverlayIndex="collectionPathOverlayIndex",Mi.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],Mi.collectionGroupOverlayIndex="collectionGroupOverlayIndex",Mi.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const HV=[eh.store,rr.store,ws.store,kr.store,bo.store,ra.store,ia.store,Qi.store,Su.store,bc.store,up.store,Mm.store,xm.store],$V=[...HV,Mi.store],Qz=[...$V,sa.store,Oa.store,Ra.store],zV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&vt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Se((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Se?t:Se.resolve(t)}catch(t){return Se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.reject(t)}static resolve(e){return new Se((t,r)=>{t(e)})}static reject(e){return new Se((t,r)=>{r(e)})}static waitFor(e){return new Se((t,r)=>{let i=0,s=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++s,u&&s===i&&t()},p=>r(p))}),u=!0,s===i&&t()})}static or(e){let t=Se.resolve(!1);for(const r of e)t=t.next(i=>i?Se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}}class XI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Ii,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Rb(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=hk(r.target.error);this.At.reject(new Rb(e,i))}}static open(e,t,r,i){try{return new XI(t,e.transaction(i,r))}catch(s){throw new Rb(t,s)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(ze("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Jz(t)}}class Al{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Al.vt((0,x.z$)())&&ei("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ze("SimpleDb","Removing database:",e),hp(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,x.hl)())return!1;if(Al.St())return!0;const e=(0,x.z$)(),t=Al.vt(e),r=0<t&&t<10,i=Al.Dt(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,M.Z)(function*(){return t.db||(ze("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new Rb(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new Ue(Ee.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Ue(Ee.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Rb(e,h))},s.onupgradeneeded=u=>{ze("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.bt.kt(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{ze("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,M.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.xt(e);const p=XI.open(s.db,e,u?"readonly":"readwrite",r),y=i(p).next(C=>(p.Pt(),C)).catch(C=>(p.abort(C),Se.reject(C))).toPromise();return y.catch(()=>{}),yield p.Rt,y}catch(p){const y="FirebaseError"!==p.name&&h<3;if(ze("SimpleDb","Transaction failed with error:",p.message,"Retrying:",y),s.close(),!y)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Xz{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return hp(this.$t.delete())}}class Rb extends Ue{constructor(e,t){super(Ee.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function dp(n){return"IndexedDbTransactionError"===n.name}class Jz{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ze("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ze("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),hp(r)}add(e){return ze("SimpleDb","ADD",this.store.name,e,e),hp(this.store.add(e))}get(e){return hp(this.store.get(e)).next(t=>(void 0===t&&(t=null),ze("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ze("SimpleDb","DELETE",this.store.name,e),hp(this.store.delete(e))}count(){return ze("SimpleDb","COUNT",this.store.name),hp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.Kt(i,(u,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new Se((s,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}Gt(e,t){ze("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(s,u,h)=>h.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}Wt(e){const t=this.cursor({});return new Se((r,i)=>{t.onerror=s=>{const u=hk(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}Kt(e,t){const r=[];return new Se((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const p=new Xz(h),y=t(h.primaryKey,h.value,p);if(y instanceof Se){const C=y.catch(D=>(p.done(),Se.reject(D)));r.push(C)}p.isDone?i():null===p.Lt?h.continue():h.continue(p.Lt)}}).next(()=>Se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function hp(n){return new Se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=hk(r.target.error);t(i)}})}let GV=!1;function hk(n){const e=Al.vt((0,x.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GV||(GV=!0,setTimeout(()=>{throw r},0)),r}}return n}class WV extends qV{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function xi(n,e){const t=Xe(n);return Al.Nt(t.zt,e)}class fk{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Tz(s,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&ok(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&ok(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(xt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pn())}isEqual(e){return this.batchId===e.batchId&&mm(this.mutations,e.mutations,(t,r)=>_V(t,r))&&mm(this.baseMutations,e.baseMutations,(t,r)=>_V(t,r))}}class pk{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Rt(e.mutations.length===r.length);let i=xz;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new pk(e,t,r,i)}}class gk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class th{constructor(e,t,r,i,s=xt.min(),u=xt.min(),h=hi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new th(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new th(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new th(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ZV{constructor(e){this.Ht=e}}function KV(n,e){let t;if(e.document)t=NV(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=lt.fromSegments(e.noDocument.path),i=pp(e.noDocument.readTime);t=vr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return vt();{const r=lt.fromSegments(e.unknownDocument.path),i=pp(e.unknownDocument.version);t=vr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(_k(e.readTime)),t}function YV(n,e){const t=mk(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const i={name:xb(u=n.Ht,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:Mb(u,h.version.toTimestamp())};return new kr(null,null,i,e.hasCommittedMutations,t,r)}var u,h;if(e.isNoDocument()){const i=e.key.path.toArray(),s=fp(e.version),u=e.hasCommittedMutations;return new kr(null,new Kz(i,s),null,u,t,r)}if(e.isUnknownDocument()){const i=e.key.path.toArray(),s=fp(e.version);return new kr(new Yz(i,s),null,null,!0,t,r)}return vt()}function mk(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _k(n){const e=new Ti(n[0],n[1]);return xt.fromTimestamp(e)}function fp(n){const e=n.toTimestamp();return new Zz(e.seconds,e.nanoseconds)}function pp(n){const e=new Ti(n.seconds,n.nanoseconds);return xt.fromTimestamp(e)}function km(n,e){const t=(e.baseMutations||[]).map(s=>dk(n.Ht,s));for(let s=0;s<e.mutations.length-1;++s){const u=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(u.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>dk(n.Ht,s)),i=Ti.fromMillis(e.localWriteTimeMs);return new fk(e.batchId,i,t,r)}function Pb(n){const e=pp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pp(n.lastLimboFreeSnapshotVersion):xt.min();let r;var i;return void 0!==n.query.documents?(Rt(1===(i=n.query).documents.length),r=xa(Em(OV(i.documents[0])))):r=xa(VV(n.query)),new th(r,n.targetId,0,n.lastListenSequenceNumber,e,t,hi.fromBase64String(n.resumeToken))}function QV(n,e){const t=fp(e.snapshotVersion),r=fp(e.lastLimboFreeSnapshotVersion);let i;i=$I(e.target)?FV(n.Ht,e.target):LV(n.Ht,e.target);const s=e.resumeToken.toBase64();return new bo(e.targetId,Eb(e.target),t,s,e.sequenceNumber,r,i)}function yk(n){const e=VV({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?oV(e,e.limit,"L"):e}function vk(n,e){return new gk(e.largestBatchId,dk(n.Ht,e.overlayMutation))}function XV(n,e){const t=e.path.lastSegment();return[n,Ai(e.path.popLast()),t]}class eq{getBundleMetadata(e,t){return JV(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:pp(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return JV(e).put({bundleId:(r=t).id,createTime:fp(Si(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return eU(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:yk(i.bundledQuery),readTime:pp(i.readTime)};var i})}saveNamedQuery(e,t){return eU(e).put({name:(r=t).name,readTime:fp(Si(r.readTime)),bundledQuery:r.bundledQuery});var r}}function JV(n){return xi(n,Mm.store)}function eU(n){return xi(n,xm.store)}class bk{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new bk(e,t.uid||"")}getOverlay(e,t){return Nb(e).get(XV(this.userId,t)).next(r=>r?vk(this.O,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach(s=>{const u=new gk(t,s);i.push(this.Yt(e,u))}),Se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Ai(u.getCollectionPath())));const s=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(Nb(e).Gt(Mi.collectionPathOverlayIndex,h))}),Se.waitFor(s)}getOverlaysForCollection(e,t,r){const i=new Map,s=Ai(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Nb(e).qt(Mi.collectionPathOverlayIndex,u).next(h=>{for(const p of h){const y=vk(this.O,p);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=new Map;let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Nb(e).Qt({index:Mi.collectionGroupOverlayIndex,range:h},(p,y,C)=>{const D=vk(this.O,y);s.size<i||D.largestBatchId===u?(s.set(D.getKey(),D),u=D.largestBatchId):C.done()}).next(()=>s)}Yt(e,t){return Nb(e).put(function(r,i,s){const[u,h,p]=XV(i,s.mutation.key);return new Mi(i,h,p,s.mutation.key.getCollectionGroup(),s.largestBatchId,Ob(r.Ht,s.mutation))}(this.O,this.userId,t))}}function Nb(n){return xi(n,Mi.store)}class JI{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(xr(e.integerValue));else if("doubleValue"in e){const r=xr(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),yb(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(rp(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?Sl(e,cz)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):vt()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const i of Object.keys(r))this.ie(i,t),this.Zt(r[i],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const i of r)this.Zt(i,t)}ce(e,t){this.ee(t,37),lt.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function tq(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function tU(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=tq(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}JI.le=new JI;class nq{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const i=t.codePointAt(0);this.de(240|i>>>18),this.de(128|63&i>>>12),this.de(128|63&i>>>6),this.de(128|63&i)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const i=t.codePointAt(0);this.me(240|i>>>18),this.me(128|63&i>>>12),this.me(128|63&i>>>6),this.me(128|63&i)}}this.ge()}Ie(e){const t=this.Ee(e),r=tU(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ae(e){const t=this.Ee(e),r=tU(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class rq{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class iq{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class nU{constructor(){this.Se=new nq,this.De=new rq(this.Se),this.Ce=new iq(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class wk{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}}function Ek(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=lt.comparator(n.documentKey,e.documentKey),0!==t?t:(t=rU(n.arrayValue,e.arrayValue),0!==t?t:rU(n.directionalValue,e.directionalValue)))}function rU(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class sq{constructor(){this.xe=new Ck}addToCollectionParentIndex(e,t){return this.xe.add(t),Se.resolve()}getCollectionParents(e,t){return Se.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return Se.resolve()}deleteFieldIndex(e,t){return Se.resolve()}getDocumentsMatchingTarget(e,t,r){return Se.resolve(Pn())}getFieldIndex(e,t){return Se.resolve(null)}getFieldIndexes(e,t){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}updateCollectionGroup(e,t,r){return Se.resolve()}updateIndexEntries(e,t){return Se.resolve()}}class Ck{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new dr(En.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new dr(En.comparator)).toArray()}}class oq{constructor(e){this.user=e,this.ke=new Ck,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const s={collectionId:r,parent:Ai(i)};return iU(e).put(s)}return Se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[GL(t),""],!1,!0);return iU(e).qt(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(vc(u.parent))}return r})}addFieldIndex(e,t){const r=tT(e),i=new sa((s=t).indexId,s.collectionGroup,s.fields.map(u=>[u.fieldPath.canonicalString(),u.kind]));var s;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=tT(e),i=nT(e),s=eT(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return Se.resolve(Pn())}getFieldIndex(e,t){return Se.resolve(null)}Oe(e,t){const r=new nU;for(const i of e.fields.filter(u=>2!==u.kind)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.Ne(i.kind);JI.le.Xt(s,u)}return r.Ve()}Me(e){const t=new nU;return JI.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=tT(e),i=nT(e);return(t?r.qt(sa.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(s=>{const u=[];return Se.forEach(s,h=>i.get([h.indexId,this.uid]).next(p=>{u.push(function(y,C){const D=C?new wb(C.sequenceNumber,new jI(pp(C.readTime),new lt(vc(C.documentKey)),C.largestBatchId)):wb.empty(),R=y.fields.map(([L,j])=>new BI(Di.fromServerFormat(L),j));return new ek(y.indexId,y.collectionGroup,R,D)}(h,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>r.indexState.sequenceNumber-i.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=tT(e),s=nT(e);return this.$e(e).next(u=>i.qt(sa.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(h=>Se.forEach(h,p=>{return s.put(new Oa(p.indexId,this.user.uid||"",u,fp((R=r).readTime),Ai(R.documentKey.path),R.largestBatchId));var R})))}updateIndexEntries(e,t){const r=new Map;return Se.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?Se.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),Se.forEach(h,p=>this.Fe(e,i,p).next(y=>{const C=this.Be(s,p);return y.isEqual(C)?Se.resolve():this.Le(e,s,y,C)}))))})}Ue(e,t,r){return eT(e).put(new Ra(r.indexId,this.uid,r.arrayValue,r.directionalValue,Ai(t.key.path)))}qe(e,t,r){return eT(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Ai(t.key.path)])}Fe(e,t,r){const i=eT(e);let s=new dr(Ek);return i.Qt({index:Ra.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,Ai(t.path)])},(u,h)=>{s=s.add(new wk(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}Be(e,t){let r=new dr(Ek);const i=this.Oe(t,e);if(null==i)return r;const s=t.fields.find(h=>2===h.kind);if(null!=s){const u=e.data.field(s.fieldPath);if(VI(u))for(const h of u.arrayValue.values||[])r=r.add(new wk(t.indexId,e.key,this.Me(h),i))}else r=r.add(new wk(t.indexId,e.key,new Uint8Array,i));return r}Le(e,t,r,i){ze("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(u,h,p,y,C){const D=u.getIterator(),R=h.getIterator();let L=Dm(D),j=Dm(R);for(;L||j;){let ie=!1,Ae=!1;if(L&&j){const tt=p(L,j);tt<0?Ae=!0:tt>0&&(ie=!0)}else null!=L?Ae=!0:ie=!0;ie?(y(j),j=Dm(R)):Ae?(C(L),L=Dm(D)):(L=Dm(D),j=Dm(R))}}(r,i,Ek,u=>{s.push(this.Ue(e,t,u))},u=>{s.push(this.qe(e,t,u))}),Se.waitFor(s)}$e(e){let t=1;return nT(e).Qt({index:Oa.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}}function iU(n){return xi(n,up.store)}function eT(n){return xi(n,Ra.store)}function tT(n){return xi(n,sa.store)}function nT(n){return xi(n,Oa.store)}const sU={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new wo(e,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function oU(n,e,t){const r=n.store(rr.store),i=n.store(ws.store),s=[],u=IDBKeyRange.only(t.batchId);let h=0;const p=r.Qt({range:u},(C,D,R)=>(h++,R.delete()));s.push(p.next(()=>{Rt(1===h)}));const y=[];for(const C of t.mutations){const D=ws.key(e,C.key.path,t.batchId);s.push(i.delete(D)),y.push(C.key)}return Se.waitFor(s).next(()=>y)}function rT(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw vt();e=n.noDocument}return JSON.stringify(e).length}wo.DEFAULT_COLLECTION_PERCENTILE=10,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wo.DEFAULT=new wo(41943040,wo.DEFAULT_COLLECTION_PERCENTILE,wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wo.DISABLED=new wo(-1,0,0);class Ik{constructor(e,t,r,i){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}static Jt(e,t,r,i){Rt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Ik(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nh(e).Qt({index:rr.userMutationsIndex,range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=Om(e),u=nh(e);return u.add({}).next(h=>{Rt("number"==typeof h);const p=new fk(h,t,r,i),y=function(R,L,j){const ie=j.baseMutations.map(tt=>Ob(R.Ht,tt)),Ae=j.mutations.map(tt=>Ob(R.Ht,tt));return new rr(L,j.batchId,j.localWriteTime.toMillis(),ie,Ae)}(this.O,this.userId,p),C=[];let D=new dr((R,L)=>on(R.canonicalString(),L.canonicalString()));for(const R of i){const L=ws.key(this.userId,R.key.path,h);D=D.add(R.key.path.popLast()),C.push(u.put(y)),C.push(s.put(L,ws.PLACEHOLDER))}return D.forEach(R=>{C.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.Ke[h]=p.keys()}),Se.waitFor(C).next(()=>p)})}lookupMutationBatch(e,t){return nh(e).get(t).next(r=>r?(Rt(r.userId===this.userId),km(this.O,r)):null)}Ge(e,t){return this.Ke[t]?Se.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Ke[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return nh(e).Qt({index:rr.userMutationsIndex,range:i},(u,h,p)=>{h.userId===this.userId&&(Rt(h.batchId>=r),s=km(this.O,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return nh(e).Qt({index:rr.userMutationsIndex,range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nh(e).qt(rr.userMutationsIndex,t).next(r=>r.map(i=>km(this.O,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ws.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Om(e).Qt({range:i},(u,h,p)=>{const[y,C,D]=u,R=vc(C);if(y===this.userId&&t.path.isEqual(R))return nh(e).get(D).next(L=>{if(!L)throw vt();Rt(L.userId===this.userId),s.push(km(this.O,L))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dr(on);const i=[];return t.forEach(s=>{const u=ws.prefixForPath(this.userId,s.path),h=IDBKeyRange.lowerBound(u),p=Om(e).Qt({range:h},(y,C,D)=>{const[R,L,j]=y,ie=vc(L);R===this.userId&&s.path.isEqual(ie)?r=r.add(j):D.done()});i.push(p)}),Se.waitFor(i).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=ws.prefixForPath(this.userId,r),u=IDBKeyRange.lowerBound(s);let h=new dr(on);return Om(e).Qt({range:u},(p,y,C)=>{const[D,R,L]=p,j=vc(R);D===this.userId&&r.isPrefixOf(j)?j.length===i&&(h=h.add(L)):C.done()}).next(()=>this.je(e,h))}je(e,t){const r=[],i=[];return t.forEach(s=>{i.push(nh(e).get(s).next(u=>{if(null===u)throw vt();Rt(u.userId===this.userId),r.push(km(this.O,u))}))}),Se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return oU(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),Se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Se.resolve();const r=IDBKeyRange.lowerBound(ws.prefixForUser(this.userId)),i=[];return Om(e).Qt({range:r},(s,u,h)=>{if(s[0]===this.userId){const p=vc(s[1]);i.push(p)}else h.done()}).next(()=>{Rt(0===i.length)})})}containsKey(e,t){return aU(e,this.userId,t)}We(e){return lU(e).get(this.userId).next(t=>t||new eh(this.userId,-1,""))}}function aU(n,e,t){const r=ws.prefixForPath(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return Om(n).Qt({range:s,jt:!0},(h,p,y)=>{const[C,D,R]=h;C===e&&D===i&&(u=!0),y.done()}).next(()=>u)}function nh(n){return xi(n,rr.store)}function Om(n){return xi(n,ws.store)}function lU(n){return xi(n,eh.store)}class gp{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new gp(0)}static Je(){return new gp(-1)}}class aq{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new gp(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>xt.fromTimestamp(new Ti(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Xe(e,i)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Rm(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return Rm(e).Qt((u,h)=>{const p=Pb(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>Se.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Rm(e).Qt((r,i)=>{const s=Pb(i);t(s)})}Ye(e){return cU(e).get(ia.key).next(t=>(Rt(null!==t),t))}Xe(e,t){return cU(e).put(ia.key,t)}Ze(e,t){return Rm(e).put(QV(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Eb(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Rm(e).Qt({range:i,index:bo.queryTargetsIndexName},(u,h,p)=>{const y=Pb(h);HI(t,y.target)&&(s=y,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=rh(e);return t.forEach(u=>{const h=Ai(u.path);i.push(s.put(new Qi(r,h))),i.push(this.referenceDelegate.addReference(e,r,u))}),Se.waitFor(i)}removeMatchingKeys(e,t,r){const i=rh(e);return Se.forEach(t,s=>{const u=Ai(s.path);return Se.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=rh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=rh(e);let s=Pn();return i.Qt({range:r,jt:!0},(u,h,p)=>{const y=vc(u[1]),C=new lt(y);s=s.add(C)}).next(()=>s)}containsKey(e,t){const r=Ai(t.path),i=IDBKeyRange.bound([r],[GL(r)],!1,!0);let s=0;return rh(e).Qt({index:Qi.documentTargetsIndex,jt:!0,range:i},([u,h],p,y)=>{0!==u&&(s++,y.done())}).next(()=>s>0)}Tt(e,t){return Rm(e).get(t).next(r=>r?Pb(r):null)}}function Rm(n){return xi(n,bo.store)}function cU(n){return xi(n,ia.store)}function rh(n){return xi(n,Qi.store)}function mp(n){return Tk.apply(this,arguments)}function Tk(){return Tk=(0,M.Z)(function*(n){if(n.code!==Ee.FAILED_PRECONDITION||n.message!==zV)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),Tk.apply(this,arguments)}function uU([n,e],[t,r]){const i=on(n,t);return 0===i?on(e,r):i}class lq{constructor(e){this.en=e,this.buffer=new dr(uU),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();uU(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cq{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;ze("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,M.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){dp(i)?ze("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield mp(i)}yield t.un(e)}))}}class uq{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Se.resolve(na.A);const r=new lq(t);return this.an.forEachTarget(e,i=>r.rn(i.sequenceNumber)).next(()=>this.an.ln(e,i=>r.rn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(sU)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ze("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sU):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,i,s,u,h,p,y;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(ze("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),i=this.params.maximumSequenceNumbersToCollect):i=D,u=Date.now(),this.nthSequenceNumber(e,i))).next(D=>(r=D,h=Date.now(),this.removeTargets(e,r,t))).next(D=>(s=D,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(D=>(y=Date.now(),Kx()<=we.in.DEBUG&&ze("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-C}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${D} documents in `+(y-p)+`ms\nTotal Duration: ${y-C}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:D})))}}class dq{constructor(e,t){this.db=e,this.garbageCollector=new uq(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,i)=>t(i))}addReference(e,t,r){return iT(e,r)}removeReference(e,t,r){return iT(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return iT(e,t)}wn(e,t){return function(r,i){let s=!1;return lU(r).Wt(u=>aU(r,u,i).next(h=>(h&&(s=!0),Se.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this._n(e,(u,h)=>{if(h<=t){const p=this.wn(e,u).next(y=>{if(!y)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,xt.min()),rh(e).delete([0,Ai(u.path)])))});i.push(p)}}).next(()=>Se.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return iT(e,t)}_n(e,t){const r=rh(e);let i,s=na.A;return r.Qt({index:Qi.documentTargetsIndex},([u,h],{path:p,sequenceNumber:y})=>{0===u?(s!==na.A&&t(new lt(vc(i)),s),s=y,i=p):s=na.A}).next(()=>{s!==na.A&&t(new lt(vc(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function iT(n,e){return rh(n).put((r=n.currentSequenceNumber,new Qi(0,Ai(e.path),r)));var r}class Pm{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){np(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return ZL(this.inner)}}class dU{constructor(){this.changes=new Pm(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hq{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return ih(e).put(sT(t),r)}removeEntry(e,t){const r=ih(e),i=sT(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return ih(e).get(sT(t)).next(r=>this.gn(t,r))}yn(e,t){return ih(e).get(sT(t)).next(r=>({document:this.gn(t,r),size:rT(r)}))}getEntries(e,t){let r=ka();return this.pn(e,t,(i,s)=>{const u=this.gn(i,s);r=r.insert(i,u)}).next(()=>r)}In(e,t){let r=ka(),i=new zr(lt.comparator);return this.pn(e,t,(s,u)=>{const h=this.gn(s,u);r=r.insert(s,h),i=i.insert(s,rT(u))}).next(()=>({documents:r,En:i}))}pn(e,t,r){if(t.isEmpty())return Se.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),s=t.getIterator();let u=s.getNext();return ih(e).Qt({range:i},(h,p,y)=>{const C=lt.fromSegments(h);for(;u&&lt.comparator(u,C)<0;)r(u,null),u=s.getNext();u&&u.isEqual(C)&&(r(u,p),u=s.hasNext()?s.getNext():null),u?y.Ut(u.path.toArray()):y.done()}).next(()=>{for(;u;)r(u,null),u=s.hasNext()?s.getNext():null})}getAll(e,t,r){let i=ka();const s=t.length+1,u={};if(r.isEqual(xt.min())){const h=t.toArray();u.range=IDBKeyRange.lowerBound(h)}else{const h=t.toArray(),p=mk(r);u.range=IDBKeyRange.lowerBound([h,p],!0),u.index=kr.collectionReadTimeIndex}return ih(e).Qt(u,(h,p,y)=>{if(h.length!==s)return;const C=this.gn(lt.fromSegments(h),p);t.isPrefixOf(C.key.path)?i=i.insert(C.key,C):y.done()}).next(()=>i)}newChangeBuffer(e){return new fq(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return hU(e).get(bc.key).next(t=>(Rt(!!t),t))}mn(e,t){return hU(e).put(bc.key,t)}gn(e,t){if(t){const r=KV(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(xt.min()))return r}return vr.newInvalidDocument(e)}}class fq extends dU{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new Pm(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new dr((s,u)=>on(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const h=this.An.get(s);if(u.isValidDocument()){const p=YV(this.Tn.O,u);i=i.add(s.path.popLast()),r+=rT(p)-h,t.push(this.Tn.addEntry(e,s,p))}else if(r-=h,this.trackRemovals){const p=YV(this.Tn.O,u.convertToNoDocument(xt.min()));t.push(this.Tn.addEntry(e,s,p))}else t.push(this.Tn.removeEntry(e,s))}),i.forEach(s=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Tn.updateMetadata(e,r)),Se.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:i})=>(i.forEach((s,u)=>{this.An.set(s,u)}),r))}}function hU(n){return xi(n,bc.store)}function ih(n){return xi(n,kr.store)}function sT(n){return n.path.toArray()}class pq{constructor(e){this.O=e}kt(e,t,r,i){const s=new XI("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore(ra.store),(h=e).createObjectStore(eh.store,{keyPath:eh.keyPath}),h.createObjectStore(rr.store,{keyPath:rr.keyPath,autoIncrement:!0}).createIndex(rr.userMutationsIndex,rr.userMutationsKeyPath,{unique:!0}),h.createObjectStore(ws.store),fU(e),function(h){h.createObjectStore(kr.store)}(e));let u=Se.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore(Qi.store),h.deleteObjectStore(bo.store),h.deleteObjectStore(ia.store)}(e),fU(e)),u=u.next(()=>function(h){const p=h.store(ia.store),y=new ia(0,0,xt.min().toTimestamp(),0);return p.put(ia.key,y)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,p){return p.store(rr.store).qt().next(y=>{h.deleteObjectStore(rr.store),h.createObjectStore(rr.store,{keyPath:rr.keyPath,autoIncrement:!0}).createIndex(rr.userMutationsIndex,rr.userMutationsKeyPath,{unique:!0});const C=p.store(rr.store),D=y.map(R=>C.put(R));return Se.waitFor(D)})}(e,s))),u=u.next(()=>{!function(h){h.createObjectStore(Su.store,{keyPath:Su.keyPath})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Rn(s))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore(bc.store)}(e),this.Pn(s)))),r<7&&i>=7&&(u=u.next(()=>this.bn(s))),r<8&&i>=8&&(u=u.next(()=>this.vn(e,s))),r<9&&i>=9&&(u=u.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e),function(h){const p=h.objectStore(kr.store);p.createIndex(kr.readTimeIndex,kr.readTimeIndexPath,{unique:!1}),p.createIndex(kr.collectionReadTimeIndex,kr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(u=u.next(()=>this.Vn(s))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore(Mm.store,{keyPath:Mm.keyPath})})(e),function(h){h.createObjectStore(xm.store,{keyPath:xm.keyPath})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const p=h.createObjectStore(Mi.store,{keyPath:Mi.keyPath});p.createIndex(Mi.collectionPathOverlayIndex,Mi.collectionPathOverlayIndexPath,{unique:!1}),p.createIndex(Mi.collectionGroupOverlayIndex,Mi.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>{!function(h){h.createObjectStore(sa.store,{keyPath:sa.keyPath,autoIncrement:!0}).createIndex(sa.collectionGroupIndex,sa.collectionGroupIndexPath,{unique:!1}),h.createObjectStore(Oa.store,{keyPath:Oa.keyPath}).createIndex(Oa.sequenceNumberIndex,Oa.sequenceNumberIndexPath,{unique:!1}),h.createObjectStore(Ra.store,{keyPath:Ra.keyPath}).createIndex(Ra.documentKeyIndex,Ra.documentKeyIndexPath,{unique:!1})}(e)})),u}Pn(e){let t=0;return e.store(kr.store).Qt((r,i)=>{t+=rT(i)}).next(()=>{const r=new bc(t);return e.store(bc.store).put(bc.key,r)})}Rn(e){const t=e.store(eh.store),r=e.store(rr.store);return t.qt().next(i=>Se.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.qt(rr.userMutationsIndex,u).next(h=>Se.forEach(h,p=>{Rt(p.userId===s.userId);const y=km(this.O,p);return oU(e,s.userId,y).next(()=>{})}))}))}bn(e){const t=e.store(Qi.store),r=e.store(kr.store);return e.store(ia.store).get(ia.key).next(i=>{const s=[];return r.Qt((u,h)=>{const p=new En(u),y=[0,Ai(p)];s.push(t.get(y).next(C=>C?Se.resolve():t.put(new Qi(0,Ai(p),i.highestListenSequenceNumber))))}).next(()=>Se.waitFor(s))})}vn(e,t){e.createObjectStore(up.store,{keyPath:up.keyPath});const r=t.store(up.store),i=new Ck,s=u=>{if(i.add(u)){const h=u.lastSegment(),p=u.popLast();return r.put({collectionId:h,parent:Ai(p)})}};return t.store(kr.store).Qt({jt:!0},(u,h)=>{const p=new En(u);return s(p.popLast())}).next(()=>t.store(ws.store).Qt({jt:!0},([u,h,p],y)=>{const C=vc(h);return s(C.popLast())}))}Vn(e){const t=e.store(bo.store);return t.Qt((r,i)=>{const s=Pb(i),u=QV(this.O,s);return t.put(u)})}}function fU(n){n.createObjectStore(Qi.store,{keyPath:Qi.keyPath}).createIndex(Qi.documentTargetsIndex,Qi.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(bo.store,{keyPath:bo.keyPath}).createIndex(bo.queryTargetsIndexName,bo.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(ia.store)}const Dk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Sk{constructor(e,t,r,i,s,u,h,p,y,C,D=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=s,this.window=u,this.document=h,this.Dn=y,this.Cn=C,this.schemaVersion=D,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=R=>Promise.resolve(),!Sk.Vt())throw new Ue(Ee.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new dq(this,i),this.Bn=t+"main",this.O=new ZV(p),this.Ln=new Al(this.Bn,this.schemaVersion,new pq(this.O)),this.Un=new aq(this.referenceDelegate,this.O),this.qn=new hq(this.O),this.Kn=new eq,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===C&&ei("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(Ee.FAILED_PRECONDITION,Dk);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new na(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,M.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,M.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,M.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>oT(e).put(new Su(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(dp(e))return ze("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ze("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return Fb(e).get(ra.key).next(t=>Se.resolve(this.ts(t)))}es(e){return oT(e).delete(this.clientId)}ns(){var e=this;return(0,M.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=xi(r,Su.store);return i.qt().next(s=>{const u=e.rs(s,18e5),h=s.filter(p=>-1===u.indexOf(p));return Se.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?Se.resolve(!0):Fb(e).get(ra.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Ue(Ee.FAILED_PRECONDITION,Dk);return!1}}return!(!this.networkEnabled||!this.inForeground)||oT(e).qt().next(r=>void 0===this.rs(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ze("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,M.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[ra.store,Su.store],t=>{const r=new WV(t,na.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>oT(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return Ik.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new oq(e)}getDocumentOverlayCache(e){return bk.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){ze("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=13===(u=this.schemaVersion)?Qz:12===u?$V:11===u?HV:void vt();var u;let h;return this.Ln.runTransaction(e,i,s,p=>(h=new WV(p,this.Nn?this.Nn.next():na.A),"readwrite-primary"===t?this.Jn(h).next(y=>!!y||this.Yn(h)).next(y=>{if(!y)throw ei(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Ue(Ee.FAILED_PRECONDITION,zV);return r(h)}).next(y=>this.Zn(h).next(()=>y)):this._s(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}_s(e){return Fb(e).get(ra.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(Ee.FAILED_PRECONDITION,Dk)})}Zn(e){const t=new ra(this.clientId,this.allowTabSynchronization,Date.now());return Fb(e).put(ra.key,t)}static Vt(){return Al.Vt()}Xn(e){const t=Fb(e);return t.get(ra.key).next(r=>this.ts(r)?(ze("IndexedDbPersistence","Releasing primary lease."),t.delete(ra.key)):Se.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(ei(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,x.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return ze("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ei("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){ei("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Fb(n){return xi(n,ra.store)}function oT(n){return xi(n,Su.store)}function Ak(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class gq{constructor(e,t){this.progress=e,this.ws=t}}class mq{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(i=>{for(const s of r)s.applyToLocalView(i);return i})}Is(e,t){e.forEach((r,i)=>{for(const s of t)s.applyToLocalView(i)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return lt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Rs(e,t.path):rk(t)?this.Ps(e,t,r):this.bs(e,t,r);var i}Rs(e,t){return this.ys(e,new lt(t)).next(r=>{let i=lk();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ps(e,t,r){const i=t.collectionGroup;let s=lk();return this.indexManager.getCollectionParents(e,i).next(u=>Se.forEach(u,h=>{const p=(y=t,C=h.child(i),new Du(C,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,C;return this.bs(e,p,r).next(y=>{y.forEach((C,D)=>{s=s.insert(C,D)})})}).next(()=>s))}bs(e,t,r){let i;return this.qn.getAll(e,t.path,r).next(s=>(i=s,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(s=>{for(const u of s)for(const h of u.mutations){const p=h.key;let y=i.get(p);null==y&&(y=vr.newInvalidDocument(p),i=i.insert(p,y)),ok(h,y,u.localWriteTime),y.isFoundDocument()||(i=i.remove(p))}}).next(()=>(i.forEach((s,u)=>{sk(t,u)||(i=i.remove(s))}),i))}}class Mk{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=i}static Ss(e,t){let r=Pn(),i=Pn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Mk(e,t.fromCache,r,i)}}class pU{Ds(e){this.Cs=e}As(e,t,r,i){return 0===(s=t).filters.length&&null===s.limit&&null==s.startAt&&null==s.endAt&&(0===s.explicitOrderBy.length||1===s.explicitOrderBy.length&&s.explicitOrderBy[0].field.isKeyField())||r.isEqual(xt.min())?this.Ns(e,t):this.Cs.Es(e,i).next(s=>{const u=this.xs(t,s);return(zI(t)||qI(t))&&this.ks(t.limitType,u,i,r)?this.Ns(e,t):(Kx()<=we.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ik(t)),this.Cs.As(e,t,r).next(h=>(u.forEach(p=>{h=h.insert(p.key,p)}),h)))});var s}xs(e,t){let r=new dr(lV(e));return t.forEach((i,s)=>{sk(e,s)&&(r=r.add(s))}),r}ks(e,t,r,i){if(r.size!==t.size)return!0;const s="F"===e?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ns(e,t){return Kx()<=we.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",ik(t)),this.Cs.As(e,t,xt.min())}}class _q{constructor(e,t,r,i){this.persistence=e,this.Os=t,this.O=i,this.Ms=new zr(on),this.$s=new Pm(s=>Eb(s),HI),this.Fs=xt.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new mq(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function gU(n,e,t,r){return new _q(n,e,t,r)}function mU(n,e){return xk.apply(this,arguments)}function xk(){return xk=(0,M.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.gs.getAllMutationBatches(r).next(s=>(i=s,t.Ls(e),t.gs.getAllMutationBatches(r))).next(s=>{const u=[],h=[];let p=Pn();for(const y of i){u.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}for(const y of s){h.push(y.batchId);for(const C of y.mutations)p=p.add(C.key)}return t.Us.Es(r,p).next(y=>({qs:y,removedBatchIds:u,addedBatchIds:h}))})})}),xk.apply(this,arguments)}function yq(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Bs.newChangeBuffer({trackRemovals:!0});return function(u,h,p,y){const C=p.batch,D=C.keys();let R=Se.resolve();return D.forEach(L=>{R=R.next(()=>y.getEntry(h,L)).next(j=>{const ie=p.docVersions.get(L);Rt(null!==ie),j.version.compareTo(ie)<0&&(C.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),y.addEntry(j)))})}),R.next(()=>u.gs.removeMutationBatch(h,C))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,i))})}function _U(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function vq(n,e){const t=Xe(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach((y,C)=>{const D=i.get(C);if(!D)return;h.push(t.Un.removeMatchingKeys(s,y.removedDocuments,C).next(()=>t.Un.addMatchingKeys(s,y.addedDocuments,C)));let R=D.withSequenceNumber(s.currentSequenceNumber);var L,j,ie;e.targetMismatches.has(C)?R=R.withResumeToken(hi.EMPTY_BYTE_STRING,xt.min()).withLastLimboFreeSnapshotVersion(xt.min()):y.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(y.resumeToken,r)),i=i.insert(C,R),j=R,ie=y,(0===(L=D).resumeToken.approximateByteSize()||j.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=3e8||ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0)&&h.push(t.Un.updateTargetData(s,R))});let p=ka();if(e.documentUpdates.forEach(y=>{e.resolvedLimboDocuments.has(y)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,y))}),h.push(yU(s,u,e.documentUpdates).next(y=>{p=y})),!r.isEqual(xt.min())){const y=t.Un.getLastRemoteSnapshotVersion(s).next(C=>t.Un.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(y)}return Se.waitFor(h).next(()=>u.apply(s)).next(()=>t.Us.Ts(s,p)).next(()=>p)}).then(s=>(t.Ms=i,s))}function yU(n,e,t){let r=Pn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let s=ka();return t.forEach((u,h)=>{const p=i.get(u);h.isNoDocument()&&h.version.isEqual(xt.min())?(e.removeEntry(u,h.readTime),s=s.insert(u,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||0===h.version.compareTo(p.version)&&p.hasPendingWrites?(e.addEntry(h),s=s.insert(u,h)):ze("LocalStore","Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",h.version)}),s})}function bq(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function Nm(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Un.getTargetData(r,e).next(s=>s?(i=s,Se.resolve(i)):t.Un.allocateTargetId(r).next(u=>(i=new th(e,u,0,r.currentSequenceNumber),t.Un.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function Fm(n,e,t){return kk.apply(this,arguments)}function kk(){return kk=(0,M.Z)(function*(n,e,t){const r=Xe(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!dp(u))throw u;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ms=r.Ms.remove(e),r.$s.delete(i.target)}),kk.apply(this,arguments)}function aT(n,e,t){const r=Xe(n);let i=xt.min(),s=Pn();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,p,y){const C=Xe(h),D=C.$s.get(y);return void 0!==D?Se.resolve(C.Ms.get(D)):C.Un.getTargetData(p,y)}(r,u,xa(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(u,h.targetId).next(p=>{s=p})}).next(()=>r.Os.As(u,e,t?i:xt.min(),t?s:Pn())).next(h=>({documents:h,Ks:s})))}function vU(n,e){const t=Xe(n),r=Xe(t.Un),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.Tt(s,e).next(u=>u?u.target:null))}function bU(n){const e=Xe(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,s){const u=Xe(r);let h=ka(),p=mk(s);const y=ih(i),C=IDBKeyRange.lowerBound(p,!0);return y.Qt({index:kr.readTimeIndex,range:C},(D,R)=>{const L=KV(u.O,R);h=h.insert(L.key,L),p=R.readTime}).next(()=>({ws:h,readTime:_k(p)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function Ok(){return Ok=(0,M.Z)(function*(n){const e=Xe(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=ih(r);let s=xt.min();return i.Qt({index:kr.readTimeIndex,reverse:!0},(u,h,p)=>{h.readTime&&(s=_k(h.readTime)),p.done()}).next(()=>s)}(t)).then(t=>{e.Fs=t})}),Ok.apply(this,arguments)}function Rk(){return Rk=(0,M.Z)(function*(n,e,t,r){const i=Xe(n);let s=Pn(),u=ka();for(const y of t){const C=e.Gs(y.metadata.name);y.document&&(s=s.add(C));const D=e.js(y);D.setReadTime(e.Qs(y.metadata.readTime)),u=u.insert(C,D)}const h=i.Bs.newChangeBuffer({trackRemovals:!0}),p=yield Nm(i,(y=r,xa(Em(En.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>yU(y,h,u).next(C=>(h.apply(y),C)).next(C=>i.Un.removeMatchingKeysForTargetId(y,p.targetId).next(()=>i.Un.addMatchingKeys(y,s,p.targetId)).next(()=>i.Us.Ts(y,C)).next(()=>C)))}),Rk.apply(this,arguments)}function Cq(n,e){return Pk.apply(this,arguments)}function Pk(){return Pk=(0,M.Z)(function*(n,e,t=Pn()){const r=yield Nm(n,xa(yk(e.bundledQuery))),i=Xe(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=Si(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Kn.saveNamedQuery(s,e);const h=r.withResumeToken(hi.EMPTY_BYTE_STRING,u);return i.Ms=i.Ms.insert(h.targetId,h),i.Un.updateTargetData(s,h).next(()=>i.Un.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Un.addMatchingKeys(s,t,r.targetId)).next(()=>i.Kn.saveNamedQuery(s,e))})}),Pk.apply(this,arguments)}class Iq{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return Se.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:Si(r.createTime)}),Se.resolve()}getNamedQuery(e,t){return Se.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:yk(r.bundledQuery),readTime:Si(r.readTime)}),Se.resolve();var r}}class Tq{constructor(){this.overlays=new zr(lt.comparator),this.Hs=new Map}getOverlay(e,t){return Se.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(i=>{this.Yt(e,t,i)}),Se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Hs.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Hs.delete(r)),Se.resolve()}getOverlaysForCollection(e,t,r){const i=new Map,s=t.length+1,u=new lt(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return Se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new zr((y,C)=>y-C);const u=this.overlays.getIterator();for(;u.hasNext();){const y=u.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let C=s.get(y.largestBatchId);null===C&&(C=new Map,s=s.insert(y.largestBatchId,C)),C.set(y.getKey(),y)}}const h=new Map,p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,C)=>h.set(C,y)),!(h.size>=i)););return Se.resolve(h)}Yt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);null!==i&&this.Hs.get(i.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new gk(t,r));let s=this.Hs.get(t);void 0===s&&(s=new Set,this.Hs.set(t,s)),s.add(r.key)}}class Nk{constructor(){this.Js=new dr(ki.Ys),this.Xs=new dr(ki.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new ki(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new ki(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new lt(new En([])),r=new ki(t,e),i=new ki(t,e+1),s=[];return this.Xs.forEachInRange([r,i],u=>{this.ei(u),s.push(u.key)}),s}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new lt(new En([])),r=new ki(t,e),i=new ki(t,e+1);let s=Pn();return this.Xs.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new ki(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ki{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return lt.comparator(e.key,t.key)||on(e.oi,t.oi)}static Zs(e,t){return on(e.oi,t.oi)||lt.comparator(e.key,t.key)}}class Dq{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new dr(ki.Ys)}checkEmpty(e){return Se.resolve(0===this.gs.length)}addMutationBatch(e,t,r,i){const s=this.ci;this.ci++;const u=new fk(s,t,r,i);this.gs.push(u);for(const h of i)this.ui=this.ui.add(new ki(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Se.resolve(u)}lookupMutationBatch(e,t){return Se.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.hi(t+1),s=i<0?0:i;return Se.resolve(this.gs.length>s?this.gs[s]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return Se.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ki(t,0),i=new ki(t,Number.POSITIVE_INFINITY),s=[];return this.ui.forEachInRange([r,i],u=>{const h=this.ai(u.oi);s.push(h)}),Se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dr(on);return t.forEach(i=>{const s=new ki(i,0),u=new ki(i,Number.POSITIVE_INFINITY);this.ui.forEachInRange([s,u],h=>{r=r.add(h.oi)})}),Se.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;lt.isDocumentKey(s)||(s=s.child(""));const u=new ki(new lt(s),0);let h=new dr(on);return this.ui.forEachWhile(p=>{const y=p.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(p.oi)),!0)},u),Se.resolve(this.li(h))}li(e){const t=[];return e.forEach(r=>{const i=this.ai(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Rt(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return Se.forEach(t.mutations,i=>{const s=new ki(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new ki(t,0),i=this.ui.firstAfterOrEqual(r);return Se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Se.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class Sq{constructor(e){this.di=e,this.docs=new zr(lt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Se.resolve(r?r.document.mutableCopy():vr.newInvalidDocument(t))}getEntries(e,t){let r=ka();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vr.newInvalidDocument(i))}),Se.resolve(r)}getAll(e,t,r){let i=ka();const s=new lt(t.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||p.readTime.compareTo(r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return Se.resolve(i)}_i(e,t){return Se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Aq(this)}getSize(e){return Se.resolve(this.size)}}class Aq extends dU{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(r)}),Se.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class Mq{constructor(e){this.persistence=e,this.wi=new Pm(t=>Eb(t),HI),this.lastRemoteSnapshotVersion=xt.min(),this.highestTargetId=0,this.mi=0,this.gi=new Nk,this.targetCount=0,this.yi=gp.He()}forEachTarget(e,t){return this.wi.forEach((r,i)=>t(i)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),Se.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new gp(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,Se.resolve()}updateTargetData(e,t){return this.Ze(t),Se.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.wi.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.wi.delete(u),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),Se.waitFor(s).next(()=>i)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return Se.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),Se.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),Se.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),Se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return Se.resolve(r)}containsKey(e,t){return Se.resolve(this.gi.containsKey(t))}}class xq{constructor(e,t){this.pi={},this.overlays={},this.Nn=new na(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new Mq(this),this.indexManager=new sq,this.qn=new Sq(r=>this.referenceDelegate.Ii(r)),this.O=new ZV(t),this.Kn=new Iq(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Tq,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new Dq(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const i=new kq(this.Nn.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.Ti(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,t){return Se.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class kq extends qV{constructor(e){super(),this.currentSequenceNumber=e}}class Fk{constructor(e){this.persistence=e,this.Ri=new Nk,this.Pi=null}static bi(e){return new Fk(e)}get vi(){if(this.Pi)return this.Pi;throw vt()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),Se.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),Se.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(i=>this.vi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.vi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.vi,r=>{const i=lt.fromPath(r);return this.Vi(e,i).next(s=>{s||t.removeEntry(i,xt.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return Se.or([()=>Se.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function wU(n,e){return`firestore_clients_${n}_${e}`}function EU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Lk(n,e){return`firestore_targets_${n}_${e}`}class lT{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Si(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new Ue(i.error.code,i.error.message))),u?new lT(e,t,i.state,s):(ei("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Lb{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Ue(r.error.code,r.error.message))),s?new Lb(e,r.state,i):(ei("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class cT{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=YI();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=YL(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new cT(e,s):(ei("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Vk{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Vk(t.clientId,t.onlineState):(ei("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Uk{constructor(){this.activeTargetIds=YI()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bk{constructor(e,t,r,i,s){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new zr(on),this.started=!1,this.$i=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Fi=wU(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new Uk),this.Li=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(h){return`firestore_bundle_loaded_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,M.Z)(function*(){const t=yield e.syncEngine.ds();for(const i of t){if(i===e.xi)continue;const s=e.getItem(wU(e.persistenceKey,i));if(s){const u=cT.Si(i,s);u&&(e.Mi=e.Mi.insert(u.clientId,u))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const i=e.Qi(r);i&&e.Wi(i)}for(const i of e.$i)e.Oi(i);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Lk(this.persistenceKey,e));if(r){const i=Lb.Si(e,r);i&&(t=i.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Lk(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ji(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ze("SharedClientState","READ",e,t),t}setItem(e,t){ze("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ze("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ze("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void ei("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,M.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const i=t.er(r.key);return t.nr(i,null)}{const i=t.sr(r.key,r.newValue);if(i)return t.nr(i.clientId,i)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const i=t.ir(r.key,r.newValue);if(i)return t.rr(i)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const i=t.cr(r.key,r.newValue);if(i)return t.ur(i)}}else if(r.key===t.Ki){if(null!==r.newValue){const i=t.Qi(r.newValue);if(i)return t.Wi(i)}}else if(r.key===t.Bi){const i=function(s){let u=na.A;if(null!=s)try{const h=JSON.parse(s);Rt("number"==typeof h),u=h}catch(h){ei("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==na.A&&t.sequenceNumberHandler(i)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const i=new lT(this.currentUser,e,t,r),s=EU(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Di())}Ji(e){const t=EU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const i=Lk(this.persistenceKey,e),s=new Lb(e,t,r);this.setItem(i,s.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return cT.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),i=Number(r[1]);return lT.Si(new Ki(void 0!==r[2]?r[2]:null),i,t)}cr(e,t){const r=this.qi.exec(e),i=Number(r[1]);return Lb.Si(i,t)}Qi(e){return Vk.Si(e)}rr(e){var t=this;return(0,M.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);ze("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),s=this.zi(r),u=[],h=[];return s.forEach(p=>{i.has(p)||u.push(p)}),i.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.dr(u,h).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=YI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class CU{constructor(){this._r=new Uk,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new Uk,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Oq{mr(e){}shutdown(){}}class IU{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Rq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Pq{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class Nq extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,i,s){const u=this.$r(e,t);ze("RestConnection","Sending: ",u,r);const h={};return this.Fr(h,i,s),this.Br(e,u,h,r).then(p=>(ze("RestConnection","Received: ",p),p),p=>{throw gb("RestConnection",`${e} failed with error: `,p,"url: ",u,"request:",r),p})}Lr(e,t,r,i,s){return this.Mr(e,t,r,i,s)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+gm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}$r(e,t){return`${this.kr}/v1/${t}:${Rq[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,i){return new Promise((s,u)=>{const h=new K$;h.listenOnce(G$.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Zx.NO_ERROR:const y=h.getResponseJson();ze("Connection","XHR received:",JSON.stringify(y)),s(y);break;case Zx.TIMEOUT:ze("Connection",'RPC "'+e+'" timed out'),u(new Ue(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Zx.HTTP_ERROR:const C=h.getStatus();if(ze("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){const D=h.getResponseJson().error;if(D&&D.status&&D.message){const R=function(L){const j=L.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(j)>=0?j:Ee.UNKNOWN}(D.status);u(new Ue(R,D.message))}else u(new Ue(Ee.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new Ue(Ee.UNAVAILABLE,"Connection failed."));break;default:vt()}}finally{ze("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}Ur(e,t,r){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=z$(),u=q$(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new Z$({})),this.Fr(h.initMessageHeaders,t,r),(0,x.uI)()||(0,x.b$)()||(0,x.d)()||(0,x.w1)()||(0,x.Mn)()||(0,x.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=i.join("");ze("Connection","Creating WebChannel: "+p,h);const y=s.createWebChannel(p,h);let C=!1,D=!1;const R=new Pq({Ar:j=>{D?ze("Connection","Not sending because WebChannel is closed:",j):(C||(ze("Connection","Opening WebChannel transport."),y.open(),C=!0),ze("Connection","WebChannel sending:",j),y.send(j))},Rr:()=>y.close()}),L=(j,ie,Ae)=>{j.listen(ie,tt=>{try{Ae(tt)}catch(dt){setTimeout(()=>{throw dt},0)}})};return L(y,FI.EventType.OPEN,()=>{D||ze("Connection","WebChannel transport opened.")}),L(y,FI.EventType.CLOSE,()=>{D||(D=!0,ze("Connection","WebChannel transport closed"),R.Cr())}),L(y,FI.EventType.ERROR,j=>{D||(D=!0,gb("Connection","WebChannel transport errored:",j),R.Cr(new Ue(Ee.UNAVAILABLE,"The operation could not be completed")))}),L(y,FI.EventType.MESSAGE,j=>{var ie;if(!D){const Ae=j.data[0];Rt(!!Ae);const tt=Ae,dt=tt.error||(null===(ie=tt[0])||void 0===ie?void 0:ie.error);if(dt){ze("Connection","WebChannel received error:",dt);const At=dt.status;let _t=function(Or){const ii=ni[Or];if(void 0!==ii)return CV(ii)}(At),In=dt.message;void 0===_t&&(_t=Ee.INTERNAL,In="Unknown error status: "+At+" with message "+dt.message),D=!0,R.Cr(new Ue(_t,In)),y.close()}else ze("Connection","WebChannel received:",Ae),R.Nr(Ae)}}),L(u,W$.STAT_EVENT,j=>{j.stat===jL.PROXY?ze("Connection","Detected buffering proxy"):j.stat===jL.NOPROXY&&ze("Connection","Detected no buffering proxy")}),setTimeout(()=>{R.Dr()},0),R}}function TU(){return"undefined"!=typeof window?window:null}function uT(){return"undefined"!=typeof document?document:null}function Vb(n){return new Fz(n,!0)}class jk{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=i,this.Gr=s,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,t-r);i>0&&ze("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class DU{constructor(e,t,r,i,s,u,h,p){this.Sn=e,this.Xr=r,this.Zr=i,this.eo=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new jk(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,M.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,M.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,M.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===Ee.RESOURCE_EXHAUSTED?(ei(t.toString()),ei("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===Ee.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.no===t&&this.po(r,i)},r=>{e(()=>{const i=new Ue(Ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(i)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(i=>{r(()=>this.Io(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}uo(){var e=this;this.state=5,this.ro.Hr((0,M.Z)(function*(){e.state=0,e.start()}))}Io(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Fq extends DU{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.O=s}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function Uz(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:vt(),i=e.targetChange.targetIds||[],s=function(p,y){return p.N?(Rt(void 0===y||"string"==typeof y),hi.fromBase64String(y||"")):(Rt(void 0===y||y instanceof Uint8Array),hi.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const y=void 0===p.code?Ee.UNKNOWN:CV(p.code);return new Ue(y,p.message||"")}(u);t=new DV(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=yc(n,r.document.name),s=Si(r.document.updateTime),u=new bs({mapValue:{fields:r.document.fields}}),h=vr.newFoundDocument(i,s,u);t=new QI(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=yc(n,r.document),s=r.readTime?Si(r.readTime):xt.min(),u=vr.newNoDocument(i,s);t=new QI([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=yc(n,r.document);t=new QI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return vt();{const r=e.filter,s=new Sz(r.count||0);t=new TV(r.targetId,s)}}var p;return t}(this.O,e),r=function(i){if(!("targetChange"in i))return xt.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?xt.min():s.readTime?Si(s.readTime):xt.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=kb(this.O),t.addTarget=function(i,s){let u;const h=s.target;return u=$I(h)?{documents:FV(i,h)}:{query:LV(i,h)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=xV(i,s.resumeToken):s.snapshotVersion.compareTo(xt.min())>0&&(u.readTime=Mb(i,s.snapshotVersion.toTimestamp())),u}(this.O,e);const r=function jz(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return vt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=kb(this.O),t.removeTarget=e,this.fo(t)}}class Lq extends DU{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.O=s,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function Bz(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,i){let s=Si(r.updateTime?r.updateTime:i);return s.isEqual(xt.min())&&(s=Si(i)),new Iz(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Si(e.commitTime);return this.listener.Vo(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=kb(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ob(this.O,r))};this.fo(t)}}class Vq extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=i,this.Co=!1}No(){if(this.Co)throw new Ue(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.eo.Mr(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(Ee.UNKNOWN,i.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.eo.Lr(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(Ee.UNKNOWN,i.toString())})}terminate(){this.Co=!0}}class Uq{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(ei(t),this.Oo=!1):ze("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class Bq{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=s,this.jo.mr(h=>{r.enqueueAndForget((0,M.Z)(function*(){var p;sh(u)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,M.Z)(function*(y){const C=Xe(y);C.Ko.add(4),yield Lm(C),C.Qo.set("Unknown"),C.Ko.delete(4),yield Ub(C)}),function(y){return p.apply(this,arguments)})(u))}))}),this.Qo=new Uq(r,i)}}function Ub(n){return Hk.apply(this,arguments)}function Hk(){return Hk=(0,M.Z)(function*(n){if(sh(n))for(const e of n.Go)yield e(!0)}),Hk.apply(this,arguments)}function Lm(n){return $k.apply(this,arguments)}function $k(){return $k=(0,M.Z)(function*(n){for(const e of n.Go)yield e(!1)}),$k.apply(this,arguments)}function dT(n,e){const t=Xe(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),Gk(t)?qk(t):Um(t).co()&&zk(t,e))}function Bb(n,e){const t=Xe(n),r=Um(t);t.qo.delete(e),r.co()&&SU(t,e),0===t.qo.size&&(r.co()?r.ho():sh(t)&&t.Qo.set("Unknown"))}function zk(n,e){n.Wo.Z(e.targetId),Um(n).Ao(e)}function SU(n,e){n.Wo.Z(e),Um(n).Ro(e)}function qk(n){n.Wo=new Rz({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),Um(n).start(),n.Qo.Mo()}function Gk(n){return sh(n)&&!Um(n).oo()&&n.qo.size>0}function sh(n){return 0===Xe(n).Ko.size}function AU(n){n.Wo=void 0}function jq(n){return Wk.apply(this,arguments)}function Wk(){return Wk=(0,M.Z)(function*(n){n.qo.forEach((e,t)=>{zk(n,e)})}),Wk.apply(this,arguments)}function Hq(n,e){return Zk.apply(this,arguments)}function Zk(){return Zk=(0,M.Z)(function*(n,e){AU(n),Gk(n)?(n.Qo.Bo(e),qk(n)):n.Qo.set("Unknown")}),Zk.apply(this,arguments)}function $q(n,e,t){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,M.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof DV&&2===e.state&&e.cause)try{yield(r=(0,M.Z)(function*(i,s){const u=s.cause;for(const h of s.targetIds)i.qo.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i.qo.delete(h),i.Wo.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hT(n,r)}else if(e instanceof QI?n.Wo.ct(e):e instanceof TV?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(xt.min()))try{const r=yield _U(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.Wo.yt(s);return u.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.qo.get(p);y&&i.qo.set(p,y.withResumeToken(h.resumeToken,s))}}),u.targetMismatches.forEach(h=>{const p=i.qo.get(h);if(!p)return;i.qo.set(h,p.withResumeToken(hi.EMPTY_BYTE_STRING,p.snapshotVersion)),SU(i,h);const y=new th(p.target,h,1,p.sequenceNumber);zk(i,y)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield hT(n,r)}var r}),Kk.apply(this,arguments)}function hT(n,e,t){return Yk.apply(this,arguments)}function Yk(){return Yk=(0,M.Z)(function*(n,e,t){if(!dp(e))throw e;n.Ko.add(1),yield Lm(n),n.Qo.set("Offline"),t||(t=()=>_U(n.localStore)),n.asyncQueue.enqueueRetryable((0,M.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield Ub(n)}))}),Yk.apply(this,arguments)}function MU(n,e){return e().catch(t=>hT(n,t,e))}function Vm(n){return Qk.apply(this,arguments)}function Qk(){return Qk=(0,M.Z)(function*(n){const e=Xe(n),t=oh(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;zq(e);)try{const i=yield bq(e.localStore,r);if(null===i){0===e.Uo.length&&t.ho();break}r=i.batchId,qq(e,i)}catch(i){yield hT(e,i)}xU(e)&&kU(e)}),Qk.apply(this,arguments)}function zq(n){return sh(n)&&n.Uo.length<10}function qq(n,e){n.Uo.push(e);const t=oh(n);t.co()&&t.bo&&t.vo(e.mutations)}function xU(n){return sh(n)&&!oh(n).oo()&&n.Uo.length>0}function kU(n){oh(n).start()}function Gq(n){return Xk.apply(this,arguments)}function Xk(){return Xk=(0,M.Z)(function*(n){oh(n).Do()}),Xk.apply(this,arguments)}function Wq(n){return Jk.apply(this,arguments)}function Jk(){return Jk=(0,M.Z)(function*(n){const e=oh(n);for(const t of n.Uo)e.vo(t.mutations)}),Jk.apply(this,arguments)}function Zq(n,e,t){return eO.apply(this,arguments)}function eO(){return eO=(0,M.Z)(function*(n,e,t){const r=n.Uo.shift(),i=pk.from(r,e,t);yield MU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Vm(n)}),eO.apply(this,arguments)}function Kq(n,e){return tO.apply(this,arguments)}function tO(){return tO=(0,M.Z)(function*(n,e){var t;e&&oh(n).bo&&(yield(t=(0,M.Z)(function*(r,i){if(EV(s=i.code)&&s!==Ee.ABORTED){const u=r.Uo.shift();oh(r).ao(),yield MU(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Vm(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),xU(n)&&kU(n)}),tO.apply(this,arguments)}function OU(n,e){return nO.apply(this,arguments)}function nO(){return nO=(0,M.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const r=sh(t);t.Ko.add(3),yield Lm(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield Ub(t)}),nO.apply(this,arguments)}function rO(n,e){return iO.apply(this,arguments)}function iO(){return iO=(0,M.Z)(function*(n,e){const t=Xe(n);e?(t.Ko.delete(2),yield Ub(t)):e||(t.Ko.add(2),yield Lm(t),t.Qo.set("Unknown"))}),iO.apply(this,arguments)}function Um(n){return n.zo||(n.zo=function(e,t,r){const i=Xe(e);return i.No(),new Fq(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:jq.bind(null,n),vr:Hq.bind(null,n),To:$q.bind(null,n)}),n.Go.push(function(){var e=(0,M.Z)(function*(t){t?(n.zo.ao(),Gk(n)?qk(n):n.Qo.set("Unknown")):(yield n.zo.stop(),AU(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function oh(n){return n.Ho||(n.Ho=function(e,t,r){const i=Xe(e);return i.No(),new Lq(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:Gq.bind(null,n),vr:Kq.bind(null,n),So:Wq.bind(null,n),Vo:Zq.bind(null,n)}),n.Go.push(function(){var e=(0,M.Z)(function*(t){t?(n.Ho.ao(),yield Vm(n)):(yield n.Ho.stop(),n.Uo.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class sO{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,h=new sO(e,t,u,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Bm(n,e){if(ei("AsyncQueue",`${e}: ${n}`),dp(n))return new Ue(Ee.UNAVAILABLE,`${e}: ${n}`);throw n}class jm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||lt.comparator(t.key,r.key):(t,r)=>lt.comparator(t.key,r.key),this.keyedMap=lk(),this.sortedSet=new zr(this.comparator)}static emptySet(e){return new jm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new jm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class RU{constructor(){this.Jo=new zr(lt.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):vt():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class Hm{constructor(e,t,r,i,s,u,h,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p}static fromInitialDocuments(e,t,r,i){const s=[];return t.forEach(u=>{s.push({type:0,doc:u})}),new Hm(e,t,jm.emptySet(t),s,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Yq{constructor(){this.Xo=void 0,this.listeners=[]}}class Qq{constructor(){this.queries=new Pm(e=>aV(e),Cb),this.onlineState="Unknown",this.Zo=new Set}}function oO(n,e){return aO.apply(this,arguments)}function aO(){return aO=(0,M.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Yq),i)try{s.Xo=yield t.onListen(r)}catch(u){const h=Bm(u,`Initialization of query '${ik(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.tc(t.onlineState),s.Xo&&e.ec(s.Xo)&&uO(t)}),aO.apply(this,arguments)}function lO(n,e){return cO.apply(this,arguments)}function cO(){return cO=(0,M.Z)(function*(n,e){const t=Xe(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),cO.apply(this,arguments)}function Xq(n,e){const t=Xe(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.ec(i)&&(r=!0);u.Xo=i}}r&&uO(t)}function Jq(n,e,t){const r=Xe(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function uO(n){n.Zo.forEach(e=>{e.next()})}class dO{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Hm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=Hm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class eG{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class PU{constructor(e){this.O=e}Gs(e){return yc(this.O,e)}js(e){return e.metadata.exists?NV(this.O,e.document,!1):vr.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return Si(e)}}class tG{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=NU(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new PU(this.O);for(const i of e)if(i.metadata.queries){const s=r.Gs(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||Pn()).add(s);t.set(u,h)}}return t}complete(){var e=this;return(0,M.Z)(function*(){const t=yield function Eq(n,e,t,r){return Rk.apply(this,arguments)}(e.localStore,new PU(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const i of e.queries)yield Cq(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new gq(Object.assign({},e.progress),t)})()}}function NU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class FU{constructor(e){this.key=e}}class LU{constructor(e){this.key=e}}class VU{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=Pn(),this.mutatedKeys=Pn(),this.mc=lV(e),this.gc=new jm(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new RU,i=t?t.gc:this.gc;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const p=zI(this.query)&&i.size===this.query.limit?i.last():null,y=qI(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,D)=>{const R=i.get(C),L=sk(this.query,D)?D:null,j=!!R&&this.mutatedKeys.has(R.key),ie=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let Ae=!1;R&&L?R.data.isEqual(L.data)?j!==ie&&(r.track({type:3,doc:L}),Ae=!0):this.Tc(R,L)||(r.track({type:2,doc:L}),Ae=!0,(p&&this.mc(L,p)>0||y&&this.mc(L,y)<0)&&(h=!0)):!R&&L?(r.track({type:0,doc:L}),Ae=!0):R&&!L&&(r.track({type:1,doc:R}),Ae=!0,(p||y)&&(h=!0)),Ae&&(L?(u=u.add(L),s=ie?s.add(C):s.delete(C)):(u=u.delete(C),s=s.delete(C)))}),zI(this.query)||qI(this.query))for(;u.size>this.query.limit;){const C=zI(this.query)?u.last():u.first();u=u.delete(C.key),s=s.delete(C.key),r.track({type:1,doc:C})}return{gc:u,Ec:r,ks:h,mutatedKeys:s}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const s=e.Ec.Yo();s.sort((y,C)=>function(D,R){const L=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return vt()}};return L(D)-L(R)}(y.type,C.type)||this.mc(y.doc,C.doc)),this.Ac(r);const u=t?this.Rc():[],h=0===this.wc.size&&this.current?1:0,p=h!==this._c;return this._c=h,0!==s.length||p?{snapshot:new Hm(this.query,e.gc,i,s,e.mutatedKeys,0===h,p,!1),Pc:u}:{Pc:u}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new RU,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=Pn(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new LU(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new FU(r))}),t}vc(e){this.dc=e.Ks,this.wc=Pn();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return Hm.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class nG{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class rG{constructor(e){this.key=e,this.Sc=!1}}class iG{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.Dc={},this.Cc=new Pm(h=>aV(h),Cb),this.Nc=new Map,this.xc=new Set,this.kc=new zr(lt.comparator),this.Oc=new Map,this.Mc=new Nk,this.$c={},this.Fc=new Map,this.Bc=gp.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function sG(n,e){return hO.apply(this,arguments)}function hO(){return hO=(0,M.Z)(function*(n,e){const t=NO(n);let r,i;const s=t.Cc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Vc();else{const u=yield Nm(t.localStore,xa(e));t.isPrimaryClient&&dT(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield fO(t,e,r,"current"===h)}return i}),hO.apply(this,arguments)}function fO(n,e,t,r){return pO.apply(this,arguments)}function pO(){return pO=(0,M.Z)(function*(n,e,t,r){n.Uc=(C,D,R)=>{return(L=(0,M.Z)(function*(j,ie,Ae,tt){let dt=ie.view.Ic(Ae);dt.ks&&(dt=yield aT(j.localStore,ie.query,!1).then(({documents:In})=>ie.view.Ic(In,dt)));const At=tt&&tt.targetChanges.get(ie.targetId),_t=ie.view.applyChanges(dt,j.isPrimaryClient,At);return IO(j,ie.targetId,_t.Pc),_t.snapshot}),function(j,ie,Ae,tt){return L.apply(this,arguments)})(n,C,D,R);var L};const i=yield aT(n.localStore,e,!0),s=new VU(e,i.Ks),u=s.Ic(i.documents),h=Ab.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),p=s.applyChanges(u,n.isPrimaryClient,h);IO(n,t,p.Pc);const y=new nG(e,t,s);return n.Cc.set(e,y),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),p.snapshot}),pO.apply(this,arguments)}function oG(n,e){return gO.apply(this,arguments)}function gO(){return gO=(0,M.Z)(function*(n,e){const t=Xe(n),r=t.Cc.get(e),i=t.Nc.get(r.targetId);if(i.length>1)return t.Nc.set(r.targetId,i.filter(s=>!Cb(s,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Fm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Bb(t.remoteStore,r.targetId),$m(t,r.targetId)}).catch(mp))):($m(t,r.targetId),yield Fm(t.localStore,r.targetId,!0))}),gO.apply(this,arguments)}function mO(){return mO=(0,M.Z)(function*(n,e,t){const r=FO(n);try{const i=yield function(s,u){const h=Xe(s),p=Ti.now(),y=u.reduce((D,R)=>D.add(R.key),Pn());let C;return h.persistence.runTransaction("Locally write mutations","readwrite",D=>h.Us.Es(D,y).next(R=>{C=R;const L=[];for(const j of u){const ie=Dz(j,C.get(j.key));null!=ie&&L.push(new cp(j.key,ie,eV(ie.value.mapValue),ti.exists(!0)))}return h.gs.addMutationBatch(D,p,L,u)})).then(D=>(D.applyToLocalDocumentSet(C),{batchId:D.batchId,changes:C}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,h){let p=s.$c[s.currentUser.toKey()];p||(p=new zr(on)),p=p.insert(u,h),s.$c[s.currentUser.toKey()]=p}(r,i.batchId,t),yield Au(r,i.changes),yield Vm(r.remoteStore)}catch(i){const s=Bm(i,"Failed to persist write");t.reject(s)}}),mO.apply(this,arguments)}function UU(n,e){return _O.apply(this,arguments)}function _O(){return _O=(0,M.Z)(function*(n,e){const t=Xe(n);try{const r=yield vq(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.Oc.get(s);u&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.Sc=!0:i.modifiedDocuments.size>0?Rt(u.Sc):i.removedDocuments.size>0&&(Rt(u.Sc),u.Sc=!1))}),yield Au(t,r,e)}catch(r){yield mp(r)}}),_O.apply(this,arguments)}function BU(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Cc.forEach((s,u)=>{const h=u.view.tc(e);h.snapshot&&i.push(h.snapshot)}),function(s,u){const h=Xe(s);h.onlineState=u;let p=!1;h.queries.forEach((y,C)=>{for(const D of C.listeners)D.tc(u)&&(p=!0)}),p&&uO(h)}(r.eventManager,e),i.length&&r.Dc.To(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function lG(n,e,t){return yO.apply(this,arguments)}function yO(){return yO=(0,M.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oc.get(e),s=i&&i.key;if(s){let u=new zr(lt.comparator);u=u.insert(s,vr.newNoDocument(s,xt.min()));const h=Pn().add(s),p=new Sb(xt.min(),new Map,new dr(on),u,h);yield UU(r,p),r.kc=r.kc.remove(s),r.Oc.delete(e),TO(r)}else yield Fm(r.localStore,e,!1).then(()=>$m(r,e,t)).catch(mp)}),yO.apply(this,arguments)}function cG(n,e){return vO.apply(this,arguments)}function vO(){return vO=(0,M.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const i=yield yq(t.localStore,e);CO(t,r,null),EO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Au(t,i)}catch(i){yield mp(i)}}),vO.apply(this,arguments)}function uG(n,e,t){return bO.apply(this,arguments)}function bO(){return bO=(0,M.Z)(function*(n,e,t){const r=Xe(n);try{const i=yield function(s,u){const h=Xe(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let y;return h.gs.lookupMutationBatch(p,u).next(C=>(Rt(null!==C),y=C.keys(),h.gs.removeMutationBatch(p,C))).next(()=>h.gs.performConsistencyCheck(p)).next(()=>h.Us.Es(p,y))})}(r.localStore,e);CO(r,e,t),EO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Au(r,i)}catch(i){yield mp(i)}}),bO.apply(this,arguments)}function wO(){return wO=(0,M.Z)(function*(n,e){const t=Xe(n);sh(t.remoteStore)||ze("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=Xe(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.gs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Fc.get(r)||[];i.push(e),t.Fc.set(r,i)}catch(r){const i=Bm(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),wO.apply(this,arguments)}function EO(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function CO(n,e,t){const r=Xe(n);let i=r.$c[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.$c[r.currentUser.toKey()]=i}}function $m(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||jU(n,r)})}function jU(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(Bb(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),TO(n))}function IO(n,e,t){for(const r of t)r instanceof FU?(n.Mc.addReference(r.key,e),hG(n,r)):r instanceof LU?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||jU(n,r.key)):vt()}function hG(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.xc.add(r),TO(n))}function TO(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new lt(En.fromString(e)),r=n.Bc.next();n.Oc.set(r,new rG(t)),n.kc=n.kc.insert(t,r),dT(n.remoteStore,new th(xa(Em(t.path)),r,2,na.A))}}function Au(n,e,t){return DO.apply(this,arguments)}function DO(){return DO=(0,M.Z)(function*(n,e,t){const r=Xe(n),i=[],s=[],u=[];var h;r.Cc.isEmpty()||(r.Cc.forEach((h,p)=>{u.push(r.Uc(p,e,t).then(y=>{if(y){r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,y.fromCache?"not-current":"current"),i.push(y);const C=Mk.Ss(p.targetId,y);s.push(C)}}))}),yield Promise.all(u),r.Dc.To(i),yield(h=(0,M.Z)(function*(p,y){const C=Xe(p);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>Se.forEach(y,R=>Se.forEach(R.vs,L=>C.persistence.referenceDelegate.addReference(D,R.targetId,L)).next(()=>Se.forEach(R.Vs,L=>C.persistence.referenceDelegate.removeReference(D,R.targetId,L)))))}catch(D){if(!dp(D))throw D;ze("LocalStore","Failed to update sequence numbers: "+D)}for(const D of y){const R=D.targetId;if(!D.fromCache){const L=C.Ms.get(R),ie=L.withLastLimboFreeSnapshotVersion(L.snapshotVersion);C.Ms=C.Ms.insert(R,ie)}}}),function(p,y){return h.apply(this,arguments)})(r.localStore,s))}),DO.apply(this,arguments)}function fG(n,e){return SO.apply(this,arguments)}function SO(){return SO=(0,M.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield mU(t.localStore,e);t.currentUser=e,(i=t).Fc.forEach(u=>{u.forEach(h=>{h.reject(new Ue(Ee.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Au(t,r.qs)}var i}),SO.apply(this,arguments)}function pG(n,e){const t=Xe(n),r=t.Oc.get(e);if(r&&r.Sc)return Pn().add(r.key);{let i=Pn();const s=t.Nc.get(e);if(!s)return i;for(const u of s){const h=t.Cc.get(u);i=i.unionWith(h.view.yc)}return i}}function gG(n,e){return AO.apply(this,arguments)}function AO(){return AO=(0,M.Z)(function*(n,e){const t=Xe(n),r=yield aT(t.localStore,e.query,!0),i=e.view.vc(r);return t.isPrimaryClient&&IO(t,e.targetId,i.Pc),i}),AO.apply(this,arguments)}function mG(n){return MO.apply(this,arguments)}function MO(){return MO=(0,M.Z)(function*(n){const e=Xe(n);return bU(e.localStore).then(t=>Au(e,t))}),MO.apply(this,arguments)}function _G(n,e,t,r){return xO.apply(this,arguments)}function xO(){return xO=(0,M.Z)(function*(n,e,t,r){const i=Xe(n),s=yield function(u,h){const p=Xe(u),y=Xe(p.gs);return p.persistence.runTransaction("Lookup mutation documents","readonly",C=>y.Ge(C,h).next(D=>D?p.Us.Es(C,D):Se.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield Vm(i.remoteStore):"acknowledged"===t||"rejected"===t?(CO(i,e,r||null),EO(i,e),h=e,Xe(Xe(i.localStore).gs).Qe(h)):vt(),yield Au(i,s)):ze("SyncEngine","Cannot apply mutation batch with id: "+e)}),xO.apply(this,arguments)}function kO(){return kO=(0,M.Z)(function*(n,e){const t=Xe(n);if(NO(t),FO(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield HU(t,r.toArray());t.Lc=!0,yield rO(t.remoteStore,!0);for(const s of i)dT(t.remoteStore,s)}else if(!1===e&&!1!==t.Lc){const r=[];let i=Promise.resolve();t.Nc.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>($m(t,u),Fm(t.localStore,u,!0))),Bb(t.remoteStore,u)}),yield i,yield HU(t,r),function(s){const u=Xe(s);u.Oc.forEach((h,p)=>{Bb(u.remoteStore,p)}),u.Mc.ii(),u.Oc=new Map,u.kc=new zr(lt.comparator)}(t),t.Lc=!1,yield rO(t.remoteStore,!1)}}),kO.apply(this,arguments)}function HU(n,e,t){return OO.apply(this,arguments)}function OO(){return OO=(0,M.Z)(function*(n,e,t){const r=Xe(n),i=[],s=[];for(const u of e){let h;const p=r.Nc.get(u);if(p&&0!==p.length){h=yield Nm(r.localStore,xa(p[0]));for(const y of p){const C=r.Cc.get(y),D=yield gG(r,C);D.snapshot&&s.push(D.snapshot)}}else{const y=yield vU(r.localStore,u);h=yield Nm(r.localStore,y),yield fO(r,$U(y),u,!1)}i.push(h)}return r.Dc.To(s),i}),OO.apply(this,arguments)}function $U(n){return sV(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function vG(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).ds()}function bG(n,e,t,r){return RO.apply(this,arguments)}function RO(){return RO=(0,M.Z)(function*(n,e,t,r){const i=Xe(n);if(i.Lc)ze("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(e))switch(t){case"current":case"not-current":{const s=yield bU(i.localStore),u=Sb.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Au(i,s,u);break}case"rejected":yield Fm(i.localStore,e,!0),$m(i,e,r);break;default:vt()}}),RO.apply(this,arguments)}function wG(n,e,t){return PO.apply(this,arguments)}function PO(){return PO=(0,M.Z)(function*(n,e,t){const r=NO(n);if(r.Lc){for(const i of e){if(r.Nc.has(i)){ze("SyncEngine","Adding an already active target "+i);continue}const s=yield vU(r.localStore,i),u=yield Nm(r.localStore,s);yield fO(r,$U(s),u.targetId,!1),dT(r.remoteStore,u)}for(const i of t)r.Nc.has(i)&&(yield Fm(r.localStore,i,!1).then(()=>{Bb(r.remoteStore,i),$m(r,i)}).catch(mp))}}),PO.apply(this,arguments)}function NO(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=UU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lG.bind(null,e),e.Dc.To=Xq.bind(null,e.eventManager),e.Dc.qc=Jq.bind(null,e.eventManager),e}function FO(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uG.bind(null,e),e}class zU{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,M.Z)(function*(){t.O=Vb(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return gU(this.persistence,new pU,e.initialUser,this.O)}jc(e){return new xq(Fk.bi,this.O)}Gc(e){return new CU}terminate(){var e=this;return(0,M.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qU extends zU{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,M.Z)(function*(){yield t().call(r,e),yield function wq(n){return Ok.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield FO(r.zc.syncEngine),yield Vm(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return gU(this.persistence,new pU,e.initialUser,this.O)}Qc(e){return new cq(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=Ak(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?wo.withCacheSize(this.cacheSizeBytes):wo.DEFAULT;return new Sk(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,TU(),uT(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new CU}}class CG extends qU{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,M.Z)(function*(){yield t().call(r,e);const i=r.zc.syncEngine;r.sharedClientState instanceof Bk&&(r.sharedClientState.syncEngine={hr:_G.bind(null,i),lr:bG.bind(null,i),dr:wG.bind(null,i),ds:vG.bind(null,i),ar:mG.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var s=(0,M.Z)(function*(u){yield function yG(n,e){return kO.apply(this,arguments)}(r.zc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}Gc(e){const t=TU();if(!Bk.Vt(t))throw new Ue(Ee.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Ak(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Bk(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class LO{initialize(e,t){var r=this;return(0,M.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>BU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=fG.bind(null,r.syncEngine),yield rO(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Qq}createDatastore(e){const t=Vb(e.databaseInfo.databaseId),r=new Nq(e.databaseInfo);return new Vq(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>BU(this.syncEngine,h,0),u=IU.Vt()?new IU:new Oq,new Bq(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,h,p,y){const C=new iG(r,i,s,u,h,p);return y&&(C.Lc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,M.Z)(function*(t){const r=Xe(t);ze("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield Lm(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function GU(n,e=10240){let t=0;return{read:()=>(0,M.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,M.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class fT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class IG{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new Ii,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,M.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,M.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,M.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),i=Number(r);isNaN(i)&&e.eu(`length string (${r}) is not valid number`);const s=yield e.nu(i);return new eG(JSON.parse(s),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,M.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,M.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,M.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class TG{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,M.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ue(Ee.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,M.Z)(function*(s,u){const h=Xe(s),p=kb(h.O)+"/documents",y={documents:u.map(L=>xb(h.O,L))},C=yield h.Lr("BatchGetDocuments",p,y),D=new Map;C.forEach(L=>{const j=function Vz(n,e){return"found"in e?function(t,r){Rt(!!r.found);const i=yc(t,r.found.name),s=Si(r.found.updateTime),u=new bs({mapValue:{fields:r.found.fields}});return vr.newFoundDocument(i,s,u)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const i=yc(t,r.missing),s=Si(r.readTime);return vr.newNoDocument(i,s)}(n,e):vt()}(h.O,L);D.set(j.key.toString(),j)});const R=[];return u.forEach(L=>{const j=D.get(L.toString());Rt(!!j),R.push(j)}),R}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Db(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,M.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=lt.fromPath(i);e.mutations.push(new ak(s,e.precondition(s)))}),yield(r=(0,M.Z)(function*(i,s){const u=Xe(i),h=kb(u.O)+"/documents",p={writes:s.map(y=>Ob(u.O,y))};yield u.Mr("Commit",h,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw vt();t=xt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ue(Ee.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ti.updateTime(t):ti.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(xt.min()))throw new Ue(Ee.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ti.updateTime(t)}return ti.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class DG{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new jk(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,M.Z)(function*(){const t=new TG(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.uu(s)}))}).catch(i=>{e.uu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!sp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!EV(t)}return!1}}class SG{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ki.UNAUTHENTICATED,this.clientId=qL.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,M.Z)(function*(h){ze("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(ze("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,M.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,M.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Bm(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function WU(n,e){return VO.apply(this,arguments)}function VO(){return VO=(0,M.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,M.Z)(function*(s){r.isEqual(s)||(yield mU(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),VO.apply(this,arguments)}function ZU(n,e){return UO.apply(this,arguments)}function UO(){return UO=(0,M.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield BO(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>OU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>OU(e.remoteStore,s)),n.onlineComponents=e}),UO.apply(this,arguments)}function BO(n){return jO.apply(this,arguments)}function jO(){return jO=(0,M.Z)(function*(n){return n.offlineComponents||(ze("FirestoreClient","Using default OfflineComponentProvider"),yield WU(n,new zU)),n.offlineComponents}),jO.apply(this,arguments)}function pT(n){return HO.apply(this,arguments)}function HO(){return HO=(0,M.Z)(function*(n){return n.onlineComponents||(ze("FirestoreClient","Using default OnlineComponentProvider"),yield ZU(n,new LO)),n.onlineComponents}),HO.apply(this,arguments)}function KU(n){return BO(n).then(e=>e.persistence)}function $O(n){return BO(n).then(e=>e.localStore)}function YU(n){return pT(n).then(e=>e.remoteStore)}function zO(n){return pT(n).then(e=>e.syncEngine)}function zm(n){return qO.apply(this,arguments)}function qO(){return qO=(0,M.Z)(function*(n){const e=yield pT(n),t=e.eventManager;return t.onListen=sG.bind(null,e.syncEngine),t.onUnlisten=oG.bind(null,e.syncEngine),t}),qO.apply(this,arguments)}function QU(n,e,t={}){const r=new Ii;return n.asyncQueue.enqueueAndForget((0,M.Z)(function*(){return function(i,s,u,h,p){const y=new fT({next:D=>{s.enqueueAndForget(()=>lO(i,C));const R=D.docs.has(u);!R&&D.fromCache?p.reject(new Ue(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&D.fromCache&&h&&"server"===h.source?p.reject(new Ue(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(D)},error:D=>p.reject(D)}),C=new dO(Em(u.path),y,{includeMetadataChanges:!0,uc:!0});return oO(i,C)}(yield zm(n),n.asyncQueue,e,t,r)})),r.promise}function XU(n,e,t={}){const r=new Ii;return n.asyncQueue.enqueueAndForget((0,M.Z)(function*(){return function(i,s,u,h,p){const y=new fT({next:D=>{s.enqueueAndForget(()=>lO(i,C)),D.fromCache&&"server"===h.source?p.reject(new Ue(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(D)},error:D=>p.reject(D)}),C=new dO(u,y,{includeMetadataChanges:!0,uc:!0});return oO(i,C)}(yield zm(n),n.asyncQueue,e,t,r)})),r.promise}const JU=new Map;function GO(n,e,t){if(!t)throw new Ue(Ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eB(n,e,t,r){if(!0===e&&!0===r)throw new Ue(Ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tB(n){if(!lt.isDocumentKey(n))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nB(n){if(lt.isDocumentKey(n))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gT(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":vt()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gT(n);throw new Ue(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rB(n,e){if(e<=0)throw new Ue(Ee.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class iB{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,eB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jb{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iB({}),this._settingsFrozen=!1,e instanceof ip?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Ue(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ip(i.options.projectId)}(e))}get app(){if(!this._app)throw new Ue(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iB(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new X$;switch(t.type){case"gapi":const r=t.client;return Rt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new nz(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ue(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=JU.get(e);t&&(ze("ComponentProvider","Removing Datastore"),JU.delete(e),t.terminate())}(this),Promise.resolve()}}class ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ir(this.firestore,e,this._key)}}class Es{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Es(this.firestore,e,this._query)}}class wc extends Es{constructor(e,t,r){super(e,t,Em(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ir(this.firestore,null,new lt(e))}withConverter(e){return new wc(this.firestore,e,this._path)}}function sB(n,e,...t){if(n=(0,x.m9)(n),GO("collection","path",e),n instanceof jb){const r=En.fromString(e,...t);return nB(r),new wc(n,null,r)}{if(!(n instanceof ir||n instanceof wc))throw new Ue(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return nB(r),new wc(n.firestore,null,r)}}function mT(n,e,...t){if(n=(0,x.m9)(n),1===arguments.length&&(e=qL.R()),GO("doc","path",e),n instanceof jb){const r=En.fromString(e,...t);return tB(r),new ir(n,null,new lt(r))}{if(!(n instanceof ir||n instanceof wc))throw new Ue(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(En.fromString(e,...t));return tB(r),new ir(n.firestore,n instanceof wc?n.converter:null,new lt(r))}}function oB(n,e){return n=(0,x.m9)(n),e=(0,x.m9)(e),(n instanceof ir||n instanceof wc)&&(e instanceof ir||e instanceof wc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function aB(n,e){return n=(0,x.m9)(n),e=(0,x.m9)(e),n instanceof Es&&e instanceof Es&&n.firestore===e.firestore&&Cb(n._query,e._query)&&n.converter===e.converter}class VG{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new jk(this,"async_queue_retry"),this.yu=()=>{const t=uT();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=uT();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=uT();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new Ii;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,M.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!dp(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,ei("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const i=sO.createAndSchedule(this,e,t,r,s=>this.Tu(s));return this.du.push(i),i}pu(){this._u&&vt()}verifyOperationInProgress(){}Au(){var e=this;return(0,M.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function WO(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class UG{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class hr extends jb{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new VG,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||lB(this),this._firestoreClient.terminate()}}function ri(n){return n._firestoreClient||lB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function lB(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new lz(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new SG(n._authCredentials,n._appCheckCredentials,n._queue,r)}function cB(n,e,t){const r=new Ii;return n.asyncQueue.enqueue((0,M.Z)(function*(){try{yield WU(n,t),yield ZU(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(s=i).name?s.code===Ee.FAILED_PRECONDITION||s.code===Ee.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var s})).then(()=>r.promise)}function uB(n){if(n._initialized||n._terminated)throw new Ue(Ee.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Mu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ec{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ec(hi.fromBase64String(e))}catch(t){throw new Ue(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ec(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class _p{constructor(e){this._methodName=e}}class _T{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return on(this._lat,e._lat)||on(this._long,e._long)}}const KG=/^__.*__$/;class YG{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new cp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tb(e,this.data,t,this.fieldTransforms)}}class dB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new cp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw vt()}}class yT{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=i,void 0===s&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new yT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.Nu(e),i}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return wT(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(hB(this.Vu)&&KG.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class QG{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||Vb(e)}Fu(e,t,r,i=!1){return new yT({Vu:e,methodName:t,$u:r,path:Di.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function yp(n){const e=n._freezeSettings(),t=Vb(n._databaseId);return new QG(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vT(n,e,t,r,i,s={}){const u=n.Fu(s.merge||s.mergeFields?2:0,e,t,i);QO("Data must be an object, but it was:",u,r);const h=gB(r,u);let p,y;if(s.merge)p=new _m(u.fieldMask),y=u.fieldTransforms;else if(s.mergeFields){const C=[];for(const D of s.mergeFields){const R=XO(e,D,t);if(!u.contains(R))throw new Ue(Ee.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);_B(C,R)||C.push(R)}p=new _m(C),y=u.fieldTransforms.filter(D=>p.covers(D.field))}else p=null,y=u.fieldTransforms;return new YG(new bs(h),p,y)}class Hb extends _p{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hb}}function fB(n,e,t){return new yT({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class ZO extends _p{_toFieldTransform(e){return new Ib(e.path,new Im)}isEqual(e){return e instanceof ZO}}class XG extends _p{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=fB(this,e,!0),r=this.Bu.map(s=>vp(s,t)),i=new ap(r);return new Ib(e.path,i)}isEqual(e){return this===e}}class JG extends _p{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=fB(this,e,!0),r=this.Bu.map(s=>vp(s,t)),i=new lp(r);return new Ib(e.path,i)}isEqual(e){return this===e}}class eW extends _p{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new Tm(e.O,dV(e.O,this.Lu));return new Ib(e.path,t)}isEqual(e){return this===e}}function KO(n,e,t,r){const i=n.Fu(1,e,t);QO("Data must be an object, but it was:",i,r);const s=[],u=bs.empty();np(r,(p,y)=>{const C=bT(e,p,t);y=(0,x.m9)(y);const D=i.xu(C);if(y instanceof Hb)s.push(C);else{const R=vp(y,D);null!=R&&(s.push(C),u.set(C,R))}});const h=new _m(s);return new dB(u,h,i.fieldTransforms)}function YO(n,e,t,r,i,s){const u=n.Fu(1,e,t),h=[XO(e,r,t)],p=[i];if(s.length%2!=0)throw new Ue(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<s.length;R+=2)h.push(XO(e,s[R])),p.push(s[R+1]);const y=[],C=bs.empty();for(let R=h.length-1;R>=0;--R)if(!_B(y,h[R])){const L=h[R];let j=p[R];j=(0,x.m9)(j);const ie=u.xu(L);if(j instanceof Hb)y.push(L);else{const Ae=vp(j,ie);null!=Ae&&(y.push(L),C.set(L,Ae))}}const D=new _m(y);return new dB(C,D,u.fieldTransforms)}function pB(n,e,t,r=!1){return vp(t,n.Fu(r?4:3,e))}function vp(n,e){if(mB(n=(0,x.m9)(n)))return QO("Unsupported field value:",e,n),gB(n,e);if(n instanceof _p)return function(t,r){if(!hB(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let h=vp(u,r.ku(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,x.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return dV(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ti.fromDate(t);return{timestampValue:Mb(r.O,i)}}if(t instanceof Ti){const i=new Ti(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Mb(r.O,i)}}if(t instanceof _T)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ec)return{bytesValue:xV(r.O,t._byteString)};if(t instanceof ir){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.Ou(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:ck(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${gT(t)}`)}(n,e)}function gB(n,e){const t={};return ZL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):np(n,(r,i)=>{const s=vp(i,e.Du(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function mB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ti||n instanceof _T||n instanceof Ec||n instanceof ir||n instanceof _p)}function QO(n,e,t){if(!mB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gT(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function XO(n,e,t){if((e=(0,x.m9)(e))instanceof Mu)return e._internalPath;if("string"==typeof e)return bT(n,e);throw wT("Field path arguments must be of type string or ",n,!1,void 0,t)}const tW=new RegExp("[~\\*/\\[\\]]");function bT(n,e,t){if(e.search(tW)>=0)throw wT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Mu(...e.split("."))._internalPath}catch(r){throw wT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wT(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new Ue(Ee.INVALID_ARGUMENT,h+n+p)}function _B(n,e){return n.some(t=>t.isEqual(e))}class $b{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nW(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ET("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nW extends $b{data(){return super.data()}}function ET(n,e){return"string"==typeof e?bT(n,e):e instanceof Mu?e._internalPath:e._delegate._internalPath}class bp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xu extends $b{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zb(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ET("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class zb extends xu{data(e={}){return super.data(e)}}class ah{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new zb(this._firestore,this._userDataWriter,r.key,r,new bp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new zb(r._firestore,r._userDataWriter,u.doc.key,u.doc,new bp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new zb(r._firestore,r._userDataWriter,u.doc.key,u.doc,new bp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,y=-1;return 0!==u.type&&(p=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),y=s.indexOf(u.doc.key)),{type:rW(u.type),doc:h,oldIndex:p,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rW(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return vt()}}function yB(n,e){return n instanceof xu&&e instanceof xu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ah&&e instanceof ah&&n._firestore===e._firestore&&aB(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function vB(n){if(qI(n)&&0===n.explicitOrderBy.length)throw new Ue(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qb{}function lh(n,...e){for(const t of e)n=t._apply(n);return n}class iW extends qb{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=yp(e.firestore),r=function(i,s,u,h,p,y,C){let D;if(p.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){TB(C,y);const L=[];for(const j of C)L.push(IB(h,i,j));D={arrayValue:{values:L}}}else D=IB(h,i,C)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||TB(C,y),D=pB(u,"where",C,"in"===y||"not-in"===y);const R=qs.create(p,y,D);return function(L,j){if(j.S()){const Ae=nk(L);if(null!==Ae&&!Ae.isEqual(j.field))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ae.toString()}' and '${j.field.toString()}'`);const tt=tk(L);null!==tt&&DB(0,j.field,tt)}const ie=function(Ae,tt){for(const dt of Ae.filters)if(tt.indexOf(dt.op)>=0)return dt.op;return null}(L,function(Ae){switch(Ae){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==ie)throw new Ue(Ee.INVALID_ARGUMENT,ie===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${ie.toString()}' filters.`)}(i,R),R}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new Es(e.firestore,e.converter,function(i,s){const u=i.filters.concat([s]);return new Du(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class oW extends qb{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new Ue(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ue(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new wm(i,s);return function(h,p){if(null===tk(h)){const y=nk(h);null!==y&&DB(0,y,p.field)}}(r,u),u}(e._query,this.Uu,this.Gu);return new Es(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Du(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class bB extends qb{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new Es(e.firestore,e.converter,oV(e._query,this.ju,this.Qu))}}class wB extends qb{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=CB(e,this.type,this.Wu,this.zu);return new Es(e.firestore,e.converter,(i=t,new Du((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class EB extends qb{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=CB(e,this.type,this.Wu,this.zu);return new Es(e.firestore,e.converter,(i=t,new Du((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function CB(n,e,t,r){if(t[0]=(0,x.m9)(t[0]),t[0]instanceof $b)return function(i,s,u,h,p){if(!h)throw new Ue(Ee.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const y=[];for(const C of Cm(i))if(C.field.isKeyField())y.push(LI(s,h.key));else{const D=h.data.field(C.field);if(Qx(D))throw new Ue(Ee.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===D){const R=C.field.canonicalString();throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(D)}return new bm(y,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=yp(n.firestore);return function(s,u,h,p,y,C){const D=s.explicitOrderBy;if(y.length>D.length)throw new Ue(Ee.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let L=0;L<y.length;L++){const j=y[L];if(D[L].field.isKeyField()){if("string"!=typeof j)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof j}`);if(!rk(s)&&-1!==j.indexOf("/"))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${j}' contains a slash.`);const ie=s.path.child(En.fromString(j));if(!lt.isDocumentKey(ie))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${ie}' is not because it contains an odd number of segments.`);const Ae=new lt(ie);R.push(LI(u,Ae))}else{const ie=pB(h,p,j);R.push(ie)}}return new bm(R,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function IB(n,e,t){if("string"==typeof(t=(0,x.m9)(t))){if(""===t)throw new Ue(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rk(e)&&-1!==t.indexOf("/"))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(En.fromString(t));if(!lt.isDocumentKey(r))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return LI(n,new lt(r))}if(t instanceof ir)return LI(n,t._key);throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gT(t)}.`)}function TB(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function DB(n,e,t){if(!t.isEqual(e))throw new Ue(Ee.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class JO{convertValue(e,t="none"){switch(op(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw vt()}}convertObject(e,t){const r={};return np(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new _T(xr(e.latitude),xr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=KL(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_b(e));default:return null}}convertTimestamp(e){const t=Jd(e);return new Ti(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=En.fromString(e);Rt(BV(r));const i=new ip(r.get(1),r.get(3)),s=new lt(r.popFirst(5));return i.isEqual(t)||ei(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function CT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class pW extends JO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}class SB{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=yp(e)}set(e,t,r){this._verifyNotCommitted();const i=ch(e,this._firestore),s=CT(i.converter,t,r),u=vT(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,ti.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=ch(e,this._firestore);let u;return u="string"==typeof(t=(0,x.m9)(t))||t instanceof Mu?YO(this._dataReader,"WriteBatch.update",s._key,t,r,i):KO(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,ti.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ch(e,this._firestore);return this._mutations=this._mutations.concat(new Db(t._key,ti.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(Ee.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ch(n,e){if((n=(0,x.m9)(n)).firestore!==e)throw new Ue(Ee.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wp extends JO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ir(this.firestore,null,t)}}function AB(n,e,t){n=ln(n,ir);const r=ln(n.firestore,hr),i=CT(n.converter,e,t);return qm(r,[vT(yp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ti.none())])}function MB(n,e,t,...r){n=ln(n,ir);const i=ln(n.firestore,hr),s=yp(i);let u;return u="string"==typeof(e=(0,x.m9)(e))||e instanceof Mu?YO(s,"updateDoc",n._key,e,t,r):KO(s,"updateDoc",n._key,e),qm(i,[u.toMutation(n._key,ti.exists(!0))])}function xB(n,...e){var t,r,i;n=(0,x.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||WO(e[u])||(s=e[u],u++);const h={includeMetadataChanges:s.includeMetadataChanges};if(WO(e[u])){const D=e[u];e[u]=null===(t=D.next)||void 0===t?void 0:t.bind(D),e[u+1]=null===(r=D.error)||void 0===r?void 0:r.bind(D),e[u+2]=null===(i=D.complete)||void 0===i?void 0:i.bind(D)}let p,y,C;if(n instanceof ir)y=ln(n.firestore,hr),C=Em(n._key.path),p={next:D=>{e[u]&&e[u](eR(y,n,D))},error:e[u+1],complete:e[u+2]};else{const D=ln(n,Es);y=ln(D.firestore,hr),C=D._query;const R=new wp(y);p={next:L=>{e[u]&&e[u](new ah(y,R,D,L))},error:e[u+1],complete:e[u+2]},vB(n._query)}return function(D,R,L,j){const ie=new fT(j),Ae=new dO(R,ie,L);return D.asyncQueue.enqueueAndForget((0,M.Z)(function*(){return oO(yield zm(D),Ae)})),()=>{ie.Jc(),D.asyncQueue.enqueueAndForget((0,M.Z)(function*(){return lO(yield zm(D),Ae)}))}}(ri(y),C,h,p)}function qm(n,e){return function(t,r){const i=new Ii;return t.asyncQueue.enqueueAndForget((0,M.Z)(function*(){return function aG(n,e,t){return mO.apply(this,arguments)}(yield zO(t),r,i)})),i.promise}(ri(n),e)}function eR(n,e,t){const r=t.docs.get(e._key),i=new wp(n);return new xu(n,i,e._key,r,new bp(t.hasPendingWrites,t.fromCache),e.converter)}class IW extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=yp(e)}get(e){const t=ch(e,this._firestore),r=new pW(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return vt();const s=i[0];if(s.isFoundDocument())return new $b(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new $b(this._firestore,r,t._key,null,t.converter);throw vt()})}set(e,t,r){const i=ch(e,this._firestore),s=CT(i.converter,t,r),u=vT(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=ch(e,this._firestore);let u;return u="string"==typeof(t=(0,x.m9)(t))||t instanceof Mu?YO(this._dataReader,"Transaction.update",s._key,t,r,i):KO(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=ch(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ch(e,this._firestore),r=new wp(this._firestore);return super.get(e).then(i=>new xu(this._firestore,r,t._key,i._document,new bp(!1,!1),t.converter))}}function tR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function OB(){if("undefined"==typeof Uint8Array)throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function RB(){if(!function oz(){return"undefined"!=typeof atob}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){gm=q.SDK_VERSION,(0,q._registerComponent)(new re.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),s=new hr(i,new ez(t.getProvider("auth-internal")),new rz(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),s._setSettings(r),s},"PUBLIC")),(0,q.registerVersion)(HL,"3.4.5",n),(0,q.registerVersion)(HL,"3.4.5","esm2017")}();class Gb{constructor(e){this._delegate=e}static fromBase64String(e){return RB(),new Gb(Ec.fromBase64String(e))}static fromUint8Array(e){return OB(),new Gb(Ec.fromUint8Array(e))}toBase64(){return RB(),this._delegate.toBase64()}toUint8Array(){return OB(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function nR(n){return function RW(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class PW{enableIndexedDbPersistence(e,t){return function jG(n,e){uB(n=ln(n,hr));const t=ri(n),r=n._freezeSettings(),i=new LO;return cB(t,i,new qU(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function HG(n){uB(n=ln(n,hr));const e=ri(n),t=n._freezeSettings(),r=new LO;return cB(e,r,new CG(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $G(n){if(n._initialized&&!n._terminated)throw new Ue(Ee.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ii;return n._queue.enqueueAndForgetEvenWhileRestricted((0,M.Z)(function*(){try{yield(t=(0,M.Z)(function*(r){if(!Al.Vt())return Promise.resolve();const i=r+"main";yield Al.delete(i)}),function(r){return t.apply(this,arguments)})(Ak(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class PB{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ip||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&gb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function FG(n,e,t,r={}){var i;const s=(n=ln(n,jb))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&gb("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=Ki.MOCK_USER;else{u=(0,x.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Ue(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Ki(p)}n._authCredentials=new J$(new $L(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function qG(n){return function AG(n){return n.asyncQueue.enqueue((0,M.Z)(function*(){const e=yield KU(n),t=yield YU(n);return e.setNetworkEnabled(!0),function(r){const i=Xe(r);return i.Ko.delete(0),Ub(i)}(t)}))}(ri(n=ln(n,hr)))}(this._delegate)}disableNetwork(){return function GG(n){return function MG(n){return n.asyncQueue.enqueue((0,M.Z)(function*(){const e=yield KU(n),t=yield YU(n);return e.setNetworkEnabled(!1),(r=(0,M.Z)(function*(i){const s=Xe(i);s.Ko.add(0),yield Lm(s),s.Qo.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ri(n=ln(n,hr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,eB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function zG(n){return function(e){const t=new Ii;return e.asyncQueue.enqueueAndForget((0,M.Z)(function*(){return function dG(n,e){return wO.apply(this,arguments)}(yield zO(e),t)})),t.promise}(ri(n=ln(n,hr)))}(this._delegate)}onSnapshotsInSync(e){return function CW(n,e){return function OG(n,e){const t=new fT(e);return n.asyncQueue.enqueueAndForget((0,M.Z)(function*(){return r=yield zm(n),i=t,Xe(r).Zo.add(i),void i.next();var r,i})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,M.Z)(function*(){return r=yield zm(n),i=t,void Xe(r).Zo.delete(i);var r,i}))}}(ri(n=ln(n,hr)),WO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Gm(this,sB(this._delegate,e))}catch(t){throw Gs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Pa(this,mT(this._delegate,e))}catch(t){throw Gs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ws(this,function LG(n,e){if(n=ln(n,jb),GO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(Ee.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Es(n,null,(t=e,new Du(En.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Gs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function TW(n,e){return function RG(n,e){const t=new Ii;return n.asyncQueue.enqueueAndForget((0,M.Z)(function*(){const r=yield(i=n,pT(i).then(s=>s.datastore));var i;new DG(n.asyncQueue,r,e,t).run()})),t.promise}(ri(n=ln(n,hr)),t=>e(new IW(n,t)))}(this._delegate,t=>e(new NB(this,t)))}batch(){return ri(this._delegate),new FB(new SB(this._delegate,e=>qm(this._delegate,e)))}loadBundle(e){return function WG(n,e){const t=ri(n=ln(n,hr)),r=new UG;return function PG(n,e,t,r){const i=function(s,u){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,y){if(p instanceof Uint8Array)return GU(p,y);if(p instanceof ArrayBuffer)return GU(new Uint8Array(p),y);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new IG(p,u);var p}(t,Vb(e));n.asyncQueue.enqueueAndForget((0,M.Z)(function*(){!function EG(n,e,t){const r=Xe(n);var i;(i=(0,M.Z)(function*(s,u,h){try{const p=yield u.getMetadata();if(yield function(R,L){const j=Xe(R),ie=Si(L.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",Ae=>j.Kn.getBundleMetadata(Ae,L.id)).then(Ae=>!!Ae&&Ae.createTime.compareTo(ie)>=0)}(s.localStore,p))return yield u.close(),void h._completeWith((R=p,{taskState:"Success",documentsLoaded:R.totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}));h._updateProgress(NU(p));const y=new tG(p,s.localStore,u.O);let C=yield u.Kc();for(;C;){const R=yield y.lc(C);R&&h._updateProgress(R),C=yield u.Kc()}const D=yield y.complete();yield Au(s,D.ws,void 0),yield function(R,L){const j=Xe(R);return j.persistence.runTransaction("Save bundle","readwrite",ie=>j.Kn.saveBundleMetadata(ie,L))}(s.localStore,p),h._completeWith(D.progress)}catch(p){gb("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p)}var R}),function(s,u,h){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield zO(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function ZG(n,e){return function NG(n,e){return n.asyncQueue.enqueue((0,M.Z)(function*(){return function(t,r){const i=Xe(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Kn.getNamedQuery(s,r))}(yield $O(n),e)}))}(ri(n=ln(n,hr)),e).then(t=>t?new Es(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ws(this,t):null)}}class IT extends JO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gb(new Ec(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Pa.forKey(t,this.firestore,null)}}class NB{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new IT(e)}get(e){const t=Cp(e);return this._delegate.get(t).then(r=>new Wb(this._firestore,new xu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Cp(e);return r?(tR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Cp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Cp(e);return this._delegate.delete(t),this}}class FB{constructor(e){this._delegate=e}set(e,t,r){const i=Cp(e);return r?(tR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Cp(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Cp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ep{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new zb(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Zb(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ep.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Ep(e,new IT(e),t),i.set(t,s)),s}}Ep.INSTANCES=new WeakMap;class Pa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new IT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Pa(t,new ir(t._delegate,r,new lt(e)))}static forKey(e,t,r){return new Pa(t,new ir(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Gm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Gm(this.firestore,sB(this._delegate,e))}catch(t){throw Gs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,x.m9)(e))instanceof ir&&oB(this._delegate,e)}set(e,t){t=tR("DocumentReference.set",t);try{return t?AB(this._delegate,e,t):AB(this._delegate,e)}catch(r){throw Gs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?MB(this._delegate,e):MB(this._delegate,e,t,...r)}catch(i){throw Gs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function wW(n){return qm(ln(n.firestore,hr),[new Db(n._key,ti.none())])}(this._delegate)}onSnapshot(...e){const t=LB(e),r=VB(e,i=>new Wb(this.firestore,new xu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return xB(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function mW(n){n=ln(n,ir);const e=ln(n.firestore,hr),t=ri(e),r=new wp(e);return function xG(n,e){const t=new Ii;return n.asyncQueue.enqueueAndForget((0,M.Z)(function*(){return(r=(0,M.Z)(function*(i,s,u){try{const h=yield function(p,y){const C=Xe(p);return C.persistence.runTransaction("read document","readonly",D=>C.Us.ys(D,y))}(i,s);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new Ue(Ee.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=Bm(h,`Failed to get document '${s} from cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield $O(n),e,t);var r})),t.promise}(t,n._key).then(i=>new xu(e,r,n._key,i,new bp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function _W(n){n=ln(n,ir);const e=ln(n.firestore,hr);return QU(ri(e),n._key,{source:"server"}).then(t=>eR(e,n,t))}(this._delegate):function gW(n){n=ln(n,ir);const e=ln(n.firestore,hr);return QU(ri(e),n._key).then(t=>eR(e,n,t))}(this._delegate),t.then(r=>new Wb(this.firestore,new xu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Pa(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function Gs(n,e,t){return n.message=n.message.replace(e,t),n}function LB(n){for(const e of n)if("object"==typeof e&&!nR(e))return e;return{}}function VB(n,e){var t,r;let i;return i=nR(n[0])?n[0]:nR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Wb{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Pa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yB(this._delegate,e._delegate)}}class Zb extends Wb{data(e){const t=this._delegate.data(e);return function Q$(n,e){n||vt()}(void 0!==t),t}}class Ws{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new IT(e)}where(e,t,r){try{return new Ws(this.firestore,lh(this._delegate,function sW(n,e,t){const r=e,i=ET("where",n);return new iW(i,r,t)}(e,t,r)))}catch(i){throw Gs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ws(this.firestore,lh(this._delegate,function aW(n,e="asc"){const t=e,r=ET("orderBy",n);return new oW(r,t)}(e,t)))}catch(r){throw Gs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ws(this.firestore,lh(this._delegate,function lW(n){return rB("limit",n),new bB("limit",n,"F")}(e)))}catch(t){throw Gs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ws(this.firestore,lh(this._delegate,function cW(n){return rB("limitToLast",n),new bB("limitToLast",n,"L")}(e)))}catch(t){throw Gs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ws(this.firestore,lh(this._delegate,function uW(...n){return new wB("startAt",n,!0)}(...e)))}catch(t){throw Gs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ws(this.firestore,lh(this._delegate,function dW(...n){return new wB("startAfter",n,!1)}(...e)))}catch(t){throw Gs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ws(this.firestore,lh(this._delegate,function hW(...n){return new EB("endBefore",n,!1)}(...e)))}catch(t){throw Gs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ws(this.firestore,lh(this._delegate,function fW(...n){return new EB("endAt",n,!0)}(...e)))}catch(t){throw Gs(t,"endAt()","Query.endAt()")}}isEqual(e){return aB(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function vW(n){n=ln(n,Es);const e=ln(n.firestore,hr),t=ri(e),r=new wp(e);return function kG(n,e){const t=new Ii;return n.asyncQueue.enqueueAndForget((0,M.Z)(function*(){return(r=(0,M.Z)(function*(i,s,u){try{const h=yield aT(i,s,!0),p=new VU(s,h.Ks),y=p.Ic(h.documents),C=p.applyChanges(y,!1);u.resolve(C.snapshot)}catch(h){const p=Bm(h,`Failed to execute query '${s} against cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield $O(n),e,t);var r})),t.promise}(t,n._query).then(i=>new ah(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function bW(n){n=ln(n,Es);const e=ln(n.firestore,hr),t=ri(e),r=new wp(e);return XU(t,n._query,{source:"server"}).then(i=>new ah(e,r,n,i))}(this._delegate):function yW(n){n=ln(n,Es);const e=ln(n.firestore,hr),t=ri(e),r=new wp(e);return vB(n._query),XU(t,n._query).then(i=>new ah(e,r,n,i))}(this._delegate),t.then(r=>new rR(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=LB(e),r=VB(e,i=>new rR(this.firestore,new ah(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return xB(this._delegate,t,r)}withConverter(e){return new Ws(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}class FW{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Zb(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class rR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ws(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Zb(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new FW(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Zb(this._firestore,r))})}isEqual(e){return yB(this._delegate,e._delegate)}}class Gm extends Ws{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Pa(this.firestore,e):null}doc(e){try{return new Pa(this.firestore,void 0===e?mT(this._delegate):mT(this._delegate,e))}catch(t){throw Gs(t,"doc()","CollectionReference.doc()")}}add(e){return function EW(n,e){const t=ln(n.firestore,hr),r=mT(n),i=CT(n.converter,e);return qm(t,[vT(yp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ti.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Pa(this.firestore,t))}isEqual(e){return oB(this._delegate,e._delegate)}withConverter(e){return new Gm(this.firestore,this._delegate.withConverter(e?Ep.getInstance(this.firestore,e):null))}}function Cp(n){return ln(n,ir)}class iR{constructor(...e){this._delegate=new Mu(...e)}static documentId(){return new iR(Di.keyField().canonicalString())}isEqual(e){return(e=(0,x.m9)(e))instanceof Mu&&this._delegate._internalPath.isEqual(e._internalPath)}}class Ip{constructor(e){this._delegate=e}static serverTimestamp(){const e=function SW(){return new ZO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Ip(e)}static delete(){const e=function DW(){return new Hb("deleteField")}();return e._methodName="FieldValue.delete",new Ip(e)}static arrayUnion(...e){const t=function AW(...n){return new XG("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Ip(t)}static arrayRemove(...e){const t=function MW(...n){return new JG("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Ip(t)}static increment(e){const t=function xW(n){return new eW("increment",n)}(e);return t._methodName="FieldValue.increment",new Ip(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const LW={Firestore:PB,GeoPoint:_T,Timestamp:Ti,Blob:Gb,Transaction:NB,WriteBatch:FB,DocumentReference:Pa,DocumentSnapshot:Wb,Query:Ws,QueryDocumentSnapshot:Zb,QuerySnapshot:rR,CollectionReference:Gm,FieldPath:iR,FieldValue:Ip,setLogLevel:function NW(n){!function Y$(n){Xd.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function UW(n){(function VW(n,e){n.INTERNAL.registerComponent(new re.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},LW)))})(n,(e,t)=>new PB(e,t,new PW)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(O.Z);var TT=F(5363),BW=F(6063);class jW extends Gt.x{constructor(e=1/0,t=1/0,r=BW.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=u;p+=2)h=p;h&&r.splice(0,h+1)}}}function UB(n,e,t){var r,i;let s,u=!1;return n&&"object"==typeof n?(s=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,u=!!n.refCount,t=n.scheduler):s=null!=n?n:1/0,(0,Bg.B)({connector:()=>new jW(s,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}function BB(n,e){return(0,Yo.m)(e)?Mr(()=>n,e):Mr(()=>n)}var sR=F(9468),Tp=F(5867);class Kb{constructor(e){return e}}class jB{constructor(){return(0,Tp.C6)()}}const oR=new c.OlP("angularfire2._apps"),$W={provide:Kb,useFactory:function HW(n){return n&&1===n.length?n[0]:new Kb((0,Tp.Mq)())},deps:[[new c.FiY,oR]]},zW={provide:jB,deps:[[new c.FiY,oR]]};function qW(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Kb(r)}}let GW=(()=>{class n{constructor(t){(0,Tp.KN)("angularfire",v.q4.full,"core"),(0,Tp.KN)("angularfire",v.q4.full,"app"),(0,Tp.KN)("angular",c.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[$W,zW]}),n})();function WW(n,...e){return{ngModule:GW,providers:[{provide:oR,useFactory:qW(n),multi:!0,deps:[c.R0b,c.zs3,v.HU,...e]}]}}const ZW=(0,v.u3)(Tp.ZF,!0),HB=new Map,KW={activated:!1,tokenObservers:[]},YW={initialized:!1,enabled:!1};function Oi(n){return HB.get(n)||KW}function Ml(n,e){HB.set(n,e)}function DT(){return YW}class t6{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,M.Z)(function*(){t.stop();try{t.pending=new x.BH,yield function n6(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new x.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Zs=new x.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function zB(n){if(!Oi(n).activated)throw Zs.create("use-before-activation",{appName:n.name})}function cR(n,e){return uR.apply(this,arguments)}function uR(){return uR=(0,M.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(e),headers:r};let u,h;try{u=yield fetch(n,s)}catch(D){throw Zs.create("fetch-network-error",{originalErrorMessage:D.message})}if(200!==u.status)throw Zs.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(D){throw Zs.create("fetch-parse-error",{originalErrorMessage:D.message})}const p=h.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Zs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(p[1]),C=Date.now();return{token:h.attestationToken,expireTimeMillis:C+y,issuedAtTimeMillis:C}}),uR.apply(this,arguments)}function a6(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Yb="firebase-app-check-store";let MT=null;function GB(){return MT||(MT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Zs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Yb,{keyPath:"compositeKey"})}}catch(t){e(Zs.create("storage-open",{originalErrorMessage:t.message}))}}),MT)}function dR(){return dR=(0,M.Z)(function*(n,e){const r=(yield GB()).transaction(Yb,"readwrite"),s=r.objectStore(Yb).put({compositeKey:n,value:e});return new Promise((u,h)=>{s.onsuccess=p=>{u()},r.onerror=p=>{var y;h(Zs.create("storage-set",{originalErrorMessage:null===(y=p.target.error)||void 0===y?void 0:y.message}))}})}),dR.apply(this,arguments)}const Qb=new we.Yd("@firebase/app-check");function YB(n,e){return(0,x.hl)()?function d6(n,e){return function WB(n,e){return dR.apply(this,arguments)}(function KB(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Qb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QB(){return DT().enabled}function XB(){return gR.apply(this,arguments)}function gR(){return gR=(0,M.Z)(function*(){const n=DT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),gR.apply(this,arguments)}const _6={error:"UNKNOWN_ERROR"};function y6(n){return x.US.encodeString(JSON.stringify(n),!1)}function xT(n){return mR.apply(this,arguments)}function mR(){return mR=(0,M.Z)(function*(n,e=!1){const t=n.app;zB(t);const r=Oi(t);let s,i=r.token;if(!i){const p=yield r.cachedTokenPromise;p&&kT(p)&&(i=p)}if(!e&&i&&kT(i))return{token:i.token};let h,u=!1;if(QB()){r.exchangeTokenPromise||(r.exchangeTokenPromise=cR(a6(t,yield XB()),n.platformLoggerProvider).then(y=>(r.exchangeTokenPromise=void 0,y)),u=!0);const p=yield r.exchangeTokenPromise;return yield YB(t,p),Ml(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(p=>(r.exchangeTokenPromise=void 0,p)),u=!0),i=yield r.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?Qb.warn(p.message):Qb.error(p),s=p}return i?(h={token:i.token},Ml(t,Object.assign(Object.assign({},r),{token:i})),yield YB(t,i)):h=b6(s),u&&e2(t,h),h}),mR.apply(this,arguments)}function yR(n,e){const t=Oi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ml(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function JB(n){const{app:e}=n,t=Oi(e);let r=t.tokenRefresher;r||(r=function v6(n){const{app:e}=n;return new t6((0,M.Z)(function*(){let r;if(r=Oi(e).token?yield xT(n,!0):yield xT(n),r.error)throw r.error}),()=>!0,()=>{const t=Oi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ml(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function e2(n,e){const t=Oi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function kT(n){return n.expireTimeMillis-Date.now()>0}function b6(n){return{token:y6(_6),error:n}}class w6{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Oi(this.app);for(const t of e)yR(this.app,t.next);return Promise.resolve()}}const c2="app-check-internal";!function N6(){(0,q._registerComponent)(new re.wA("app-check",n=>function E6(n,e){return new w6(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(c2).initialize()})),(0,q._registerComponent)(new re.wA(c2,n=>function C6(n){return{getToken:e=>xT(n,e),addTokenListener:e=>function _R(n,e,t,r){const{app:i}=n,s=Oi(i),u={next:t,error:r,type:e};if(Ml(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,u]})),s.token&&kT(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),JB(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>JB(n))}(n,"INTERNAL",e),removeTokenListener:e=>yR(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,q.registerVersion)("@firebase/app-check","0.5.3")}();class Xb{constructor(){return(0,v.vb)("app-check")}}"undefined"!=typeof window&&window;var d2=F(127);const CR=new c.OlP("angularfire2.auth.use-emulator"),IR=new c.OlP("angularfire2.auth.settings"),TR=new c.OlP("angularfire2.auth.tenant-id"),DR=new c.OlP("angularfire2.auth.langugage-code"),SR=new c.OlP("angularfire2.auth.use-device-language"),AR=new c.OlP("angularfire.auth.persistence"),MR=(n,e,t,r,i,s,u,h)=>(0,I.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),u)for(const[y,C]of Object.entries(u))p.settings[y]=C;return h&&p.setPersistence(h),p},[t,r,i,s,u,h]);let Dp=(()=>{class n{constructor(t,r,i,s,u,h,p,y,C,D,R,L){const j=new Gt.x,ie=mt(void 0).pipe((0,TT.Q)(u.outsideAngular),Mr(()=>s.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,5881)))),(0,ot.U)(()=>(0,I.on)(t,s,r)),(0,ot.U)(Ae=>MR(Ae,s,h,y,C,D,p,R)),UB({bufferSize:1,refCount:!1}));if(Xa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=mt(null);else{ie.pipe(fu()).subscribe();const tt=ie.pipe(Mr(_t=>_t.getRedirectResult().then(In=>In,()=>null)),v.iC,UB({bufferSize:1,refCount:!1})),dt=ie.pipe(Mr(_t=>new On.y(In=>({unsubscribe:s.runOutsideAngular(()=>_t.onAuthStateChanged(Or=>In.next(Or),Or=>In.error(Or),()=>In.complete()))})))),At=ie.pipe(Mr(_t=>new On.y(In=>({unsubscribe:s.runOutsideAngular(()=>_t.onIdTokenChanged(Or=>In.next(Or),Or=>In.error(Or),()=>In.complete()))}))));this.authState=tt.pipe(BB(dt),(0,sR.R)(u.outsideAngular),(0,TT.Q)(u.insideAngular)),this.user=tt.pipe(BB(At),(0,sR.R)(u.outsideAngular),(0,TT.Q)(u.insideAngular)),this.idToken=this.user.pipe(Mr(_t=>_t?(0,mn.D)(_t.getIdToken()):mt(null))),this.idTokenResult=this.user.pipe(Mr(_t=>_t?(0,mn.D)(_t.getIdTokenResult()):mt(null))),this.credential=(0,Tl.T)(tt,j,this.authState.pipe(Ar(_t=>!_t))).pipe((0,ot.U)(_t=>(null==_t?void 0:_t.user)?_t:null),(0,sR.R)(u.outsideAngular),(0,TT.Q)(u.insideAngular))}return(0,I.pX)(this,ie,s,{spy:{apply:(Ae,tt,dt)=>{(Ae.startsWith("signIn")||Ae.startsWith("createUser"))&&dt.then(At=>j.next(At))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(I.Dh),c.LFG(I.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(v.HU),c.LFG(CR,8),c.LFG(IR,8),c.LFG(TR,8),c.LFG(DR,8),c.LFG(SR,8),c.LFG(AR,8),c.LFG(Xb,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function h2(n,e){return function j6(n,e=tu.z){return new On.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function xR(n,e){return h2(n,e).pipe((0,ot.U)(t=>({payload:t,type:"query"})))}function RT(n,e){return xR(n,e).pipe(Sa(void 0),w(),(0,ot.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const p=i.find(C=>C.doc.ref.isEqual(u.ref)),y=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&y&&JSON.stringify(y.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),s}))}function f2(n,e,t){return RT(n,t).pipe(_c((r,i)=>function $6(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function z6(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return kR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return kR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),mg(),(0,ot.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function kR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function p2(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class g2{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=RT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ot.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Sa(void 0),w(),Ar(([r,i])=>i.length>0||!r),(0,ot.U)(([r,i])=>i),v.iC)}auditTrail(e){return this.stateChanges(e).pipe(_c((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=p2(e);return f2(this.query,t,this.afs.schedulers.outsideAngular).pipe(v.iC)}valueChanges(e={}){return xR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),v.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(v.iC)}add(e){return this.ref.add(e)}doc(e){return new m2(this.ref.doc(e),this.afs)}}class m2{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=v2(r,t);return new g2(i,s,this.afs)}snapshotChanges(){return function H6(n,e){return h2(n,e).pipe(Sa(void 0),w(),(0,ot.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(v.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,mn.D)(this.ref.get(e)).pipe(v.iC)}}class q6{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?RT(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ar(t=>t.length>0),v.iC):RT(this.query,this.afs.schedulers.outsideAngular).pipe(v.iC)}auditTrail(e){return this.stateChanges(e).pipe(_c((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=p2(e);return f2(this.query,t,this.afs.schedulers.outsideAngular).pipe(v.iC)}valueChanges(e={}){return xR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),v.iC)}get(e){return(0,mn.D)(this.query.get(e)).pipe(v.iC)}}const _2=new c.OlP("angularfire2.enableFirestorePersistence"),y2=new c.OlP("angularfire2.firestore.persistenceSettings"),G6=new c.OlP("angularfire2.firestore.settings"),W6=new c.OlP("angularfire2.firestore.use-emulator");function v2(n,e=(t=>t)){return{query:e(n),ref:n}}let b2=(()=>{class n{constructor(t,r,i,s,u,h,p,y,C,D,R,L,j,ie,Ae,tt,dt){this.schedulers=p;const At=(0,I.on)(t,h,r),_t=C;D&&MR(At,h,R,j,ie,Ae,L,tt),[this.firestore,this.persistenceEnabled$]=(0,I.cc)(`${At.name}.firestore`,"AngularFirestore",At.name,()=>{const In=h.runOutsideAngular(()=>At.firestore());if(s&&In.settings(s),_t&&In.useEmulator(..._t),i&&!Xa(u)){const Or=()=>{try{return(0,mn.D)(In.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(ii){return"undefined"!=typeof console&&console.warn(ii),mt(!1)}};return[In,h.runOutsideAngular(Or)]}return[In,mt(!1)]},[s,_t,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=v2(i,r),h=this.schedulers.ngZone.run(()=>s);return new g2(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new q6(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new m2(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(I.Dh),c.LFG(I.xv,8),c.LFG(_2,8),c.LFG(G6,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(v.HU),c.LFG(y2,8),c.LFG(W6,8),c.LFG(Dp,8),c.LFG(CR,8),c.LFG(IR,8),c.LFG(TR,8),c.LFG(DR,8),c.LFG(SR,8),c.LFG(AR,8),c.LFG(Xb,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Z6=(()=>{class n{constructor(){d2.Z.registerVersion("angularfire",v.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:_2,useValue:!0},{provide:y2,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[b2]}),n})(),PT=(()=>{class n{constructor(t,r,i){this.firestore=t,this.Auth=r,this.router=i,this.postsCollection=this.firestore.collection("Posts",s=>s.orderBy("title","asc")),this.posts=this.postsCollection.snapshotChanges().pipe((0,ot.U)(s=>s.map(u=>{const h=u.payload.doc.data();return h.id=u.payload.doc.id,h})))}getProducts(){throw new Error("Method not implemented.")}getPosts(){return this.posts}createPost(t){this.postsCollection.add(t)}deletePost(t){this.documentRefernce=this.firestore.doc("Posts/"+t.id),this.documentRefernce.delete()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(b2),c.LFG(Dp),c.LFG(jr))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),OR=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-footer"]],decls:39,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-4","col-sm-6","col-xs-12"],[1,"logo",2,"color","white","font-size","60px"],[1,"menu"],["href","#"],[1,"address"],["aria-hidden","true",1,"fa","fa-phone"],["aria-hidden","true",1,"fa","fa-map-marker"],["aria-hidden","true",1,"fa","fa-envelope"]],template:function(t,r){1&t&&(c.TgZ(0,"footer"),c.TgZ(1,"div",0),c.TgZ(2,"div",1),c.TgZ(3,"div",2),c.TgZ(4,"h1"),c.TgZ(5,"span",3),c._uU(6,"Textile"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",2),c.TgZ(8,"ul",4),c.TgZ(9,"span"),c._uU(10,"Menu"),c.qZA(),c.TgZ(11,"li"),c.TgZ(12,"a",5),c._uU(13,"Home"),c.qZA(),c.qZA(),c.TgZ(14,"li"),c.TgZ(15,"a",5),c._uU(16,"About"),c.qZA(),c.qZA(),c.TgZ(17,"li"),c.TgZ(18,"a",5),c._uU(19,"Blog"),c.qZA(),c.qZA(),c.TgZ(20,"li"),c.TgZ(21,"a",5),c._uU(22,"Gallery"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"div",2),c.TgZ(24,"ul",6),c.TgZ(25,"span"),c._uU(26,"Contact"),c.qZA(),c.TgZ(27,"li"),c._UZ(28,"i",7),c.TgZ(29,"a",5),c._uU(30,"Phone"),c.qZA(),c.qZA(),c.TgZ(31,"li"),c._UZ(32,"i",8),c.TgZ(33,"a",5),c._uU(34,"Adress"),c.qZA(),c.qZA(),c.TgZ(35,"li"),c._UZ(36,"i",9),c.TgZ(37,"a",5),c._uU(38,"Email"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA())},styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;height:100px}footer[_ngcontent-%COMP%]{background-image:url(/assets/img/footerImg.jpg);padding:30px 0 0;margin-bottom:0}.logo[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-size:30px}.address[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .menu[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff;font-weight:700;border-bottom:1px solid #c7c7c7;padding:10px 0;display:block;text-transform:uppercase;font-size:16px;letter-spacing:3px}.address[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;letter-spacing:3px;text-decoration:none;font-size:14px}.address[_ngcontent-%COMP%]   li[_ngcontent-%COMP%], .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:20px 0;list-style:none}.address[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#da3e44;transition:all 1s ease-in-out;-webkit-transition:all 1s ease-in-out;-moz-transition:all 1s ease-in-out;-o-transition:all 1s ease-in-out}.address[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{color:#da3e44;margin-right:10px;font-size:18px}h1[_ngcontent-%COMP%]{font-family:Dancing Script,cursive;font-size:70px}img[_ngcontent-%COMP%]{opacity:.2}"]}),n})();const K6=function(n,e,t,r){return["/produdDetail",n,e,t,r]};function Y6(n,e){if(1&n){const t=c.EpF();c.ynx(0),c.TgZ(1,"div",3),c.TgZ(2,"a",4),c._UZ(3,"img",5),c.qZA(),c.TgZ(4,"h2",6),c._uU(5),c.qZA(),c.TgZ(6,"p",7),c._uU(7),c.qZA(),c.TgZ(8,"p"),c.TgZ(9,"strong"),c._uU(10,"Price:"),c.qZA(),c._uU(11),c.ALo(12,"currency"),c.qZA(),c.TgZ(13,"button",8),c.NdJ("click",function(){const s=c.CHM(t).$implicit;return c.oxw().addProduct(s)}),c._uU(14," Add to cart "),c.qZA(),c.qZA(),c.BQk()}if(2&n){const t=e.$implicit;c.xp6(2),c.Q6J("routerLink",c.l5B(8,K6,t.title,t.des,t.img,t.price)),c.xp6(1),c.s9C("src",t.img,c.LSH),c.xp6(2),c.Oqu(t.title),c.xp6(2),c.Oqu(t.des),c.xp6(4),c.Oqu(c.xi3(12,5,t.price,"INR"))}}let w2=(()=>{class n{constructor(t){this.cartService=t,this.datalist=[],this.data=[{id:1,img:"assets/img/cartImg1.webp",title:"Togkart 250 TC Cotton Double Floral Bedsheet  (Pack of 1, Multicolour1)",des:"Pack of 1, Multicolor 3",price:22},{id:2,img:"assets/img/cartImg2.webp",title:"Togkart 250 TC Cotton Double Floral Bedsheet  (Pack of 1, Multicolour1)",des:"Pack of 1, Multicolor 3",price:20},{id:3,img:"assets/img/cartImg3.webp",title:"Togkart 250 TC Cotton Double Floral Bedsheet  (Pack of 1, Multicolour1)",des:"Pack of 1, Multicolor 3",price:19},{id:4,img:"assets/img/cartImg4.webp",title:"Togkart 250 TC Cotton Double Floral Bedsheet  (Pack of 1, Multicolour1)",des:"Pack of 1, Multicolor 3",price:50},{id:5,img:"assets/img/cartImg5.webp",title:"Togkart 250 TC Cotton Double Floral Bedsheet  (Pack of 1, Multicolour1)",des:"Pack of 1, Multicolor 3",price:60},{id:6,img:"assets/img/cartImg6.webp",title:"Togkart 250 TC Cotton Double Floral Bedsheet  (Pack of 1, Multicolour1)",des:"Pack of 1, Multicolor 3",price:60},{id:7,img:"assets/img/cartImg7.webp",title:"Togkart 250 TC Cotton Double Floral Bedsheet  (Pack of 1, Multicolour1)",des:"Pack of 1, Multicolor 3",price:60},{id:8,img:"assets/img/cartImg8.webp",title:"Togkart 250 TC Cotton Double Floral Bedsheet  (Pack of 1, Multicolour1)",des:"Pack of 1, Multicolor 3",price:60},{id:9,img:"assets/img/cartImg9.webp",title:"Togkart 250 TC Cotton Double Floral Bedsheet  (Pack of 1, Multicolour1)",des:"Pack of 1, Multicolor 3",price:60}]}ngOnInit(){this.data.forEach(t=>{Object.assign(t,{quantity:1,total:t.price})})}getproduct(){this.cartService.getPosts().subscribe(t=>{this.datalist=t})}addProduct(t){const r={img:t.img,title:t.title,des:t.des,price:t.price};this.cartService.createPost(r),console.log(r)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(PT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-card"]],decls:4,vars:1,consts:[[1,"container"],[1,"row"],[4,"ngFor","ngForOf"],[1,"card","col-md-3"],[1,"thumb",3,"routerLink"],["alt","Card image cap",1,"card-img-top",3,"src"],[1,"card-title",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis","max-width","100ch"],[1,"card-text",2,"white-space","nowrap","overflow","hidden","text-overflow","ellipsis","max-width","100ch"],[1,"btn","btn-secondary",3,"click"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.YNc(2,Y6,15,13,"ng-container",2),c.qZA(),c.qZA(),c._UZ(3,"app-footer")),2&t&&(c.xp6(2),c.Q6J("ngForOf",r.data))},directives:[Vn,Kf,OR],pipes:[Ga],styles:[".btn[_ngcontent-%COMP%]{color:#fff;background-color:#6c757d;border-color:#6c757d;height:31px;width:100%;text-align:center}.card[_ngcontent-%COMP%]{padding:20px;margin:20px}.container[_ngcontent-%COMP%]{margin-left:15%}img[_ngcontent-%COMP%]:hover{transform:scale(1.2)}"]}),n})();var Jb=F(4929);class NT{constructor(e){return e}}const RR=new c.OlP("angularfire2.auth-instances");function tZ(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new NT(r)}}const nZ={provide:class J6{constructor(){return(0,v.vb)("auth")}},deps:[[new c.FiY,RR]]},rZ={provide:NT,useFactory:function eZ(n,e){const t=(0,v.JM)("auth",n,e);return t&&new NT(t)},deps:[[new c.FiY,RR],Kb]};let iZ=(()=>{class n{constructor(){(0,Tp.KN)("angularfire",v.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[rZ,nZ]}),n})();function sZ(n,...e){return{ngModule:iZ,providers:[{provide:RR,useFactory:tZ(n),multi:!0,deps:[c.R0b,c.zs3,v.HU,jB,[new c.FiY,Xb],...e]}]}}const oZ=(0,v.u3)(Jb.n,!0);let PR=(()=>{class n{constructor(t,r){this.auth=t,this.router=r,this.currentUser$=function Q6(n){return new On.y(function(e){return{unsubscribe:(0,Jb.t)(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e))}})}(this.auth)}login(t,r){return(0,mn.D)((0,Jb.a5)(this.auth,t,r))}signUp(t,r,i){return(0,mn.D)((0,Jb.a4)(this.auth,r,i)).pipe(Mr(({user:s})=>(0,Jb.ae)(s,{displayName:t})))}logout(){return(0,mn.D)(this.auth.signOut())}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(NT),c.LFG(jr))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var C2=F(4408);let NR,aZ=1;const FT={};function I2(n){return n in FT&&(delete FT[n],!0)}const lZ={setImmediate(n){const e=aZ++;return FT[e]=!0,NR||(NR=Promise.resolve()),NR.then(()=>I2(e)&&n()),e},clearImmediate(n){I2(n)}},{setImmediate:cZ,clearImmediate:uZ}=lZ,LT={setImmediate(...n){const{delegate:e}=LT;return((null==e?void 0:e.setImmediate)||cZ)(...n)},clearImmediate(n){const{delegate:e}=LT;return((null==e?void 0:e.clearImmediate)||uZ)(n)},delegate:void 0};var T2=F(7565);const FR=new class hZ extends T2.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class dZ extends C2.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=LT.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(LT.clearImmediate(t),e._scheduled=void 0)}});function D2(n,e){return e?t=>Et(e.pipe((0,_o.q)(1),function fZ(){return(0,_r.e)((n,e)=>{n.subscribe(new nn.Q(e,nf.Z))})}()),t.pipe(D2(n))):(0,Br.z)((t,r)=>n(t,r).pipe((0,_o.q)(1),function pZ(n){return(0,ot.U)(()=>n)}(t)))}var gZ=F(3532);function S2(n=0,e,t=tu.P){let r=-1;return null!=e&&((0,gZ.K)(e)?t=e:r=e),new On.y(i=>{let s=function mZ(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let u=0;return t.schedule(function(){i.closed||(i.next(u++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function A2(n,e=tu.z){const t=S2(n,e);return D2(()=>t)}class LR{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class _Z extends LR{constructor(e,t,r,i){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=i}}class M2 extends LR{constructor(e,t,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class yZ extends LR{constructor(e){super(),this.element=e instanceof c.SBq?e.nativeElement:e}}class bZ extends class vZ{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof _Z?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof M2?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof yZ?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(e,t,r,i,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=i,this.attachDomPortal=u=>{const h=u.element,p=this._document.createComment("dom-portal");h.parentNode.insertBefore(p,h),this.outletElement.appendChild(h),this._attachedPortal=u,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(h,p)})},this._document=s}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let i;return e.viewContainerRef?(i=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector),this.setDisposeFn(()=>i.destroy())):(i=r.create(e.injector||this._defaultInjector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(i)),this._attachedPortal=e,i}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context);return r.rootNodes.forEach(i=>this.outletElement.appendChild(i)),r.detectChanges(),this.setDisposeFn(()=>{let i=t.indexOf(r);-1!==i&&t.remove(i)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let wZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const e0={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=e0;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const i=e(s=>{t=void 0,n(s)});return new wa.w0(()=>null==t?void 0:t(i))},requestAnimationFrame(...n){const{delegate:e}=e0;return((null==e?void 0:e.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=e0;return((null==e?void 0:e.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};new class CZ extends T2.v{flush(e){this._active=!0,this._scheduled=void 0;const{actions:t}=this;let r,i=-1;e=e||t.shift();const s=t.length;do{if(r=e.execute(e.state,e.delay))break}while(++i<s&&(e=t.shift()));if(this._active=!1,r){for(;++i<s&&(e=t.shift());)e.unsubscribe();throw r}}}(class EZ extends C2.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=e0.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){if(null!=r&&r>0||null==r&&this.delay>0)return super.recycleAsyncId(e,t,r);0===e.actions.length&&(e0.cancelAnimationFrame(t),e._scheduled=void 0)}});function x2(n,e=tu.P){return function TZ(n){return(0,_r.e)((e,t)=>{let r=!1,i=null,s=null,u=!1;const h=()=>{if(null==s||s.unsubscribe(),s=null,r){r=!1;const y=i;i=null,t.next(y)}u&&t.complete()},p=()=>{s=null,u&&t.complete()};e.subscribe(new nn.Q(t,y=>{r=!0,i=y,s||(0,Tr.Xf)(n(y)).subscribe(s=new nn.Q(t,h,p))},()=>{u=!0,(!r||!s||s.closed)&&t.complete()}))})}(()=>S2(n,e))}let SZ=(()=>{class n{constructor(t,r,i){this._ngZone=t,this._platform=r,this._scrolled=new Gt.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=i}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new On.y(r=>{this._globalSubscription||this._addGlobalListener();const i=t>0?this._scrolled.pipe(x2(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{i.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):mt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const i=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Ar(s=>!s||i.indexOf(s)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((i,s)=>{this._scrollableContainsElement(s,t)&&r.push(s)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let i=lr(r),s=t.getElementRef().nativeElement;do{if(i==s)return!0}while(i=i.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Dl(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b),c.LFG(Vr),c.LFG(ce,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),k2=(()=>{class n{constructor(t,r,i){this._platform=t,this._change=new Gt.x,this._changeListener=s=>{this._change.next(s)},this._document=i,r.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:i}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+i,right:t.left+r,height:i,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),i=t.documentElement,s=i.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||r.scrollY||i.scrollTop||0,left:-s.left||t.body.scrollLeft||r.scrollX||i.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(x2(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Vr),c.LFG(c.R0b),c.LFG(ce,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),VR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),O2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Jh,VR],Jh,VR]}),n})();const R2=us();class MZ{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=jn(-this._previousScrollPosition.left),e.style.top=jn(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,i=this._document.body.style,s=r.scrollBehavior||"",u=i.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),R2&&(r.scrollBehavior=i.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),R2&&(r.scrollBehavior=s,i.scrollBehavior=u)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class xZ{constructor(e,t,r,i){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class P2{enable(){}disable(){}attach(){}}function UR(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function N2(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class kZ{constructor(e,t,r,i){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=i,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:i}=this._viewportRuler.getViewportSize();UR(t,[{width:r,height:i,bottom:i,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let OZ=(()=>{class n{constructor(t,r,i,s){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=i,this.noop=()=>new P2,this.close=u=>new xZ(this._scrollDispatcher,this._ngZone,this._viewportRuler,u),this.block=()=>new MZ(this._viewportRuler,this._document),this.reposition=u=>new kZ(this._scrollDispatcher,this._viewportRuler,this._ngZone,u),this._document=s}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(SZ),c.LFG(k2),c.LFG(c.R0b),c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class F2{constructor(e){if(this.scrollStrategy=new P2,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class RZ{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}class PZ{constructor(e,t,r,i,s,u,h,p,y){this._portalOutlet=e,this._host=t,this._pane=r,this._config=i,this._ngZone=s,this._keyboardDispatcher=u,this._document=h,this._location=p,this._outsideClickDispatcher=y,this._backdropElement=null,this._backdropClick=new Gt.x,this._attachments=new Gt.x,this._detachments=new Gt.x,this._locationChanges=wa.w0.EMPTY,this._backdropClickHandler=C=>this._backdropClick.next(C),this._backdropTransitionendHandler=C=>{this._disposeBackdrop(C.target)},this._keydownEvents=new Gt.x,this._outsidePointerEvents=new Gt.x,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){let t=this._portalOutlet.attach(e);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,_o.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){var e;const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(e=this._host)||void 0===e||e.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=Object.assign(Object.assign({},this._config),e),this._updateElementSize()}setDirection(e){this._config=Object.assign(Object.assign({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=jn(this._config.width),e.height=jn(this._config.height),e.minWidth=jn(this._config.minWidth),e.minHeight=jn(this._config.minHeight),e.maxWidth=jn(this._config.maxWidth),e.maxHeight=jn(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;!e||(e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{console.log("fallback"),this._disposeBackdrop(e)},500)))}_toggleClasses(e,t,r){const i=Bc(t||[]).filter(s=>!!s);i.length&&(r?e.classList.add(...i):e.classList.remove(...i))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(dc((0,Tl.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let L2=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){var t;null===(t=this._containerElement)||void 0===t||t.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||so()){const i=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<i.length;s++)i[s].remove()}const r=this._document.createElement("div");r.classList.add(t),so()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce),c.LFG(Vr))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const V2="cdk-overlay-connected-position-bounding-box",NZ=/([A-Za-z%]+)$/;class FZ{constructor(e,t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Gt.x,this._resizeSubscription=wa.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}get positions(){return this._preferredPositions}attach(e){this._validatePositions(),e.hostElement.classList.add(V2),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,i=this._containerRect,s=[];let u;for(let h of this._preferredPositions){let p=this._getOriginPoint(e,i,h),y=this._getOverlayPoint(p,t,h),C=this._getOverlayFit(y,t,r,h);if(C.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(h,p);this._canFitWithFlexibleDimensions(C,y,r)?s.push({position:h,origin:p,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(p,h)}):(!u||u.overlayFit.visibleArea<C.visibleArea)&&(u={overlayFit:C,overlayPoint:y,originPoint:p,position:h,overlayRect:t})}if(s.length){let h=null,p=-1;for(const y of s){const C=y.boundingBoxRect.width*y.boundingBoxRect.height*(y.position.weight||1);C>p&&(p=C,h=y)}return this._isPushed=!1,void this._applyPosition(h.position,h.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Sp(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(V2),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let i,s;if("center"==r.originX)i=e.left+e.width/2;else{const u=this._isRtl()?e.right:e.left,h=this._isRtl()?e.left:e.right;i="start"==r.originX?u:h}return t.left<0&&(i-=t.left),s="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:i,y:s}}_getOverlayPoint(e,t,r){let i,s;return i="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+i,y:e.y+s}}_getOverlayFit(e,t,r,i){const s=B2(t);let{x:u,y:h}=e,p=this._getOffset(i,"x"),y=this._getOffset(i,"y");p&&(u+=p),y&&(h+=y);let R=0-h,L=h+s.height-r.height,j=this._subtractOverflows(s.width,0-u,u+s.width-r.width),ie=this._subtractOverflows(s.height,R,L),Ae=j*ie;return{visibleArea:Ae,isCompletelyWithinViewport:s.width*s.height===Ae,fitsInViewportVertically:ie===s.height,fitsInViewportHorizontally:j==s.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const i=r.bottom-t.y,s=r.right-t.x,u=U2(this._overlayRef.getConfig().minHeight),h=U2(this._overlayRef.getConfig().minWidth),y=e.fitsInViewportHorizontally||null!=h&&h<=s;return(e.fitsInViewportVertically||null!=u&&u<=i)&&y}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const i=B2(t),s=this._viewportRect,u=Math.max(e.x+i.width-s.width,0),h=Math.max(e.y+i.height-s.height,0),p=Math.max(s.top-r.top-e.y,0),y=Math.max(s.left-r.left-e.x,0);let C=0,D=0;return C=i.width<=s.width?y||-u:e.x<this._viewportMargin?s.left-r.left-e.x:0,D=i.height<=s.height?p||-h:e.y<this._viewportMargin?s.top-r.top-e.y:0,this._previousPushAmount={x:C,y:D},{x:e.x+C,y:e.y+D}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const r=this._getScrollVisibility(),i=new RZ(e,r);this._positionChanges.next(i)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,i=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${r} ${i}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,i=this._isRtl();let s,u,h,C,D,R;if("top"===t.overlayY)u=e.y,s=r.height-u+this._viewportMargin;else if("bottom"===t.overlayY)h=r.height-e.y+2*this._viewportMargin,s=r.height-h+this._viewportMargin;else{const L=Math.min(r.bottom-e.y+r.top,e.y),j=this._lastBoundingBoxSize.height;s=2*L,u=e.y-L,s>j&&!this._isInitialRender&&!this._growAfterOpen&&(u=e.y-j/2)}if("end"===t.overlayX&&!i||"start"===t.overlayX&&i)R=r.width-e.x+this._viewportMargin,C=e.x-this._viewportMargin;else if("start"===t.overlayX&&!i||"end"===t.overlayX&&i)D=e.x,C=r.right-e.x;else{const L=Math.min(r.right-e.x+r.left,e.x),j=this._lastBoundingBoxSize.width;C=2*L,D=e.x-L,C>j&&!this._isInitialRender&&!this._growAfterOpen&&(D=e.x-j/2)}return{top:u,left:D,bottom:h,right:R,width:C,height:s}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,u=this._overlayRef.getConfig().maxWidth;i.height=jn(r.height),i.top=jn(r.top),i.bottom=jn(r.bottom),i.width=jn(r.width),i.left=jn(r.left),i.right=jn(r.right),i.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",i.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(i.maxHeight=jn(s)),u&&(i.maxWidth=jn(u))}this._lastBoundingBoxSize=r,Sp(this._boundingBox.style,i)}_resetBoundingBoxStyles(){Sp(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Sp(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},i=this._hasExactPosition(),s=this._hasFlexibleDimensions,u=this._overlayRef.getConfig();if(i){const C=this._viewportRuler.getViewportScrollPosition();Sp(r,this._getExactOverlayY(t,e,C)),Sp(r,this._getExactOverlayX(t,e,C))}else r.position="static";let h="",p=this._getOffset(t,"x"),y=this._getOffset(t,"y");p&&(h+=`translateX(${p}px) `),y&&(h+=`translateY(${y}px)`),r.transform=h.trim(),u.maxHeight&&(i?r.maxHeight=jn(u.maxHeight):s&&(r.maxHeight="")),u.maxWidth&&(i?r.maxWidth=jn(u.maxWidth):s&&(r.maxWidth="")),Sp(this._pane.style,r)}_getExactOverlayY(e,t,r){let i={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),"bottom"===e.overlayY?i.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":i.top=jn(s.y),i}_getExactOverlayX(e,t,r){let u,i={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,r)),u=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===u?i.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":i.left=jn(s.x),i}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(i=>i.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:N2(e,r),isOriginOutsideView:UR(e,r),isOverlayClipped:N2(t,r),isOverlayOutsideView:UR(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,i)=>r-Math.max(i,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Bc(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof c.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Sp(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function U2(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(NZ);return t&&"px"!==t?null:parseFloat(e)}return n||null}function B2(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const j2="cdk-global-overlay-wrapper";class LZ{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(j2),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._rightOffset="",this._leftOffset=e,this._justifyContent="flex-start",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._leftOffset="",this._rightOffset=e,this._justifyContent="flex-end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._justifyContent="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:i,height:s,maxWidth:u,maxHeight:h}=r,p=!("100%"!==i&&"100vw"!==i||u&&"100%"!==u&&"100vw"!==u),y=!("100%"!==s&&"100vh"!==s||h&&"100%"!==h&&"100vh"!==h);e.position=this._cssPosition,e.marginLeft=p?"0":this._leftOffset,e.marginTop=y?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=this._rightOffset,p?t.justifyContent="flex-start":"center"===this._justifyContent?t.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?t.justifyContent="flex-end":"flex-end"===this._justifyContent&&(t.justifyContent="flex-start"):t.justifyContent=this._justifyContent,t.alignItems=y?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(j2),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let VZ=(()=>{class n{constructor(t,r,i,s){this._viewportRuler=t,this._document=r,this._platform=i,this._overlayContainer=s}global(){return new LZ}flexibleConnectedTo(t){return new FZ(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(k2),c.LFG(ce),c.LFG(Vr),c.LFG(L2))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),H2=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),UZ=(()=>{class n extends H2{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=i=>{const s=this._attachedOverlays;for(let u=s.length-1;u>-1;u--)if(s[u]._keydownEvents.observers.length>0){const h=s[u]._keydownEvents;this._ngZone?this._ngZone.run(()=>h.next(i)):h.next(i);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BZ=(()=>{class n extends H2{constructor(t,r,i){super(t),this._platform=r,this._ngZone=i,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=As(s)},this._clickListener=s=>{const u=As(s),h="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:u;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let y=p.length-1;y>-1;y--){const C=p[y];if(C._outsidePointerEvents.observers.length<1||!C.hasAttached())continue;if(C.overlayElement.contains(u)||C.overlayElement.contains(h))break;const D=C._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>D.next(s)):D.next(s)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ce),c.LFG(Vr),c.LFG(c.R0b,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jZ=0,VT=(()=>{class n{constructor(t,r,i,s,u,h,p,y,C,D,R){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=i,this._positionBuilder=s,this._keyboardDispatcher=u,this._injector=h,this._ngZone=p,this._document=y,this._directionality=C,this._location=D,this._outsideClickDispatcher=R}create(t){const r=this._createHostElement(),i=this._createPaneElement(r),s=this._createPortalOutlet(i),u=new F2(t);return u.direction=u.direction||this._directionality.value,new PZ(s,r,i,u,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+jZ++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(c.z2F)),new bZ(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(OZ),c.LFG(L2),c.LFG(c._Vd),c.LFG(VZ),c.LFG(UZ),c.LFG(c.zs3),c.LFG(c.R0b),c.LFG(ce),c.LFG(m_),c.LFG(qe),c.LFG(BZ))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const zZ={provide:new c.OlP("cdk-connected-overlay-scroll-strategy"),deps:[VT],useFactory:function $Z(n){return()=>n.scrollStrategies.reposition()}};let qZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[VT,zZ],imports:[[Jh,wZ,O2],O2]}),n})();const GZ=["mat-menu-item",""];function WZ(n,e){1&n&&(c.O4$(),c.TgZ(0,"svg",2),c._UZ(1,"polygon",3),c.qZA())}const $2=["*"];function ZZ(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"div",0),c.NdJ("keydown",function(i){return c.CHM(t),c.oxw()._handleKeydown(i)})("click",function(){return c.CHM(t),c.oxw().closed.emit("click")})("@transformMenu.start",function(i){return c.CHM(t),c.oxw()._onAnimationStart(i)})("@transformMenu.done",function(i){return c.CHM(t),c.oxw()._onAnimationDone(i)}),c.TgZ(1,"div",1),c.Hsn(2),c.qZA(),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),c.uIk("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const UT={transformMenu:V_("transformMenu",[B_("void",yl({opacity:0,transform:"scale(0.8)"})),j_("void => enter",_d("120ms cubic-bezier(0, 0, 0.2, 1)",yl({opacity:1,transform:"scale(1)"}))),j_("* => void",_d("100ms 25ms linear",yl({opacity:0})))]),fadeInItems:V_("fadeInItems",[B_("showing",yl({opacity:1})),j_("void => *",[yl({opacity:0}),_d("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},KZ=new c.OlP("MatMenuContent"),BR=new c.OlP("MAT_MENU_PANEL"),YZ=Uy(mo(class{}));let BT=(()=>{class n extends YZ{constructor(t,r,i,s,u){var h;super(),this._elementRef=t,this._document=r,this._focusMonitor=i,this._parentMenu=s,this._changeDetectorRef=u,this.role="menuitem",this._hovered=new Gt.x,this._focused=new Gt.x,this._highlighted=!1,this._triggersSubmenu=!1,null===(h=null==s?void 0:s.addItem)||void 0===h||h.call(s,this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var t;const r=this._elementRef.nativeElement.cloneNode(!0),i=r.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<i.length;s++)i[s].remove();return(null===(t=r.textContent)||void 0===t?void 0:t.trim())||""}_setHighlighted(t){var r;this._highlighted=t,null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(ce),c.Y36(Sw),c.Y36(BR,8),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r._checkDisabled(s)})("mouseenter",function(){return r._handleMouseEnter()}),2&t&&(c.uIk("role",r.role)("tabindex",r._getTabIndex())("aria-disabled",r.disabled.toString())("disabled",r.disabled||null),c.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",r._highlighted)("mat-menu-item-submenu-trigger",r._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[c.qOj],attrs:GZ,ngContentSelectors:$2,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,r){1&t&&(c.F$t(),c.Hsn(0),c._UZ(1,"div",0),c.YNc(2,WZ,2,0,"svg",1)),2&t&&(c.xp6(1),c.Q6J("matRippleDisabled",r.disableRipple||r.disabled)("matRippleTrigger",r._getHostElement()),c.xp6(1),c.Q6J("ngIf",r._triggersSubmenu))},directives:[Wy,Fn],encapsulation:2,changeDetection:0}),n})();const z2=new c.OlP("mat-menu-default-options",{providedIn:"root",factory:function QZ(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let XZ=0,t0=(()=>{class n{constructor(t,r,i,s){this._elementRef=t,this._ngZone=r,this._defaultOptions=i,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new c.n_E,this._tabSubscription=wa.w0.EMPTY,this._classList={},this._panelAnimationState="void",this._animationDone=new Gt.x,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new c.vpe,this.close=this.closed,this.panelId="mat-menu-panel-"+XZ++}get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=bi(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=bi(t)}set panelClass(t){const r=this._previousPanelClass;r&&r.length&&r.split(" ").forEach(i=>{this._classList[i]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(i=>{this._classList[i]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new k_(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._tabSubscription=this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Sa(this._directDescendantItems),Mr(t=>(0,Tl.T)(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{var r;const i=this._keyManager;if("enter"===this._panelAnimationState&&(null===(r=i.activeItem)||void 0===r?void 0:r._hasFocus())){const s=t.toArray(),u=Math.max(0,Math.min(s.length-1,i.activeItemIndex||0));s[u]&&!s[u].disabled?i.setActiveItem(u):i.setNextItemActive()}})}ngOnDestroy(){this._directDescendantItems.destroy(),this._tabSubscription.unsubscribe(),this.closed.complete()}_hovered(){return this._directDescendantItems.changes.pipe(Sa(this._directDescendantItems),Mr(r=>(0,Tl.T)(...r.map(i=>i._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,i=this._keyManager;switch(r){case 27:gg(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&i.setFocusOrigin("keyboard"),void i.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this.lazyContent?this._ngZone.onStable.pipe((0,_o.q)(1)).subscribe(()=>this._focusFirstItem(t)):this._focusFirstItem(t)}_focusFirstItem(t){const r=this._keyManager;if(r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&this._directDescendantItems.length){let i=this._directDescendantItems.first._getHostElement().parentElement;for(;i;){if("menu"===i.getAttribute("role")){i.focus();break}i=i.parentElement}}}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const r=Math.min(this._baseElevation+t,24),i=`${this._elevationPrefix}${r}`,s=Object.keys(this._classList).find(u=>u.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[i]=!0,this._previousElevation=i)}setPositionClasses(t=this.xPosition,r=this.yPosition){var i;const s=this._classList;s["mat-menu-before"]="before"===t,s["mat-menu-after"]="after"===t,s["mat-menu-above"]="above"===r,s["mat-menu-below"]="below"===r,null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(Sa(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(z2),c.Y36(c.sBO))},n.\u0275dir=c.lG2({type:n,contentQueries:function(t,r,i){if(1&t&&(c.Suo(i,KZ,5),c.Suo(i,BT,5),c.Suo(i,BT,4)),2&t){let s;c.iGM(s=c.CRH())&&(r.lazyContent=s.first),c.iGM(s=c.CRH())&&(r._allItems=s),c.iGM(s=c.CRH())&&(r.items=s)}},viewQuery:function(t,r){if(1&t&&c.Gf(c.Rgc,5),2&t){let i;c.iGM(i=c.CRH())&&(r.templateRef=i.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),n})(),JZ=(()=>{class n extends t0{constructor(t,r,i,s){super(t,r,i,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=4}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.SBq),c.Y36(c.R0b),c.Y36(z2),c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,r){2&t&&c.uIk("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[c._Bn([{provide:BR,useExisting:n}]),c.qOj],ngContentSelectors:$2,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-menu-panel",3,"id","ngClass","keydown","click"],[1,"mat-menu-content"]],template:function(t,r){1&t&&(c.F$t(),c.YNc(0,ZZ,3,6,"ng-template"))},directives:[is],styles:["mat-menu{display:none}.mat-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;max-height:calc(100vh - 48px);border-radius:4px;outline:0;min-height:64px}.mat-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-menu-panel{outline:solid 1px}.mat-menu-content:not(:empty){padding-top:8px;padding-bottom:8px}.mat-menu-item{-webkit-user-select:none;-moz-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative}.mat-menu-item::-moz-focus-inner{border:0}.mat-menu-item[disabled]{cursor:default}[dir=rtl] .mat-menu-item{text-align:right}.mat-menu-item .mat-icon{margin-right:16px;vertical-align:middle}.mat-menu-item .mat-icon svg{vertical-align:top}[dir=rtl] .mat-menu-item .mat-icon{margin-left:16px;margin-right:0}.mat-menu-item[disabled]{pointer-events:none}.cdk-high-contrast-active .mat-menu-item{margin-top:1px}.cdk-high-contrast-active .mat-menu-item.cdk-program-focused,.cdk-high-contrast-active .mat-menu-item.cdk-keyboard-focused,.cdk-high-contrast-active .mat-menu-item-highlighted{outline:dotted 1px}.mat-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.mat-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-menu-submenu-icon{fill:CanvasText}button.mat-menu-item{width:100%}.mat-menu-item .mat-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}\n"],encapsulation:2,data:{animation:[UT.transformMenu,UT.fadeInItems]},changeDetection:0}),n})();const q2=new c.OlP("mat-menu-scroll-strategy"),t4={provide:q2,deps:[VT],useFactory:function e4(n){return()=>n.scrollStrategies.reposition()}},W2=Ds({passive:!0});let n4=(()=>{class n{constructor(t,r,i,s,u,h,p,y,C){this._overlay=t,this._element=r,this._viewContainerRef=i,this._menuItemInstance=h,this._dir=p,this._focusMonitor=y,this._ngZone=C,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=wa.w0.EMPTY,this._hoverSubscription=wa.w0.EMPTY,this._menuCloseSubscription=wa.w0.EMPTY,this._handleTouchStart=D=>{P_(D)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new c.vpe,this.onMenuOpen=this.menuOpened,this.menuClosed=new c.vpe,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=u instanceof t0?u:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,W2),h&&(h._triggersSubmenu=this.triggersSubmenu())}get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})))}ngAfterContentInit(){this._checkMenu(),this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,W2),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!(!this._menuItemInstance||!this._parentMaterialMenu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){if(this._menuOpen)return;this._checkMenu();const t=this._createOverlay(),r=t.getConfig(),i=r.positionStrategy;this._setPosition(i),r.hasBackdrop=null==this.menu.hasBackdrop?!this.triggersSubmenu():this.menu.hasBackdrop,t.attach(this._getPortal()),this.menu.lazyContent&&this.menu.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(),this.menu instanceof t0&&(this.menu._startAnimation(),this.menu._directDescendantItems.changes.pipe(dc(this.menu.close)).subscribe(()=>{i.withLockedPosition(!1).reapplyLastPosition(),i.withLockedPosition(!0)}))}closeMenu(){this.menu.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){var t;null===(t=this._overlayRef)||void 0===t||t.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof t0?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe(Ar(i=>"void"===i.toState),(0,_o.q)(1),dc(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r.lazyContent&&r.lazyContent.detach())}_initMenu(){this.menu.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,this.menu.direction=this.dir,this._setMenuElevation(),this.menu.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(){if(this.menu.setElevation){let t=0,r=this.menu.parentMenu;for(;r;)t++,r=r.parentMenu;this.menu.setElevation(t)}}_setIsMenuOpen(t){this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t)}_checkMenu(){}_createOverlay(){if(!this._overlayRef){const t=this._getOverlayConfig();this._subscribeToPositions(t.positionStrategy),this._overlayRef=this._overlay.create(t),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(){return new F2({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:this.menu.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this.menu.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t){this.menu.setPositionClasses&&t.positionChanges.subscribe(r=>{const i="start"===r.connectionPair.overlayX?"after":"before",s="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>this.menu.setPositionClasses(i,s)):this.menu.setPositionClasses(i,s)})}_setPosition(t){let[r,i]="before"===this.menu.xPosition?["end","start"]:["start","end"],[s,u]="above"===this.menu.yPosition?["bottom","top"]:["top","bottom"],[h,p]=[s,u],[y,C]=[r,i],D=0;this.triggersSubmenu()?(C=r="before"===this.menu.xPosition?"start":"end",i=y="end"===r?"start":"end",D="bottom"===s?8:-8):this.menu.overlapTrigger||(h="top"===s?"bottom":"top",p="top"===u?"bottom":"top"),t.withPositions([{originX:r,originY:h,overlayX:y,overlayY:s,offsetY:D},{originX:i,originY:h,overlayX:C,overlayY:s,offsetY:D},{originX:r,originY:p,overlayX:y,overlayY:u,offsetY:-D},{originX:i,originY:p,overlayX:C,overlayY:u,offsetY:-D}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments(),i=this._parentMaterialMenu?this._parentMaterialMenu.closed:mt(),s=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Ar(u=>u!==this._menuItemInstance),Ar(()=>this._menuOpen)):mt();return(0,Tl.T)(t,i,s,r)}_handleMousedown(t){R_(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Ar(t=>t===this._menuItemInstance&&!t.disabled),A2(0,FR)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof t0&&this.menu._isAnimating?this.menu._animationDone.pipe((0,_o.q)(1),A2(0,FR),dc(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(){return(!this._portal||this._portal.templateRef!==this.menu.templateRef)&&(this._portal=new M2(this.menu.templateRef,this._viewContainerRef)),this._portal}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(VT),c.Y36(c.SBq),c.Y36(c.s_b),c.Y36(q2),c.Y36(BR,8),c.Y36(BT,10),c.Y36(m_,8),c.Y36(Sw),c.Y36(c.R0b))},n.\u0275dir=c.lG2({type:n,hostAttrs:["aria-haspopup","true"],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r._handleClick(s)})("mousedown",function(s){return r._handleMousedown(s)})("keydown",function(s){return r._handleKeydown(s)}),2&t&&c.uIk("aria-expanded",r.menuOpen||null)("aria-controls",r.menuOpen?r.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),n})(),r4=(()=>{class n extends n4{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-menu-trigger"],exportAs:["matMenuTrigger"],features:[c.qOj]}),n})(),i4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[t4],imports:[[Ya,Vs,DE,qZ],VR,Vs]}),n})();function s4(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"button",15),c.TgZ(2,"mat-icon"),c._uU(3,"account_cicle"),c.qZA(),c._uU(4),c.TgZ(5,"mat-icon"),c._uU(6,"expand_more"),c.qZA(),c.qZA(),c.BQk()),2&n){const t=e.ngIf;c.oxw();const r=c.MAs(19);c.xp6(1),c.Q6J("mat-menu-trigger-for",r),c.xp6(3),c.hij(" ",t.displayName," ")}}function o4(n,e){1&n&&(c.TgZ(0,"button",16),c.TgZ(1,"mat-icon"),c._uU(2,"login"),c.qZA(),c._uU(3," login "),c.qZA())}let n0=(()=>{class n{constructor(t,r,i,s){this.cartService=t,this.auth=r,this.authService=i,this.router=s,this.totalItem=0,this.user=""}ngOnInit(){this.cartService.getPosts().subscribe(t=>{this.totalItem=t.length,this.user=t.displayName,console.log("hello"+this.user)})}logout(){this.authService.logout().subscribe(()=>{this.router.navigate([""])})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(PT),c.Y36(Dp),c.Y36(PR),c.Y36(jr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-header"]],decls:22,vars:5,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","navbar-fixed-top"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],[1,"d-flex"],["routerLink","cart",1,"d-flex","btn"],[1,"fa-solid","fa-cart-plus","fa-2x",2,"font-size","30px"],[1,"badge","bg-danger",2,"font-size","10px"],[1,"bg-light"],[4,"ngIf","ngIfElse"],["loginButton",""],[1,"content"],["userMenu","matMenu"],["mat-menu-item","",3,"click"],["mat-button","",3,"mat-menu-trigger-for"],["mat-button","","routerLink","login"]],template:function(t,r){if(1&t&&(c.TgZ(0,"nav",0),c.TgZ(1,"div",1),c.TgZ(2,"a",2),c._uU(3,"Textiles"),c.qZA(),c.TgZ(4,"button",3),c._UZ(5,"span",4),c.qZA(),c.TgZ(6,"div",5),c.TgZ(7,"button",6),c._UZ(8,"i",7),c.TgZ(9,"div",8),c._uU(10),c.qZA(),c.qZA(),c.TgZ(11,"mat-toolbar",9),c.YNc(12,s4,7,2,"ng-container",10),c.ALo(13,"async"),c.YNc(14,o4,4,0,"ng-template",null,11,c.W1O),c.qZA(),c.TgZ(16,"div",12),c._UZ(17,"router-outlet"),c.qZA(),c.TgZ(18,"mat-menu",null,13),c.TgZ(20,"button",14),c.NdJ("click",function(){return r.logout()}),c._uU(21," Logout"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t){const i=c.MAs(15);c.xp6(10),c.Oqu(r.totalItem),c.xp6(2),c.Q6J("ngIf",c.lcZ(13,3,r.authService.currentUser$))("ngIfElse",i)}},directives:[Zf,iC,Fn,Ug,r4,nC,Gd,JZ,BT],pipes:[wh],styles:["a[_ngcontent-%COMP%]{color:gray}form[_ngcontent-%COMP%]{position:fixed;margin-left:60%}i[_ngcontent-%COMP%]{margin-top:5%}.navbar-brand[_ngcontent-%COMP%]{font-family:Dancing Script,cursive;font-size:50px}h4[_ngcontent-%COMP%]{font-family:Dancing Script,cursive;font-size:30px;color:#8a2be2}#slider[_ngcontent-%COMP%]   .carousel-item[_ngcontent-%COMP%]{height:100px}.carousel-caption[_ngcontent-%COMP%]{font-size:18px}.carousel-item[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:50%}.img[_ngcontent-%COMP%]{height:20%;width:20%;position:fixed}mat-toolbar[_ngcontent-%COMP%]{justify-content:space-between}"]}),n})();function a4(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"tr"),c.TgZ(1,"td"),c._uU(2),c.qZA(),c.TgZ(3,"td"),c._uU(4),c.qZA(),c.TgZ(5,"td"),c._UZ(6,"img",8),c.qZA(),c.TgZ(7,"td",9),c._uU(8),c.qZA(),c.TgZ(9,"td",10),c._uU(10),c.qZA(),c.TgZ(11,"td"),c.TgZ(12,"button",11),c.NdJ("click",function(){const s=c.CHM(t).$implicit;return c.oxw(2).inc(s)}),c._UZ(13,"i",12),c.qZA(),c.TgZ(14,"span"),c._uU(15),c.qZA(),c.TgZ(16,"button",13),c.NdJ("click",function(){const s=c.CHM(t).$implicit;return c.oxw(2).dec(s)}),c._UZ(17,"i",14),c.qZA(),c.qZA(),c.TgZ(18,"td",10),c._uU(19),c.qZA(),c.TgZ(20,"td"),c.TgZ(21,"button",15),c.NdJ("click",function(){const s=c.CHM(t).$implicit;return c.oxw(2).deletePost(s)}),c._UZ(22,"i",16),c.qZA(),c.qZA(),c.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=c.oxw(2);c.xp6(2),c.Oqu(r+1),c.xp6(2),c.Oqu(t.title),c.xp6(2),c.s9C("src",t.img,c.LSH),c.xp6(2),c.Oqu(t.des),c.xp6(2),c.Oqu(t.price),c.xp6(5),c.Oqu(t.quantity),c.xp6(4),c.Oqu(i.totalprice(t))}}function l4(n,e){if(1&n&&(c.ynx(0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"table",4),c.TgZ(5,"thead"),c.TgZ(6,"tr"),c.TgZ(7,"th"),c._uU(8,"Sr.No"),c.qZA(),c.TgZ(9,"th"),c._uU(10,"Product Name"),c.qZA(),c.TgZ(11,"th"),c._uU(12,"Product Image"),c.qZA(),c.TgZ(13,"th"),c._uU(14,"Description"),c.qZA(),c.TgZ(15,"th"),c._uU(16,"Price"),c.qZA(),c.TgZ(17,"th"),c._uU(18,"Quantity"),c.qZA(),c.TgZ(19,"th"),c._uU(20,"Total"),c.qZA(),c.TgZ(21,"th"),c._uU(22,"Action"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(23,"tbody"),c.YNc(24,a4,23,7,"tr",5),c.TgZ(25,"tr"),c._UZ(26,"td",6),c.TgZ(27,"td"),c.TgZ(28,"button",7),c._uU(29,"Shop More"),c.qZA(),c.qZA(),c.TgZ(30,"td"),c.TgZ(31,"span"),c.TgZ(32,"strong"),c._uU(33),c.ALo(34,"currency"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.BQk()),2&n){const t=c.oxw();c.xp6(24),c.Q6J("ngForOf",t.products),c.xp6(9),c.hij("Grand Total: ",c.xi3(34,2,t.total,"INR"),"")}}function c4(n,e){1&n&&(c.ynx(0),c.TgZ(1,"div",1),c.TgZ(2,"div",17),c.TgZ(3,"h5",18),c._uU(4,"My Cart"),c.qZA(),c.qZA(),c.TgZ(5,"div",19),c._UZ(6,"img",20),c.TgZ(7,"h4"),c._uU(8,"Your Cart is Empty"),c.qZA(),c.TgZ(9,"h6"),c._uU(10,"Add Item to it Now"),c.qZA(),c.TgZ(11,"button",7),c._uU(12,"Shop Now"),c.qZA(),c.qZA(),c.qZA(),c.BQk())}let u4=(()=>{class n{constructor(t,r){this.cartService=t,this.Auth=r,this.products=[]}ngOnInit(){this.getdata(),this.grandTotal()}getdata(){this.cartService.getPosts().subscribe(t=>{this.products=t,this.total=this.grandTotal(),this.products.forEach(r=>{Object.assign(r,{quantity:1,total:r.price})})})}deletePost(t){this.cartService.deletePost(t)}grandTotal(){this.total=this.products.reduce(function(t,r){return t+r.price*r.quantity},0)}inc(t){return t.quantity+=1,this.grandTotal(),this.totalprice}dec(t){0!=t.quantity&&(t.quantity-=1),this.grandTotal()}totalprice(t){return t.price*t.quantity}if(t){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(PT),c.Y36(Dp))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-cart"]],decls:3,vars:2,consts:[[4,"ngIf"],[1,"container"],[1,"card-table"],[1,"card-product"],[1,"table","table-responsive"],[4,"ngFor","ngForOf"],["colspan","4"],["routerLink","",1,"btn","btn-primary"],["alt","",2,"width","120px",3,"src"],[2,"width","25%"],[2,"width","12%"],[1,"btn","btn-box","w-2",3,"click"],[1,"fa","fa-plus"],[1,"btn",3,"click"],[1,"fa","fa-minus"],[1,"btn","btn-danger",3,"click"],[1,"fas","fa-trash-alt"],[1,"card"],[1,"card-title"],[1,"center"],["src","https://rukminim2.flixcart.com/www/800/800/promos/16/05/2019/d438a32e-765a-4d8b-b4a6-520b560971e8.png?q=90","alt",""]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.YNc(1,l4,35,5,"ng-container",0),c.YNc(2,c4,13,0,"ng-container",0)),2&t&&(c.xp6(1),c.Q6J("ngIf",0!=r.products.length),c.xp6(1),c.Q6J("ngIf",0==r.products.length))},directives:[n0,Fn,Vn,Zf],pipes:[Ga],styles:[".card[_ngcontent-%COMP%]{height:60vh;margin:25px;padding:25px}.center[_ngcontent-%COMP%]{position:absolute;top:40%;left:50%;transform:translate(-50%,-50%);text-align:center}.center[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{text-decoration:none;color:inherit;border:none;outline:none;height:162px;width:250px;margin:20px 0}.card-table[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;min-width:none;word-wrap:break-word;background-color:#fdeff4;background-clip:border-box;border:1px solid black rgba(0,0,0,.2);border-radius:.25rem}.center[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px!important;margin-top:20px!important;font-weight:400;padding:12px 72px;border-radius:3px!important}"]}),n})(),d4=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-body"]],decls:19,vars:0,consts:[["id","carouselExampleSlidesOnly","data-ride","carousel","data-interval","2000","data-pause","hover",1,"carousel","slide"],[1,"carousel-inner",2,"height","500px","opacity","0.8"],[1,"carousel-item","active"],["src","assets\\img\\bannerImg.jpg","alt","First slide",1,"d-block","w-100"],[1,"carousel-caption","d-none","d-md-block"],[1,"carousel-item"],["src","assets\\img\\bannerImg2.jpg","alt","Second slide",1,"d-block","w-100"],[1,"carousel-caption"],["src","assets\\img\\bannerImg3.jpg","alt","Third slide",1,"d-block","w-100","h-50"],["href","#slider","data-slide","prev","role","button",1,"left","carousel-control"],[1,"icon-prev"],["href","#slider","data-slide","next","role","button",1,"right","carousel-control"],[1,"icon-next"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c._UZ(3,"img",3),c._UZ(4,"div",4),c.qZA(),c.TgZ(5,"div",5),c._UZ(6,"img",6),c.TgZ(7,"div",7),c.TgZ(8,"h5"),c._uU(9,"hello lkjfank"),c.qZA(),c.TgZ(10,"p"),c._uU(11,"..."),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"div",5),c._UZ(13,"div",4),c._UZ(14,"img",8),c.qZA(),c.qZA(),c.TgZ(15,"a",9),c._UZ(16,"span",10),c.qZA(),c.TgZ(17,"a",11),c._UZ(18,"span",12),c.qZA(),c.qZA())},styles:[""]}),n})(),h4=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-layout"]],decls:5,vars:0,template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"div"),c._UZ(2,"app-body"),c.qZA(),c.TgZ(3,"div"),c._UZ(4,"app-card"),c.qZA())},directives:[n0,d4,w2],styles:[".cardMain[_ngcontent-%COMP%]{background-color:#eee}"]}),n})();var f4=F(655);function jR(n){return n instanceof c.Rgc}function HR(n){return"function"==typeof n}function Z2(n){return"string"==typeof n}let p4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["dynamic-view"]],inputs:{content:"content"},decls:1,vars:1,consts:[[3,"innerHTML"]],template:function(t,r){1&t&&c._UZ(0,"div",0),2&t&&c.Q6J("innerHTML",r.content,c.oJD)},encapsulation:2}),n})();class g4{constructor(e){this.args=e,this.wrapper=null,this.args.vcr?(this.viewRef=this.args.vcr.createEmbeddedView(this.args.tpl,this.args.context||{}),this.viewRef.detectChanges()):(this.viewRef=this.args.tpl.createEmbeddedView(this.args.context||{}),this.viewRef.detectChanges(),this.args.appRef.attachView(this.viewRef))}detectChanges(){this.viewRef.detectChanges()}getElement(){const e=this.viewRef.rootNodes;return 1===e.length&&e[0]===Node.ELEMENT_NODE?this.element=e[0]:(this.element=document.createElement("div"),this.element.append(...e)),this.element}destroy(){var e;1!==this.viewRef.rootNodes[0]&&(null===(e=this.element)||void 0===e||e.parentNode.removeChild(this.element),this.element=null),this.args.vcr||this.args.appRef.detachView(this.viewRef),this.viewRef.destroy(),this.viewRef=null}}class m4{constructor(e){this.value=e}getElement(){return this.value}detectChanges(){}destroy(){}}class _4{constructor(e){if(this.options=e,e.vcr)this.compRef=e.vcr.createComponent(e.component,{index:e.vcr.length,injector:e.injector||e.vcr.injector});else{const t=e.resolver.resolveComponentFactory(e.component);this.compRef=t.create(e.injector),e.appRef.attachView(this.compRef.hostView)}}get ref(){return this.compRef}setInput(e,t){return this.compRef.instance[e]=t,this}setInputs(e){return Object.keys(e).forEach(t=>{this.compRef.instance[t]=e[t]}),this}detectChanges(){return this.compRef.hostView.detectChanges(),this}appendTo(e){return e.appendChild(this.getElement()),this}removeFrom(e){return e.removeChild(this.getElement()),this}getRawContent(){return this.getElement().outerHTML}getElement(){return this.compRef.location.nativeElement}destroy(){this.compRef.destroy(),!this.options.vcr&&this.options.appRef.detachView(this.compRef.hostView),this.compRef=null}}let K2=(()=>{class n{constructor(t,r,i){this.resolver=t,this.injector=r,this.appRef=i}createComponent(t,r={}){return new _4({component:t,vcr:r.vcr,injector:r.injector||this.injector,appRef:this.appRef,resolver:this.resolver})}createTemplate(t,r={}){return new g4({vcr:r.vcr,appRef:this.appRef,tpl:t,context:r.context})}createView(t,r={}){if(jR(t))return this.createTemplate(t,r);if(HR(t))return this.createComponent(t,r);if(Z2(t))return new m4(t);throw"Type of content is not supported"}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c._Vd),c.LFG(c.zs3),c.LFG(c.z2F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),y4=(()=>{class n{constructor(t,r,i){this.defaultTpl=t,this.vcr=r,this.viewService=i}ngOnInit(){this.resolveContentType()}ngOnChanges(t){t.view&&!t.view.isFirstChange()&&this.resolveContentType()}resolveContentType(){var t,r;null===(t=this.viewRef)||void 0===t||t.destroy(),Z2(this.view)?(this.viewRef=this.viewService.createComponent(p4,{vcr:this.vcr,injector:this.injector}),this.viewRef.setInput("content",this.view).detectChanges()):this.viewRef=this.viewService.createView(this.view||this.defaultTpl,{vcr:this.vcr,injector:null!==(r=this.injector)&&void 0!==r?r:this.vcr.injector,context:this.context})}ngOnDestroy(){var t;null===(t=this.viewRef)||void 0===t||t.destroy()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Rgc),c.Y36(c.s_b),c.Y36(K2))},n.\u0275dir=c.lG2({type:n,selectors:[["","dynamicView",""]],inputs:{view:["dynamicView","view"],injector:["dynamicViewInjector","injector"],context:["dynamicViewContext","context"]},features:[c.TTD]}),n})(),v4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const{isArray:b4}=Array;const I4=["*"],T4=function(n,e){return{"border-color":n,"border-right-color":e}};function D4(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1,"\n        "),c._UZ(2,"hot-toast-error",2),c._uU(3,"\n      "),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Q6J("theme",t.theme)}}function S4(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1,"\n        "),c._UZ(2,"hot-toast-checkmark",2),c._uU(3,"\n      "),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Q6J("theme",t.theme)}}function A4(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1,"\n        "),c._UZ(2,"hot-toast-warning",2),c._uU(3,"\n      "),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Q6J("theme",t.theme)}}function M4(n,e){if(1&n&&(c.TgZ(0,"div"),c._uU(1,"\n        "),c._UZ(2,"hot-toast-info",2),c._uU(3,"\n      "),c.qZA()),2&n){const t=c.oxw(3);c.xp6(2),c.Q6J("theme",t.theme)}}function x4(n,e){if(1&n&&(c.TgZ(0,"div",4),c._uU(1,"\n    "),c.TgZ(2,"div",5),c._uU(3,"\n      "),c.YNc(4,D4,4,1,"div",6),c._uU(5,"\n      "),c.YNc(6,S4,4,1,"div",6),c._uU(7,"\n      "),c.YNc(8,A4,4,1,"div",6),c._uU(9,"\n      "),c.YNc(10,M4,4,1,"div",6),c._uU(11,"\n    "),c.qZA(),c._uU(12,"\n  "),c.qZA()),2&n){const t=c.oxw(2);c.xp6(2),c.Q6J("ngSwitch",t.type),c.xp6(2),c.Q6J("ngSwitchCase","error"),c.xp6(2),c.Q6J("ngSwitchCase","success"),c.xp6(2),c.Q6J("ngSwitchCase","warning"),c.xp6(2),c.Q6J("ngSwitchCase","info")}}function k4(n,e){if(1&n&&(c.TgZ(0,"div",1),c._uU(1,"\n  "),c._UZ(2,"hot-toast-loader",2),c._uU(3,"\n  "),c.YNc(4,x4,13,5,"div",3),c._uU(5,"\n"),c.qZA()),2&n){const t=c.oxw();c.xp6(2),c.Q6J("theme",t.theme),c.xp6(2),c.Q6J("ngIf","loading"!==t.type)}}const O4=["hotToastBarBase"];function R4(n,e){if(1&n&&(c.ynx(0),c._uU(1,"\n          "),c.TgZ(2,"hot-toast-animated-icon",10),c._uU(3),c.qZA(),c._uU(4,"\n        "),c.BQk()),2&n){const t=c.oxw(2);c.xp6(2),c.Q6J("iconTheme",t.toast.iconTheme),c.xp6(1),c.Oqu(t.toast.icon)}}function P4(n,e){if(1&n&&(c._uU(0,"\n          "),c.TgZ(1,"div"),c._uU(2,"\n            "),c.GkF(3,11),c._uU(4,"\n          "),c.qZA(),c._uU(5,"\n        ")),2&n){const t=c.oxw(2);c.xp6(3),c.Q6J("dynamicView",t.toast.icon)}}function N4(n,e){if(1&n&&(c.ynx(0),c._uU(1,"\n        "),c.YNc(2,R4,5,2,"ng-container",4),c._uU(3,"\n        "),c.YNc(4,P4,6,1,"ng-template",null,9,c.W1O),c._uU(6,"\n      "),c.BQk()),2&n){const t=c.MAs(5),r=c.oxw();c.xp6(2),c.Q6J("ngIf",r.isIconString)("ngIfElse",t)}}function F4(n,e){if(1&n&&(c._uU(0,"\n        "),c._UZ(1,"hot-toast-indicator",12),c._uU(2,"\n      ")),2&n){const t=c.oxw();c.xp6(1),c.Q6J("theme",t.toast.iconTheme)("type",t.toast.type)}}function L4(n,e){1&n&&c.GkF(0)}function V4(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"button",13),c.NdJ("click",function(){return c.CHM(t),c.oxw().close()}),c.qZA()}if(2&n){const t=c.oxw();c.Q6J("ngStyle",t.toast.closeStyle)}}function U4(n,e){if(1&n){const t=c.EpF();c.TgZ(0,"hot-toast",3),c.NdJ("height",function(i){const u=c.CHM(t).$implicit;return c.oxw().updateHeight(i,u)})("beforeClosed",function(){const s=c.CHM(t).$implicit;return c.oxw().beforeClosed(s)})("afterClosed",function(i){return c.CHM(t),c.oxw().afterClosed(i)}),c.qZA()}if(2&n){const t=e.$implicit,r=e.index,i=c.oxw();c.Q6J("toast",t)("offset",i.calculateOffset(t.id,t.position))("toastRef",i.toastRefs[r])}}const Y2={blank:4e3,error:4e3,success:4e3,loading:3e4,warning:4e3,info:4e3};class X2{constructor(e){this.toast=e,this._onClosed=new Gt.x}set dispose(e){this._dispose=e}getToast(){return this.toast}appendTo(e){const{dispose:t,updateMessage:r,updateToast:i,afterClosed:s}=e.addToast(this);return this.dispose=t,this.updateMessage=r,this.updateToast=i,this.afterClosed=function E4(...n){return 1===(n=function w4(n){return 1===n.length&&b4(n[0])?n[0]:n}(n)).length?(0,Tr.Xf)(n[0]):new On.y(function C4(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,Tr.Xf)(n[r]).subscribe(new nn.Q(e,i=>{if(t){for(let s=0;s<t.length;s++)s!==r&&t[s].unsubscribe();t=null}e.next(i)})))}}(n))}(this._onClosed.asObservable(),s),this}close(e={dismissedByAction:!1}){this._dispose(),this._onClosed.next({dismissedByAction:e.dismissedByAction,id:this.toast.id}),this._onClosed.complete()}get data(){return this.toast.data}}let $4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-animated-icon"]],inputs:{iconTheme:"iconTheme"},ngContentSelectors:I4,decls:5,vars:2,consts:[[1,"hot-toast-animated-icon"]],template:function(t,r){1&t&&(c.F$t(),c.TgZ(0,"div",0),c._uU(1,"\n  "),c.Hsn(2),c._uU(3,"\n"),c.qZA(),c._uU(4,"\n")),2&t&&c.Udp("color",null==r.iconTheme?null:r.iconTheme.primary)},styles:["@keyframes hotToastEnter{0%{transform:scale(0)}to{transform:scale(1)}}.hot-toast-animated-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-animated-icon-animation, hotToastEnter .3s ease-in-out forwards);position:var(--hot-toast-animated-icon-position, relative);transform:var(--hot-toast-animated-icon-transform, scale(0))}@media (prefers-reduced-motion: reduce){.hot-toast-animated-icon[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-animated-icon-reduced-motion-animation-duration, none);opacity:var(--hot-toast-animated-icon-reduced-motion-opacity, 1);transform:var(--hot-toast-animated-icon-reduced-motion-transform, scale(1))}}"],changeDetection:0}),n})(),z4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-loader"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-loader-icon",3,"ngStyle"]],template:function(t,r){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Q6J("ngStyle",c.WLB(1,T4,null==r.theme?null:r.theme.primary,null==r.theme?null:r.theme.secondary))},directives:[$a],styles:["@keyframes hotToastRotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.hot-toast-loader-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-loader-icon-animation, hotToastRotate 1s linear infinite);border:var(--hot-toast-loader-icon-border, 2px solid);border-bottom-color:var(--hot-toast-loader-icon-border-color, #e0e0e0);border-left-color:var(--hot-toast-loader-icon-border-color, #e0e0e0);border-radius:var(--hot-toast-loader-icon-border-radius, 100%);border-right-color:var(--hot-toast-loader-icon-border-right-color, #616161);border-top-color:var(--hot-toast-loader-icon-border-color, #e0e0e0);box-sizing:var(--hot-toast-loader-icon-box-sizing, border-box);height:var(--hot-toast-loader-icon-height, 18px);padding-top:var(--hot-toast-loader-icon-padding-top, 2px);width:var(--hot-toast-loader-icon-width, 18px)}@media (prefers-reduced-motion: reduce){.hot-toast-loader-icon[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-loader-icon-reduced-motion-animation-duration, 5s)}}"],changeDetection:0}),n})(),q4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-error"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-error-icon"]],template:function(t,r){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Udp("--error-primary",null==r.theme?null:r.theme.primary)("--error-secondary",null==r.theme?null:r.theme.secondary)},styles:['@keyframes hotToastErrorCircleAnimation{0%{opacity:0;transform:scale(0) rotate(45deg)}to{opacity:1;transform:scale(1) rotate(45deg)}}@keyframes hotToastFirstLineAnimation{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes hotToastSecondLineAnimation{0%{opacity:0;transform:scale(0) rotate(90deg)}to{opacity:1;transform:scale(1) rotate(90deg)}}.hot-toast-error-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-error-icon-animation, hotToastErrorCircleAnimation .3s cubic-bezier(.175, .885, .32, 1.275) forwards);animation-delay:var(--hot-toast-error-icon-animation-delay, .1s);background:var(--hot-toast-error-icon-background, var(--error-primary, #ff4b4b));border-radius:var(--hot-toast-error-icon-border-radius, 10px);height:var(--hot-toast-error-icon-height, 20px);opacity:var(--hot-toast-error-icon-opacity, 0);position:var(--hot-toast-error-icon-position, relative);transform:var(--hot-toast-error-icon-transform, rotate(45deg));width:var(--hot-toast-error-icon-width, 20px)}@media (prefers-reduced-motion: reduce){.hot-toast-error-icon[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-error-icon-reduced-motion-animation-duration, 0ms)}}.hot-toast-error-icon[_ngcontent-%COMP%]:after, .hot-toast-error-icon[_ngcontent-%COMP%]:before{animation:var(--hot-toast-error-icon-after-before-animation, hotToastFirstLineAnimation .15s ease-out forwards);animation-delay:var(--hot-toast-error-icon-after-before-animation-delay, .15s);background:var(--hot-toast-error-icon-after-before-background, var(--error-secondary, #fff));border-radius:var(--hot-toast-error-icon-after-before-border-radius, 3px);bottom:var(--hot-toast-error-icon-after-before-bottom, 9px);content:var(--hot-toast-error-icon-after-before-content, "");height:var(--hot-toast-error-icon-after-before-height, 2px);left:var(--hot-toast-error-icon-after-before-left, 4px);opacity:var(--hot-toast-error-icon-after-before-opacity, 0);position:var(--hot-toast-error-icon-after-before-position, absolute);width:var(--hot-toast-error-icon-after-before-width, 12px)}@media (prefers-reduced-motion: reduce){.hot-toast-error-icon[_ngcontent-%COMP%]:after, .hot-toast-error-icon[_ngcontent-%COMP%]:before{animation-duration:var(--hot-toast-error-icon-after-before-reduced-motion-animation-duration, 0ms)}}.hot-toast-error-icon[_ngcontent-%COMP%]:before{animation:var(--hot-toast-error-icon-before-animation, hotToastSecondLineAnimation .15s ease-out forwards);animation-delay:var(--hot-toast-error-icon-before-animation-delay, .18s);transform:var(--hot-toast-error-icon-before-transform, rotate(90deg))}@media (prefers-reduced-motion: reduce){.hot-toast-error-icon[_ngcontent-%COMP%]:before{animation-duration:var(--hot-toast-error-icon-before-reduced-motion-animation-duration, 0ms)}}'],changeDetection:0}),n})(),G4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-checkmark"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-checkmark-icon"]],template:function(t,r){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Udp("--check-primary",null==r.theme?null:r.theme.primary)("--check-secondary",null==r.theme?null:r.theme.secondary)},styles:['@keyframes hotToastCircleAnimation{0%{opacity:0;transform:scale(0) rotate(45deg)}to{opacity:1;transform:scale(1) rotate(45deg)}}@keyframes hotToastCheckmarkAnimation{0%{height:0;opacity:0;width:0}40%{height:0;opacity:1;width:6px}to{height:10px;opacity:1}}.hot-toast-checkmark-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-checkmark-icon-animation, hotToastCircleAnimation .3s cubic-bezier(.175, .885, .32, 1.275) forwards);animation-delay:var(--hot-toast-checkmark-icon-animation-delay, .1s);background-color:var(--hot-toast-checkmark-icon-background-color, var(--check-primary, #61d345));border-radius:var(--hot-toast-checkmark-icon-border-radius, 10px);height:var(--hot-toast-checkmark-icon-height, 20px);opacity:var(--hot-toast-checkmark-icon-opacity, 0);position:var(--hot-toast-checkmark-icon-position, relative);transform:var(--hot-toast-checkmark-icon-transform, rotate(45deg));width:var(--hot-toast-checkmark-icon-width, 20px)}@media (prefers-reduced-motion: reduce){.hot-toast-checkmark-icon[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-checkmark-icon-reduced-motion-animation-duration, 0ms)}}.hot-toast-checkmark-icon[_ngcontent-%COMP%]:after{animation:var(--hot-toast-checkmark-icon-after-animation, hotToastCheckmarkAnimation .2s ease-out forwards);animation-delay:var(--hot-toast-checkmark-icon-after-animation-delay, .2s);border-bottom-style:solid;border-bottom-width:var(--hot-toast-checkmark-icon-after-border-bottom, 2px);border-color:var(--hot-toast-checkmark-icon-after-border-color, var(--check-secondary, #fff));border-right-style:solid;border-right-width:var(--hot-toast-checkmark-icon-after-border-right, 2px);bottom:var(--hot-toast-checkmark-icon-after-bottom, 6px);box-sizing:var(--hot-toast-checkmark-icon-after-box-sizing, border-box);content:var(--hot-toast-checkmark-icon-after-content, "");height:var(--hot-toast-checkmark-icon-after-height, 10px);left:var(--hot-toast-checkmark-icon-after-left, 6px);opacity:var(--hot-toast-checkmark-icon-after-opacity, 0);position:var(--hot-toast-checkmark-icon-after-position, absolute);width:var(--hot-toast-checkmark-icon-after-width, 6px)}@media (prefers-reduced-motion: reduce){.hot-toast-checkmark-icon[_ngcontent-%COMP%]:after{animation-duration:var(--hot-toast-checkmark-icon-after-reduced-motion-animation-duration, 0ms)}}'],changeDetection:0}),n})(),W4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-warning"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-warning-icon"]],template:function(t,r){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Udp("--warn-primary",null==r.theme?null:r.theme.primary)("--warn-secondary",null==r.theme?null:r.theme.secondary)},styles:['@keyframes animate-warn-background{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes animate-warn-line{0%{height:0;opacity:0}40%{height:4.8px;opacity:1}to{height:8px;opacity:1}}.hot-toast-warning-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-warning-icon-animation, animate-warn-background .3s cubic-bezier(.175, .885, .32, 1.275) forwards);animation-delay:var(--hot-toast-warning-icon-animation-delay, .1s);background-color:var(--hot-toast-warning-icon-background-color, var(--warn-primary, #ffab00));border-radius:var(--hot-toast-warning-icon-border-radius, 50%);display:var(--hot-toast-warning-icon-display, block);height:var(--hot-toast-warning-icon-height, 20px);opacity:var(--hot-toast-warning-icon-opacity, 0);position:var(--hot-toast-warning-icon-position, relative);transform:var(--hot-toast-warning-icon-transform, scale(0));width:var(--hot-toast-warning-icon-width, 20px)}.hot-toast-warning-icon[_ngcontent-%COMP%]:after, .hot-toast-warning-icon[_ngcontent-%COMP%]:before{background-color:var(--hot-toast-warning-icon-after-before-background-color, var(--warn-secondary, #fff));border-radius:var(--hot-toast-warning-icon-after-before-border-radius, 3px);box-sizing:var(--hot-toast-warning-icon-after-before-box-sizing, border-box);content:var(--hot-toast-warning-icon-after-before-content, "");display:var(--hot-toast-warning-icon-after-before-display, block);left:var(--hot-toast-warning-icon-after-before-left, 8.5px);position:var(--hot-toast-warning-icon-after-before-position, absolute);width:var(--hot-toast-warning-icon-after-before-width, 2.5px)}.hot-toast-warning-icon[_ngcontent-%COMP%]:after{animation:var(--hot-toast-warning-icon-after-animation, animate-warn-line .2s ease-out forwards);animation-delay:var(--hot-toast-warning-icon-after-animation-delay, .2s);height:var(--hot-toast-warning-icon-after-height, 0);opacity:var(--hot-toast-warning-icon-after-opacity, 0);top:var(--hot-toast-warning-icon-after-top, 4px)}.hot-toast-warning-icon[_ngcontent-%COMP%]:before{bottom:var(--hot-toast-warning-icon-before-bottom, 4px);height:var(--hot-toast-warning-icon-before-height, 2px)}'],changeDetection:0}),n})(),Z4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-info"]],inputs:{theme:"theme"},decls:2,vars:4,consts:[[1,"hot-toast-info-icon"]],template:function(t,r){1&t&&(c._UZ(0,"div",0),c._uU(1,"\n")),2&t&&c.Udp("--warn-primary",null==r.theme?null:r.theme.primary)("--warn-secondary",null==r.theme?null:r.theme.secondary)},styles:['@keyframes animate-info-background{0%{opacity:0;transform:scale(0)}to{opacity:1;transform:scale(1)}}@keyframes animate-info-line{0%{height:0;opacity:0}40%{height:4.8px;opacity:1}to{height:8px;opacity:1}}.hot-toast-info-icon[_ngcontent-%COMP%]{animation:var(--hot-toast-info-icon-animation, animate-info-background .3s cubic-bezier(.175, .885, .32, 1.275) forwards);animation-delay:var(--hot-toast-info-icon-animation-delay, .1s);background-color:var(--hot-toast-info-icon-background-color, var(--info-primary, #0d6efd));border-radius:var(--hot-toast-info-icon-border-radius, 50%);display:var(--hot-toast-info-icon-display, block);height:var(--hot-toast-info-icon-height, 20px);opacity:var(--hot-toast-info-icon-opacity, 0);position:var(--hot-toast-info-icon-position, relative);transform:var(--hot-toast-info-icon-transform, scale(0));width:var(--hot-toast-info-icon-width, 20px)}.hot-toast-info-icon[_ngcontent-%COMP%]:after, .hot-toast-info-icon[_ngcontent-%COMP%]:before{background-color:var(--hot-toast-info-icon-after-before-background-color, var(--info-secondary, #fff));border-radius:var(--hot-toast-info-icon-after-before-border-radius, 3px);box-sizing:var(--hot-toast-info-icon-after-before-box-sizing, border-box);content:var(--hot-toast-info-icon-after-before-content, "");display:var(--hot-toast-info-icon-after-before-display, block);left:var(--hot-toast-info-icon-after-before-left, 8.5px);position:var(--hot-toast-info-icon-after-before-position, absolute);width:var(--hot-toast-info-icon-after-before-width, 2.5px)}.hot-toast-info-icon[_ngcontent-%COMP%]:after{animation:var(--hot-toast-info-icon-after-animation, animate-info-line .2s ease-out forwards);animation-delay:var(--hot-toast-info-icon-after-animation-delay, .2s);height:var(--hot-toast-info-icon-after-height, 0);opacity:var(--hot-toast-info-icon-after-opacity, 0);top:var(--hot-toast-info-icon-after-bottom, 8px)}.hot-toast-info-icon[_ngcontent-%COMP%]:before{height:var(--hot-toast-info-icon-before-height, 2px);top:var(--hot-toast-info-icon-before-top, 4px)}'],changeDetection:0}),n})(),K4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-indicator"]],inputs:{theme:"theme",type:"type"},decls:2,vars:1,consts:[["class","hot-toast-indicator-wrapper",4,"ngIf"],[1,"hot-toast-indicator-wrapper"],[3,"theme"],["class","hot-toast-status-wrapper",4,"ngIf"],[1,"hot-toast-status-wrapper"],[3,"ngSwitch"],[4,"ngSwitchCase"]],template:function(t,r){1&t&&(c.YNc(0,k4,6,2,"div",0),c._uU(1,"\n")),2&t&&c.Q6J("ngIf","blank"!==r.type)},directives:[z4,q4,G4,W4,Z4,Fn,Nr,mi],styles:[".hot-toast-indicator-wrapper[_ngcontent-%COMP%]{align-items:var(--hot-toast-indicator-wrapper-align-items, center);display:var(--hot-toast-indicator-wrapper-display, flex);justify-content:var(--hot-toast-indicator-wrapper-justify-content, center);min-height:var(--hot-toast-indicator-wrapper-min-height, 20px);min-width:var(--hot-toast-indicator-wrapper-min-width, 20px);position:var(--hot-toast-indicator-wrapper-position, relative)}.hot-toast-status-wrapper[_ngcontent-%COMP%]{position:var(--hot-toast-status-wrapper-position, absolute)}"],changeDetection:0}),n})(),J2=(()=>{class n{constructor(t,r,i){this.injector=t,this.renderer=r,this.ngZone=i,this.offset=0,this.height=new c.vpe,this.beforeClosed=new c.vpe,this.afterClosed=new c.vpe,this.isManualClose=!1,this.unlisteners=[]}ngOnInit(){jR(this.toast.message)&&(this.context={$implicit:this.toastRef}),HR(this.toast.message)&&(this.toastComponentInjector=c.zs3.create({providers:[{provide:X2,useValue:this.toastRef}],parent:this.toast.injector||this.injector}))}ngAfterViewInit(){const t=this.toastBarBase.nativeElement;requestAnimationFrame(()=>{this.height.emit(t.offsetHeight)}),this.ngZone.runOutsideAngular(()=>{this.unlisteners.push(this.renderer.listen(t,"animationstart",r=>{this.isExitAnimation(r)&&this.ngZone.run(()=>this.beforeClosed.emit())}),this.renderer.listen(t,"animationend",r=>{this.isExitAnimation(r)&&this.ngZone.run(()=>this.afterClosed.emit({dismissedByAction:this.isManualClose,id:this.toast.id}))}))}),this.setToastAttributes()}get containerPositionStyle(){const t=this.toast.position.includes("top"),r=t?{top:0}:{bottom:0},i=this.toast.position.includes("left")?{left:0}:this.toast.position.includes("right")?{right:0}:{left:0,right:0,justifyContent:"center"};return Object.assign(Object.assign({transform:`translateY(${this.offset*(t?1:-1)}px)`},r),i)}get toastBarBaseStyles(){const t=this.toast.position.includes("top"),r=`hotToastEnterAnimation${t?"Negative":"Positive"} 350ms cubic-bezier(0.21, 1.02, 0.73, 1) forwards`,s=this.toast.autoClose?`${r}, hotToastExitAnimation${t?"Negative":"Positive"} 800ms forwards cubic-bezier(0.06, 0.71, 0.55, 1) ${this.toast.duration}ms`:r;return Object.assign(Object.assign({},this.toast.style),{animation:s})}get isIconString(){return"string"==typeof this.toast.icon}close(){this.isManualClose=!0;((n,e)=>{this.toastBarBase.nativeElement.style.animation=e})(0,`hotToastExitAnimation${this.toast.position.includes("top")?"Negative":"Positive"} 800ms forwards cubic-bezier(0.06, 0.71, 0.55, 1)`)}ngOnDestroy(){for(this.close();this.unlisteners.length;)this.unlisteners.pop()()}isExitAnimation(t){return t.animationName.includes("hotToastExitAnimation")}setToastAttributes(){const t=this.toast.attributes;for(const[r,i]of Object.entries(t))this.renderer.setAttribute(this.toastBarBase.nativeElement,r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.zs3),c.Y36(c.Qsj),c.Y36(c.R0b))},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast"]],viewQuery:function(t,r){if(1&t&&c.Gf(O4,5),2&t){let i;c.iGM(i=c.CRH())&&(r.toastBarBase=i.first)}},inputs:{toast:"toast",offset:"offset",defaultConfig:"defaultConfig",toastRef:"toastRef"},outputs:{height:"height",beforeClosed:"beforeClosed",afterClosed:"afterClosed"},decls:25,vars:14,consts:[[1,"hot-toast-bar-base-container",3,"ngStyle","ngClass"],[1,"hot-toast-bar-base",3,"ngStyle","ngClass"],["hotToastBarBase",""],["aria-hidden","true",1,"hot-toast-icon"],[4,"ngIf","ngIfElse"],["indicator",""],[1,"hot-toast-message"],[4,"dynamicView","dynamicViewContext","dynamicViewInjector"],["type","button","class","hot-toast-close-btn","aria-label","Close",3,"ngStyle","click",4,"ngIf"],["iconTemplateOrComponent",""],[3,"iconTheme"],[3,"dynamicView"],[3,"theme","type"],["type","button","aria-label","Close",1,"hot-toast-close-btn",3,"ngStyle","click"]],template:function(t,r){if(1&t&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"div",1,2),c._uU(4,"\n    "),c.TgZ(5,"div",3),c._uU(6,"\n      "),c.YNc(7,N4,7,2,"ng-container",4),c._uU(8,"\n\n      "),c.YNc(9,F4,3,2,"ng-template",null,5,c.W1O),c._uU(11,"\n    "),c.qZA(),c._uU(12,"\n\n    "),c.TgZ(13,"div",6),c._uU(14,"\n      "),c.TgZ(15,"div"),c._uU(16,"\n        "),c.YNc(17,L4,1,0,"ng-container",7),c._uU(18,"\n      "),c.qZA(),c._uU(19,"\n    "),c.qZA(),c._uU(20,"\n\n    "),c.YNc(21,V4,1,1,"button",8),c._uU(22,"\n  "),c.qZA(),c._uU(23,"\n"),c.qZA(),c._uU(24,"\n")),2&t){const i=c.MAs(10);c.Q6J("ngStyle",r.containerPositionStyle)("ngClass","hot-toast-theme-"+r.toast.theme),c.xp6(2),c.Udp("--hot-toast-animation-state",r.isManualClose?"running":"paused"),c.Q6J("ngStyle",r.toastBarBaseStyles)("ngClass",r.toast.className),c.uIk("aria-live",r.toast.ariaLive)("role",r.toast.role),c.xp6(5),c.Q6J("ngIf",void 0!==r.toast.icon)("ngIfElse",i),c.xp6(10),c.Q6J("dynamicView",r.toast.message)("dynamicViewContext",r.context)("dynamicViewInjector",r.toastComponentInjector),c.xp6(4),c.Q6J("ngIf",r.toast.dismissible)}},directives:[$4,K4,$a,is,Fn,y4],styles:[".hot-toast-bar-base[_ngcontent-%COMP%]{align-items:var(--hot-toast-align-items, center);background-color:var(--hot-toast-bg, #fff);border-radius:var(--hot-toast-border-radius, 4px);box-shadow:var(--hot-toast-shadow, 0 3px 10px rgba(0, 0, 0, .1), 0 3px 3px rgba(0, 0, 0, .05));color:var(--hot-toast-color, #363636);display:var(--hot-toast-display, flex);line-height:var(--hot-toast-line, 1.3);margin:var(--hot-toast-margin, 16px);max-width:var(--hot-toast-max-width, 350px);padding:var(--hot-toast-padding, 8px 10px);pointer-events:var(--hot-toast-pointer-events, auto);width:var(--hot-toast-width, -moz-fit-content);width:var(--hot-toast-width, fit-content);will-change:var(--hot-toast-will-change, transform)}.hot-toast-bar-base[_ngcontent-%COMP%]:hover, .hot-toast-bar-base[_ngcontent-%COMP%]:focus{animation-play-state:var(--hot-toast-animation-state, paused)!important}@media (prefers-reduced-motion: reduce){.hot-toast-bar-base[_ngcontent-%COMP%]{animation-duration:var(--hot-toast-reduced-motion-animation-duration, 10ms)!important}}.hot-toast-message[_ngcontent-%COMP%]{color:var(--hot-toast-message-color, inherit);display:var(--hot-toast-message-display, flex);flex:var(--hot-toast-message-flex, 1);justify-content:var(--hot-toast-message-justify-content, center);margin:var(--hot-toast-message-margin, 4px 10px)}.hot-toast-bar-base-container[_ngcontent-%COMP%]{display:var(--hot-toast-container-display, flex);pointer-events:var(--hot-toast-container-pointer-events, none);position:var(--hot-toast-container-position, absolute);transition:var(--hot-toast-container-transition, transform .23s cubic-bezier(.21, 1.02, .73, 1))}@media (prefers-reduced-motion: reduce){.hot-toast-bar-base-container[_ngcontent-%COMP%]{transition-duration:var(--hot-toast-container-reduced-motion-transition-duration, 10ms)!important}}.hot-toast-bar-base-container.hot-toast-theme-snackbar[_ngcontent-%COMP%]   .hot-toast-bar-base[_ngcontent-%COMP%]{background:var(--hot-toast-snackbar-bg, #323232);box-shadow:var(--hot-toast-snackbar-shadow, 0 3px 5px -1px rgba(0, 0, 0, .2), 0 6px 10px 0 rgba(0, 0, 0, .14), 0 1px 18px 0 rgba(0, 0, 0, .12));color:var(--hot-toast-snackbar-color, white)}.hot-toast-bar-base-container.hot-toast-theme-snackbar[_ngcontent-%COMP%]   .hot-toast-close-btn[_ngcontent-%COMP%]{filter:var(--hot-toast-snackbar-close-btn-filter, invert(1) grayscale(100%) brightness(200%))}@keyframes hotToastEnterAnimationNegative{0%{opacity:.5;transform:translateY(-80px) scale(.6)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes hotToastEnterAnimationPositive{0%{opacity:.5;transform:translateY(80px) scale(.6)}to{opacity:1;transform:translate(0) scale(1)}}@keyframes hotToastExitAnimationPositive{0%{opacity:1;transform:translateZ(-1px) scale(1)}to{opacity:0;transform:translate3d(0,130px,-1px) scale(.5)}}@keyframes hotToastExitAnimationNegative{0%{opacity:1;transform:translateZ(-1px) scale(1)}to{opacity:0;transform:translate3d(0,-130px,-1px) scale(.5)}}.hot-toast-close-btn[_ngcontent-%COMP%]{align-self:var(--hot-toast-close-btn-align-self, flex-start);background-color:var(--hot-toast-close-btn-background-color, transparent);background-image:var(--hot-toast-close-btn-background-image, url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3e%3c/svg%3e\"));background-position:var(--hot-toast-close-btn-background-position, center);background-repeat:var(--hot-toast-close-btn-background-repeat, no-repeat);background-size:var(--hot-toast-close-btn-background-size, .75em);border:var(--hot-toast-close-btn-border, 0);border-radius:var(--hot-toast-close-btn-border-radius, .25rem);box-sizing:var(--hot-toast-close-btn-box-sizing, content-box);display:var(--hot-toast-close-btn-display, flex);height:var(--hot-toast-close-btn-height, .8em);margin-top:var(--hot-toast-close-btn-margin-top, .25em);opacity:var(--hot-toast-close-btn-opacity, .5);padding:var(--hot-toast-close-btn-padding, .25em);width:var(--hot-toast-close-btn-width, .8em)}.hot-toast-close-btn[_ngcontent-%COMP%]:focus{box-shadow:var(--hot-toast-close-btn-box-shadow, 0 0 0 .125rem rgba(13, 110, 253, .25));outline:var(--hot-toast-close-btn-outline, none)}.hot-toast-close-btn[_ngcontent-%COMP%]:hover, .hot-toast-close-btn[_ngcontent-%COMP%]:focus{opacity:var(--hot-toast-close-btn-opacity, .75)}.hot-toast-icon[_ngcontent-%COMP%]{align-self:var(--hot-toast-icon-align-self, flex-start);padding-top:var(--hot-toast-icon-padding-top, .25em)}"],changeDetection:0}),n})(),Y4=(()=>{class n{constructor(t){this.cdr=t,this.toasts=[],this.toastRefs=[],this._onClosed=new Gt.x,this.onClosed$=this._onClosed.asObservable()}trackById(t,r){return r.id}calculateOffset(t,r){const i=this.toasts.filter(h=>h.visible&&h.position===r),s=i.findIndex(h=>h.id===t);return-1!==s?i.slice(...this.defaultConfig.reverseOrder?[s+1]:[0,s]).reduce((h,p)=>h+(p.height||0)+8,0):0}updateHeight(t,r){r.height=t,this.cdr.detectChanges()}addToast(t){this.toastRefs.push(t);const r=t.getToast();return this.toasts.push(t.getToast()),this.cdr.detectChanges(),{dispose:()=>{this.closeToast(r.id)},updateMessage:i=>{r.message=i,this.cdr.detectChanges()},updateToast:i=>{this.updateToasts(r,i),this.cdr.detectChanges()},afterClosed:this.getAfterClosed(r)}}closeToast(t){if(t){const r=this.hotToastComponentList.find(i=>i.toast.id===t);r&&r.close()}else this.hotToastComponentList.forEach(r=>r.close())}beforeClosed(t){t.visible=!1}afterClosed(t){this.toasts.findIndex(i=>i.id===t.id)>-1&&(this._onClosed.next(t),this.toasts=this.toasts.filter(i=>i.id!==t.id),this.toastRefs=this.toastRefs.filter(i=>i.getToast().id!==t.id),this.cdr.detectChanges())}hasToast(t){return this.toasts.findIndex(r=>r.id===t)>-1}getAfterClosed(t){return this.onClosed$.pipe(Ar(r=>r.id===t.id))}updateToasts(t,r){this.toasts=this.toasts.map(i=>Object.assign(Object.assign({},i),i.id===t.id&&Object.assign(Object.assign({},t),r)))}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO))},n.\u0275cmp=c.Xpm({type:n,selectors:[["hot-toast-container"]],viewQuery:function(t,r){if(1&t&&c.Gf(J2,5),2&t){let i;c.iGM(i=c.CRH())&&(r.hotToastComponentList=i)}},inputs:{defaultConfig:"defaultConfig"},decls:8,vars:2,consts:[[2,"position","fixed","z-index","9999","top","0","right","0","bottom","0","left","0","pointer-events","none"],[2,"position","relative","height","100%"],[3,"toast","offset","toastRef","height","beforeClosed","afterClosed",4,"ngFor","ngForOf","ngForTrackBy"],[3,"toast","offset","toastRef","height","beforeClosed","afterClosed"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c._uU(1,"\n  "),c.TgZ(2,"div",1),c._uU(3,"\n    "),c.YNc(4,U4,1,3,"hot-toast",2),c._uU(5,"\n  "),c.qZA(),c._uU(6,"\n"),c.qZA(),c._uU(7,"\n")),2&t&&(c.xp6(4),c.Q6J("ngForOf",r.toasts)("ngForTrackBy",r.trackById))},directives:[J2,Vn],encapsulation:2,changeDetection:0}),n})();class $R{constructor(){this.reverseOrder=!1,this.ariaLive="polite",this.role="status",this.position="top-center",this.autoClose=!0,this.theme="toast",this.attributes={},this.success={content:""},this.error={content:""},this.loading={content:""},this.blank={content:""},this.warning={content:""}}}class J4{constructor(){this.storage="local",this.key="ngneat/hototast-${id}",this.count=1,this.enabled=!1}}let ej=(()=>{class n{constructor(t,r,i){this._viewService=t,this.platformId=r,this._isInitialized=!1,this._defaultConfig=new $R,this._defaultPersistConfig=new J4,i&&(this._defaultConfig=Object.assign(Object.assign({},this._defaultConfig),i))}get defaultConfig(){return this._defaultConfig}set defaultConfig(t){this._defaultConfig=Object.assign(Object.assign({},this._defaultConfig),t),this._componentRef&&this._componentRef.setInput("defaultConfig",this._defaultConfig)}show(t,r){return this.createToast(t||this._defaultConfig.blank.content,"blank",Object.assign(Object.assign({},this._defaultConfig),r))}error(t,r){var i;return this.createToast(t||this._defaultConfig.error.content,"error",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(i=this._defaultConfig)||void 0===i?void 0:i.error),r))}success(t,r){var i;return this.createToast(t||this._defaultConfig.success.content,"success",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(i=this._defaultConfig)||void 0===i?void 0:i.success),r))}loading(t,r){var i;return this.createToast(t||this._defaultConfig.loading.content,"loading",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(i=this._defaultConfig)||void 0===i?void 0:i.loading),r))}warning(t,r){var i;return this.createToast(t||this._defaultConfig.warning.content,"warning",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(i=this._defaultConfig)||void 0===i?void 0:i.warning),r))}info(t,r){var i;return this.createToast(t||this._defaultConfig.warning.content,"info",Object.assign(Object.assign(Object.assign({},this._defaultConfig),null===(i=this._defaultConfig)||void 0===i?void 0:i.warning),r))}observe(t){return r=>{var i,s,u,h,p,y;let C,D=0;const R=null!==(i=t.loading)&&void 0!==i?i:null===(s=this._defaultConfig.loading)||void 0===s?void 0:s.content,L=null!==(u=t.success)&&void 0!==u?u:null===(h=this._defaultConfig.success)||void 0===h?void 0:h.content,j=null!==(p=t.error)&&void 0!==p?p:null===(y=this._defaultConfig.error)||void 0===y?void 0:y.content;return zg(()=>(R&&(C=this.createLoadingToast(R),D=Date.now()),r.pipe((0,Kr.b)(Object.assign(Object.assign({},L&&{next:ie=>{C=this.createOrUpdateToast(t,ie,C,"success",0===D?D:Date.now()-D)}}),j&&{error:ie=>{C=this.createOrUpdateToast(t,ie,C,"error",0===D?D:Date.now()-D)}})))))}}close(t){this._componentRef&&this._componentRef.ref.instance.closeToast(t)}init(){Xa(this.platformId)||(this._componentRef=this._viewService.createComponent(Y4).setInput("defaultConfig",this._defaultConfig).appendTo(document.body))}createOrUpdateToast(t,r,i,s,u){let h=null,p={};if(({content:h,options:p}=this.getContentAndOptions(s,t[s]||(this._defaultConfig[s]?this._defaultConfig[s].content:""))),h=((n,e)=>(n=>"function"==typeof n)(n)?n(e):n)(h,r),i){i.updateMessage(h);const y=Object.assign(Object.assign({type:s,duration:u+Y2[s]},p),p.duration&&{duration:u+p.duration});i.updateToast(y)}else this.createToast(h,s,p);return i}createToast(t,r,i,s){var u,h,p,y,C,D;this._isInitialized||(this._isInitialized=!0,this.init());const R=Date.now(),L=null!==(u=null==i?void 0:i.id)&&void 0!==u?u:R.toString();if(!this.isDuplicate(L)&&(!(null===(h=i.persist)||void 0===h?void 0:h.enabled)||(null===(p=i.persist)||void 0===p?void 0:p.enabled)&&this.handleStorageValue(L,i))){const j=Object.assign({ariaLive:null!==(y=null==i?void 0:i.ariaLive)&&void 0!==y?y:"polite",createdAt:R,duration:null!==(C=null==i?void 0:i.duration)&&void 0!==C?C:Y2[r],id:L,message:t,role:null!==(D=null==i?void 0:i.role)&&void 0!==D?D:"status",type:r,visible:!0,observableMessages:null!=s?s:void 0},i);return new X2(j).appendTo(this._componentRef.ref.instance)}}isDuplicate(t){return this._componentRef.ref.instance.hasToast(t)}handleStorageValue(t,r){let i=1;const s=Object.assign(Object.assign({},this._defaultPersistConfig),r.persist),u="local"===s.storage?localStorage:sessionStorage,h=s.key.replace(/\${id}/g,t);let p=u.getItem(h);return p?(p=parseInt(p,10),i=p>0?p-1:p):i=s.count,u.setItem(h,i.toString()),i}getContentAndOptions(t,r){let i,s=Object.assign(Object.assign({},this._defaultConfig),this._defaultConfig[t]);if("string"==typeof r||jR(r)||HR(r))i=r;else{let u;({content:i}=r),u=(0,f4._T)(r,["content"]),s=Object.assign(Object.assign({},s),u)}return{content:i,options:s}}createLoadingToast(t){let r=null,i={};return({content:r,options:i}=this.getContentAndOptions("loading",t)),this.loading(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(K2),c.LFG(c.Lbi),c.LFG($R,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),e8=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:$R,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[Ya,v4]]}),n})();function t8(n,e){1&n&&(c.TgZ(0,"mat-error"),c.TgZ(1,"strong"),c._uU(2,"Email is required"),c.qZA(),c.qZA())}function n8(n,e){1&n&&(c.TgZ(0,"mat-error"),c.TgZ(1,"strong"),c._uU(2,"please enter a correct email fromat"),c.qZA(),c.qZA())}function r8(n,e){1&n&&(c.TgZ(0,"mat-error"),c.TgZ(1,"strong"),c._uU(2,"password is required"),c.qZA(),c.qZA())}let i8=(()=>{class n{constructor(t,r,i){this.authService=t,this.router=r,this.toast=i,this.loginForm=new Qc({email:new ho("",[ao.required,ao.email]),password:new ho("",ao.required)})}ngOnInit(){}get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}submit(){if(!this.loginForm.valid)return;const{email:t,password:r}=this.loginForm.value;this.authService.login(t,r).pipe(this.toast.observe({success:"logged in successfully",loading:"logging in...",error:"There was an error"})).subscribe(()=>{this.router.navigate([""])})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(PR),c.Y36(jr),c.Y36(ej))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-login"]],decls:20,vars:4,consts:[[1,"form-container","mat-elevation-z5"],[3,"formGroup","ngSubmit"],["matInput","","placeholder","Email address","formControlName","email"],[4,"ngIf"],["matInput","","placeholder","password","formControlName","password"],[1,"center","margin-top"],["mat-stroked-button","","color","primary","type","submit"],["routerLink","/sign-up",1,"sign-up-link"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"div",0),c.TgZ(2,"h1"),c._uU(3,"Login"),c.qZA(),c.TgZ(4,"form",1),c.NdJ("ngSubmit",function(){return r.submit()}),c.TgZ(5,"mat-form-field"),c._UZ(6,"input",2),c.YNc(7,t8,3,0,"mat-error",3),c.YNc(8,n8,3,0,"mat-error",3),c.qZA(),c.TgZ(9,"mat-form-field"),c._UZ(10,"input",4),c.YNc(11,r8,3,0,"mat-error",3),c.qZA(),c.TgZ(12,"div",5),c.TgZ(13,"button",6),c._uU(14," login "),c.qZA(),c.qZA(),c.TgZ(15,"span",5),c._uU(16," New to our paltform? "),c.TgZ(17,"a",7),c._uU(18,"Sign-up"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(19,"app-footer")),2&t&&(c.xp6(4),c.Q6J("formGroup",r.loginForm),c.xp6(3),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.required),c.xp6(1),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.email),c.xp6(3),c.Q6J("ngIf",null==r.password||null==r.password.errors?null:r.password.errors.required))},directives:[n0,at,Zc,Ns,$A,UE,nc,pl,fd,Fn,FE,Ug,Kf,OR],styles:["center[_ngcontent-%COMP%]{display:flex;justify-content:center}.margin-top[_ngcontent-%COMP%]{margin-top:16px}.text-center[_ngcontent-%COMP%]{text-align:center;color:#fff}.form-container[_ngcontent-%COMP%]{display:block;max-width:300px;margin:auto;background:#eceff1;padding:20px;border-radius:16px;opacity:.6}.form-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;opacity:transparent}h1[_ngcontent-%COMP%]{-webkit-text-size-adjust:60px;text-size-adjust:60px;font-style:bold}body[_ngcontent-%COMP%]{background-image:url(https://wallpaperaccess.com/full/263822.jpg);background-size:cover;background-position:center center}.form-container[_ngcontent-%COMP%]{margin-top:47px;margin-bottom:47px}"]}),n})();function s8(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," name is required "),c.qZA())}function o8(n,e){1&n&&(c.TgZ(0,"mat-error"),c.TgZ(1,"strong"),c._uU(2,"Email is required"),c.qZA(),c.qZA())}function a8(n,e){1&n&&(c.TgZ(0,"mat-error"),c.TgZ(1,"strong"),c._uU(2,"please enter a correct email fromat"),c.qZA(),c.qZA())}function l8(n,e){1&n&&(c.TgZ(0,"mat-error"),c.TgZ(1,"strong"),c._uU(2,"password is required"),c.qZA(),c.qZA())}function c8(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," confirm password is required "),c.qZA())}function u8(n,e){1&n&&(c.TgZ(0,"mat-error"),c._uU(1," passwords should match "),c.qZA())}function d8(){return n=>{var e,t;const r=null===(e=n.get("password"))||void 0===e?void 0:e.value,i=null===(t=n.get("confirmPassword"))||void 0===t?void 0:t.value;return r&&i&&r!==i?{passwordDontMatch:!0}:null}}const h8=[{path:"",component:h4},{path:"login",component:i8},{path:"sign-up",component:(()=>{class n{constructor(t,r,i){this.authService=t,this.toast=r,this.router=i,this.signUpForm=new Qc({name:new ho("",ao.required),email:new ho("",[ao.email,ao.required]),password:new ho("",ao.required),confirmPassword:new ho("",ao.required)},{validators:d8})}ngOnInit(){}get name(){return this.signUpForm.get("name")}get email(){return this.signUpForm.get("email")}get password(){return this.signUpForm.get("password")}get confirmPassword(){return this.signUpForm.get("confirmPassword")}submit(){if(!this.signUpForm.valid)return;const{name:t,email:r,password:i}=this.signUpForm.value;this.authService.signUp(t,r,i).pipe(this.toast.observe({success:"congrats! you are all signed up",loading:"signing in",error:({message:s})=>`${s}`})).subscribe(()=>{this.router.navigate(["/login"])})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(PR),c.Y36(ej),c.Y36(jr))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-sign-up"]],decls:23,vars:7,consts:[[1,"form-container","mat-elevation-z5"],[3,"formGroup","ngSubmit"],["matInput","","placeholder","name","formControlName","name"],[4,"ngIf"],["matInput","","placeholder","Email address","formControlName","email"],["matInput","","placeholder","password","formControlName","password"],["matInput","","placeholder","confirm password","formControlName","confirmPassword"],[1,"center","margin-top"],["mat-stroked-button","","color","primary","type","submit",3,"click"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"div",0),c.TgZ(2,"h1"),c._uU(3,"Sign up a new user"),c.qZA(),c.TgZ(4,"form",1),c.NdJ("ngSubmit",function(){return r.submit()}),c.TgZ(5,"mat-form-field"),c._UZ(6,"input",2),c.YNc(7,s8,2,0,"mat-error",3),c.qZA(),c.TgZ(8,"mat-form-field"),c._UZ(9,"input",4),c.YNc(10,o8,3,0,"mat-error",3),c.YNc(11,a8,3,0,"mat-error",3),c.qZA(),c.TgZ(12,"mat-form-field"),c._UZ(13,"input",5),c.YNc(14,l8,3,0,"mat-error",3),c.qZA(),c.TgZ(15,"mat-form-field"),c._UZ(16,"input",6),c.YNc(17,c8,2,0,"mat-error",3),c.qZA(),c.YNc(18,u8,2,0,"mat-error",3),c.TgZ(19,"div",7),c.TgZ(20,"button",8),c.NdJ("click",function(){return r.submit()}),c._uU(21,"Sign Up!"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(22,"app-footer")),2&t&&(c.xp6(4),c.Q6J("formGroup",r.signUpForm),c.xp6(3),c.Q6J("ngIf",null==r.name||null==r.name.errors?null:r.name.errors.required),c.xp6(3),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.required),c.xp6(1),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.email),c.xp6(3),c.Q6J("ngIf",null==r.password||null==r.password.errors?null:r.password.errors.required),c.xp6(3),c.Q6J("ngIf",null==r.confirmPassword||null==r.confirmPassword.errors?null:r.confirmPassword.errors.required),c.xp6(1),c.Q6J("ngIf",null==r.signUpForm.errors?null:r.signUpForm.errors.passwordDontMatch))},directives:[n0,at,Zc,Ns,$A,UE,nc,pl,fd,Fn,FE,Ug,OR],styles:["center[_ngcontent-%COMP%]{display:flex;justify-content:center}.margin-top[_ngcontent-%COMP%]{margin-top:16px}.text-center[_ngcontent-%COMP%]{text-align:center;color:#fff}.form-container[_ngcontent-%COMP%]{display:block;max-width:300px;margin:auto;background:#eceff1;padding:20px;border-radius:16px;opacity:.6}.form-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;opacity:transparent}h1[_ngcontent-%COMP%]{-webkit-text-size-adjust:60px;text-size-adjust:60px;font-style:bold}body[_ngcontent-%COMP%]{background-image:url(https://wallpaperaccess.com/full/263822.jpg);background-size:cover;background-position:center center}.form-container[_ngcontent-%COMP%]{margin-top:40px}"]}),n})()},{path:"cart",component:u4,canActivate:[(()=>{class n{constructor(t,r){this.Auth=t,this.router=r}canActivate(t,r){return this.Auth.authState.pipe((0,_o.q)(1),(0,ot.U)(i=>!!i||(this.router.navigate(["login"]),!1)))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Dp),c.LFG(jr))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})()]},{path:"card",component:w2},{path:"produdDetail/:title/:des/:img/:price",component:(()=>{class n{constructor(t,r,i){this.active=t,this.router=r,this.cartService=i,this.title="",this.img="",this.des="",this.price=0}ngOnInit(){this.title=this.active.snapshot.params.title,this.img=this.active.snapshot.params.img,this.des=this.active.snapshot.params.des,this.price=this.active.snapshot.params.price}addProduct(){const t={img:this.img,title:this.title,des:this.des,price:this.price};this.cartService.createPost(t),console.log(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(_u),c.Y36(jr),c.Y36(PT))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-produd-detail"]],decls:52,vars:7,consts:[[1,"container"],[1,"card"],[1,"container-fliud"],[1,"wrapper","row"],[1,"preview","col-md-6"],[1,"preview-pic","tab-content"],["id","pic-1",1,"tab-pane","active"],[3,"src"],[1,"details","col-md-6"],[1,"product-title"],[1,"rating"],[1,"stars"],[1,"fa","fa-star","checked"],[1,"fa","fa-star"],[1,"review-no"],[1,"product-description"],[1,"price"],[1,"vote"],[1,"sizes"],["data-toggle","tooltip","title","small",1,"size"],["data-toggle","tooltip","title","medium",1,"size"],["data-toggle","tooltip","title","large",1,"size"],["data-toggle","tooltip","title","xtra large",1,"size"],[1,"colors"],["data-toggle","tooltip","title","Not In store",1,"color","orange","not-available"],[1,"color","green"],[1,"color","blue"],[1,"action"],["type","button",1,"add-to-cart","btn","btn-default",3,"click"]],template:function(t,r){1&t&&(c._UZ(0,"app-header"),c.TgZ(1,"div",0),c.TgZ(2,"div",1),c.TgZ(3,"div",2),c.TgZ(4,"div",3),c.TgZ(5,"div",4),c.TgZ(6,"div",5),c.TgZ(7,"div",6),c._UZ(8,"img",7),c.qZA(),c.qZA(),c.qZA(),c.TgZ(9,"div",8),c.TgZ(10,"h3",9),c._uU(11),c.qZA(),c.TgZ(12,"div",10),c.TgZ(13,"div",11),c._UZ(14,"span",12),c._UZ(15,"span",12),c._UZ(16,"span",12),c._UZ(17,"span",13),c._UZ(18,"span",13),c.qZA(),c.TgZ(19,"span",14),c._uU(20,"41 reviews"),c.qZA(),c.qZA(),c.TgZ(21,"p",15),c._uU(22),c.qZA(),c.TgZ(23,"h4",16),c._uU(24,"current price: "),c.TgZ(25,"span"),c._uU(26),c.ALo(27,"currency"),c.qZA(),c.qZA(),c.TgZ(28,"p",17),c.TgZ(29,"strong"),c._uU(30,"91%"),c.qZA(),c._uU(31," of buyers enjoyed this product! "),c.TgZ(32,"strong"),c._uU(33,"(87 votes)"),c.qZA(),c.qZA(),c.TgZ(34,"h5",18),c._uU(35,"sizes: "),c.TgZ(36,"span",19),c._uU(37,"s"),c.qZA(),c.TgZ(38,"span",20),c._uU(39,"m"),c.qZA(),c.TgZ(40,"span",21),c._uU(41,"l"),c.qZA(),c.TgZ(42,"span",22),c._uU(43,"xl"),c.qZA(),c.qZA(),c.TgZ(44,"h5",23),c._uU(45,"colors: "),c._UZ(46,"span",24),c._UZ(47,"span",25),c._UZ(48,"span",26),c.qZA(),c.TgZ(49,"div",27),c.TgZ(50,"button",28),c.NdJ("click",function(){return r.addProduct()}),c._uU(51,"add to cart"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(8),c.s9C("src",r.img,c.LSH),c.xp6(3),c.Oqu(r.title),c.xp6(11),c.Oqu(r.des),c.xp6(4),c.Oqu(c.xi3(27,4,r.price,"INR")))},directives:[n0],pipes:[Ga],styles:["body[_ngcontent-%COMP%]{font-family:open sans;overflow-x:hidden}img[_ngcontent-%COMP%]{max-width:70%}.preview[_ngcontent-%COMP%]{display:flex;flex-direction:column}@media screen and (max-width: 996px){.preview[_ngcontent-%COMP%]{margin-bottom:20px}}.tab-content[_ngcontent-%COMP%]{overflow:hidden}.tab-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;animation-name:opacity;animation-duration:.3s}.card[_ngcontent-%COMP%]{margin-top:50px;background:#eee;padding:3em;line-height:1.5em}@media screen and (min-width: 997px){.wrapper[_ngcontent-%COMP%]{display:flex}}.details[_ngcontent-%COMP%]{display:flex;flex-direction:column}.colors[_ngcontent-%COMP%]{flex-grow:1}.product-title[_ngcontent-%COMP%], .price[_ngcontent-%COMP%], .sizes[_ngcontent-%COMP%], .colors[_ngcontent-%COMP%]{text-transform:UPPERCASE;font-weight:700}.checked[_ngcontent-%COMP%], .price[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#ff9f1a}.product-title[_ngcontent-%COMP%], .rating[_ngcontent-%COMP%], .product-description[_ngcontent-%COMP%], .price[_ngcontent-%COMP%], .vote[_ngcontent-%COMP%], .sizes[_ngcontent-%COMP%]{margin-bottom:15px}.product-title[_ngcontent-%COMP%]{margin-top:0}.size[_ngcontent-%COMP%]{margin-right:10px}.size[_ngcontent-%COMP%]:first-of-type{margin-left:40px}.color[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin-right:10px;height:2em;width:2em;border-radius:2px}.color[_ngcontent-%COMP%]:first-of-type{margin-left:20px}.add-to-cart[_ngcontent-%COMP%]{background:grey;padding:1.2em 1.5em;border:none;text-transform:UPPERCASE;font-weight:700;color:#fff;transition:background .3s ease}.add-to-cart[_ngcontent-%COMP%]:hover, .like[_ngcontent-%COMP%]:hover{background:gray;color:#fff}.orange[_ngcontent-%COMP%]{background:#ff9f1a}.green[_ngcontent-%COMP%]{background:#85ad00}.blue[_ngcontent-%COMP%]{background:#0076ad}.tooltip-inner[_ngcontent-%COMP%]{padding:1.3em}@keyframes opacity{0%{opacity:0;transform:scale(3)}to{opacity:1;transform:scale(1)}}"]}),n})()}];let f8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[[ix.forRoot(h8)],ix]}),n})(),p8=(()=>{class n{constructor(){this.title="textiles"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},directives:[Gd],styles:[""]}),n})();const zR_firebase={projectId:"angular-auth-adb68",appId:"1:851593792064:web:0ca1c96e3b33139b5a2da5",storageBucket:"angular-auth-adb68.appspot.com",apiKey:"AIzaSyDymnogQaUhy7jAn7TPKbuq8reM8WetSJI",authDomain:"angular-auth-adb68.firebaseapp.com",messagingSenderId:"851593792064"},tj="@firebase/database";let qR="";function rj(n){qR=n}class _8{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,x.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,x.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class y8{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,x.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const ij=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _8(e)}}catch(e){}return new y8},Ap=ij("localStorage"),GR=ij("sessionStorage"),Wm=new we.Yd("@firebase/database"),sj=function(){let n=1;return function(){return n++}}(),oj=function(n){const e=(0,x.dS)(n),t=new x.gQ;t.update(e);const r=t.digest();return x.US.encodeByteArray(r)},r0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=r0.apply(null,r):e+="object"==typeof r?(0,x.Pz)(r):r,e+=" "}return e};let Mp=null,aj=!0;const lj=function(n,e){(0,x.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Wm.logLevel=we.in.VERBOSE,Mp=Wm.log.bind(Wm),e&&GR.set("logging_enabled",!0)):"function"==typeof n?Mp=n:(Mp=null,GR.remove("logging_enabled"))},Ri=function(...n){if(!0===aj&&(aj=!1,null===Mp&&!0===GR.get("logging_enabled")&&lj(!0)),Mp){const e=r0.apply(null,n);Mp(e)}},s0=function(n){return function(...e){Ri(n,...e)}},WR=function(...n){const e="FIREBASE INTERNAL ERROR: "+r0(...n);Wm.error(e)},Cc=function(...n){const e=`FIREBASE FATAL ERROR: ${r0(...n)}`;throw Wm.error(e),new Error(e)},Ks=function(...n){const e="FIREBASE WARNING: "+r0(...n);Wm.warn(e)},jT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ku="[MIN_NAME]",Ic="[MAX_NAME]",xp=function(n,e){if(n===e)return 0;if(n===ku||e===Ic)return-1;if(e===ku||n===Ic)return 1;{const t=HT(n),r=HT(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},w8=function(n,e){return n===e?0:n<e?-1:1},o0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,x.Pz)(e))},ZR=function(n){if("object"!=typeof n||null===n)return(0,x.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,x.Pz)(e[r]),t+=":",t+=ZR(n[e[r]]);return t+="}",t},cj=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Pi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const uj=function(n){(0,x.hu)(!jT(n),"Invalid JSON number");const r=1023;let i,s,u,h,p;0===n?(s=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const y=[];for(p=52;p;p-=1)y.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const C=y.join("");let D="";for(p=0;p<64;p+=8){let R=parseInt(C.substr(p,8),2).toString(16);1===R.length&&(R="0"+R),D+=R}return D.toLowerCase()},T8=new RegExp("^-?(0*)\\d{1,10}$"),dj=-2147483648,KR=2147483647,HT=function(n){if(T8.test(n)){const e=Number(n);if(e>=dj&&e<=KR)return e}return null},Zm=function(n){try{n()}catch(e){setTimeout(()=>{throw Ks("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},a0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class S8{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ks(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class A8{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ri("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ks(e)}}let l0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const mj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,yj="websocket",vj="long_polling";class QR{constructor(e,t,r,i,s=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ap.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ap.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function bj(n,e,t){let r;if((0,x.hu)("string"==typeof e,"typeof type must == string"),(0,x.hu)("object"==typeof t,"typeof params must == object"),e===yj)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==vj)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function x8(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Pi(t,(s,u)=>{i.push(s+"="+u)}),r+i.join("&")}class k8{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,x.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,x.p$)(this.counters_)}}const XR={},JR={};function eP(n){const e=n.toString();return XR[e]||(XR[e]=new k8),XR[e]}class R8{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Zm(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Km{constructor(e,t,r,i,s,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=s0(e),this.stats_=eP(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),bj(t,vj,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new R8(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,x.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new tP((...s)=>{const[u,h,p,y,C]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&mj.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Km.forceAllow_=!0}static forceDisallow(){Km.forceDisallow_=!0}static isAvailable(){return!((0,x.Yr)()||!Km.forceAllow_&&(Km.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,x.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,x.h$)(t),i=cj(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,x.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,x.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class tP{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,x.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=sj(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=tP.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Ri("frame writing exception"),h.stack&&Ri(h.stack),Ri(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ri("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,x.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ri("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let c0=null;"undefined"!=typeof MozWebSocket?c0=MozWebSocket:"undefined"!=typeof WebSocket&&(c0=WebSocket);let u0=(()=>{class n{constructor(t,r,i,s,u,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=s0(this.connId),this.stats_=eP(r),this.connURL=n.connectionURL_(r,h,p,s),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s){const u={v:"5"};return!(0,x.Yr)()&&"undefined"!=typeof location&&location.hostname&&mj.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),s&&(u.ac=s),bj(t,yj,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ap.set("previous_websocket_failure",!0);try{if((0,x.Yr)()){const s={headers:{"User-Agent":`Firebase/5/${qR}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(s.proxy={origin:h}),this.mySock=new c0(this.connURL,[],s)}else this.mySock=new c0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==c0&&!n.forceDisallow_}static previouslyFailed(){return Ap.isInMemoryStorage||!0===Ap.get("previous_websocket_failure")}markConnectionHealthy(){Ap.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,x.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,x.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,x.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=cj(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class nP{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Km,u0]}initTransports_(e){const t=u0&&u0.isAvailable();let r=t&&!u0.previouslyFailed();if(e.webSocketOnly&&(t||Ks("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[u0];else{const i=this.transports_=[];for(const s of nP.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Rj{constructor(e,t,r,i,s,u,h,p,y,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=p,this.onKill_=y,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=s0("c:"+this.id+":"),this.transportManager_=new nP(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=a0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=o0("t",e),r=o0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=o0("t",e),r=o0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=o0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?WR("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):WR("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ks("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),a0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):a0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ap.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Pj{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Nj{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,x.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,x.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class zT extends Nj{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,x.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new zT}getInitialEvent(e){return(0,x.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Nn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Cn(){return new Nn("")}function Qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function uh(n){return n.pieces_.length-n.pieceNum_}function $n(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Nn(n.pieces_,e)}function iP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function d0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Vj(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Nn(e,0)}function fr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Nn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Nn(t,0)}function Xt(n){return n.pieceNum_>=n.pieces_.length}function Ys(n,e){const t=Qt(n),r=Qt(e);if(null===t)return e;if(t===r)return Ys($n(n),$n(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function t5(n,e){const t=d0(n,0),r=d0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=xp(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function sP(n,e){if(uh(n)!==uh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Na(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(uh(n)>uh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class n5{constructor(e,t){this.errorPrefix_=t,this.parts_=d0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,x.ug)(this.parts_[r]);Uj(this)}}function Uj(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+kp(n))}function kp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class oP extends Nj{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new oP}getInitialEvent(e){return(0,x.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const h0=1e3;let GT,Op=(()=>{class n extends Pj{constructor(t,r,i,s,u,h,p,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=s0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=h0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,x.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");oP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&zT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,u={r:s,a:t,b:r};this.log_((0,x.Pz)(u)),(0,x.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new x.BH,i={p:t._path.toString(),q:t._queryObject},s={action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,p,!1,null),r.resolve(p)):r.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[u];void 0===h||s!==h||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,s){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,x.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,x.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,p=>{const y=p.d,C=p.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==C&&this.removeListen_(i,s),t.onComplete&&t.onComplete(C,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,x.r3)(t,"w")){const i=(0,x.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Ks(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,x.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,x.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const u=s.s,h=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,x.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const u={p:t};s&&(u.q=i,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,x.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):WR("Unrecognized action received from server: "+(0,x.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,x.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=h0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=h0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=h0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,M.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,y=null;const C=function(){y?y.close():(p=!0,s())};t.realtime_={close:C,sendRequest:function(L){(0,x.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(L)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[L,j]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);p?Ri("getToken() completed but was canceled"):(Ri("getToken() completed. Creating connection."),t.authToken_=L&&L.accessToken,t.appCheckToken_=j&&j.token,y=new Rj(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,ie=>{Ks(ie+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(L){t.log_("Failed to get token: "+L),p||(t.repoInfo_.nodeAdmin&&Ks(L),C())}}})()}interrupt(t){Ri("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ri("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,x.xb)(this.interruptReasons_)&&(this.reconnectDelay_=h0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>ZR(u)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Nn(t).toString();let s;if(this.listens.has(i)){const u=this.listens.get(i);s=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Ri("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ri("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,x.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+qR.replace(/\./g,"-")]=1,(0,x.uI)()?t["framework.cordova"]=1:(0,x.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=zT.getInstance().currentlyOnline();return(0,x.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class en{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new en(e,t)}}class qT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new en(ku,e),i=new en(ku,t);return 0!==this.compare(r,i)}minPost(){return en.MIN}}class Hj extends qT{static get __EMPTY_NODE(){return GT}static set __EMPTY_NODE(e){GT=e}compare(e,t){return xp(e.name,t.name)}isDefinedOn(e){throw(0,x.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return en.MIN}maxPost(){return new en(Ic,GT)}makePost(e,t){return(0,x.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new en(e,GT)}toString(){return".key"}}const Tc=new Hj;class WT{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let lP,xl=(()=>{class n{constructor(t,r,i,s,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=s?s:Eo.EMPTY_NODE,this.right=null!=u?u:Eo.EMPTY_NODE}copy(t,r,i,s,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=s?s:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const u=i(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===u?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Eo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Eo.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Eo{constructor(e,t=Eo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Eo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,xl.BLACK,null,null))}remove(e){return new Eo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new WT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new WT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new WT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new WT(this.root_,null,this.comparator_,!0,e)}}function h5(n,e){return xp(n.name,e.name)}function aP(n,e){return xp(n,e)}Eo.EMPTY_NODE=new class d5{copy(e,t,r,i,s){return this}insert(e,t,r){return new xl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const $j=function(n){return"number"==typeof n?"number:"+uj(n):"string:"+n},zj=function(n){if(n.isLeafNode()){const e=n.val();(0,x.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,x.r3)(e,".sv"),"Priority must be a string or number.")}else(0,x.hu)(n===lP||n.isEmpty(),"priority of unexpected type.");(0,x.hu)(n===lP||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let qj,Gj,Wj,Ym=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,x.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),zj(this.priorityNode_)}static set __childrenNodeConstructor(t){qj=t}static get __childrenNodeConstructor(){return qj}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Xt(t)?this:".priority"===Qt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Qt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,x.hu)(".priority"!==i||1===uh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild($n(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+$j(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?uj(this.value_):this.value_,this.lazyHash_=oj(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,x.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,x.hu)(s>=0,"Unknown leaf type: "+r),(0,x.hu)(u>=0,"Unknown leaf type: "+i),s===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Yn=new class m5 extends qT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?xp(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return en.MIN}maxPost(){return new en(Ic,new Ym("[PRIORITY-POST]",Wj))}makePost(e,t){const r=Gj(e);return new en(t,new Ym("[PRIORITY-POST]",r))}toString(){return".priority"}},_5=Math.log(2);class y5{constructor(e){this.count=parseInt(Math.log(e+1)/_5,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ZT=function(n,e,t,r){n.sort(e);const i=function(p,y){const C=y-p;let D,R;if(0===C)return null;if(1===C)return D=n[p],R=t?t(D):D,new xl(R,D.node,xl.BLACK,null,null);{const L=parseInt(C/2,10)+p,j=i(p,L),ie=i(L+1,y);return D=n[L],R=t?t(D):D,new xl(R,D.node,xl.BLACK,j,ie)}},h=function(p){let y=null,C=null,D=n.length;const R=function(j,ie){const Ae=D-j,tt=D;D-=j;const dt=i(Ae+1,tt),At=n[Ae],_t=t?t(At):At;L(new xl(_t,At.node,ie,null,dt))},L=function(j){y?(y.left=j,y=j):(C=j,y=j)};for(let j=0;j<p.count;++j){const ie=p.nextBitIsOne(),Ae=Math.pow(2,p.count-(j+1));ie?R(Ae,xl.BLACK):(R(Ae,xl.BLACK),R(Ae,xl.RED))}return C}(new y5(n.length));return new Eo(r||e,h)};let cP;const Qm={};class Ou{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,x.hu)(Qm&&Yn,"ChildrenNode.ts has not been loaded"),cP=cP||new Ou({".priority":Qm},{".priority":Yn}),cP}get(e){const t=(0,x.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Eo?t:null}hasIndex(e){return(0,x.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,x.hu)(e!==Tc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(en.Wrap);let h,u=s.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=s.getNext();h=i?ZT(r,e.getCompare()):Qm;const p=e.toString(),y=Object.assign({},this.indexSet_);y[p]=e;const C=Object.assign({},this.indexes_);return C[p]=h,new Ou(C,y)}addToIndexes(e,t){const r=(0,x.UI)(this.indexes_,(i,s)=>{const u=(0,x.DV)(this.indexSet_,s);if((0,x.hu)(u,"Missing index implementation for "+s),i===Qm){if(u.isDefinedOn(e.node)){const h=[],p=t.getIterator(en.Wrap);let y=p.getNext();for(;y;)y.name!==e.name&&h.push(y),y=p.getNext();return h.push(e),ZT(h,u.getCompare())}return Qm}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new en(e.name,h))),p.insert(e,e.node)}});return new Ou(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,x.UI)(this.indexes_,i=>{if(i===Qm)return i;{const s=t.get(e.name);return s?i.remove(new en(e.name,s)):i}});return new Ou(r,this.indexSet_)}}let f0,Ht=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&zj(this.priorityNode_),this.children_.isEmpty()&&(0,x.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return f0||(f0=new n(new Eo(aP),null,Ou.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||f0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?f0:r}}getChild(t){const r=Qt(t);return null===r?this:this.getImmediateChild(r).getChild($n(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,x.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new en(t,r);let s,u;r.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?f0:this.priorityNode_;return new n(s,h,u)}}updateChild(t,r){const i=Qt(t);if(null===i)return r;{(0,x.hu)(".priority"!==Qt(t)||1===uh(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild($n(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,u=!0;if(this.forEachChild(Yn,(h,p)=>{r[h]=p.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):u=!1}),!t&&u&&s<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+$j(this.getPriority().val())+":"),this.forEachChild(Yn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":oj(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const u=s.getPredecessorKey(new en(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new en(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new en(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,en.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,en.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===p0?-1:0}withIndex(t){if(t===Tc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Tc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Yn),s=r.getIterator(Yn);let u=i.getNext(),h=s.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=s.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===Tc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const p0=new class v5 extends Ht{constructor(){super(new Eo(aP),Ht.EMPTY_NODE,Ou.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ht.EMPTY_NODE}isEmpty(){return!1}};function br(n,e=null){if(null===n)return Ht.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,x.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ym(n,br(e));if(n instanceof Array){let t=Ht.EMPTY_NODE;return Pi(n,(r,i)=>{if((0,x.r3)(n,r)&&"."!==r.substring(0,1)){const s=br(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(br(e))}{const t=[];let r=!1;if(Pi(n,(u,h)=>{if("."!==u.substring(0,1)){const p=br(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new en(u,p)))}}),0===t.length)return Ht.EMPTY_NODE;const s=ZT(t,h5,u=>u.name,aP);if(r){const u=ZT(t,Yn.getCompare());return new Ht(s,br(e),new Ou({".priority":u},{".priority":Yn}))}return new Ht(s,br(e),Ou.Default)}}Object.defineProperties(en,{MIN:{value:new en(ku,Ht.EMPTY_NODE)},MAX:{value:new en(Ic,p0)}}),Hj.__EMPTY_NODE=Ht.EMPTY_NODE,Ym.__childrenNodeConstructor=Ht,function f5(n){lP=n}(p0),function g5(n){Wj=n}(p0),function p5(n){Gj=n}(br);class uP extends qT{constructor(e){super(),this.indexPath_=e,(0,x.hu)(!Xt(e)&&".priority"!==Qt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?xp(e.name,t.name):s}makePost(e,t){const r=br(e),i=Ht.EMPTY_NODE.updateChild(this.indexPath_,r);return new en(t,i)}maxPost(){const e=Ht.EMPTY_NODE.updateChild(this.indexPath_,p0);return new en(Ic,e)}toString(){return d0(this.indexPath_,0).join("/")}}const dP=new class w5 extends qT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?xp(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return en.MIN}maxPost(){return en.MAX}makePost(e,t){const r=br(e);return new en(t,r)}toString(){return".value"}},Xm="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",E5=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=Xm.charAt(t%64),t=Math.floor(t/64);(0,x.hu)(0===t,"Cannot push at time == 0");let u=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=Xm.charAt(e[i]);return(0,x.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),Yj=function(n){if(n===""+KR)return"-";const e=HT(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ic;const s=Xm.charAt(Xm.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},Qj=function(n){if(n===""+dj)return ku;const e=HT(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+KR:(delete t[t.length-1],t.join("")):(t[t.length-1]=Xm.charAt(Xm.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Xj(n){return{type:"value",snapshotNode:n}}function Jm(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function g0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function m0(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class fP{constructor(e){this.index_=e}updateChild(e,t,r,i,s,u){(0,x.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(g0(t,h)):(0,x.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(Jm(t,r)):u.trackChildChange(m0(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Yn,(i,s)=>{t.hasChild(i)||r.trackChildChange(g0(i,s))}),t.isLeafNode()||t.forEachChild(Yn,(i,s)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(s)||r.trackChildChange(m0(i,s,u))}else r.trackChildChange(Jm(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ht.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class _0{constructor(e){this.indexedFilter_=new fP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=_0.getStartPost_(e),this.endPost_=_0.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,u){return this.matches(new en(t,r))||(r=Ht.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ht.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ht.EMPTY_NODE);const s=this;return t.forEachChild(Yn,(u,h)=>{s.matches(new en(u,h))||(i=i.updateImmediateChild(u,Ht.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class I5{constructor(e){this.rangedFilter_=new _0(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,u){return this.rangedFilter_.matches(new en(t,r))||(r=Ht.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,u):this.fullLimitUpdateChild_(e,t,r,s,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ht.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Ht.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let s,u,h,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Ht.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const D=this.index_.getCompare();h=(R,L)=>D(L,R)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let y=0,C=!1;for(;p.hasNext();){const D=p.getNext();!C&&h(s,D)<=0&&(C=!0),C&&y<this.limit_&&h(D,u)<=0?y++:i=i.updateImmediateChild(D.name,Ht.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let u;if(this.reverse_){const D=this.index_.getCompare();u=(R,L)=>D(L,R)}else u=this.index_.getCompare();const h=e;(0,x.hu)(h.numChildren()===this.limit_,"");const p=new en(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(p);if(h.hasChild(t)){const D=h.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=R&&(R.name===t||h.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const L=null==R?1:u(R,p);if(C&&!r.isEmpty()&&L>=0)return null!=s&&s.trackChildChange(m0(t,r,D)),h.updateImmediateChild(t,r);{null!=s&&s.trackChildChange(g0(t,D));const ie=h.updateImmediateChild(t,Ht.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(null!=s&&s.trackChildChange(Jm(R.name,R.node)),ie.updateImmediateChild(R.name,R.node)):ie}}return r.isEmpty()?e:C&&u(y,p)>=0?(null!=s&&(s.trackChildChange(g0(y.name,y.node)),s.trackChildChange(Jm(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Ht.EMPTY_NODE)):e}}class KT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,x.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,x.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ku}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,x.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,x.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ic}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,x.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Yn}copy(){const e=new KT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function pP(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function gP(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function YT(n,e){const t=n.copy();return t.index_=e,t}function Jj(n){const e={};if(n.isDefault())return e;let t;return n.index_===Yn?t="$priority":n.index_===dP?t="$value":n.index_===Tc?t="$key":((0,x.hu)(n.index_ instanceof uP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,x.Pz)(t),n.startSet_&&(e.startAt=(0,x.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,x.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,x.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,x.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function eH(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Yn&&(e.i=n.index_.toString()),e}class QT extends Pj{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=s0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,x.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=QT.getListenId_(e,r),h={};this.listens_[u]=h;const p=Jj(e._queryParams);this.restRequest_(s+".json",p,(y,C)=>{let D=C;if(404===y&&(D=null,y=null),null===y&&this.onDataUpdate_(s,D,!1,r),(0,x.DV)(this.listens_,u)===h){let R;R=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(R,null)}})}unlisten(e,t){const r=QT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Jj(e._queryParams),r=e._path.toString(),i=new x.BH;return this.restRequest_(r+".json",t,(s,u)=>{let h=u;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,x.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,x.cI)(h.responseText)}catch(y){Ks("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&Ks("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class x5{constructor(){this.rootNode_=Ht.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function XT(){return{value:null,children:new Map}}function e_(n,e,t){if(Xt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Qt(e);n.children.has(r)||n.children.set(r,XT()),e_(n.children.get(r),e=$n(e),t)}}function mP(n,e){if(Xt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Yn,(r,i)=>{e_(n,new Nn(r),i)}),mP(n,e)}}if(n.children.size>0){const t=Qt(e);return e=$n(e),n.children.has(t)&&mP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function _P(n,e,t){null!==n.value?t(e,n.value):function k5(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{_P(i,new Nn(e.toString()+"/"+r),t)})}class O5{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Pi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class N5{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new O5(e);const r=1e4+2e4*Math.random();a0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Pi(e,(i,s)=>{s>0&&(0,x.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),a0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Fa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Fa||(Fa={})),Fa))();function bP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class JT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Fa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Xt(this.path)){if(null!=this.affectedTree.value)return(0,x.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Nn(e));return new JT(Cn(),t,this.revert)}}return(0,x.hu)(Qt(this.path)===e,"operationForChild called for unrelated child."),new JT($n(this.path),this.affectedTree,this.revert)}}class y0{constructor(e,t){this.source=e,this.path=t,this.type=Fa.LISTEN_COMPLETE}operationForChild(e){return Xt(this.path)?new y0(this.source,Cn()):new y0(this.source,$n(this.path))}}class Rp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Fa.OVERWRITE}operationForChild(e){return Xt(this.path)?new Rp(this.source,Cn(),this.snap.getImmediateChild(e)):new Rp(this.source,$n(this.path),this.snap)}}class t_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Fa.MERGE}operationForChild(e){if(Xt(this.path)){const t=this.children.subtree(new Nn(e));return t.isEmpty()?null:t.value?new Rp(this.source,Cn(),t.value):new t_(this.source,Cn(),t)}return(0,x.hu)(Qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t_(this.source,$n(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class dh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Xt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Qt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class F5{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function v0(n,e,t,r,i,s){const u=r.filter(h=>h.type===t);u.sort((h,p)=>function U5(n,e,t){if(null==e.childName||null==t.childName)throw(0,x.g5)("Should only compare child_ events.");const r=new en(e.childName,e.snapshotNode),i=new en(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),u.forEach(h=>{const p=function V5(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(p,n.query_))})})}function eD(n,e){return{eventCache:n,serverCache:e}}function b0(n,e,t,r){return eD(new dh(e,t,r),n.serverCache)}function nH(n,e,t,r){return eD(n.eventCache,new dh(e,t,r))}function tD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Pp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let wP;class Qn{constructor(e,t=(()=>(wP||(wP=new Eo(w8)),wP))()){this.value=e,this.children=t}static fromObject(e){let t=new Qn(null);return Pi(e,(r,i)=>{t=t.set(new Nn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Cn(),value:this.value};if(Xt(e))return null;{const r=Qt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue($n(e),t);return null!=s?{path:fr(new Nn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Xt(e))return this;{const t=Qt(e),r=this.children.get(t);return null!==r?r.subtree($n(e)):new Qn(null)}}set(e,t){if(Xt(e))return new Qn(t,this.children);{const r=Qt(e),s=(this.children.get(r)||new Qn(null)).set($n(e),t),u=this.children.insert(r,s);return new Qn(this.value,u)}}remove(e){if(Xt(e))return this.children.isEmpty()?new Qn(null):new Qn(null,this.children);{const t=Qt(e),r=this.children.get(t);if(r){const i=r.remove($n(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new Qn(null):new Qn(this.value,s)}return this}}get(e){if(Xt(e))return this.value;{const t=Qt(e),r=this.children.get(t);return r?r.get($n(e)):null}}setTree(e,t){if(Xt(e))return t;{const r=Qt(e),s=(this.children.get(r)||new Qn(null)).setTree($n(e),t);let u;return u=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new Qn(this.value,u)}}fold(e){return this.fold_(Cn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(fr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Cn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Xt(e))return null;{const s=Qt(e),u=this.children.get(s);return u?u.findOnPath_($n(e),fr(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Cn(),t)}foreachOnPath_(e,t,r){if(Xt(e))return this;{this.value&&r(t,this.value);const i=Qt(e),s=this.children.get(i);return s?s.foreachOnPath_($n(e),fr(t,i),r):new Qn(null)}}foreach(e){this.foreach_(Cn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(fr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class kl{constructor(e){this.writeTree_=e}static empty(){return new kl(new Qn(null))}}function w0(n,e,t){if(Xt(e))return new kl(new Qn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const u=Ys(i,e);return s=s.updateChild(u,t),new kl(n.writeTree_.set(i,s))}{const i=new Qn(t),s=n.writeTree_.setTree(e,i);return new kl(s)}}}function EP(n,e,t){let r=n;return Pi(t,(i,s)=>{r=w0(r,fr(e,i),s)}),r}function rH(n,e){if(Xt(e))return kl.empty();{const t=n.writeTree_.setTree(e,new Qn(null));return new kl(t)}}function CP(n,e){return null!=Np(n,e)}function Np(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ys(t.path,e)):null}function iH(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Yn,(r,i)=>{e.push(new en(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new en(r,i.value))}),e}function hh(n,e){if(Xt(e))return n;{const t=Np(n,e);return new kl(null!=t?new Qn(t):n.writeTree_.subtree(e))}}function IP(n){return n.writeTree_.isEmpty()}function n_(n,e){return sH(Cn(),n.writeTree_,e)}function sH(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,x.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=sH(fr(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(fr(n,".priority"),r)),t}}function nD(n,e){return uH(e,n)}function q5(n,e){if(n.snap)return Na(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Na(fr(n.path,t),e))return!0;return!1}function W5(n){return n.visible}function oH(n,e,t){let r=kl.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const u=s.path;let h;if(s.snap)Na(t,u)?(h=Ys(t,u),r=w0(r,h,s.snap)):Na(u,t)&&(h=Ys(u,t),r=w0(r,Cn(),s.snap.getChild(h)));else{if(!s.children)throw(0,x.g5)("WriteRecord should have .snap or .children");if(Na(t,u))h=Ys(t,u),r=EP(r,h,s.children);else if(Na(u,t))if(h=Ys(u,t),Xt(h))r=EP(r,Cn(),s.children);else{const p=(0,x.DV)(s.children,Qt(h));if(p){const y=p.getChild($n(h));r=w0(r,Cn(),y)}}}}}return r}function aH(n,e,t,r,i){if(r||i){const s=hh(n.visibleWrites,e);return!i&&IP(s)?t:i||null!=t||CP(s,Cn())?n_(oH(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(Na(y.path,e)||Na(e,y.path))},e),t||Ht.EMPTY_NODE):null}{const s=Np(n.visibleWrites,e);if(null!=s)return s;{const u=hh(n.visibleWrites,e);return IP(u)?t:null!=t||CP(u,Cn())?n_(u,t||Ht.EMPTY_NODE):null}}}function rD(n,e,t,r){return aH(n.writeTree,n.treePath,e,t,r)}function TP(n,e){return function Z5(n,e,t){let r=Ht.EMPTY_NODE;const i=Np(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Yn,(s,u)=>{r=r.updateImmediateChild(s,u)}),r;if(t){const s=hh(n.visibleWrites,e);return t.forEachChild(Yn,(u,h)=>{const p=n_(hh(s,new Nn(u)),h);r=r.updateImmediateChild(u,p)}),iH(s).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return iH(hh(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function lH(n,e,t,r){return function K5(n,e,t,r,i){(0,x.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=fr(e,t);if(CP(n.visibleWrites,s))return null;{const u=hh(n.visibleWrites,s);return IP(u)?i.getChild(t):n_(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function iD(n,e){return function Q5(n,e){return Np(n.visibleWrites,e)}(n.writeTree,fr(n.treePath,e))}function DP(n,e,t){return function Y5(n,e,t,r){const i=fr(e,t),s=Np(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?n_(hh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function cH(n,e){return uH(fr(n.treePath,e),n.writeTree)}function uH(n,e){return{treePath:n,writeTree:e}}class tK{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,x.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,x.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,m0(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,g0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Jm(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,x.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,m0(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const dH=new class nK{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class SP{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new dh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return DP(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Pp(this.viewCache_),s=function eK(n,e,t,r,i,s){return function X5(n,e,t,r,i,s,u){let h;const p=hh(n.visibleWrites,e),y=Np(p,Cn());if(null!=y)h=y;else{if(null==t)return[];h=n_(p,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const C=[],D=u.getCompare(),R=s?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let L=R.getNext();for(;L&&C.length<i;)0!==D(L,r)&&C.push(L),L=R.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function hH(n,e,t,r,i,s){const u=e.eventCache;if(null!=iD(r,t))return e;{let h,p;if(Xt(t))if((0,x.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Pp(e),D=TP(r,y instanceof Ht?y:Ht.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),D,s)}else{const y=rD(r,Pp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Qt(t);if(".priority"===y){(0,x.hu)(1===uh(t),"Can't have a priority with additional path components");const C=u.getNode();p=e.serverCache.getNode();const D=lH(r,t,C,p);h=null!=D?n.filter.updatePriority(C,D):u.getNode()}else{const C=$n(t);let D;if(u.isCompleteForChild(y)){p=e.serverCache.getNode();const R=lH(r,t,u.getNode(),p);D=null!=R?u.getNode().getImmediateChild(y).updateChild(C,R):u.getNode().getImmediateChild(y)}else D=DP(r,y,e.serverCache);h=null!=D?n.filter.updateChild(u.getNode(),y,D,C,i,s):u.getNode()}}return b0(e,h,u.isFullyInitialized()||Xt(t),n.filter.filtersNodes())}}function sD(n,e,t,r,i,s,u,h){const p=e.serverCache;let y;const C=u?n.filter:n.filter.getIndexedFilter();if(Xt(t))y=C.updateFullNode(p.getNode(),r,null);else if(C.filtersNodes()&&!p.isFiltered()){const L=p.getNode().updateChild(t,r);y=C.updateFullNode(p.getNode(),L,null)}else{const L=Qt(t);if(!p.isCompleteForPath(t)&&uh(t)>1)return e;const j=$n(t),Ae=p.getNode().getImmediateChild(L).updateChild(j,r);y=".priority"===L?C.updatePriority(p.getNode(),Ae):C.updateChild(p.getNode(),L,Ae,j,dH,null)}const D=nH(e,y,p.isFullyInitialized()||Xt(t),C.filtersNodes());return hH(n,D,t,i,new SP(i,D,s),h)}function AP(n,e,t,r,i,s,u){const h=e.eventCache;let p,y;const C=new SP(i,e,s);if(Xt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,u),p=b0(e,y,!0,n.filter.filtersNodes());else{const D=Qt(t);if(".priority"===D)y=n.filter.updatePriority(e.eventCache.getNode(),r),p=b0(e,y,h.isFullyInitialized(),h.isFiltered());else{const R=$n(t),L=h.getNode().getImmediateChild(D);let j;if(Xt(R))j=r;else{const ie=C.getCompleteChild(D);j=null!=ie?".priority"===iP(R)&&ie.getChild(Vj(R)).isEmpty()?ie:ie.updateChild(R,r):Ht.EMPTY_NODE}p=L.equals(j)?e:b0(e,n.filter.updateChild(h.getNode(),D,j,R,C,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function fH(n,e){return n.eventCache.isCompleteForChild(e)}function pH(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function MP(n,e,t,r,i,s,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,p=e;y=Xt(t)?r:new Qn(null).setTree(t,r);const C=e.serverCache.getNode();return y.children.inorderTraversal((D,R)=>{if(C.hasChild(D)){const j=pH(0,e.serverCache.getNode().getImmediateChild(D),R);p=sD(n,p,new Nn(D),j,i,s,u,h)}}),y.children.inorderTraversal((D,R)=>{const L=!e.serverCache.isCompleteForChild(D)&&void 0===R.value;if(!C.hasChild(D)&&!L){const ie=pH(0,e.serverCache.getNode().getImmediateChild(D),R);p=sD(n,p,new Nn(D),ie,i,s,u,h)}}),p}class dK{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new fP(r.getIndex()),s=function T5(n){return n.loadsAllData()?new fP(n.getIndex()):n.hasLimit()?new I5(n):new _0(n)}(r);this.processor_=function rK(n){return{filter:n}}(s);const u=t.serverCache,h=t.eventCache,p=i.updateFullNode(Ht.EMPTY_NODE,u.getNode(),null),y=s.updateFullNode(Ht.EMPTY_NODE,h.getNode(),null),C=new dh(p,u.isFullyInitialized(),i.filtersNodes()),D=new dh(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=eD(D,C),this.eventGenerator_=new F5(this.query_)}get query(){return this.query_}}function pK(n,e){const t=Pp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Xt(e)&&!t.getImmediateChild(Qt(e)).isEmpty())?t.getChild(e):null}function gH(n){return 0===n.eventRegistrations_.length}function mH(n,e,t){const r=[];if(t){(0,x.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function _H(n,e,t,r){e.type===Fa.MERGE&&null!==e.source.queryId&&((0,x.hu)(Pp(n.viewCache_),"We should always have a full cache before handling merges"),(0,x.hu)(tD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function sK(n,e,t,r,i){const s=new tK;let u,h;if(t.type===Fa.OVERWRITE){const y=t;y.source.fromUser?u=AP(n,e,y.path,y.snap,r,i,s):((0,x.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!Xt(y.path),u=sD(n,e,y.path,y.snap,r,i,h,s))}else if(t.type===Fa.MERGE){const y=t;y.source.fromUser?u=function aK(n,e,t,r,i,s,u){let h=e;return r.foreach((p,y)=>{const C=fr(t,p);fH(e,Qt(C))&&(h=AP(n,h,C,y,i,s,u))}),r.foreach((p,y)=>{const C=fr(t,p);fH(e,Qt(C))||(h=AP(n,h,C,y,i,s,u))}),h}(n,e,y.path,y.children,r,i,s):((0,x.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),u=MP(n,e,y.path,y.children,r,i,h,s))}else if(t.type===Fa.ACK_USER_WRITE){const y=t;u=y.revert?function uK(n,e,t,r,i,s){let u;if(null!=iD(r,t))return e;{const h=new SP(r,e,i),p=e.eventCache.getNode();let y;if(Xt(t)||".priority"===Qt(t)){let C;if(e.serverCache.isFullyInitialized())C=rD(r,Pp(e));else{const D=e.serverCache.getNode();(0,x.hu)(D instanceof Ht,"serverChildren would be complete if leaf node"),C=TP(r,D)}C=C,y=n.filter.updateFullNode(p,C,s)}else{const C=Qt(t);let D=DP(r,C,e.serverCache);null==D&&e.serverCache.isCompleteForChild(C)&&(D=p.getImmediateChild(C)),y=null!=D?n.filter.updateChild(p,C,D,$n(t),h,s):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(p,C,Ht.EMPTY_NODE,$n(t),h,s):p,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=rD(r,Pp(e)),u.isLeafNode()&&(y=n.filter.updateFullNode(y,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=iD(r,Cn()),b0(e,y,u,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function lK(n,e,t,r,i,s,u){if(null!=iD(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(Xt(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return sD(n,e,t,p.getNode().getChild(t),i,s,h,u);if(Xt(t)){let y=new Qn(null);return p.getNode().forEachChild(Tc,(C,D)=>{y=y.set(new Nn(C),D)}),MP(n,e,t,y,i,s,h,u)}return e}{let y=new Qn(null);return r.foreach((C,D)=>{const R=fr(t,C);p.isCompleteForPath(R)&&(y=y.set(C,p.getNode().getChild(R)))}),MP(n,e,t,y,i,s,h,u)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Fa.LISTEN_COMPLETE)throw(0,x.g5)("Unknown operation type: "+t.type);u=function cK(n,e,t,r,i){const s=e.serverCache;return hH(n,nH(e,s.getNode(),s.isFullyInitialized()||Xt(t),s.isFiltered()),t,r,dH,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function oK(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=tD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(Xj(tD(e)))}}(e,u,p),{viewCache:u,changes:p}}(n.processor_,i,e,t,r);return function iK(n,e){(0,x.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,x.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,x.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,yH(n,s.changes,s.viewCache.eventCache.getNode(),null)}function yH(n,e,t,r){return function L5(n,e,t,r){const i=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function C5(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),v0(n,i,"child_removed",e,r,t),v0(n,i,"child_added",e,r,t),v0(n,i,"child_moved",s,r,t),v0(n,i,"child_changed",e,r,t),v0(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let oD,lD;class vH{constructor(){this.views=new Map}}function xP(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,x.hu)(null!=s,"SyncTree gave us an op for an invalid query."),_H(s,e,t,r)}{let s=[];for(const u of n.views.values())s=s.concat(_H(u,e,t,r));return s}}function bH(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=rD(t,i?r:null),p=!1;h?p=!0:r instanceof Ht?(h=TP(t,r),p=!1):(h=Ht.EMPTY_NODE,p=!1);const y=eD(new dh(h,p,!1),new dh(r,i,!1));return new dK(e,y)}return u}function wH(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function fh(n,e){let t=null;for(const r of n.views.values())t=t||pK(r,e);return t}function EH(n,e){return e._queryParams.loadsAllData()?aD(n):n.views.get(e._queryIdentifier)}function CH(n,e){return null!=EH(n,e)}function ph(n){return null!=aD(n)}function aD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let IK=1;class IH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Qn(null),this.pendingWriteTree_=function J5(){return{visibleWrites:kl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kP(n,e,t,r,i){return function j5(n,e,t,r,i){(0,x.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=w0(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?r_(n,new Rp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function gh(n,e,t=!1){const r=function $5(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function z5(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,x.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&q5(h,r.path)?i=!1:Na(r.path,h.path)&&(s=!0)),u--}return!!i&&(s?(function G5(n){n.visibleWrites=oH(n.allWrites,W5,Cn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=rH(n.visibleWrites,r.path):Pi(r.children,p=>{n.visibleWrites=rH(n.visibleWrites,fr(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new Qn(null);return null!=r.snap?s=s.set(Cn(),!0):Pi(r.children,u=>{s=s.set(new Nn(u),!0)}),r_(n,new JT(r.path,s,t))}return[]}function E0(n,e,t){return r_(n,new Rp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function OP(n,e,t,r){const i=e._path,s=n.syncPointTree_.get(i);let u=[];if(s&&("default"===e._queryIdentifier||CH(s,e))){const h=function wK(n,e,t,r){const i=e._queryIdentifier,s=[];let u=[];const h=ph(n);if("default"===i)for(const[p,y]of n.views.entries())u=u.concat(mH(y,t,r)),gH(y)&&(n.views.delete(p),y.query._queryParams.loadsAllData()||s.push(y.query));else{const p=n.views.get(i);p&&(u=u.concat(mH(p,t,r)),gH(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!ph(n)&&s.push(new(function yK(){return(0,x.hu)(oD,"Reference.ts has not been loaded"),oD}())(e._repo,e._path)),{removed:s,events:u}}(s,e,t,r);(function vK(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const p=h.removed;u=h.events;const y=-1!==p.findIndex(D=>D._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(i,(D,R)=>ph(R));if(y&&!C){const D=n.syncPointTree_.subtree(i);if(!D.isEmpty()){const R=function OK(n){return n.fold((e,t,r)=>{if(t&&ph(t))return[aD(t)];{let i=[];return t&&(i=wH(t)),Pi(r,(s,u)=>{i=i.concat(u)}),i}})}(D);for(let L=0;L<R.length;++L){const j=R[L],ie=j.query,Ae=AH(n,j);n.listenProvider_.startListening(C0(ie),uD(n,ie),Ae.hashFn,Ae.onComplete)}}}if(!C&&p.length>0&&!r)if(y){const D=null;n.listenProvider_.stopListening(C0(e),D)}else p.forEach(D=>{const R=n.queryToTagMap.get(dD(D));n.listenProvider_.stopListening(C0(D),R)});!function RK(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=dD(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,p)}return u}function TH(n,e,t){const r=e._path;let i=null,s=!1;n.syncPointTree_.foreachOnPath(r,(D,R)=>{const L=Ys(D,r);i=i||fh(R,L),s=s||ph(R)});let h,u=n.syncPointTree_.get(r);u?(s=s||ph(u),i=i||fh(u,Cn())):(u=new vH,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?h=!0:(h=!1,i=Ht.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((R,L)=>{const j=fh(L,Cn());j&&(i=i.updateImmediateChild(R,j))}));const p=CH(u,e);if(!p&&!e._queryParams.loadsAllData()){const D=dD(e);(0,x.hu)(!n.queryToTagMap.has(D),"View does not exist, but we have a tag");const R=function PK(){return IK++}();n.queryToTagMap.set(D,R),n.tagToQueryMap.set(R,D)}let C=function bK(n,e,t,r,i,s){const u=bH(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function gK(n,e){n.eventRegistrations_.push(e)}(u,t),function mK(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Yn,(s,u)=>{r.push(Jm(s,u))}),t.isFullyInitialized()&&r.push(Xj(t.getNode())),yH(n,r,t.getNode(),e)}(u,t)}(u,e,t,nD(n.pendingWriteTree_,r),i,h);if(!p&&!s){const D=EH(u,e);C=C.concat(function NK(n,e,t){const r=e._path,i=uD(n,e),s=AH(n,t),u=n.listenProvider_.startListening(C0(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,x.hu)(!ph(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((y,C,D)=>{if(!Xt(y)&&C&&ph(C))return[aD(C).query];{let R=[];return C&&(R=R.concat(wH(C).map(L=>L.query))),Pi(D,(L,j)=>{R=R.concat(j)}),R}});for(let y=0;y<p.length;++y){const C=p[y];n.listenProvider_.stopListening(C0(C),uD(n,C))}}return u}(n,e,D))}return C}function cD(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,h)=>{const y=fh(h,Ys(u,e));if(y)return y});return aH(i,e,s,t,!0)}function r_(n,e){return DH(e,n.syncPointTree_,null,nD(n.pendingWriteTree_,Cn()))}function DH(n,e,t,r){if(Xt(n.path))return SH(n,e,t,r);{const i=e.get(Cn());null==t&&null!=i&&(t=fh(i,Cn()));let s=[];const u=Qt(n.path),h=n.operationForChild(u),p=e.children.get(u);if(p&&h){const y=t?t.getImmediateChild(u):null,C=cH(r,u);s=s.concat(DH(h,p,y,C))}return i&&(s=s.concat(xP(i,n,r,t))),s}}function SH(n,e,t,r){const i=e.get(Cn());null==t&&null!=i&&(t=fh(i,Cn()));let s=[];return e.children.inorderTraversal((u,h)=>{const p=t?t.getImmediateChild(u):null,y=cH(r,u),C=n.operationForChild(u);C&&(s=s.concat(SH(C,h,p,y)))}),i&&(s=s.concat(xP(i,n,r,t))),s}function AH(n,e){const t=e.query,r=uD(n,t);return{hashFn:()=>(function hK(n){return n.viewCache_.serverCache.getNode()}(e)||Ht.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function AK(n,e,t){const r=RP(n,t);if(r){const i=PP(r),s=i.path,u=i.queryId,h=Ys(s,e);return NP(n,s,new y0(bP(u),h))}return[]}(n,t._path,r):function SK(n,e){return r_(n,new y0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function I8(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return OP(n,t,null,s)}}}}function uD(n,e){const t=dD(e);return n.queryToTagMap.get(t)}function dD(n){return n._path.toString()+"$"+n._queryIdentifier}function RP(n,e){return n.tagToQueryMap.get(e)}function PP(n){const e=n.indexOf("$");return(0,x.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Nn(n.substr(0,e))}}function NP(n,e,t){const r=n.syncPointTree_.get(e);return(0,x.hu)(r,"Missing sync point for query tag that we're tracking"),xP(r,t,nD(n.pendingWriteTree_,e),null)}function C0(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function CK(){return(0,x.hu)(lD,"Reference.ts has not been loaded"),lD}())(n._repo,n._path):n}class FP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new FP(t)}node(){return this.node_}}class LP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=fr(this.path_,e);return new LP(this.syncTree_,t)}node(){return cD(this.syncTree_,this.path_)}}const MH=function(n,e,t){return n&&"object"==typeof n?((0,x.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?LK(n[".sv"],e,t):"object"==typeof n[".sv"]?VK(n[".sv"],e):void(0,x.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},LK=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,x.hu)(!1,"Unexpected server value: "+n)},VK=function(n,e,t){n.hasOwnProperty("increment")||(0,x.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,x.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,x.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},xH=function(n,e,t,r){return UP(e,new LP(t,n),r)},VP=function(n,e,t){return UP(n,new FP(e),t)};function UP(n,e,t){const r=n.getPriority().val(),i=MH(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,h=MH(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new Ym(h,br(i)):n}{const u=n;return s=u,i!==u.getPriority().val()&&(s=s.updatePriority(new Ym(i))),u.forEachChild(Yn,(h,p)=>{const y=UP(p,e.getImmediateChild(h),t);y!==p&&(s=s.updateImmediateChild(h,y))}),s}}class BP{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function hD(n,e){let t=e instanceof Nn?e:new Nn(e),r=n,i=Qt(t);for(;null!==i;){const s=(0,x.DV)(r.node.children,i)||{children:{},childCount:0};r=new BP(i,r,s),t=$n(t),i=Qt(t)}return r}function Fp(n){return n.node.value}function jP(n,e){n.node.value=e,HP(n)}function kH(n){return n.node.childCount>0}function fD(n,e){Pi(n.node.children,(t,r)=>{e(new BP(t,n,r))})}function OH(n,e,t,r){t&&!r&&e(n),fD(n,i=>{OH(i,e,!0,r)}),t&&r&&e(n)}function I0(n){return new Nn(null===n.parent?n.name:I0(n.parent)+"/"+n.name)}function HP(n){null!==n.parent&&function jK(n,e,t){const r=function UK(n){return void 0===Fp(n)&&!kH(n)}(t),i=(0,x.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,HP(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,HP(n))}(n.parent,n.name,n)}const HK=/[\[\].#$\/\u0000-\u001F\u007F]/,$K=/[\[\].#$\u0000-\u001F\u007F]/,$P=10485760,pD=function(n){return"string"==typeof n&&0!==n.length&&!HK.test(n)},RH=function(n){return"string"==typeof n&&0!==n.length&&!$K.test(n)},T0=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!jT(n)||n&&"object"==typeof n&&(0,x.r3)(n,".sv")},Dc=function(n,e,t,r){r&&void 0===e||D0((0,x.gK)(n,"value"),e,t)},D0=function(n,e,t){const r=t instanceof Nn?new n5(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+kp(r));if("function"==typeof e)throw new Error(n+"contains a function "+kp(r)+" with contents = "+e.toString());if(jT(e))throw new Error(n+"contains "+e.toString()+" "+kp(r));if("string"==typeof e&&e.length>$P/3&&(0,x.ug)(e)>$P)throw new Error(n+"contains a string greater than "+$P+" utf8 bytes "+kp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Pi(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!pD(u)))throw new Error(n+" contains an invalid key ("+u+") "+kp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function r5(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,x.ug)(e),Uj(n)})(r,u),D0(n,h,r),function s5(n){const e=n.parts_.pop();n.byteLength_-=(0,x.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+kp(r)+" in addition to actual children.")}},PH=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,x.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Pi(e,(u,h)=>{const p=new Nn(u);if(D0(i,h,fr(t,p)),".priority"===iP(p)&&!T0(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=d0(r);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!pD(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(t5);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Na(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},zP=function(n,e,t){if(!t||void 0!==e){if(jT(e))throw new Error((0,x.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!T0(e))throw new Error((0,x.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},S0=function(n,e,t,r){if(!(r&&void 0===t||pD(t)))throw new Error((0,x.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},A0=function(n,e,t,r){if(!(r&&void 0===t||RH(t)))throw new Error((0,x.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},La=function(n,e){if(".info"===Qt(e))throw new Error(n+" failed = Can't modify data under /.info/")},NH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!pD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),RH(n)}(t))throw new Error((0,x.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class WK{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function gD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!sP(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function qP(n,e,t){gD(n,t),FH(n,r=>sP(r,e))}function Va(n,e,t){gD(n,t),FH(n,r=>Na(r,e)||Na(e,r))}function FH(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(ZK(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function ZK(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Mp&&Ri("event: "+t.toString()),Zm(r)}}}const LH="repo_interrupt";class YK{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new WK,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=XT(),this.transactionQueueTree_=new BP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function VH(n){const t=n.infoData_.getNode(new Nn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function M0(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:VH(n)})}function UH(n,e,t,r,i){n.dataUpdateCount++;const s=new Nn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const p=(0,x.UI)(t,y=>br(y));u=function xK(n,e,t,r){const i=RP(n,r);if(i){const s=PP(i),u=s.path,h=s.queryId,p=Ys(u,e),y=Qn.fromObject(t);return NP(n,u,new t_(bP(h),p,y))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=br(t);u=function MK(n,e,t,r){const i=RP(n,r);if(null!=i){const s=PP(i),u=s.path,h=s.queryId,p=Ys(u,e);return NP(n,u,new Rp(bP(h),p,t))}return[]}(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,x.UI)(t,y=>br(y));u=function DK(n,e,t){const r=Qn.fromObject(t);return r_(n,new t_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=br(t);u=E0(n.serverSyncTree_,s,p)}let h=s;u.length>0&&(h=s_(n,s)),Va(n.eventQueue_,h,u)}function BH(n,e){GP(n,"connected",e),!1===e&&function tY(n){i_(n,"onDisconnectEvents");const e=M0(n),t=XT();_P(n.onDisconnect_,Cn(),(i,s)=>{const u=xH(i,s,n.serverSyncTree_,e);e_(t,i,u)});let r=[];_P(t,Cn(),(i,s)=>{r=r.concat(E0(n.serverSyncTree_,i,s));const u=YP(n,i);s_(n,u)}),n.onDisconnect_=XT(),Va(n.eventQueue_,Cn(),r)}(n)}function GP(n,e,t){const r=new Nn("/.info/"+e),i=br(t);n.infoData_.updateSnapshot(r,i);const s=E0(n.infoSyncTree_,r,i);Va(n.eventQueue_,r,s)}function mD(n){return n.nextWriteId_++}function WP(n,e,t,r,i){i_(n,"set",{path:e.toString(),value:t,priority:r});const s=M0(n),u=br(t,r),h=cD(n.serverSyncTree_,e),p=VP(u,h,s),y=mD(n),C=kP(n.serverSyncTree_,e,p,y,!0);gD(n.eventQueue_,C),n.server_.put(e.toString(),u.val(!0),(R,L)=>{const j="ok"===R;j||Ks("set at "+e+" failed: "+R);const ie=gh(n.serverSyncTree_,y,!j);Va(n.eventQueue_,e,ie),mh(0,i,R,L)});const D=YP(n,e);s_(n,D),Va(n.eventQueue_,D,[])}function nY(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&mP(n.onDisconnect_,e),mh(0,t,r,i)})}function jH(n,e,t,r){const i=br(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,u)=>{"ok"===s&&e_(n.onDisconnect_,e,i),mh(0,r,s,u)})}function ZP(n,e,t){let r;r=".info"===Qt(e._path)?OP(n.infoSyncTree_,e,t):OP(n.serverSyncTree_,e,t),qP(n.eventQueue_,e._path,r)}function HH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(LH)}function i_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ri(t,...e)}function mh(n,e,t,r){e&&Zm(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const u=new Error(s);u.code=i,e(u)}})}function KP(n,e,t){return cD(n.serverSyncTree_,e,t)||Ht.EMPTY_NODE}function _D(n,e=n.transactionQueueTree_){if(e||yD(n,e),Fp(e)){const t=zH(n,e);(0,x.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function lY(n,e,t){const r=t.map(y=>y.currentWriteId),i=KP(n,e,r);let s=i;const u=i.hash();for(let y=0;y<t.length;y++){const C=t[y];(0,x.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const D=Ys(e,C.path);s=s.updateChild(D,C.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,y=>{i_(n,"transaction put response",{path:p.toString(),status:y});let C=[];if("ok"===y){const D=[];for(let R=0;R<t.length;R++)t[R].status=2,C=C.concat(gh(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&D.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();yD(n,hD(n.transactionQueueTree_,e)),_D(n,n.transactionQueueTree_),Va(n.eventQueue_,e,C);for(let R=0;R<D.length;R++)Zm(D[R])}else{if("datastale"===y)for(let D=0;D<t.length;D++)t[D].status=3===t[D].status?4:0;else{Ks("transaction at "+p.toString()+" failed: "+y);for(let D=0;D<t.length;D++)t[D].status=4,t[D].abortReason=y}s_(n,e)}},u)}(n,I0(e),t)}else kH(e)&&fD(e,t=>{_D(n,t)})}function s_(n,e){const t=$H(n,e),r=I0(t);return function cY(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],y=Ys(t,p.path);let D,C=!1;if((0,x.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)C=!0,D=p.abortReason,i=i.concat(gh(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)C=!0,D="maxretry",i=i.concat(gh(n.serverSyncTree_,p.currentWriteId,!0));else{const R=KP(n,p.path,u);p.currentInputSnapshot=R;const L=e[h].update(R.val());if(void 0!==L){D0("transaction failed: Data returned ",L,p.path);let j=br(L);"object"==typeof L&&null!=L&&(0,x.r3)(L,".priority")||(j=j.updatePriority(R.getPriority()));const Ae=p.currentWriteId,tt=M0(n),dt=VP(j,R,tt);p.currentOutputSnapshotRaw=j,p.currentOutputSnapshotResolved=dt,p.currentWriteId=mD(n),u.splice(u.indexOf(Ae),1),i=i.concat(kP(n.serverSyncTree_,p.path,dt,p.currentWriteId,p.applyLocally)),i=i.concat(gh(n.serverSyncTree_,Ae,!0))}else C=!0,D="nodata",i=i.concat(gh(n.serverSyncTree_,p.currentWriteId,!0))}Va(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===D?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(D),!1,null)))}yD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)Zm(r[h]);_D(n,n.transactionQueueTree_)}(n,zH(n,t),r),r}function $H(n,e){let t,r=n.transactionQueueTree_;for(t=Qt(e);null!==t&&void 0===Fp(r);)r=hD(r,t),t=Qt(e=$n(e));return r}function zH(n,e){const t=[];return qH(n,e,t),t.sort((r,i)=>r.order-i.order),t}function qH(n,e,t){const r=Fp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);fD(e,i=>{qH(n,i,t)})}function yD(n,e){const t=Fp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,jP(e,t.length>0?t:void 0)}fD(e,r=>{yD(n,r)})}function YP(n,e){const t=I0($H(n,e)),r=hD(n.transactionQueueTree_,e);return function BK(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{QP(n,i)}),QP(n,r),OH(r,i=>{QP(n,i)}),t}function QP(n,e){const t=Fp(e);if(t){const r=[];let i=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,x.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):((0,x.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(gh(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?jP(e,void 0):t.length=s+1,Va(n.eventQueue_,I0(e),i);for(let u=0;u<r.length;u++)Zm(r[u])}}const XP=function(n,e){const t=hY(n),r=t.namespace;return"firebase.com"===t.domain&&Cc(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Cc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ks("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new QR(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Nn(t.pathString)}},hY=function(n){let e="",t="",r="",i="",s="",u=!0,h="https",p=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let C=n.indexOf("/");-1===C&&(C=n.length);let D=n.indexOf("?");-1===D&&(D=n.length),e=n.substring(0,Math.min(C,D)),C<D&&(i=function uY(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(s){}e+="/"+i}return e}(n.substring(C,D)));const R=function dY(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ks(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,D)));y=e.indexOf(":"),y>=0?(u="https"===h||"wss"===h,p=parseInt(e.substring(y+1),10)):y=e.length;const L=e.slice(0,y);if("localhost"===L.toLowerCase())t="localhost";else if(L.split(".").length<=2)t=L;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),s=r}"ns"in R&&(s=R.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:s}};class GH{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,x.Pz)(this.snapshot.exportVal())}}class WH{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ZH{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,x.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class KH{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new x.BH;return nY(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){La("OnDisconnect.remove",this._path);const e=new x.BH;return jH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){La("OnDisconnect.set",this._path),Dc("OnDisconnect.set",e,this._path,!1);const t=new x.BH;return jH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){La("OnDisconnect.setWithPriority",this._path),Dc("OnDisconnect.setWithPriority",e,this._path,!1),zP("OnDisconnect.setWithPriority",t,!1);const r=new x.BH;return function rY(n,e,t,r,i){const s=br(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,h)=>{"ok"===u&&e_(n.onDisconnect_,e,s),mh(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){La("OnDisconnect.update",this._path),PH("OnDisconnect.update",e,this._path,!1);const t=new x.BH;return function iY(n,e,t,r){if((0,x.xb)(t))return Ri("onDisconnect().update() called with empty data.  Don't do anything."),void mh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Pi(t,(u,h)=>{const p=br(h);e_(n.onDisconnect_,fr(e,u),p)}),mh(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Co{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Xt(this._path)?null:iP(this._path)}get ref(){return new Ua(this._repo,this._path)}get _queryIdentifier(){const e=eH(this._queryParams),t=ZR(e);return"{}"===t?"default":t}get _queryObject(){return eH(this._queryParams)}isEqual(e){if(!((e=(0,x.m9)(e))instanceof Co))return!1;const t=this._repo===e._repo,r=sP(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function e5(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function vD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function _h(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Tc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ku)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ic)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Yn){if(null!=e&&!T0(e)||null!=t&&!T0(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,x.hu)(n.getIndex()instanceof uP||n.getIndex()===dP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function bD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ua extends Co{constructor(e,t){super(e,t,new KT,!1)}get parent(){const e=Vj(this._path);return null===e?null:new Ua(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Lp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Nn(e),r=Vp(this.ref,e);return new Lp(this._node.getChild(t),r,Yn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Lp(i,Vp(this.ref,r),Yn)))}hasChild(e){const t=new Nn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function YH(n,e){return(n=(0,x.m9)(n))._checkNotDeleted("ref"),void 0!==e?Vp(n._root,e):n._root}function QH(n,e){(n=(0,x.m9)(n))._checkNotDeleted("refFromURL");const t=XP(e,n._repo.repoInfo_.nodeAdmin);NH("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Cc("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),YH(n,t.path.toString())}function Vp(n,e){return null===Qt((n=(0,x.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),A0("child","path",t,!1)):A0("child","path",e,!1),new Ua(n._repo,fr(n._path,e));var t}function JP(n,e){n=(0,x.m9)(n),La("set",n._path),Dc("set",e,n._path,!1);const t=new x.BH;return WP(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function _Y(n,e){PH("update",e,n._path,!1);const t=new x.BH;return function eY(n,e,t,r){i_(n,"update",{path:e.toString(),value:t});let i=!0;const s=M0(n),u={};if(Pi(t,(h,p)=>{i=!1,u[h]=xH(fr(e,h),br(p),n.serverSyncTree_,s)}),i)Ri("update() called with empty data.  Don't do anything."),mh(0,r,"ok",void 0);else{const h=mD(n),p=function TK(n,e,t,r){!function H5(n,e,t,r){(0,x.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=EP(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Qn.fromObject(t);return r_(n,new t_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);gD(n.eventQueue_,p),n.server_.merge(e.toString(),t,(y,C)=>{const D="ok"===y;D||Ks("update at "+e+" failed: "+y);const R=gh(n.serverSyncTree_,h,!D),L=R.length>0?s_(n,e):e;Va(n.eventQueue_,L,R),mh(0,r,y,C)}),Pi(t,y=>{const C=YP(n,fr(e,y));s_(n,C)}),Va(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function yY(n){return function JK(n,e){const t=function kK(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,C)=>{const D=Ys(y,t);r=r||fh(C,D)});let i=n.syncPointTree_.get(t);i?r=r||fh(i,Cn()):(i=new vH,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,u=s?new dh(r,!0,!1):null;return function fK(n){return tD(n.viewCache_)}(bH(i,e,nD(n.pendingWriteTree_,e._path),s?u.getNode():Ht.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=br(r).withIndex(e._queryParams.getIndex()),s=E0(n.serverSyncTree_,e._path,i);return qP(n.eventQueue_,e._path,s),Promise.resolve(i)},r=>(i_(n,"get for query "+(0,x.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,x.m9)(n))._repo,n).then(e=>new Lp(e,new Ua(n._repo,n._path),n._queryParams.getIndex()))}class wD{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new GH("value",this,new Lp(e.snapshotNode,new Ua(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new WH(this,e,t):null}matches(e){return e instanceof wD&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class ED{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new WH(this,e,t):null}createEvent(e,t){(0,x.hu)(null!=e.childName,"Child events should have a childName.");const r=Vp(new Ua(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new GH(e.type,this,new Lp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof ED&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function x0(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,y=(C,D)=>{ZP(n._repo,n,h),p(C,D)};y.userCallback=t.userCallback,y.context=t.context,t=y}const u=new ZH(t,s||void 0),h="value"===e?new wD(u):new ED(e,u);return function sY(n,e,t){let r;r=".info"===Qt(e._path)?TH(n.infoSyncTree_,e,t):TH(n.serverSyncTree_,e,t),qP(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>ZP(n._repo,n,h)}function eN(n,e,t,r){return x0(n,"value",e,t,r)}function XH(n,e,t,r){return x0(n,"child_added",e,t,r)}function JH(n,e,t,r){return x0(n,"child_changed",e,t,r)}function e3(n,e,t,r){return x0(n,"child_moved",e,t,r)}function t3(n,e,t,r){return x0(n,"child_removed",e,t,r)}function n3(n,e,t){let r=null;const i=t?new ZH(t):null;"value"===e?r=new wD(i):e&&(r=new ED(e,i)),ZP(n._repo,n,r)}class Ol{}class r3 extends Ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Dc("endAt",this._value,e._path,!0);const t=gP(e._queryParams,this._value,this._key);if(bD(t),_h(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class bY extends Ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Dc("endBefore",this._value,e._path,!1);const t=function M5(n,e,t){let r,i;return n.index_===Tc?("string"==typeof e&&(e=Qj(e)),i=gP(n,e,t)):(r=null==t?ku:Qj(t),i=gP(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(bD(t),_h(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class s3 extends Ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Dc("startAt",this._value,e._path,!0);const t=pP(e._queryParams,this._value,this._key);if(bD(t),_h(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class CY extends Ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Dc("startAfter",this._value,e._path,!1);const t=function A5(n,e,t){let r;if(n.index_===Tc)"string"==typeof e&&(e=Yj(e)),r=pP(n,e,t);else{let i;i=null==t?Ic:Yj(t),r=pP(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(bD(t),_h(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Co(e._repo,e._path,t,e._orderByCalled)}}class TY extends Ol{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(e._repo,e._path,function D5(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class SY extends Ol{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Co(e._repo,e._path,function S5(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class MY extends Ol{constructor(e){super(),this._path=e}_apply(e){vD(e,"orderByChild");const t=new Nn(this._path);if(Xt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new uP(t),i=YT(e._queryParams,r);return _h(i),new Co(e._repo,e._path,i,!0)}}class kY extends Ol{_apply(e){vD(e,"orderByKey");const t=YT(e._queryParams,Tc);return _h(t),new Co(e._repo,e._path,t,!0)}}class RY extends Ol{_apply(e){vD(e,"orderByPriority");const t=YT(e._queryParams,Yn);return _h(t),new Co(e._repo,e._path,t,!0)}}class NY extends Ol{_apply(e){vD(e,"orderByValue");const t=YT(e._queryParams,dP);return _h(t),new Co(e._repo,e._path,t,!0)}}class LY extends Ol{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Dc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new r3(this._value,this._key)._apply(new s3(this._value,this._key)._apply(e))}}function Rl(n,...e){let t=(0,x.m9)(n);for(const r of e)t=r._apply(t);return t}(function _K(n){(0,x.hu)(!oD,"__referenceConstructor has already been defined"),oD=n})(Ua),function EK(n){(0,x.hu)(!lD,"__referenceConstructor has already been defined"),lD=n}(Ua);const tN={};function a3(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Cc("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ri("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,y,u=XP(s,i),h=u.repoInfo;"undefined"!=typeof process&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(p=!0,s=`http://${y}?ns=${h.namespace}`,u=XP(s,i),h=u.repoInfo):p=!u.repoInfo.secure;const C=i&&p?new l0(l0.OWNER):new A8(n.name,n.options,e);NH("Invalid Firebase Database URL",u),Xt(u.path)||Cc("Database URL must point to the root of a Firebase Database (not including a child path).");const D=function HY(n,e,t,r){let i=tN[e.name];i||(i={},tN[e.name]=i);let s=i[n.toURLString()];return s&&Cc("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new YK(n,false,t,r),i[n.toURLString()]=s,s}(h,n,C,new S8(n.name,t));return new zY(D,n)}class zY{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function QK(n,e,t){if(n.stats_=eP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new QT(n.repoInfo_,(r,i,s,u)=>{UH(n,r,i,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>BH(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,x.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Op(n.repoInfo_,e,(r,i,s,u)=>{UH(n,r,i,s,u)},r=>{BH(n,r)},r=>{!function XK(n,e){Pi(e,(t,r)=>{GP(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function O8(n,e){const t=n.toString();return JR[t]||(JR[t]=e()),JR[t]}(n.repoInfo_,()=>new N5(n.stats_,n.server_)),n.infoData_=new x5,n.infoSyncTree_=new IH({startListening:(r,i,s,u)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=E0(n.infoSyncTree_,r._path,p),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),GP(n,"connected",!1),n.serverSyncTree_=new IH({startListening:(r,i,s,u)=>(n.server_.listen(r,s,i,(h,p)=>{const y=u(h,p);Va(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ua(this._repo,Cn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function jY(n,e){const t=tN[e];(!t||t[n.key]!==n)&&Cc(`Database ${e}(${n.repoInfo_}) has already been deleted.`),HH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Cc("Cannot call "+e+" on a deleted database.")}}function ZY(n,e){lj(n,e)}const YY={".sv":"timestamp"};class JY{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Op.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Op.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function KY(n){rj(q.SDK_VERSION),(0,q._registerComponent)(new re.wA("database",(e,{instanceIdentifier:t})=>a3(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,q.registerVersion)(tj,"0.12.5",n),(0,q.registerVersion)(tj,"0.12.5","esm2017")}();const r7=new we.Yd("@firebase/database-compat"),l3=function(n){r7.warn("FIREBASE WARNING: "+n)};class o7{constructor(e){this._delegate=e}cancel(e){(0,x.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,x.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,x.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,x.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,x.Dv)("OnDisconnect.set",1,2,arguments.length),(0,x.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,x.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,x.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,x.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,l3("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,x.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class a7{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,x.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class yh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,x.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,x.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,x.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,x.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,x.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),A0("DataSnapshot.child","path",e,!1),new yh(this._database,this._delegate.child(e))}hasChild(e){return(0,x.Dv)("DataSnapshot.hasChild",1,1,arguments.length),A0("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,x.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,x.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,x.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new yh(this._database,t)))}hasChildren(){return(0,x.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,x.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,x.Dv)("DataSnapshot.ref",0,0,arguments.length),new oa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Xi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,x.Dv)("Query.on",2,4,arguments.length),(0,x.Wj)("Query.on","callback",t,!1);const u=Xi.getCancelAndContextArgs_("Query.on",r,i),h=(y,C)=>{t.call(u.context,new yh(this.database,y),C)};h.userCallback=t,h.context=u.context;const p=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return eN(this._delegate,h,p),t;case"child_added":return XH(this._delegate,h,p),t;case"child_removed":return t3(this._delegate,h,p),t;case"child_changed":return JH(this._delegate,h,p),t;case"child_moved":return e3(this._delegate,h,p),t;default:throw new Error((0,x.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,x.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,x.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,x.Wj)("Query.off","callback",t,!0),(0,x.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,n3(this._delegate,e,i)}else n3(this._delegate,e)}get(){return yY(this._delegate).then(e=>new yh(this.database,e))}once(e,t,r,i){(0,x.Dv)("Query.once",1,4,arguments.length),(0,x.Wj)("Query.once","callback",t,!0);const s=Xi.getCancelAndContextArgs_("Query.once",r,i),u=new x.BH,h=(y,C)=>{const D=new yh(this.database,y);t&&t.call(s.context,D,C),u.resolve(D)};h.userCallback=t,h.context=s.context;const p=y=>{s.cancel&&s.cancel.call(s.context,y),u.reject(y)};switch(e){case"value":eN(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":XH(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":t3(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":JH(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":e3(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,x.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,x.Dv)("Query.limitToFirst",1,1,arguments.length),new Xi(this.database,Rl(this._delegate,function DY(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new TY(n)}(e)))}limitToLast(e){return(0,x.Dv)("Query.limitToLast",1,1,arguments.length),new Xi(this.database,Rl(this._delegate,function AY(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new SY(n)}(e)))}orderByChild(e){return(0,x.Dv)("Query.orderByChild",1,1,arguments.length),new Xi(this.database,Rl(this._delegate,function xY(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return A0("orderByChild","path",n,!1),new MY(n)}(e)))}orderByKey(){return(0,x.Dv)("Query.orderByKey",0,0,arguments.length),new Xi(this.database,Rl(this._delegate,function OY(){return new kY}()))}orderByPriority(){return(0,x.Dv)("Query.orderByPriority",0,0,arguments.length),new Xi(this.database,Rl(this._delegate,function PY(){return new RY}()))}orderByValue(){return(0,x.Dv)("Query.orderByValue",0,0,arguments.length),new Xi(this.database,Rl(this._delegate,function FY(){return new NY}()))}startAt(e=null,t){return(0,x.Dv)("Query.startAt",0,2,arguments.length),new Xi(this.database,Rl(this._delegate,function EY(n=null,e){return S0("startAt","key",e,!0),new s3(n,e)}(e,t)))}startAfter(e=null,t){return(0,x.Dv)("Query.startAfter",0,2,arguments.length),new Xi(this.database,Rl(this._delegate,function IY(n,e){return S0("startAfter","key",e,!0),new CY(n,e)}(e,t)))}endAt(e=null,t){return(0,x.Dv)("Query.endAt",0,2,arguments.length),new Xi(this.database,Rl(this._delegate,function vY(n,e){return S0("endAt","key",e,!0),new r3(n,e)}(e,t)))}endBefore(e=null,t){return(0,x.Dv)("Query.endBefore",0,2,arguments.length),new Xi(this.database,Rl(this._delegate,function wY(n,e){return S0("endBefore","key",e,!0),new bY(n,e)}(e,t)))}equalTo(e,t){return(0,x.Dv)("Query.equalTo",1,2,arguments.length),new Xi(this.database,Rl(this._delegate,function VY(n,e){return S0("equalTo","key",e,!0),new LY(n,e)}(e,t)))}toString(){return(0,x.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,x.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,x.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Xi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,x.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,x.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,x.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new oa(this.database,new Ua(this._delegate._repo,this._delegate._path))}}class oa extends Xi{constructor(e,t){super(e,new Co(t._repo,t._path,new KT,!1)),this.database=e,this._delegate=t}getKey(){return(0,x.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,x.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new oa(this.database,Vp(this._delegate,e))}getParent(){(0,x.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new oa(this.database,e):null}getRoot(){return(0,x.Dv)("Reference.root",0,0,arguments.length),new oa(this.database,this._delegate.root)}set(e,t){(0,x.Dv)("Reference.set",1,2,arguments.length),(0,x.Wj)("Reference.set","onComplete",t,!0);const r=JP(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,x.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,l3("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}La("Reference.update",this._delegate._path),(0,x.Wj)("Reference.update","onComplete",t,!0);const r=_Y(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,x.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,x.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function mY(n,e,t){if(La("setWithPriority",n._path),Dc("setWithPriority",e,n._path,!1),zP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new x.BH;return WP(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,x.Dv)("Reference.remove",0,1,arguments.length),(0,x.Wj)("Reference.remove","onComplete",e,!0);const t=function pY(n){return La("remove",n._path),JP(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,x.Dv)("Reference.transaction",1,3,arguments.length),(0,x.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,x.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,x.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function e7(n,e,t){var r;if(n=(0,x.m9)(n),La("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,s=new x.BH,h=eN(n,()=>{});return function aY(n,e,t,r,i,s){i_(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:sj(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=KP(n,e,void 0);u.currentInputSnapshot=h;const p=u.update(h.val());if(void 0===p)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{D0("transaction failed: Data returned ",p,u.path),u.status=0;const y=hD(n.transactionQueueTree_,e),C=Fp(y)||[];let D;C.push(u),jP(y,C),"object"==typeof p&&null!==p&&(0,x.r3)(p,".priority")?(D=(0,x.DV)(p,".priority"),(0,x.hu)(T0(D),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):D=(cD(n.serverSyncTree_,e)||Ht.EMPTY_NODE).getPriority().val();const R=M0(n),L=br(p,D),j=VP(L,h,R);u.currentOutputSnapshotRaw=L,u.currentOutputSnapshotResolved=j,u.currentWriteId=mD(n);const ie=kP(n.serverSyncTree_,e,j,u.currentWriteId,u.applyLocally);Va(n.eventQueue_,e,ie),_D(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,y,C)=>{let D=null;p?s.reject(p):(D=new Lp(C,new Ua(n._repo,n._path),Yn),s.resolve(new JY(y,D)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new a7(s.committed,new yh(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,x.Dv)("Reference.setPriority",1,2,arguments.length),(0,x.Wj)("Reference.setPriority","onComplete",t,!0);const r=function gY(n,e){n=(0,x.m9)(n),La("setPriority",n._path),zP("setPriority",e,!1);const t=new x.BH;return WP(n._repo,fr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,x.Dv)("Reference.push",0,2,arguments.length),(0,x.Wj)("Reference.push","onComplete",t,!0);const r=function fY(n,e){n=(0,x.m9)(n),La("push",n._path),Dc("push",e,n._path,!0);const t=VH(n._repo),r=E5(t),i=Vp(n,r),s=Vp(n,r);let u;return u=null!=e?JP(s,e).then(()=>s):Promise.resolve(s),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new oa(this.database,u));t&&i.then(()=>t(null),u=>t(u));const s=new oa(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return La("Reference.onDisconnect",this._delegate._path),new o7(new KH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class k0{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function qY(n,e,t,r={}){(n=(0,x.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Cc("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Cc('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new l0(l0.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,x.Sg)(r.mockUserToken,n.app.options.projectId);s=new l0(u)}!function BY(n,e,t,r){n.repoInfo_=new QR(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,x.Dv)("database.ref",0,1,arguments.length),e instanceof oa){const t=QH(this._delegate,e.toString());return new oa(this,t)}{const t=YH(this._delegate,e);return new oa(this,t)}}refFromURL(e){(0,x.Dv)("database.refFromURL",1,1,arguments.length);const r=QH(this._delegate,e);return new oa(this,r)}goOffline(){return(0,x.Dv)("database.goOffline",0,0,arguments.length),function GY(n){(n=(0,x.m9)(n))._checkNotDeleted("goOffline"),HH(n._repo)}(this._delegate)}goOnline(){return(0,x.Dv)("database.goOnline",0,0,arguments.length),function WY(n){(n=(0,x.m9)(n))._checkNotDeleted("goOnline"),function oY(n){n.persistentConnection_&&n.persistentConnection_.resume(LH)}(n._repo)}(this._delegate)}}k0.ServerValue={TIMESTAMP:function QY(){return YY}(),increment:n=>function XY(n){return{".sv":{increment:n}}}(n)};var c7=Object.freeze({__proto__:null,initStandalone:function l7({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){rj(t);const u=new re.zt("auth-internal",new re.H0("database-standalone"));return u.setComponent(new re.wA("auth-internal",()=>r,"PRIVATE")),{instance:new k0(a3(n,u,void 0,e,s),n),namespace:i}}});const u7=k0.ServerValue;function c3(n){return null==n}function u3(n){return"function"==typeof n.set}function d3(n,e){return u3(e)?e:n.ref(e)}function h3(n,e){if(function h7(n){return"string"==typeof n}(n))return e.stringCase();if(u3(n))return e.firebaseCase();if(function f7(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function O0(n,e,t="on",r=tu.z){return new On.y(i=>{let s=null;return s=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,ot.U)(i=>{const{snapshot:s,prevKey:u}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:u,key:h}}),(0,Bg.B)())}function f3(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function m7(n,e){const{payload:t,prevKey:r,key:i}=e,s=f3(n,i),u=function g7(n,e){if(c3(e))return 0;{const t=f3(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const y={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function p3(n){return(c3(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function g3(n,e,t){return function p7(n,e,t){return O0(n,"value","once",t).pipe(Mr(r=>{const i=[mt(r)];return e.forEach(s=>i.push(O0(n,s,"on",t))),(0,Tl.T)(...i).pipe(_c(m7,[]))}),mg())}(n,e=p3(e),t)}function m3(n,e,t){const r=(e=p3(e)).map(i=>O0(n,i,"on",t));return(0,Tl.T)(...r)}function _3(n,e){return function(r,i){return h3(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function b7(n){return function(t){return t?h3(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function y3(n,e){return function(){return O0(n,"value","on",e)}}!function d7(n){n.INTERNAL.registerComponent(new re.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new k0(i,r)},"PUBLIC").setServiceProps({Reference:oa,Query:Xi,Database:k0,DataSnapshot:yh,enableLogging:ZY,INTERNAL:c7,ServerValue:u7}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(O.Z);const C7=new c.OlP("angularfire2.realtimeDatabaseURL"),I7=new c.OlP("angularfire2.database.use-emulator");let T7=(()=>{class n{constructor(t,r,i,s,u,h,p,y,C,D,R,L,j,ie,Ae){this.schedulers=h;const tt=p,dt=(0,I.on)(t,u,r);y&&MR(dt,u,C,R,L,j,D,ie),this.database=(0,I.cc)(`${dt.name}.database.${i}`,"AngularFireDatabase",dt.name,()=>{const At=u.runOutsideAngular(()=>dt.database(i||void 0));return tt&&At.useEmulator(...tt),At},[tt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>d3(this.database,t));let s=i;return r&&(s=r(i)),function w7(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:_3(r,"update"),set:_3(r,"set"),push:i=>r.push(i),remove:b7(r),snapshotChanges:i=>g3(n,i,t).pipe(v.iC),stateChanges:i=>m3(n,i,t).pipe(v.iC),auditTrail:i=>function _7(n,e,t){return function v7(n,e,t){return function y7(n,e){return O0(n,"value","on",e).pipe((0,ot.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function g8(...n){const e=(0,xs.jO)(n);return(0,_r.e)((t,r)=>{const i=n.length,s=new Array(i);let u=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,Tr.Xf)(n[p]).subscribe(new nn.Q(r,y=>{s[p]=y,!h&&!u[p]&&(u[p]=!0,(h=u.every(Fs.y))&&(u=null))},nf.Z));t.subscribe(new nn.Q(r,p=>{if(h){const y=[p,...s];r.next(e?e(...y):y)}}))})}(e),(0,ot.U)(([i,s])=>{const u=i.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:u,loadedKeys:h}}),function m8(n){return(0,_r.e)((e,t)=>{let r=!1,i=0;e.subscribe(new nn.Q(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ot.U)(i=>i.actions))}(n,m3(n,e).pipe(_c((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(v.iC),valueChanges:(i,s)=>g3(n,i,t).pipe((0,ot.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),v.iC)}}(s,this)}object(t){return function E7(n,e){return{query:n,snapshotChanges:()=>y3(n,e.schedulers.outsideAngular)().pipe(v.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>y3(n,e.schedulers.outsideAngular)().pipe(v.iC,(0,ot.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>d3(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(I.Dh),c.LFG(I.xv,8),c.LFG(C7,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(v.HU),c.LFG(I7,8),c.LFG(Dp,8),c.LFG(CR,8),c.LFG(IR,8),c.LFG(TR,8),c.LFG(DR,8),c.LFG(SR,8),c.LFG(AR,8),c.LFG(Xb,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),D7=(()=>{class n{constructor(){d2.Z.registerVersion("angularfire",v.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[T7]}),n})(),S7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[p8]}),n.\u0275inj=c.cJS({providers:[],imports:[[Kl,f8,wE,sC,VE,PD,Y1,HE,BE,WW(()=>ZW(zR_firebase)),sZ(()=>oZ()),e8.forRoot(),i4,D7,Z6,I.hO.initializeApp(zR_firebase)]]}),n})();(0,c.G48)(),sl().bootstrapModule(S7).catch(n=>console.error(n))},5867:(ct,ke,F)=>{"use strict";F.d(ke,{Mq:()=>c.getApp,C6:()=>c.getApps,ZF:()=>c.initializeApp,KN:()=>c.registerVersion});var c=F(9681);(0,c.registerVersion)("firebase","9.6.8","app")},127:(ct,ke,F)=>{"use strict";F.d(ke,{Z:()=>c.Z});var c=F(3942);c.Z.registerVersion("firebase","9.6.8","app-compat")},5881:(ct,ke,F)=>{"use strict";F.r(ke);var c=F(5861),H=F(3942),N=F(4929),de=F(2090),ce=(F(9681),F(1877),F(4859));function me(){return window}function W(){return(W=(0,c.Z)(function*(le,ee,Q){var Oe;const{BuildInfo:We}=me();(0,N.ap)(ee.sessionId,"AuthEvent did not contain a session ID");const ut=yield fe(ee.sessionId),kt={};return(0,N.aq)()?kt.ibi=We.packageName:(0,N.ar)()?kt.apn=We.packageName:(0,N.as)(le,"operation-not-supported-in-this-environment"),We.displayName&&(kt.appDisplayName=We.displayName),kt.sessionId=ut,(0,N.at)(le,Q,ee.type,void 0,null!==(Oe=ee.eventId)&&void 0!==Oe?Oe:void 0,kt)})).apply(this,arguments)}function je(){return(je=(0,c.Z)(function*(le){const{BuildInfo:ee}=me(),Q={};(0,N.aq)()?Q.iosBundleId=ee.packageName:(0,N.ar)()?Q.androidPackageName=ee.packageName:(0,N.as)(le,"operation-not-supported-in-this-environment"),yield(0,N.au)(le,Q)})).apply(this,arguments)}function Be(){return(Be=(0,c.Z)(function*(le,ee,Q){const{cordova:Oe}=me();let We=()=>{};try{yield new Promise((ut,kt)=>{let $t=null;function Ft(){var Lt;ut();const Pr=null===(Lt=Oe.plugins.browsertab)||void 0===Lt?void 0:Lt.close;"function"==typeof Pr&&Pr(),"function"==typeof(null==Q?void 0:Q.close)&&Q.close()}function qn(){$t||($t=window.setTimeout(()=>{kt((0,N.av)(le,"redirect-cancelled-by-user"))},2e3))}function si(){"visible"===(null==document?void 0:document.visibilityState)&&qn()}ee.addPassiveListener(Ft),document.addEventListener("resume",qn,!1),(0,N.ar)()&&document.addEventListener("visibilitychange",si,!1),We=()=>{ee.removePassiveListener(Ft),document.removeEventListener("resume",qn,!1),document.removeEventListener("visibilitychange",si,!1),$t&&window.clearTimeout($t)}})}finally{We()}})).apply(this,arguments)}function fe(le){return be.apply(this,arguments)}function be(){return(be=(0,c.Z)(function*(le){const ee=Te(le),Q=yield crypto.subtle.digest("SHA-256",ee);return Array.from(new Uint8Array(Q)).map(We=>We.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Te(le){if((0,N.ap)(/[0-9a-zA-Z]+/.test(le),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(le);const ee=new ArrayBuffer(le.length),Q=new Uint8Array(ee);for(let Oe=0;Oe<le.length;Oe++)Q[Oe]=le.charCodeAt(Oe);return Q}class qe extends N.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ee=>{this.resolveInialized=ee})}addPassiveListener(ee){this.passiveListeners.add(ee)}removePassiveListener(ee){this.passiveListeners.delete(ee)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ee){return this.resolveInialized(),this.passiveListeners.forEach(Q=>Q(ee)),super.onEvent(ee)}initialized(){var ee=this;return(0,c.Z)(function*(){yield ee.initPromise})()}}function he(le){return it.apply(this,arguments)}function it(){return(it=(0,c.Z)(function*(le){const ee=yield z()._get(X(le));return ee&&(yield z()._remove(X(le))),ee})).apply(this,arguments)}function Z(){const le=[],ee="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let Q=0;Q<20;Q++){const Oe=Math.floor(Math.random()*ee.length);le.push(ee.charAt(Oe))}return le.join("")}function z(){return(0,N.ax)(N.b)}function X(le){return(0,N.ay)("authEvent",le.config.apiKey,le.name)}function $e(le){if(!(null==le?void 0:le.includes("?")))return{};const[ee,...Q]=le.split("?");return(0,de.zd)(Q.join("?"))}function et(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,N.av)("no-auth-event")}}function Ut(){var le;return(null===(le=null==self?void 0:self.location)||void 0===le?void 0:le.protocol)||null}function Mn(le=(0,de.z$)()){return!("file:"!==Ut()&&"ionic:"!==Ut()||!le.toLowerCase().match(/iphone|ipad|ipod|android/))}function fi(){try{const le=self.localStorage,ee=N.aG();if(le)return le.setItem(ee,"1"),le.removeItem(ee),!function Ji(le=(0,de.z$)()){return function Rr(){return(0,de.w1)()&&11===(null==document?void 0:document.documentMode)}()||function xn(le=(0,de.z$)()){return/Edge\/\d+/.test(le)}(le)}()||(0,de.hl)()}catch(le){return Li()&&(0,de.hl)()}return!1}function Li(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function zn(){return(function tn(){return"http:"===Ut()||"https:"===Ut()}()||(0,de.ru)()||Mn())&&!function Fi(){return(0,de.b$)()||(0,de.UG)()}()&&fi()&&!Li()}function es(){return Mn()&&"undefined"!=typeof document}function qr(){return(qr=(0,c.Z)(function*(){return!!es()&&new Promise(le=>{const ee=setTimeout(()=>{le(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ee),le(!0)})})})).apply(this,arguments)}const Jt={LOCAL:"local",NONE:"none",SESSION:"session"},Er=N.aw,sr="persistence";function fn(le){return or.apply(this,arguments)}function or(){return(or=(0,c.Z)(function*(le){yield le._initializationPromise;const ee=Bt(),Q=N.ay(sr,le.config.apiKey,le.name);ee&&ee.setItem(Q,le._getPersistence())})).apply(this,arguments)}function Bt(){var le;try{return(null===(le=function Dn(){return"undefined"!=typeof window?window:null}())||void 0===le?void 0:le.sessionStorage)||null}catch(ee){return null}}const ft=N.aw;class rt{constructor(){this.browserResolver=N.ax(N.k),this.cordovaResolver=N.ax(class cn{constructor(){this._redirectPersistence=N.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=N.aA}_initialize(ee){var Q=this;return(0,c.Z)(function*(){const Oe=ee._key();let We=Q.eventManagers.get(Oe);return We||(We=new qe(ee),Q.eventManagers.set(Oe,We),Q.attachCallbackListeners(ee,We)),We})()}_openPopup(ee){(0,N.as)(ee,"operation-not-supported-in-this-environment")}_openRedirect(ee,Q,Oe,We){var ut=this;return(0,c.Z)(function*(){!function te(le){var ee,Q,Oe,We,ut,kt,$t,Ft,qn,si;const Lt=me();(0,N.aw)("function"==typeof(null===(ee=null==Lt?void 0:Lt.universalLinks)||void 0===ee?void 0:ee.subscribe),le,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,N.aw)(void 0!==(null===(Q=null==Lt?void 0:Lt.BuildInfo)||void 0===Q?void 0:Q.packageName),le,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,N.aw)("function"==typeof(null===(ut=null===(We=null===(Oe=null==Lt?void 0:Lt.cordova)||void 0===Oe?void 0:Oe.plugins)||void 0===We?void 0:We.browsertab)||void 0===ut?void 0:ut.openUrl),le,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aw)("function"==typeof(null===(Ft=null===($t=null===(kt=null==Lt?void 0:Lt.cordova)||void 0===kt?void 0:kt.plugins)||void 0===$t?void 0:$t.browsertab)||void 0===Ft?void 0:Ft.isAvailable),le,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,N.aw)("function"==typeof(null===(si=null===(qn=null==Lt?void 0:Lt.cordova)||void 0===qn?void 0:qn.InAppBrowser)||void 0===si?void 0:si.open),le,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ee);const kt=yield ut._initialize(ee);yield kt.initialized(),kt.resetRedirect(),(0,N.aB)(),yield ut._originValidation(ee);const $t=function xe(le,ee,Q=null){return{type:ee,eventId:Q,urlResponse:null,sessionId:Z(),postBody:null,tenantId:le.tenantId,error:(0,N.av)(le,"no-auth-event")}}(ee,Oe,We);yield function nt(le,ee){return z()._set(X(le),ee)}(ee,$t);const Ft=yield function G(le,ee,Q){return W.apply(this,arguments)}(ee,$t,Q),qn=yield function Re(le){const{cordova:ee}=me();return new Promise(Q=>{ee.plugins.browsertab.isAvailable(Oe=>{let We=null;Oe?ee.plugins.browsertab.openUrl(le):We=ee.InAppBrowser.open(le,(0,N.ao)()?"_blank":"_system","location=yes"),Q(We)})})}(Ft);return function Fe(le,ee,Q){return Be.apply(this,arguments)}(ee,kt,qn)})()}_isIframeWebStorageSupported(ee,Q){throw new Error("Method not implemented.")}_originValidation(ee){const Q=ee._key();return this.originValidationPromises[Q]||(this.originValidationPromises[Q]=function oe(le){return je.apply(this,arguments)}(ee)),this.originValidationPromises[Q]}attachCallbackListeners(ee,Q){const{universalLinks:Oe,handleOpenURL:We,BuildInfo:ut}=me(),kt=setTimeout((0,c.Z)(function*(){yield he(ee),Q.onEvent(et())}),500),$t=function(){var si=(0,c.Z)(function*(Lt){clearTimeout(kt);const Pr=yield he(ee);let ns=null;Pr&&(null==Lt?void 0:Lt.url)&&(ns=function U(le,ee){var Q,Oe;const We=function K(le){const ee=$e(le),Q=ee.link?decodeURIComponent(ee.link):void 0,Oe=$e(Q).link,We=ee.deep_link_id?decodeURIComponent(ee.deep_link_id):void 0;return $e(We).link||We||Oe||Q||le}(ee);if(We.includes("/__/auth/callback")){const ut=$e(We),kt=ut.firebaseError?function pe(le){try{return JSON.parse(le)}catch(ee){return null}}(decodeURIComponent(ut.firebaseError)):null,$t=null===(Oe=null===(Q=null==kt?void 0:kt.code)||void 0===Q?void 0:Q.split("auth/"))||void 0===Oe?void 0:Oe[1],Ft=$t?(0,N.av)($t):null;return Ft?{type:le.type,eventId:le.eventId,tenantId:le.tenantId,error:Ft,urlResponse:null,sessionId:null,postBody:null}:{type:le.type,eventId:le.eventId,tenantId:le.tenantId,sessionId:le.sessionId,urlResponse:We,postBody:null}}return null}(Pr,Lt.url)),Q.onEvent(ns||et())});return function(Pr){return si.apply(this,arguments)}}();void 0!==Oe&&"function"==typeof Oe.subscribe&&Oe.subscribe(null,$t);const Ft=We,qn=`${ut.packageName.toLowerCase()}://`;me().handleOpenURL=function(){var si=(0,c.Z)(function*(Lt){if(Lt.toLowerCase().startsWith(qn)&&$t({url:Lt}),"function"==typeof Ft)try{Ft(Lt)}catch(Pr){console.error(Pr)}});return function(Lt){return si.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=N.a,this._completeRedirectFn=N.aA}_initialize(ee){var Q=this;return(0,c.Z)(function*(){return yield Q.selectUnderlyingResolver(),Q.assertedUnderlyingResolver._initialize(ee)})()}_openPopup(ee,Q,Oe,We){var ut=this;return(0,c.Z)(function*(){return yield ut.selectUnderlyingResolver(),ut.assertedUnderlyingResolver._openPopup(ee,Q,Oe,We)})()}_openRedirect(ee,Q,Oe,We){var ut=this;return(0,c.Z)(function*(){return yield ut.selectUnderlyingResolver(),ut.assertedUnderlyingResolver._openRedirect(ee,Q,Oe,We)})()}_isIframeWebStorageSupported(ee,Q){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ee,Q)}_originValidation(ee){return this.assertedUnderlyingResolver._originValidation(ee)}get _shouldInitProactively(){return es()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ft(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ee=this;return(0,c.Z)(function*(){if(ee.underlyingResolver)return;const Q=yield function wt(){return qr.apply(this,arguments)}();ee.underlyingResolver=Q?ee.cordovaResolver:ee.browserResolver})()}}function pi(le){return le.unwrap()}function Pt(le){return Bn(le)}function Bn(le){const{_tokenResponse:ee}=le instanceof de.ZR?le.customData:le;if(!ee)return null;if(!(le instanceof de.ZR)&&"temporaryProof"in ee&&"phoneNumber"in ee)return N.P.credentialFromResult(le);const Q=ee.providerId;if(!Q||Q===N.o.PASSWORD)return null;let Oe;switch(Q){case N.o.GOOGLE:Oe=N.N;break;case N.o.FACEBOOK:Oe=N.M;break;case N.o.GITHUB:Oe=N.Q;break;case N.o.TWITTER:Oe=N.V;break;default:const{oauthIdToken:We,oauthAccessToken:ut,oauthTokenSecret:kt,pendingToken:$t,nonce:Ft}=ee;return ut||kt||We||$t?$t?Q.startsWith("saml.")?N.aJ._create(Q,$t):N.I._fromParams({providerId:Q,signInMethod:Q,pendingToken:$t,idToken:We,accessToken:ut}):new N.T(Q).credential({idToken:We,accessToken:ut,rawNonce:Ft}):null}return le instanceof de.ZR?Oe.credentialFromError(le):Oe.credentialFromResult(le)}function pn(le,ee){return ee.catch(Q=>{throw Q instanceof de.ZR&&function gi(le,ee){var Q;const Oe=null===(Q=ee.customData)||void 0===Q?void 0:Q._tokenResponse;if("auth/multi-factor-auth-required"===ee.code)ee.resolver=new J(le,N.am(le,ee));else if(Oe){const We=Bn(ee),ut=ee;We&&(ut.credential=We,ut.tenantId=Oe.tenantId||void 0,ut.email=Oe.email||void 0,ut.phoneNumber=Oe.phoneNumber||void 0)}}(le,Q),Q}).then(Q=>{const We=Q.user;return{operationType:Q.operationType,credential:Pt(Q),additionalUserInfo:N.ak(Q),user:De.getOrCreate(We)}})}function $(le,ee){return Y.apply(this,arguments)}function Y(){return(Y=(0,c.Z)(function*(le,ee){const Q=yield ee;return{verificationId:Q.verificationId,confirm:Oe=>pn(le,Q.confirm(Oe))}})).apply(this,arguments)}class J{constructor(ee,Q){this.resolver=Q,this.auth=function Vi(le){return le.wrapped()}(ee)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ee){return pn(pi(this.auth),this.resolver.resolveSignIn(ee))}}class De{constructor(ee){this._delegate=ee,this.multiFactor=N.an(ee)}static getOrCreate(ee){return De.USER_MAP.has(ee)||De.USER_MAP.set(ee,new De(ee)),De.USER_MAP.get(ee)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ee){return this._delegate.getIdTokenResult(ee)}getIdToken(ee){return this._delegate.getIdToken(ee)}linkAndRetrieveDataWithCredential(ee){return this.linkWithCredential(ee)}linkWithCredential(ee){var Q=this;return(0,c.Z)(function*(){return pn(Q.auth,N.Y(Q._delegate,ee))})()}linkWithPhoneNumber(ee,Q){var Oe=this;return(0,c.Z)(function*(){return $(Oe.auth,N.l(Oe._delegate,ee,Q))})()}linkWithPopup(ee){var Q=this;return(0,c.Z)(function*(){return pn(Q.auth,N.d(Q._delegate,ee,rt))})()}linkWithRedirect(ee){var Q=this;return(0,c.Z)(function*(){return yield fn(N.aC(Q.auth)),N.g(Q._delegate,ee,rt)})()}reauthenticateAndRetrieveDataWithCredential(ee){return this.reauthenticateWithCredential(ee)}reauthenticateWithCredential(ee){var Q=this;return(0,c.Z)(function*(){return pn(Q.auth,N.Z(Q._delegate,ee))})()}reauthenticateWithPhoneNumber(ee,Q){return $(this.auth,N.r(this._delegate,ee,Q))}reauthenticateWithPopup(ee){return pn(this.auth,N.e(this._delegate,ee,rt))}reauthenticateWithRedirect(ee){var Q=this;return(0,c.Z)(function*(){return yield fn(N.aC(Q.auth)),N.h(Q._delegate,ee,rt)})()}sendEmailVerification(ee){return N.aa(this._delegate,ee)}unlink(ee){var Q=this;return(0,c.Z)(function*(){return yield N.aj(Q._delegate,ee),Q})()}updateEmail(ee){return N.af(this._delegate,ee)}updatePassword(ee){return N.ag(this._delegate,ee)}updatePhoneNumber(ee){return N.u(this._delegate,ee)}updateProfile(ee){return N.ae(this._delegate,ee)}verifyBeforeUpdateEmail(ee,Q){return N.ab(this._delegate,ee,Q)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}De.USER_MAP=new WeakMap;const ae=N.aw;let Ge=(()=>{class le{constructor(Q,Oe){if(this.app=Q,Oe.isInitialized())return this._delegate=Oe.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:We}=Q.options;ae(We,"invalid-api-key",{appName:Q.name}),ae(We,"invalid-api-key",{appName:Q.name});const ut="undefined"!=typeof window?rt:void 0;this._delegate=Oe.initialize({options:{persistence:Ie(We,Q.name),popupRedirectResolver:ut}}),this._delegate._updateErrorMap(N.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?De.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(Q){this._delegate.languageCode=Q}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(Q){this._delegate.tenantId=Q}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(Q,Oe){N.E(this._delegate,Q,Oe)}applyActionCode(Q){return N.a1(this._delegate,Q)}checkActionCode(Q){return N.a2(this._delegate,Q)}confirmPasswordReset(Q,Oe){return N.a0(this._delegate,Q,Oe)}createUserWithEmailAndPassword(Q,Oe){var We=this;return(0,c.Z)(function*(){return pn(We._delegate,N.a4(We._delegate,Q,Oe))})()}fetchProvidersForEmail(Q){return this.fetchSignInMethodsForEmail(Q)}fetchSignInMethodsForEmail(Q){return N.a9(this._delegate,Q)}isSignInWithEmailLink(Q){return N.a7(this._delegate,Q)}getRedirectResult(){var Q=this;return(0,c.Z)(function*(){ae(zn(),Q._delegate,"operation-not-supported-in-this-environment");const Oe=yield N.j(Q._delegate,rt);return Oe?pn(Q._delegate,Promise.resolve(Oe)):{credential:null,user:null}})()}addFrameworkForLogging(Q){!function un(le,ee){(0,N.aC)(le)._logFramework(ee)}(this._delegate,Q)}onAuthStateChanged(Q,Oe,We){const{next:ut,error:kt,complete:$t}=Me(Q,Oe,We);return this._delegate.onAuthStateChanged(ut,kt,$t)}onIdTokenChanged(Q,Oe,We){const{next:ut,error:kt,complete:$t}=Me(Q,Oe,We);return this._delegate.onIdTokenChanged(ut,kt,$t)}sendSignInLinkToEmail(Q,Oe){return N.a6(this._delegate,Q,Oe)}sendPasswordResetEmail(Q,Oe){return N.$(this._delegate,Q,Oe||void 0)}setPersistence(Q){var Oe=this;return(0,c.Z)(function*(){let We;switch(function Gr(le,ee){Er(Object.values(Jt).includes(ee),le,"invalid-persistence-type"),(0,de.b$)()?Er(ee!==Jt.SESSION,le,"unsupported-persistence-type"):(0,de.UG)()?Er(ee===Jt.NONE,le,"unsupported-persistence-type"):Li()?Er(ee===Jt.NONE||ee===Jt.LOCAL&&(0,de.hl)(),le,"unsupported-persistence-type"):Er(ee===Jt.NONE||fi(),le,"unsupported-persistence-type")}(Oe._delegate,Q),Q){case Jt.SESSION:We=N.a;break;case Jt.LOCAL:We=(yield N.ax(N.i)._isAvailable())?N.i:N.b;break;case Jt.NONE:We=N.K;break;default:return N.as("argument-error",{appName:Oe._delegate.name})}return Oe._delegate.setPersistence(We)})()}signInAndRetrieveDataWithCredential(Q){return this.signInWithCredential(Q)}signInAnonymously(){return pn(this._delegate,N.W(this._delegate))}signInWithCredential(Q){return pn(this._delegate,N.X(this._delegate,Q))}signInWithCustomToken(Q){return pn(this._delegate,N._(this._delegate,Q))}signInWithEmailAndPassword(Q,Oe){return pn(this._delegate,N.a5(this._delegate,Q,Oe))}signInWithEmailLink(Q,Oe){return pn(this._delegate,N.a8(this._delegate,Q,Oe))}signInWithPhoneNumber(Q,Oe){return $(this._delegate,N.s(this._delegate,Q,Oe))}signInWithPopup(Q){var Oe=this;return(0,c.Z)(function*(){return ae(zn(),Oe._delegate,"operation-not-supported-in-this-environment"),pn(Oe._delegate,N.c(Oe._delegate,Q,rt))})()}signInWithRedirect(Q){var Oe=this;return(0,c.Z)(function*(){return ae(zn(),Oe._delegate,"operation-not-supported-in-this-environment"),yield fn(Oe._delegate),N.f(Oe._delegate,Q,rt)})()}updateCurrentUser(Q){return this._delegate.updateCurrentUser(Q)}verifyPasswordResetCode(Q){return N.a3(this._delegate,Q)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return le.Persistence=Jt,le})();function Me(le,ee,Q){let Oe=le;"function"!=typeof le&&({next:Oe,error:ee,complete:Q}=le);const We=Oe;return{next:kt=>We(kt&&De.getOrCreate(kt)),error:ee,complete:Q}}function Ie(le,ee){const Q=function ts(le,ee){const Q=Bt();if(!Q)return[];const Oe=N.ay(sr,le,ee);switch(Q.getItem(Oe)){case Jt.NONE:return[N.K];case Jt.LOCAL:return[N.i,N.a];case Jt.SESSION:return[N.a];default:return[]}}(le,ee);if("undefined"!=typeof self&&!Q.includes(N.i)&&Q.push(N.i),"undefined"!=typeof window)for(const Oe of[N.b,N.a])Q.includes(Oe)||Q.push(Oe);return Q.includes(N.K)||Q.push(N.K),Q}class He{constructor(){this.providerId="phone",this._delegate=new N.P(pi(H.Z.auth()))}static credential(ee,Q){return N.P.credential(ee,Q)}verifyPhoneNumber(ee,Q){return this._delegate.verifyPhoneNumber(ee,Q)}unwrap(){return this._delegate}}He.PHONE_SIGN_IN_METHOD=N.P.PHONE_SIGN_IN_METHOD,He.PROVIDER_ID=N.P.PROVIDER_ID;const ht=N.aw;class St{constructor(ee,Q,Oe=H.Z.app()){var We;ht(null===(We=Oe.options)||void 0===We?void 0:We.apiKey,"invalid-api-key",{appName:Oe.name}),this._delegate=new N.R(ee,Q,Oe.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function rn(le){le.INTERNAL.registerComponent(new ce.wA("auth-compat",ee=>{const Q=ee.getProvider("app-compat").getImmediate(),Oe=ee.getProvider("auth");return new Ge(Q,Oe)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:N.A.EMAIL_SIGNIN,PASSWORD_RESET:N.A.PASSWORD_RESET,RECOVER_EMAIL:N.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:N.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:N.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:N.A.VERIFY_EMAIL}},EmailAuthProvider:N.L,FacebookAuthProvider:N.M,GithubAuthProvider:N.Q,GoogleAuthProvider:N.N,OAuthProvider:N.T,SAMLAuthProvider:N.U,PhoneAuthProvider:He,PhoneMultiFactorGenerator:N.m,RecaptchaVerifier:St,TwitterAuthProvider:N.V,Auth:Ge,AuthCredential:N.G,Error:de.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),le.registerVersion("@firebase/auth-compat","0.2.9")}(H.Z)},2940:function(ct,ke){!function(F){"use strict";function c(te){return Array.prototype.slice.call(te)}function H(te){return new Promise(function(fe,be){te.onsuccess=function(){fe(te.result)},te.onerror=function(){be(te.error)}})}function N(te,fe,be){var Te,ve=new Promise(function(qe,xe){H(Te=te[fe].apply(te,be)).then(qe,xe)});return ve.request=Te,ve}function de(te,fe,be){var Te=N(te,fe,be);return Te.then(function(ve){if(ve)return new G(ve,Te.request)})}function ge(te,fe,be){be.forEach(function(Te){Object.defineProperty(te.prototype,Te,{get:function(){return this[fe][Te]},set:function(ve){this[fe][Te]=ve}})})}function Ce(te,fe,be,Te){Te.forEach(function(ve){ve in be.prototype&&(te.prototype[ve]=function(){return N(this[fe],ve,arguments)})})}function ce(te,fe,be,Te){Te.forEach(function(ve){ve in be.prototype&&(te.prototype[ve]=function(){return this[fe][ve].apply(this[fe],arguments)})})}function me(te,fe,be,Te){Te.forEach(function(ve){ve in be.prototype&&(te.prototype[ve]=function(){return de(this[fe],ve,arguments)})})}function ye(te){this._index=te}function G(te,fe){this._cursor=te,this._request=fe}function W(te){this._store=te}function oe(te){this._tx=te,this.complete=new Promise(function(fe,be){te.oncomplete=function(){fe()},te.onerror=function(){be(te.error)},te.onabort=function(){be(te.error)}})}function je(te,fe,be){this._db=te,this.oldVersion=fe,this.transaction=new oe(be)}function Re(te){this._db=te}ge(ye,"_index",["name","keyPath","multiEntry","unique"]),Ce(ye,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),me(ye,"_index",IDBIndex,["openCursor","openKeyCursor"]),ge(G,"_cursor",["direction","key","primaryKey","value"]),Ce(G,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(te){te in IDBCursor.prototype&&(G.prototype[te]=function(){var fe=this,be=arguments;return Promise.resolve().then(function(){return fe._cursor[te].apply(fe._cursor,be),H(fe._request).then(function(Te){if(Te)return new G(Te,fe._request)})})})}),W.prototype.createIndex=function(){return new ye(this._store.createIndex.apply(this._store,arguments))},W.prototype.index=function(){return new ye(this._store.index.apply(this._store,arguments))},ge(W,"_store",["name","keyPath","indexNames","autoIncrement"]),Ce(W,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),me(W,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ce(W,"_store",IDBObjectStore,["deleteIndex"]),oe.prototype.objectStore=function(){return new W(this._tx.objectStore.apply(this._tx,arguments))},ge(oe,"_tx",["objectStoreNames","mode"]),ce(oe,"_tx",IDBTransaction,["abort"]),je.prototype.createObjectStore=function(){return new W(this._db.createObjectStore.apply(this._db,arguments))},ge(je,"_db",["name","version","objectStoreNames"]),ce(je,"_db",IDBDatabase,["deleteObjectStore","close"]),Re.prototype.transaction=function(){return new oe(this._db.transaction.apply(this._db,arguments))},ge(Re,"_db",["name","version","objectStoreNames"]),ce(Re,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(te){[W,ye].forEach(function(fe){te in fe.prototype&&(fe.prototype[te.replace("open","iterate")]=function(){var be=c(arguments),Te=be[be.length-1],ve=this._store||this._index,qe=ve[te].apply(ve,be.slice(0,-1));qe.onsuccess=function(){Te(qe.result)}})})}),[ye,W].forEach(function(te){te.prototype.getAll||(te.prototype.getAll=function(fe,be){var Te=this,ve=[];return new Promise(function(qe){Te.iterateCursor(fe,function(xe){xe?(ve.push(xe.value),void 0===be||ve.length!=be?xe.continue():qe(ve)):qe(ve)})})})}),F.openDb=function Fe(te,fe,be){var Te=N(indexedDB,"open",[te,fe]),ve=Te.request;return ve&&(ve.onupgradeneeded=function(qe){be&&be(new je(ve.result,qe.oldVersion,ve.transaction))}),Te.then(function(qe){return new Re(qe)})},F.deleteDb=function Be(te){return N(indexedDB,"deleteDatabase",[te])},Object.defineProperty(F,"__esModule",{value:!0})}(ke)},8306:(ct,ke,F)=>{"use strict";F.d(ke,{y:()=>G});var c=F(930),H=F(727),N=F(8822),de=F(4671);var ce=F(2416),me=F(576),ye=F(2806);let G=(()=>{class Re{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const te=new Re;return te.source=this,te.operator=Be,te}subscribe(Be,te,fe){const be=function je(Re){return Re&&Re instanceof c.Lv||function oe(Re){return Re&&(0,me.m)(Re.next)&&(0,me.m)(Re.error)&&(0,me.m)(Re.complete)}(Re)&&(0,H.Nn)(Re)}(Be)?Be:new c.Hp(Be,te,fe);return(0,ye.x)(()=>{const{operator:Te,source:ve}=this;be.add(Te?Te.call(be,ve):ve?this._subscribe(be):this._trySubscribe(be))}),be}_trySubscribe(Be){try{return this._subscribe(Be)}catch(te){Be.error(te)}}forEach(Be,te){return new(te=W(te))((fe,be)=>{let Te;Te=this.subscribe(ve=>{try{Be(ve)}catch(qe){be(qe),null==Te||Te.unsubscribe()}},be,fe)})}_subscribe(Be){var te;return null===(te=this.source)||void 0===te?void 0:te.subscribe(Be)}[N.L](){return this}pipe(...Be){return function Ce(Re){return 0===Re.length?de.y:1===Re.length?Re[0]:function(Be){return Re.reduce((te,fe)=>fe(te),Be)}}(Be)(this)}toPromise(Be){return new(Be=W(Be))((te,fe)=>{let be;this.subscribe(Te=>be=Te,Te=>fe(Te),()=>te(be))})}}return Re.create=Fe=>new Re(Fe),Re})();function W(Re){var Fe;return null!==(Fe=null!=Re?Re:ce.v.Promise)&&void 0!==Fe?Fe:Promise}},7579:(ct,ke,F)=>{"use strict";F.d(ke,{x:()=>ce});var c=F(8306),H=F(727);const de=(0,F(3888).d)(ye=>function(){ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=F(8737),Ce=F(2806);let ce=(()=>{class ye extends c.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const oe=new me(this,this);return oe.operator=W,oe}_throwIfClosed(){if(this.closed)throw new de}next(W){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const oe=this.observers.slice();for(const je of oe)je.next(W)}})}error(W){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:oe}=this;for(;oe.length;)oe.shift().error(W)}})}complete(){(0,Ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:oe,isStopped:je,observers:Re}=this;return oe||je?H.Lc:(Re.push(W),new H.w0(()=>(0,ge.P)(Re,W)))}_checkFinalizedStatuses(W){const{hasError:oe,thrownError:je,isStopped:Re}=this;oe?W.error(je):Re&&W.complete()}asObservable(){const W=new c.y;return W.source=this,W}}return ye.create=(G,W)=>new me(G,W),ye})();class me extends ce{constructor(G,W){super(),this.destination=G,this.source=W}next(G){var W,oe;null===(oe=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===oe||oe.call(W,G)}error(G){var W,oe;null===(oe=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===oe||oe.call(W,G)}complete(){var G,W;null===(W=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===W||W.call(G)}_subscribe(G){var W,oe;return null!==(oe=null===(W=this.source)||void 0===W?void 0:W.subscribe(G))&&void 0!==oe?oe:H.Lc}}},930:(ct,ke,F)=>{"use strict";F.d(ke,{Hp:()=>je,Lv:()=>oe});var c=F(576),H=F(727),N=F(2416),de=F(7849),ge=F(5032);const Ce=ye("C",void 0,void 0);function ye(fe,be,Te){return{kind:fe,value:be,error:Te}}var G=F(3410),W=F(2806);class oe extends H.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,H.Nn)(be)&&be.add(this)):this.destination=te}static create(be,Te,ve){return new je(be,Te,ve)}next(be){this.isStopped?Be(function me(fe){return ye("N",fe,void 0)}(be),this):this._next(be)}error(be){this.isStopped?Be(function ce(fe){return ye("E",void 0,fe)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?Be(Ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class je extends oe{constructor(be,Te,ve){let qe;if(super(),(0,c.m)(be))qe=be;else if(be){let xe;({next:qe,error:Te,complete:ve}=be),this&&N.v.useDeprecatedNextContext?(xe=Object.create(be),xe.unsubscribe=()=>this.unsubscribe()):xe=be,qe=null==qe?void 0:qe.bind(xe),Te=null==Te?void 0:Te.bind(xe),ve=null==ve?void 0:ve.bind(xe)}this.destination={next:qe?Re(qe):ge.Z,error:Re(null!=Te?Te:Fe),complete:ve?Re(ve):ge.Z}}}function Re(fe,be){return(...Te)=>{try{fe(...Te)}catch(ve){N.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(ve):(0,de.h)(ve)}}}function Fe(fe){throw fe}function Be(fe,be){const{onStoppedNotification:Te}=N.v;Te&&G.z.setTimeout(()=>Te(fe,be))}const te={closed:!0,next:ge.Z,error:Fe,complete:ge.Z}},727:(ct,ke,F)=>{"use strict";F.d(ke,{Lc:()=>Ce,w0:()=>ge,Nn:()=>ce});var c=F(576);const N=(0,F(3888).d)(ye=>function(W){ye(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((oe,je)=>`${je+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var de=F(8737);class ge{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Re of W)Re.remove(this);else W.remove(this);const{initialTeardown:oe}=this;if((0,c.m)(oe))try{oe()}catch(Re){G=Re instanceof N?Re.errors:[Re]}const{_teardowns:je}=this;if(je){this._teardowns=null;for(const Re of je)try{me(Re)}catch(Fe){G=null!=G?G:[],Fe instanceof N?G=[...G,...Fe.errors]:G.push(Fe)}}if(G)throw new N(G)}}add(G){var W;if(G&&G!==this)if(this.closed)me(G);else{if(G instanceof ge){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._teardowns=null!==(W=this._teardowns)&&void 0!==W?W:[]).push(G)}}_hasParent(G){const{_parentage:W}=this;return W===G||Array.isArray(W)&&W.includes(G)}_addParent(G){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(G),W):W?[W,G]:G}_removeParent(G){const{_parentage:W}=this;W===G?this._parentage=null:Array.isArray(W)&&(0,de.P)(W,G)}remove(G){const{_teardowns:W}=this;W&&(0,de.P)(W,G),G instanceof ge&&G._removeParent(this)}}ge.EMPTY=(()=>{const ye=new ge;return ye.closed=!0,ye})();const Ce=ge.EMPTY;function ce(ye){return ye instanceof ge||ye&&"closed"in ye&&(0,c.m)(ye.remove)&&(0,c.m)(ye.add)&&(0,c.m)(ye.unsubscribe)}function me(ye){(0,c.m)(ye)?ye():ye.unsubscribe()}},2416:(ct,ke,F)=>{"use strict";F.d(ke,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ct,ke,F)=>{"use strict";F.d(ke,{E:()=>H});const H=new(F(8306).y)(ge=>ge.complete())},8996:(ct,ke,F)=>{"use strict";F.d(ke,{D:()=>qe});var c=F(8421),H=F(5363),N=F(9468),Ce=F(8306),me=F(2202),ye=F(576),G=F(9672);function oe(xe,nt){if(!xe)throw new Error("Iterable cannot be null");return new Ce.y(he=>{(0,G.f)(he,nt,()=>{const it=xe[Symbol.asyncIterator]();(0,G.f)(he,nt,()=>{it.next().then(U=>{U.done?he.complete():he.next(U.value)})},0,!0)})})}var je=F(3670),Re=F(8239),Fe=F(1144),Be=F(6495),te=F(2206),fe=F(4532),be=F(3260);function qe(xe,nt){return nt?function ve(xe,nt){if(null!=xe){if((0,je.c)(xe))return function de(xe,nt){return(0,c.Xf)(xe).pipe((0,N.R)(nt),(0,H.Q)(nt))}(xe,nt);if((0,Fe.z)(xe))return function ce(xe,nt){return new Ce.y(he=>{let it=0;return nt.schedule(function(){it===xe.length?he.complete():(he.next(xe[it++]),he.closed||this.schedule())})})}(xe,nt);if((0,Re.t)(xe))return function ge(xe,nt){return(0,c.Xf)(xe).pipe((0,N.R)(nt),(0,H.Q)(nt))}(xe,nt);if((0,te.D)(xe))return oe(xe,nt);if((0,Be.T)(xe))return function W(xe,nt){return new Ce.y(he=>{let it;return(0,G.f)(he,nt,()=>{it=xe[me.h](),(0,G.f)(he,nt,()=>{let U,Z;try{({value:U,done:Z}=it.next())}catch(z){return void he.error(z)}Z?he.complete():he.next(U)},0,!0)}),()=>(0,ye.m)(null==it?void 0:it.return)&&it.return()})}(xe,nt);if((0,be.L)(xe))return function Te(xe,nt){return oe((0,be.Q)(xe),nt)}(xe,nt)}throw(0,fe.z)(xe)}(xe,nt):(0,c.Xf)(xe)}},8421:(ct,ke,F)=>{"use strict";F.d(ke,{Xf:()=>je});var c=F(5987),H=F(1144),N=F(8239),de=F(8306),ge=F(3670),Ce=F(2206),ce=F(4532),me=F(6495),ye=F(3260),G=F(576),W=F(7849),oe=F(8822);function je(ve){if(ve instanceof de.y)return ve;if(null!=ve){if((0,ge.c)(ve))return function Re(ve){return new de.y(qe=>{const xe=ve[oe.L]();if((0,G.m)(xe.subscribe))return xe.subscribe(qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ve);if((0,H.z)(ve))return function Fe(ve){return new de.y(qe=>{for(let xe=0;xe<ve.length&&!qe.closed;xe++)qe.next(ve[xe]);qe.complete()})}(ve);if((0,N.t)(ve))return function Be(ve){return new de.y(qe=>{ve.then(xe=>{qe.closed||(qe.next(xe),qe.complete())},xe=>qe.error(xe)).then(null,W.h)})}(ve);if((0,Ce.D)(ve))return fe(ve);if((0,me.T)(ve))return function te(ve){return new de.y(qe=>{for(const xe of ve)if(qe.next(xe),qe.closed)return;qe.complete()})}(ve);if((0,ye.L)(ve))return function be(ve){return fe((0,ye.Q)(ve))}(ve)}throw(0,ce.z)(ve)}function fe(ve){return new de.y(qe=>{(function Te(ve,qe){var xe,nt,he,it;return(0,c.mG)(this,void 0,void 0,function*(){try{for(xe=(0,c.KL)(ve);!(nt=yield xe.next()).done;)if(qe.next(nt.value),qe.closed)return}catch(U){he={error:U}}finally{try{nt&&!nt.done&&(it=xe.return)&&(yield it.call(xe))}finally{if(he)throw he.error}}qe.complete()})})(ve,qe).catch(xe=>qe.error(xe))})}},6451:(ct,ke,F)=>{"use strict";F.d(ke,{T:()=>Ce});var c=F(8189),H=F(8421),N=F(515),de=F(3269),ge=F(8996);function Ce(...ce){const me=(0,de.yG)(ce),ye=(0,de._6)(ce,1/0),G=ce;return G.length?1===G.length?(0,H.Xf)(G[0]):(0,c.J)(ye)((0,ge.D)(G,me)):N.E}},5403:(ct,ke,F)=>{"use strict";F.d(ke,{Q:()=>H});var c=F(930);class H extends c.Lv{constructor(de,ge,Ce,ce,me){super(de),this.onFinalize=me,this._next=ge?function(ye){try{ge(ye)}catch(G){de.error(G)}}:super._next,this._error=ce?function(ye){try{ce(ye)}catch(G){de.error(G)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(ye){de.error(ye)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}},4004:(ct,ke,F)=>{"use strict";F.d(ke,{U:()=>N});var c=F(4482),H=F(5403);function N(de,ge){return(0,c.e)((Ce,ce)=>{let me=0;Ce.subscribe(new H.Q(ce,ye=>{ce.next(de.call(ge,ye,me++))}))})}},8189:(ct,ke,F)=>{"use strict";F.d(ke,{J:()=>N});var c=F(5577),H=F(4671);function N(de=1/0){return(0,c.z)(H.y,de)}},5577:(ct,ke,F)=>{"use strict";F.d(ke,{z:()=>me});var c=F(4004),H=F(8421),N=F(4482),de=F(9672),ge=F(5403),ce=F(576);function me(ye,G,W=1/0){return(0,ce.m)(G)?me((oe,je)=>(0,c.U)((Re,Fe)=>G(oe,Re,je,Fe))((0,H.Xf)(ye(oe,je))),W):("number"==typeof G&&(W=G),(0,N.e)((oe,je)=>function Ce(ye,G,W,oe,je,Re,Fe,Be){const te=[];let fe=0,be=0,Te=!1;const ve=()=>{Te&&!te.length&&!fe&&G.complete()},qe=nt=>fe<oe?xe(nt):te.push(nt),xe=nt=>{Re&&G.next(nt),fe++;let he=!1;(0,H.Xf)(W(nt,be++)).subscribe(new ge.Q(G,it=>{null==je||je(it),Re?qe(it):G.next(it)},()=>{he=!0},void 0,()=>{if(he)try{for(fe--;te.length&&fe<oe;){const it=te.shift();Fe?(0,de.f)(G,Fe,()=>xe(it)):xe(it)}ve()}catch(it){G.error(it)}}))};return ye.subscribe(new ge.Q(G,qe,()=>{Te=!0,ve()})),()=>{null==Be||Be()}}(oe,je,ye,W)))}},5363:(ct,ke,F)=>{"use strict";F.d(ke,{Q:()=>de});var c=F(9672),H=F(4482),N=F(5403);function de(ge,Ce=0){return(0,H.e)((ce,me)=>{ce.subscribe(new N.Q(me,ye=>(0,c.f)(me,ge,()=>me.next(ye),Ce),()=>(0,c.f)(me,ge,()=>me.complete(),Ce),ye=>(0,c.f)(me,ge,()=>me.error(ye),Ce)))})}},3099:(ct,ke,F)=>{"use strict";F.d(ke,{B:()=>Ce});var c=F(8996),H=F(5698),N=F(7579),de=F(930),ge=F(4482);function Ce(me={}){const{connector:ye=(()=>new N.x),resetOnError:G=!0,resetOnComplete:W=!0,resetOnRefCountZero:oe=!0}=me;return je=>{let Re=null,Fe=null,Be=null,te=0,fe=!1,be=!1;const Te=()=>{null==Fe||Fe.unsubscribe(),Fe=null},ve=()=>{Te(),Re=Be=null,fe=be=!1},qe=()=>{const xe=Re;ve(),null==xe||xe.unsubscribe()};return(0,ge.e)((xe,nt)=>{te++,!be&&!fe&&Te();const he=Be=null!=Be?Be:ye();nt.add(()=>{te--,0===te&&!be&&!fe&&(Fe=ce(qe,oe))}),he.subscribe(nt),Re||(Re=new de.Hp({next:it=>he.next(it),error:it=>{be=!0,Te(),Fe=ce(ve,G,it),he.error(it)},complete:()=>{fe=!0,Te(),Fe=ce(ve,W),he.complete()}}),(0,c.D)(xe).subscribe(Re))})(je)}}function ce(me,ye,...G){return!0===ye?(me(),null):!1===ye?null:ye(...G).pipe((0,H.q)(1)).subscribe(()=>me())}},9468:(ct,ke,F)=>{"use strict";F.d(ke,{R:()=>H});var c=F(4482);function H(N,de=0){return(0,c.e)((ge,Ce)=>{Ce.add(N.schedule(()=>ge.subscribe(Ce),de))})}},5698:(ct,ke,F)=>{"use strict";F.d(ke,{q:()=>de});var c=F(515),H=F(4482),N=F(5403);function de(ge){return ge<=0?()=>c.E:(0,H.e)((Ce,ce)=>{let me=0;Ce.subscribe(new N.Q(ce,ye=>{++me<=ge&&(ce.next(ye),ge<=me&&ce.complete())}))})}},8505:(ct,ke,F)=>{"use strict";F.d(ke,{b:()=>ge});var c=F(576),H=F(4482),N=F(5403),de=F(4671);function ge(Ce,ce,me){const ye=(0,c.m)(Ce)||ce||me?{next:Ce,error:ce,complete:me}:Ce;return ye?(0,H.e)((G,W)=>{var oe;null===(oe=ye.subscribe)||void 0===oe||oe.call(ye);let je=!0;G.subscribe(new N.Q(W,Re=>{var Fe;null===(Fe=ye.next)||void 0===Fe||Fe.call(ye,Re),W.next(Re)},()=>{var Re;je=!1,null===(Re=ye.complete)||void 0===Re||Re.call(ye),W.complete()},Re=>{var Fe;je=!1,null===(Fe=ye.error)||void 0===Fe||Fe.call(ye,Re),W.error(Re)},()=>{var Re,Fe;je&&(null===(Re=ye.unsubscribe)||void 0===Re||Re.call(ye)),null===(Fe=ye.finalize)||void 0===Fe||Fe.call(ye)}))}):de.y}},4408:(ct,ke,F)=>{"use strict";F.d(ke,{o:()=>ge});var c=F(727);class H extends c.w0{constructor(ce,me){super()}schedule(ce,me=0){return this}}const N={setInterval(...Ce){const{delegate:ce}=N;return((null==ce?void 0:ce.setInterval)||setInterval)(...Ce)},clearInterval(Ce){const{delegate:ce}=N;return((null==ce?void 0:ce.clearInterval)||clearInterval)(Ce)},delegate:void 0};var de=F(8737);class ge extends H{constructor(ce,me){super(ce,me),this.scheduler=ce,this.work=me,this.pending=!1}schedule(ce,me=0){if(this.closed)return this;this.state=ce;const ye=this.id,G=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(G,ye,me)),this.pending=!0,this.delay=me,this.id=this.id||this.requestAsyncId(G,this.id,me),this}requestAsyncId(ce,me,ye=0){return N.setInterval(ce.flush.bind(ce,this),ye)}recycleAsyncId(ce,me,ye=0){if(null!=ye&&this.delay===ye&&!1===this.pending)return me;N.clearInterval(me)}execute(ce,me){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(ce,me);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,me){let G,ye=!1;try{this.work(ce)}catch(W){ye=!0,G=W||new Error("Scheduled action threw falsy error")}if(ye)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ce,scheduler:me}=this,{actions:ye}=me;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(ye,this),null!=ce&&(this.id=this.recycleAsyncId(me,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(ct,ke,F)=>{"use strict";F.d(ke,{v:()=>N});var c=F(6063);class H{constructor(ge,Ce=H.now){this.schedulerActionCtor=ge,this.now=Ce}schedule(ge,Ce=0,ce){return new this.schedulerActionCtor(this,ge).schedule(ce,Ce)}}H.now=c.l.now;class N extends H{constructor(ge,Ce=H.now){super(ge,Ce),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ge){const{actions:Ce}=this;if(this._active)return void Ce.push(ge);let ce;this._active=!0;do{if(ce=ge.execute(ge.state,ge.delay))break}while(ge=Ce.shift());if(this._active=!1,ce){for(;ge=Ce.shift();)ge.unsubscribe();throw ce}}}},4986:(ct,ke,F)=>{"use strict";F.d(ke,{z:()=>N,P:()=>de});var c=F(4408);const N=new(F(7565).v)(c.o),de=N},6063:(ct,ke,F)=>{"use strict";F.d(ke,{l:()=>c});const c={now:()=>(c.delegate||Date).now(),delegate:void 0}},3410:(ct,ke,F)=>{"use strict";F.d(ke,{z:()=>c});const c={setTimeout(...H){const{delegate:N}=c;return((null==N?void 0:N.setTimeout)||setTimeout)(...H)},clearTimeout(H){const{delegate:N}=c;return((null==N?void 0:N.clearTimeout)||clearTimeout)(H)},delegate:void 0}},2202:(ct,ke,F)=>{"use strict";F.d(ke,{h:()=>H});const H=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ct,ke,F)=>{"use strict";F.d(ke,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(ct,ke,F)=>{"use strict";F.d(ke,{jO:()=>de,yG:()=>ge,_6:()=>Ce});var c=F(576),H=F(3532);function N(ce){return ce[ce.length-1]}function de(ce){return(0,c.m)(N(ce))?ce.pop():void 0}function ge(ce){return(0,H.K)(N(ce))?ce.pop():void 0}function Ce(ce,me){return"number"==typeof N(ce)?ce.pop():me}},8737:(ct,ke,F)=>{"use strict";function c(H,N){if(H){const de=H.indexOf(N);0<=de&&H.splice(de,1)}}F.d(ke,{P:()=>c})},3888:(ct,ke,F)=>{"use strict";function c(H){const de=H(ge=>{Error.call(ge),ge.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}F.d(ke,{d:()=>c})},2806:(ct,ke,F)=>{"use strict";F.d(ke,{x:()=>N,O:()=>de});var c=F(2416);let H=null;function N(ge){if(c.v.useDeprecatedSynchronousErrorHandling){const Ce=!H;if(Ce&&(H={errorThrown:!1,error:null}),ge(),Ce){const{errorThrown:ce,error:me}=H;if(H=null,ce)throw me}}else ge()}function de(ge){c.v.useDeprecatedSynchronousErrorHandling&&H&&(H.errorThrown=!0,H.error=ge)}},9672:(ct,ke,F)=>{"use strict";function c(H,N,de,ge=0,Ce=!1){const ce=N.schedule(function(){de(),Ce?H.add(this.schedule(null,ge)):this.unsubscribe()},ge);if(H.add(ce),!Ce)return ce}F.d(ke,{f:()=>c})},4671:(ct,ke,F)=>{"use strict";function c(H){return H}F.d(ke,{y:()=>c})},1144:(ct,ke,F)=>{"use strict";F.d(ke,{z:()=>c});const c=H=>H&&"number"==typeof H.length&&"function"!=typeof H},2206:(ct,ke,F)=>{"use strict";F.d(ke,{D:()=>H});var c=F(576);function H(N){return Symbol.asyncIterator&&(0,c.m)(null==N?void 0:N[Symbol.asyncIterator])}},576:(ct,ke,F)=>{"use strict";function c(H){return"function"==typeof H}F.d(ke,{m:()=>c})},3670:(ct,ke,F)=>{"use strict";F.d(ke,{c:()=>N});var c=F(8822),H=F(576);function N(de){return(0,H.m)(de[c.L])}},6495:(ct,ke,F)=>{"use strict";F.d(ke,{T:()=>N});var c=F(2202),H=F(576);function N(de){return(0,H.m)(null==de?void 0:de[c.h])}},8239:(ct,ke,F)=>{"use strict";F.d(ke,{t:()=>H});var c=F(576);function H(N){return(0,c.m)(null==N?void 0:N.then)}},3260:(ct,ke,F)=>{"use strict";F.d(ke,{Q:()=>N,L:()=>de});var c=F(5987),H=F(576);function N(ge){return(0,c.FC)(this,arguments,function*(){const ce=ge.getReader();try{for(;;){const{value:me,done:ye}=yield(0,c.qq)(ce.read());if(ye)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(me)}}finally{ce.releaseLock()}})}function de(ge){return(0,H.m)(null==ge?void 0:ge.getReader)}},3532:(ct,ke,F)=>{"use strict";F.d(ke,{K:()=>H});var c=F(576);function H(N){return N&&(0,c.m)(N.schedule)}},4482:(ct,ke,F)=>{"use strict";F.d(ke,{A:()=>H,e:()=>N});var c=F(576);function H(de){return(0,c.m)(null==de?void 0:de.lift)}function N(de){return ge=>{if(H(ge))return ge.lift(function(Ce){try{return de(Ce,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(ct,ke,F)=>{"use strict";function c(){}F.d(ke,{Z:()=>c})},7849:(ct,ke,F)=>{"use strict";F.d(ke,{h:()=>N});var c=F(2416),H=F(3410);function N(de){H.z.setTimeout(()=>{const{onUnhandledError:ge}=c.v;if(!ge)throw de;ge(de)})}},4532:(ct,ke,F)=>{"use strict";function c(H){return new TypeError(`You provided ${null!==H&&"object"==typeof H?"an invalid object":`'${H}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(ke,{z:()=>c})},5987:(ct,ke,F)=>{"use strict";function me(U,Z,z,X){return new(z||(z=Promise))(function(K,$e){function yt(et){try{Le(X.next(et))}catch(un){$e(un)}}function cn(et){try{Le(X.throw(et))}catch(un){$e(un)}}function Le(et){et.done?K(et.value):function pe(K){return K instanceof z?K:new z(function($e){$e(K)})}(et.value).then(yt,cn)}Le((X=X.apply(U,Z||[])).next())})}function te(U){return this instanceof te?(this.v=U,this):new te(U)}function fe(U,Z,z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,X=z.apply(U,Z||[]),K=[];return pe={},$e("next"),$e("throw"),$e("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function $e(It){X[It]&&(pe[It]=function(Tn){return new Promise(function(Kt,Ut){K.push([It,Tn,Kt,Ut])>1||yt(It,Tn)})})}function yt(It,Tn){try{!function cn(It){It.value instanceof te?Promise.resolve(It.value.v).then(Le,et):un(K[0][2],It)}(X[It](Tn))}catch(Kt){un(K[0][3],Kt)}}function Le(It){yt("next",It)}function et(It){yt("throw",It)}function un(It,Tn){It(Tn),K.shift(),K.length&&yt(K[0][0],K[0][1])}}function Te(U){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var z,Z=U[Symbol.asyncIterator];return Z?Z.call(U):(U=function oe(U){var Z="function"==typeof Symbol&&Symbol.iterator,z=Z&&U[Z],X=0;if(z)return z.call(U);if(U&&"number"==typeof U.length)return{next:function(){return U&&X>=U.length&&(U=void 0),{value:U&&U[X++],done:!U}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}(U),z={},X("next"),X("throw"),X("return"),z[Symbol.asyncIterator]=function(){return this},z);function X(K){z[K]=U[K]&&function($e){return new Promise(function(yt,cn){!function pe(K,$e,yt,cn){Promise.resolve(cn).then(function(Le){K({value:Le,done:yt})},$e)}(yt,cn,($e=U[K]($e)).done,$e.value)})}}}F.d(ke,{mG:()=>me,qq:()=>te,FC:()=>fe,KL:()=>Te})},655:(ct,ke,F)=>{"use strict";function de(U,Z){var z={};for(var X in U)Object.prototype.hasOwnProperty.call(U,X)&&Z.indexOf(X)<0&&(z[X]=U[X]);if(null!=U&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(X=Object.getOwnPropertySymbols(U);pe<X.length;pe++)Z.indexOf(X[pe])<0&&Object.prototype.propertyIsEnumerable.call(U,X[pe])&&(z[X[pe]]=U[X[pe]])}return z}F.d(ke,{_T:()=>de})},5e3:(ct,ke,F)=>{"use strict";F.d(ke,{deG:()=>hs,tb:()=>Fv,AFp:()=>xC,ip1:()=>Pv,CZH:()=>qd,hGG:()=>hI,z2F:()=>zf,sBO:()=>ZM,Sil:()=>Lv,_Vd:()=>jg,EJc:()=>PC,SBq:()=>Hg,qLn:()=>hg,vpe:()=>Xo,tBr:()=>nr,XFs:()=>wt,OlP:()=>sn,zs3:()=>_s,ZZ4:()=>cm,aQg:()=>Eu,soG:()=>nm,YKP:()=>tC,h0i:()=>Vd,PXZ:()=>BC,R0b:()=>Bs,FiY:()=>Zn,Lbi:()=>OC,g9A:()=>tm,n_E:()=>qg,Qsj:()=>z1,FYo:()=>cM,JOm:()=>ml,q3G:()=>Hn,tp0:()=>Os,Rgc:()=>kf,dDg:()=>js,q4F:()=>dM,GfV:()=>uM,s_b:()=>Rf,ifc:()=>Bt,eFA:()=>Zd,G48:()=>sm,Gpc:()=>W,f3M:()=>_e,X6Q:()=>WM,_c5:()=>cI,VLi:()=>im,c2e:()=>RC,zSh:()=>uf,wAp:()=>Et,vHH:()=>Fe,EiD:()=>Yh,mCW:()=>m,qzn:()=>lc,JVY:()=>ig,pB0:()=>Qc,eBb:()=>$h,L6k:()=>Hh,LAX:()=>ho,cg1:()=>Yy,kL8:()=>xE,yhl:()=>Yc,dqk:()=>Pt,sIi:()=>gf,CqO:()=>cE,QGY:()=>Ty,F4k:()=>Dy,RDi:()=>Ja,AaK:()=>me,z3N:()=>qi,qOj:()=>ry,TTD:()=>Wa,_Bn:()=>oM,xp6:()=>iS,uIk:()=>oy,ekj:()=>Vy,Suo:()=>vv,Xpm:()=>He,lG2:()=>Oe,Yz7:()=>Kt,cJS:()=>tn,oAB:()=>le,Yjl:()=>We,Y36:()=>kd,_UZ:()=>Iy,GkF:()=>aE,BQk:()=>vf,ynx:()=>Od,qZA:()=>Cy,TgZ:()=>Ey,EpF:()=>lE,n5z:()=>td,Ikx:()=>Ky,LFG:()=>B,$8M:()=>xs,$Z:()=>vy,NdJ:()=>Sy,CRH:()=>bv,O4$:()=>Fc,oxw:()=>xy,ALo:()=>_c,lcZ:()=>gv,xi3:()=>cC,Hsn:()=>fE,F$t:()=>ky,Q6J:()=>by,s9C:()=>Oy,WLB:()=>iC,l5B:()=>sC,iGM:()=>_C,MAs:()=>Kw,CHM:()=>ql,oJD:()=>u_,LSH:()=>fd,Udp:()=>EE,YNc:()=>uy,W1O:()=>Nf,_uU:()=>Hy,Oqu:()=>CE,hij:()=>$y,Gf:()=>yC});var c=F(7579),H=F(727),N=F(8306),de=F(6451),ge=F(3099);function Ce(o){for(let a in o)if(o[a]===Ce)return a;throw Error("Could not find renamed property on target object.")}function ce(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function me(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(me).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function ye(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const G=Ce({__forward_ref__:Ce});function W(o){return o.__forward_ref__=W,o.toString=function(){return me(this())},o}function oe(o){return je(o)?o():o}function je(o){return"function"==typeof o&&o.hasOwnProperty(G)&&o.__forward_ref__===W}class Fe extends Error{constructor(a,l){super(function Be(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,l)),this.code=a}}function te(o){return"string"==typeof o?o:null==o?"":String(o)}function fe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():te(o)}function qe(o,a){const l=a?` in ${a}`:"";throw new Fe(-201,`No provider for ${fe(o)} found${l}`)}function Le(o,a){null==o&&function et(o,a,l,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function Kt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function tn(o){return{providers:o.providers||[],imports:o.imports||[]}}function Mn(o){return Fi(o,fi)||Fi(o,zn)}function Fi(o,a){return o.hasOwnProperty(a)?o[a]:null}function Ji(o){return o&&(o.hasOwnProperty(Li)||o.hasOwnProperty(es))?o[Li]:null}const fi=Ce({\u0275prov:Ce}),Li=Ce({\u0275inj:Ce}),zn=Ce({ngInjectableDef:Ce}),es=Ce({ngInjectorDef:Ce});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let qr;function Jt(o){const a=qr;return qr=o,a}function Er(o,a,l){const d=Mn(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&wt.Optional?null:void 0!==a?a:void qe(me(o),"Injector")}function Gr(o){return{toString:o}.toString()}var fn=(()=>((fn=fn||{})[fn.OnPush=0]="OnPush",fn[fn.Default=1]="Default",fn))(),Bt=(()=>{return(o=Bt||(Bt={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Bt;var o})();const ft="undefined"!=typeof globalThis&&globalThis,rt="undefined"!=typeof window&&window,pi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt=ft||"undefined"!=typeof global&&global||rt||pi,pn={},$=[],Y=Ce({\u0275cmp:Ce}),J=Ce({\u0275dir:Ce}),De=Ce({\u0275pipe:Ce}),ae=Ce({\u0275mod:Ce}),Ge=Ce({\u0275fac:Ce}),Me=Ce({__NG_ELEMENT_ID__:Ce});let Ie=0;function He(o){return Gr(()=>{const l={},d={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===fn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||$,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Bt.Emulated,id:"c",styles:o.styles||$,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,g=o.features,v=o.pipes;return d.id+=Ie++,d.inputs=Q(o.inputs,l),d.outputs=Q(o.outputs),g&&g.forEach(w=>w(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(St):null,d.pipeDefs=v?()=>("function"==typeof v?v():v).map(gt):null,d})}function St(o){return ut(o)||function kt(o){return o[J]||null}(o)}function gt(o){return function $t(o){return o[De]||null}(o)}const rn={};function le(o){return Gr(()=>{const a={type:o.type,bootstrap:o.bootstrap||$,declarations:o.declarations||$,imports:o.imports||$,exports:o.exports||$,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(rn[o.id]=o.type),a})}function Q(o,a){if(null==o)return pn;const l={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=d,a&&(a[f]=g)}return l}const Oe=He;function We(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function ut(o){return o[Y]||null}function Ft(o,a){const l=o[ae]||null;if(!l&&!0===a)throw new Error(`Type ${me(o)} does not have '\u0275mod' property.`);return l}function Nr(o){return Array.isArray(o)&&"object"==typeof o[1]}function mi(o){return Array.isArray(o)&&!0===o[1]}function Ll(o){return 0!=(8&o.flags)}function Fu(o){return 2==(2&o.flags)}function ss(o){return 1==(1&o.flags)}function os(o){return null!==o.template}function $a(o){return 0!=(512&o[2])}function Bi(o,a){return o.hasOwnProperty(Ge)?o[Ge]:null}class Ga{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Wa(){return Za}function Za(o){return o.type.prototype.ngOnChanges&&(o.setInput=Ka),Eh}function Eh(){const o=Qa(this),a=null==o?void 0:o.current;if(a){const l=o.previous;if(l===pn)o.previous=a;else for(let d in a)l[d]=a[d];o.current=null,this.ngOnChanges(a)}}function Ka(o,a,l,d){const f=Qa(o)||function ca(o,a){return o[Ya]=a}(o,{previous:pn,current:null}),g=f.current||(f.current={}),v=f.previous,w=this.declaredInputs[l],I=v[w];g[w]=new Ga(I&&I.currentValue,a,v===pn),o[d]=a}Wa.ngInherit=!0;const Ya="__ngSimpleChanges__";function Qa(o){return o[Ya]||null}const Xa="http://www.w3.org/2000/svg";let Bl;function Ja(o){Bl=o}function jl(){return void 0!==Bl?Bl:"undefined"!=typeof document?document:void 0}function Ln(o){return!!o.listen}const as={createRenderer:(o,a)=>jl()};function kn(o){for(;Array.isArray(o);)o=o[0];return o}function ji(o,a){return kn(a[o])}function Cr(o,a){return kn(a[o.index])}function To(o,a){return o.data[a]}function yi(o,a){return o[a]}function Fr(o,a){const l=a[o];return Nr(l)?l:l[0]}function Jn(o){return 4==(4&o[2])}function Do(o){return 128==(128&o[2])}function li(o,a){return null==a?null:o[a]}function So(o){o[18]=0}function Ao(o,a){o[5]+=a;let l=o,d=o[3];for(;null!==d&&(1===a&&1===l[5]||-1===a&&0===l[5]);)d[5]+=a,l=d,d=d[3]}const Ct={lFrame:al(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function xc(){return Ct.bindingsEnabled}function Pe(){return Ct.lFrame.lView}function zt(){return Ct.lFrame.tView}function ql(o){return Ct.lFrame.contextLView=o,o[8]}function An(){let o=da();for(;null!==o&&64===o.type;)o=o.parent;return o}function da(){return Ct.lFrame.currentTNode}function Lr(o,a){const l=Ct.lFrame;l.currentTNode=o,l.isParent=a}function Oo(){return Ct.lFrame.isParent}function nl(){Ct.lFrame.isParent=!1}function fa(){return Ct.isInCheckNoChangesMode}function Gl(o){Ct.isInCheckNoChangesMode=o}function Ir(){const o=Ct.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Hi(){return Ct.lFrame.bindingIndex++}function Oc(o,a){const l=Ct.lFrame;l.bindingIndex=l.bindingRootIndex=o,rl(a)}function rl(o){Ct.lFrame.currentDirectiveIndex=o}function sl(){return Ct.lFrame.currentQueryIndex}function ol(o){Ct.lFrame.currentQueryIndex=o}function Kl(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Pc(o,a,l){if(l&wt.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||l&wt.Host||(f=Kl(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,o=g}const d=Ct.lFrame=zu();return d.currentTNode=a,d.lView=o,!0}function Yl(o){const a=zu(),l=o[1];Ct.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function zu(){const o=Ct.lFrame,a=null===o?null:o.child;return null===a?al(o):a}function al(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Nc(){const o=Ct.lFrame;return Ct.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const ro=Nc;function ll(){const o=Nc();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function gr(){return Ct.lFrame.selectedIndex}function mr(o){Ct.lFrame.selectedIndex=o}function Un(){const o=Ct.lFrame;return To(o.tView,o.selectedIndex)}function Fc(){Ct.lFrame.currentNamespace=Xa}function Gu(o,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const g=o.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:O}=g;v&&(o.contentHooks||(o.contentHooks=[])).push(-l,v),w&&((o.contentHooks||(o.contentHooks=[])).push(l,w),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,w)),I&&(o.viewHooks||(o.viewHooks=[])).push(-l,I),A&&((o.viewHooks||(o.viewHooks=[])).push(l,A),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,A)),null!=O&&(o.destroyHooks||(o.destroyHooks=[])).push(l,O)}}function io(o,a,l){Sh(o,a,3,l)}function ls(o,a,l,d){(3&o[2])===l&&Sh(o,a,l,d)}function Ql(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function Sh(o,a,l,d){const g=null!=d?d:-1,v=a.length-1;let w=0;for(let I=void 0!==d?65535&o[18]:0;I<v;I++)if("number"==typeof a[I+1]){if(w=a[I],null!=d&&w>=d)break}else a[I]<0&&(o[18]+=65536),(w<g||-1==g)&&(Yp(o,l,a,I),o[18]=(4294901760&o[18])+I+2),I++}function Yp(o,a,l,d){const f=l[d]<0,g=l[d+1],w=o[f?-l[d]:l[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(w)}finally{}}}else try{g.call(w)}finally{}}class Wn{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function Ku(o,a,l){const d=Ln(o);let f=0;for(;f<l.length;){const g=l[f];if("number"==typeof g){if(0!==g)break;f++;const v=l[f++],w=l[f++],I=l[f++];d?o.setAttribute(a,w,I,v):a.setAttributeNS(v,w,I)}else{const v=g,w=l[++f];Yu(v)?d&&o.setProperty(a,v,w):d?o.setAttribute(a,v,w):a.setAttribute(v,w),f++}}return f}function bi(o){return 3===o||4===o||6===o}function Yu(o){return 64===o.charCodeAt(0)}function ar(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?l=f:0===l||Bc(o,l,f,null,-1===l||2===l?a[++d]:null)}}return o}function Bc(o,a,l,d,f){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const w=o[g++];if("number"==typeof w){if(w===a){v=-1;break}if(w>a){v=g-1;break}}}for(;g<o.length;){const w=o[g];if("number"==typeof w)break;if(w===l){if(null===d)return void(null!==f&&(o[g+1]=f));if(d===o[g+1])return void(o[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,l),null!==d&&o.splice(g++,0,d),null!==f&&o.splice(g++,0,f)}function jn(o){return-1!==o}function lr(o){return 32767&o}function wn(o,a){let l=function Mh(o){return o>>16}(o),d=a;for(;l>0;)d=d[15],l--;return d}let Vr=!0;function Ro(o){const a=Vr;return Vr=o,a}let No=0;function Ds(o,a){const l=cs(o,a);if(-1!==l)return l;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,Ss(d.data,o),Ss(a,null),Ss(d.blueprint,null));const f=us(o,a),g=o.injectorIndex;if(jn(f)){const v=lr(f),w=wn(f,a),I=w[1].data;for(let A=0;A<8;A++)a[g+A]=w[v+A]|I[v+A]}return a[g+8]=f,g}function Ss(o,a){o.push(0,0,0,0,0,0,0,0,a)}function cs(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function us(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,d=null,f=a;for(;null!==f;){const g=f[1],v=g.type;if(d=2===v?g.declTNode:1===v?f[6]:null,null===d)return-1;if(l++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function pa(o,a,l){!function Qu(o,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Me)&&(d=l[Me]),null==d&&(d=l[Me]=No++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,l)}function ec(o,a,l){if(l&wt.Optional)return o;qe(a,"NodeInjector")}function $i(o,a,l,d){if(l&wt.Optional&&void 0===d&&(d=null),0==(l&(wt.Self|wt.Host))){const f=o[9],g=Jt(void 0);try{return f?f.get(a,d,l&wt.Optional):Er(a,d,l&wt.Optional)}finally{Jt(g)}}return ec(d,a,l)}function tc(o,a,l,d=wt.Default,f){if(null!==o){const g=function Xu(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Me)?o[Me]:void 0;return"number"==typeof a?a>=0?255&a:so:a}(l);if("function"==typeof g){if(!Pc(a,o,d))return d&wt.Host?ec(f,l,d):$i(a,l,d,f);try{const v=g(d);if(null!=v||d&wt.Optional)return v;qe(l)}finally{ro()}}else if("number"==typeof g){let v=null,w=cs(o,a),I=-1,A=d&wt.Host?a[16][6]:null;for((-1===w||d&wt.SkipSelf)&&(I=-1===w?us(o,a):a[w+8],-1!==I&&ed(d,!1)?(v=a[1],w=lr(I),a=wn(I,a)):w=-1);-1!==w;){const O=a[1];if(Ju(g,w,O.data)){const M=mn(w,a,l,v,d,A);if(M!==As)return M}I=a[w+8],-1!==I&&ed(d,a[1].data[w+8]===A)&&Ju(g,w,a)?(v=O,w=lr(I),a=wn(I,a)):w=-1}}}return $i(a,l,d,f)}const As={};function so(){return new Fo(An(),Pe())}function mn(o,a,l,d,f,g){const v=a[1],w=v.data[o+8],O=On(w,v,l,null==d?Fu(w)&&Vr:d!=v&&0!=(3&w.type),f&wt.Host&&g===w);return null!==O?Ms(a,v,O,w):As}function On(o,a,l,d,f){const g=o.providerIndexes,v=a.data,w=1048575&g,I=o.directiveStart,O=g>>20,q=f?w+O:o.directiveEnd;for(let re=d?w:w+O;re<q;re++){const we=v[re];if(re<I&&l===we||re>=I&&we.type===l)return re}if(f){const re=v[I];if(re&&os(re)&&re.type===l)return I}return null}function Ms(o,a,l,d){let f=o[l];const g=a.data;if(function Lc(o){return o instanceof Wn}(f)){const v=f;v.resolving&&function be(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Fe(-200,`Circular dependency in DI detected for ${o}${l}`)}(fe(g[l]));const w=Ro(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Jt(v.injectImpl):null;Pc(o,d,wt.Default);try{f=o[l]=v.factory(void 0,g,o,d),a.firstCreatePass&&l>=d.directiveStart&&function N0(o,a,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(d){const v=Za(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,v)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,g))}(l,g[l],a)}finally{null!==I&&Jt(I),Ro(w),v.resolving=!1,ro()}}return f}function Ju(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function ed(o,a){return!(o&wt.Self||o&wt.Host&&a)}class Fo{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return tc(this._tNode,this._lView,a,d,l)}}function td(o){return Gr(()=>{const a=o.prototype.constructor,l=a[Ge]||Tr(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const g=f[Ge]||Tr(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Tr(o){return je(o)?()=>{const a=Tr(oe(o));return a&&a()}:Bi(o)}function xs(o){return function dl(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const g=l[f];if(bi(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(An(),o)}const ot="__parameters__";function Lo(o,a,l){return Gr(()=>{const d=function ds(o){return function(...l){if(o){const d=o(...l);for(const f in d)this[f]=d[f]}}}(a);function f(...g){if(this instanceof f)return d.apply(this,g),this;const v=new f(...g);return w.annotation=v,w;function w(I,A,O){const M=I.hasOwnProperty(ot)?I[ot]:Object.defineProperty(I,ot,{value:[]})[ot];for(;M.length<=O;)M.push(null);return(M[O]=M[O]||[]).push(v),I}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class sn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Kt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}const hs=new sn("AnalyzeForEntryComponents");function ui(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let d=o[l];Array.isArray(d)?(a===o&&(a=o.slice(0,l)),ui(d,a)):a!==o&&a.push(d)}return a}function wi(o,a){o.forEach(l=>Array.isArray(l)?wi(l,a):a(l))}function ga(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function lo(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function ma(o,a){const l=[];for(let d=0;d<o;d++)l.push(a);return l}function Dr(o,a,l){let d=ps(o,a);return d>=0?o[1|d]=l:(d=~d,function zi(o,a,l,d){let f=o.length;if(f==a)o.push(l,d);else if(1===f)o.push(d,o[0]),o[0]=l;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=l,o[a+1]=d}}(o,d,a,l)),d}function Uo(o,a){const l=ps(o,a);if(l>=0)return o[1|l]}function ps(o,a){return function qc(o,a,l){let d=0,f=o.length>>l;for(;f!==d;){const g=d+(f-d>>1),v=o[g<<l];if(a===v)return g<<l;v>a?f=g:d=g+1}return~(f<<l)}(o,a,1)}const va={},er="__NG_DI_FLAG__",tr="ngTempTokenPath",kh=/\n/gm,pl="__source",Zc=Ce({provide:String,useValue:Ce});let T;function S(o){const a=T;return T=o,a}function P(o,a=wt.Default){if(void 0===T)throw new Fe(203,"");return null===T?Er(o,void 0,a):T.get(o,a&wt.Optional?null:void 0,a)}function B(o,a=wt.Default){return(function Dn(){return qr}()||P)(oe(o),a)}const _e=B;function Ve(o){const a=[];for(let l=0;l<o.length;l++){const d=oe(o[l]);if(Array.isArray(d)){if(0===d.length)throw new Fe(900,"");let f,g=wt.Default;for(let v=0;v<d.length;v++){const w=d[v],I=st(w);"number"==typeof I?-1===I?f=w.token:g|=I:f=w}a.push(B(f,g))}else a.push(B(d))}return a}function Qe(o,a){return o[er]=a,o.prototype[er]=a,o}function st(o){return o[er]}const nr=Qe(Lo("Inject",o=>({token:o})),-1),Zn=Qe(Lo("Optional"),8),Os=Qe(Lo("SkipSelf"),4);let ad,uo;function ba(o){var a;return(null===(a=function ld(){if(void 0===ad&&(ad=null,Pt.trustedTypes))try{ad=Pt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return ad}())||void 0===a?void 0:a.createHTML(o))||o}function gl(o){var a;return(null===(a=function oc(){if(void 0===uo&&(uo=null,Pt.trustedTypes))try{uo=Pt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return uo}())||void 0===a?void 0:a.createHTML(o))||o}class zo{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Uh extends zo{getTypeName(){return"HTML"}}class Bh extends zo{getTypeName(){return"Style"}}class ng extends zo{getTypeName(){return"Script"}}class jh extends zo{getTypeName(){return"URL"}}class rg extends zo{getTypeName(){return"ResourceURL"}}function qi(o){return o instanceof zo?o.changingThisBreaksApplicationSecurity:o}function lc(o,a){const l=Yc(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}function Yc(o){return o instanceof zo&&o.getTypeName()||null}function ig(o){return new Uh(o)}function Hh(o){return new Bh(o)}function $h(o){return new ng(o)}function ho(o){return new jh(o)}function Qc(o){return new rg(o)}class sg{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const l=(new window.DOMParser).parseFromString(ba(a),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(a):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class Xc{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const d=this.inertDocument.createElement("body");l.appendChild(d)}}getInertBodyElement(a){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=ba(a),l;const d=this.inertDocument.createElement("body");return d.innerHTML=ba(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(d),d}stripCustomNsAttrs(a){const l=a.attributes;for(let f=l.length-1;0<f;f--){const v=l.item(f).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&a.removeAttribute(v)}let d=a.firstChild;for(;d;)d.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(d),d=d.nextSibling}}const og=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,b=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function m(o){return(o=String(o)).match(og)||o.match(b)?o:"unsafe:"+o}function E(o){const a={};for(const l of o.split(","))a[l]=!0;return a}function k(...o){const a={};for(const l of o)for(const d in l)l.hasOwnProperty(d)&&(a[d]=!0);return a}const V=E("area,br,col,hr,img,wbr"),ue=E("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Ne=E("rp,rt"),Rn=k(V,k(ue,E("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),k(Ne,E("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),k(Ne,ue)),Rs=E("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ps=E("srcset"),dd=k(Rs,Ps,E("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),E("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Gh=E("script,style,template");class hd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(a){let l=a.firstChild,d=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?d=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,d&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let f=this.checkClobberedElement(l,l.nextSibling);if(f){l=f;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(a){const l=a.nodeName.toLowerCase();if(!Rn.hasOwnProperty(l))return this.sanitizedSomething=!0,!Gh.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const d=a.attributes;for(let f=0;f<d.length;f++){const g=d.item(f),v=g.name,w=v.toLowerCase();if(!dd.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let I=g.value;Rs[w]&&(I=m(I)),Ps[w]&&(o=I,I=(o=String(o)).split(",").map(a=>m(a.trim())).join(", ")),this.buf.push(" ",v,'="',Kh(I),'"')}var o;return this.buf.push(">"),!0}endElement(a){const l=a.nodeName.toLowerCase();Rn.hasOwnProperty(l)&&!V.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(a){this.buf.push(Kh(a))}checkClobberedElement(a,l){if(l&&(a.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${a.outerHTML}`);return l}}const Wh=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zh=/([^\#-~ |!])/g;function Kh(o){return o.replace(/&/g,"&amp;").replace(Wh,function(a){return"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";"}).replace(Zh,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ns;function Yh(o,a){let l=null;try{Ns=Ns||function zh(o){const a=new Xc(o);return function ud(){try{return!!(new window.DOMParser).parseFromString(ba(""),"text/html")}catch(o){return!1}}()?new sg(a):a}(o);let d=a?String(a):"";l=Ns.getInertBodyElement(d);let f=5,g=d;do{if(0===f)throw new Error("Failed to sanitize html because the input is unstable");f--,d=g,g=l.innerHTML,l=Ns.getInertBodyElement(d)}while(d!==g);return ba((new hd).sanitizeChildren(Jc(l)||l))}finally{if(l){const d=Jc(l)||l;for(;d.firstChild;)d.removeChild(d.firstChild)}}}function Jc(o){return"content"in o&&function Qh(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}var Hn=(()=>((Hn=Hn||{})[Hn.NONE=0]="NONE",Hn[Hn.HTML=1]="HTML",Hn[Hn.STYLE=2]="STYLE",Hn[Hn.SCRIPT=3]="SCRIPT",Hn[Hn.URL=4]="URL",Hn[Hn.RESOURCE_URL=5]="RESOURCE_URL",Hn))();function u_(o){const a=lg();return a?gl(a.sanitize(Hn.HTML,o)||""):lc(o,"HTML")?gl(qi(o)):Yh(jl(),te(o))}function fd(o){const a=lg();return a?a.sanitize(Hn.URL,o)||"":lc(o,"URL")?qi(o):m(te(o))}function lg(){const o=Pe();return o&&o[12]}const p_="__ngContext__";function Sr(o,a){o[p_]=a}function cg(o){const a=function Xh(o){return o[p_]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function g_(o){return o.ngOriginalError}function iN(o,...a){o.error(...a)}class hg{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a),d=function G0(o){return o&&o.ngErrorLogger||iN}(a);d(this._console,"ERROR",a),l&&d(this._console,"ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&g_(a);for(;l&&g_(l);)l=g_(l);return l||null}}const W0=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Pt))();function Gt(o){return o instanceof Function?o():o}var ml=(()=>((ml=ml||{})[ml.Important=1]="Important",ml[ml.DashCase=2]="DashCase",ml))();function Z0(o,a){return undefined(o,a)}function ef(o){const a=o[3];return mi(a)?a[3]:a}function Q0(o){return X0(o[13])}function y_(o){return X0(o[4])}function X0(o){for(;null!==o&&!mi(o);)o=o[4];return o}function tf(o,a,l,d,f){if(null!=d){let g,v=!1;mi(d)?g=d:Nr(d)&&(v=!0,d=d[0]);const w=kn(d);0===o&&null!==l?null==f?iw(a,l,w):pd(a,l,w,f||null,!0):1===o&&null!==l?pd(a,l,w,f||null,!0):2===o?function KD(o,a,l){const d=E_(o,a);d&&function mN(o,a,l,d){Ln(o)?o.removeChild(a,l,d):a.removeChild(l)}(o,d,a,l)}(a,w,v):3===o&&a.destroyNode(w),null!=g&&function vN(o,a,l,d,f){const g=l[7];g!==kn(l)&&tf(a,o,d,g,f);for(let w=10;w<l.length;w++){const I=l[w];pg(I[1],I,o,a,d,g)}}(a,o,g,l,f)}}function fg(o,a,l){return Ln(o)?o.createElement(a,l):null===l?o.createElement(a):o.createElementNS(l,a)}function tw(o,a){const l=o[9],d=l.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,Ao(f,-1)),l.splice(d,1)}function nw(o,a){if(o.length<=10)return;const l=10+a,d=o[l];if(d){const f=d[17];null!==f&&f!==o&&tw(f,d),a>0&&(o[l-1][4]=d[4]);const g=lo(o,10+a);!function w_(o,a){pg(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const v=g[19];null!==v&&v.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-129}return d}function jD(o,a){if(!(256&a[2])){const l=a[11];Ln(l)&&l.destroyNode&&pg(o,a,l,3,null,null),function dN(o){let a=o[13];if(!a)return rw(o[1],o);for(;a;){let l=null;if(Nr(a))l=a[13];else{const d=a[10];d&&(l=d)}if(!l){for(;a&&!a[4]&&a!==o;)Nr(a)&&rw(a[1],a),a=a[3];null===a&&(a=o),Nr(a)&&rw(a[1],a),l=a&&a[4]}a=l}}(a)}}function rw(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function gN(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let d=0;d<l.length;d+=2){const f=a[l[d]];if(!(f instanceof Wn)){const g=l[d+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const w=f[g[v]],I=g[v+1];try{I.call(w)}finally{}}else try{g.call(f)}finally{}}}}(o,a),function pN(o,a){const l=o.cleanup,d=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],w="function"==typeof v?v(a):kn(a[v]),I=d[f=l[g+2]],A=l[g+3];"boolean"==typeof A?w.removeEventListener(l[g],I,A):A>=0?d[f=A]():d[f=-A].unsubscribe(),g+=2}else{const v=d[f=l[g+1]];l[g].call(v)}if(null!==d){for(let g=f+1;g<d.length;g++)d[g]();a[7]=null}}(o,a),1===a[1].type&&Ln(a[11])&&a[11].destroy();const l=a[17];if(null!==l&&mi(a[3])){l!==a[3]&&tw(l,a);const d=a[19];null!==d&&d.detachView(o)}}}function HD(o,a,l){return function $D(o,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===Bt.None||f===Bt.Emulated)return null}return Cr(d,l)}(o,a.parent,l)}function pd(o,a,l,d,f){Ln(o)?o.insertBefore(a,l,d,f):a.insertBefore(l,d,f)}function iw(o,a,l){Ln(o)?o.appendChild(a,l):a.appendChild(l)}function zD(o,a,l,d,f){null!==d?pd(o,a,l,d,f):iw(o,a,l)}function E_(o,a){return Ln(o)?o.parentNode(a):a.parentNode}function sw(o,a,l){return GD(o,a,l)}let GD=function qD(o,a,l){return 40&o.type?Cr(o,l):null};function C_(o,a,l,d){const f=HD(o,d,a),g=a[11],w=sw(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(l))for(let I=0;I<l.length;I++)zD(g,f,l[I],w,!1);else zD(g,f,l,w,!1)}function I_(o,a){if(null!==a){const l=a.type;if(3&l)return Cr(a,o);if(4&l)return aw(-1,o[a.index]);if(8&l){const d=a.child;if(null!==d)return I_(o,d);{const f=o[a.index];return mi(f)?aw(-1,f):kn(f)}}if(32&l)return Z0(a,o)()||kn(o[a.index]);{const d=ZD(o,a);return null!==d?Array.isArray(d)?d[0]:I_(ef(o[16]),d):I_(o,a.next)}}return null}function ZD(o,a){return null!==a?o[16][6].projection[a.projection]:null}function aw(o,a){const l=10+o+1;if(l<a.length){const d=a[l],f=d[1].firstChild;if(null!==f)return I_(d,f)}return a[7]}function lw(o,a,l,d,f,g,v){for(;null!=l;){const w=d[l.index],I=l.type;if(v&&0===a&&(w&&Sr(kn(w),d),l.flags|=4),64!=(64&l.flags))if(8&I)lw(o,a,l.child,d,f,g,!1),tf(a,o,f,w,g);else if(32&I){const A=Z0(l,d);let O;for(;O=A();)tf(a,o,f,O,g);tf(a,o,f,w,g)}else 16&I?YD(o,a,d,l,f,g):tf(a,o,f,w,g);l=v?l.projectionNext:l.next}}function pg(o,a,l,d,f,g){lw(l,d,o.firstChild,a,f,g,!1)}function YD(o,a,l,d,f,g){const v=l[16],I=v[6].projection[d.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)tf(a,o,f,I[A],g);else lw(o,a,I,v[3],f,g,!0)}function QD(o,a,l){Ln(o)?o.setAttribute(a,"style",l):a.style.cssText=l}function cw(o,a,l){Ln(o)?""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l):a.className=l}function XD(o,a,l){let d=o.length;for(;;){const f=o.indexOf(a,l);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===d||o.charCodeAt(f+g)<=32)return f}l=f+1}}const JD="ng-template";function wN(o,a,l){let d=0;for(;d<o.length;){let f=o[d++];if(l&&"class"===f){if(f=o[d],-1!==XD(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function eS(o){return 4===o.type&&o.value!==JD}function EN(o,a,l){return a===(4!==o.type||l?o.value:JD)}function CN(o,a,l){let d=4;const f=o.attrs||[],g=function TN(o){for(let a=0;a<o.length;a++)if(bi(o[a]))return a;return o.length}(f);let v=!1;for(let w=0;w<a.length;w++){const I=a[w];if("number"!=typeof I){if(!v)if(4&d){if(d=2|1&d,""!==I&&!EN(o,I,l)||""===I&&1===a.length){if(Go(d))return!1;v=!0}}else{const A=8&d?I:a[++w];if(8&d&&null!==o.attrs){if(!wN(o.attrs,A,l)){if(Go(d))return!1;v=!0}continue}const M=tS(8&d?"class":I,f,eS(o),l);if(-1===M){if(Go(d))return!1;v=!0;continue}if(""!==A){let q;q=M>g?"":f[M+1].toLowerCase();const re=8&d?q:null;if(re&&-1!==XD(re,A,0)||2&d&&A!==q){if(Go(d))return!1;v=!0}}}}else{if(!v&&!Go(d)&&!Go(I))return!1;if(v&&Go(I))continue;v=!1,d=I|1&d}}return Go(d)||v}function Go(o){return 0==(1&o)}function tS(o,a,l,d){if(null===a)return-1;let f=0;if(d||!l){let g=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let w=a[++f];for(;"string"==typeof w;)w=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function DN(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const d=o[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,o)}function nS(o,a,l=!1){for(let d=0;d<a.length;d++)if(CN(o,a[d],l))return!0;return!1}function SN(o,a){e:for(let l=0;l<a.length;l++){const d=a[l];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function rS(o,a){return o?":not("+a.trim()+")":a}function AN(o){let a=o[0],l=1,d=2,f="",g=!1;for(;l<o.length;){let v=o[l];if("string"==typeof v)if(2&d){const w=o[++l];f+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!Go(v)&&(a+=rS(g,f),f=""),d=v,g=g||!Go(d);l++}return""!==f&&(a+=rS(g,f)),a}const Nt={};function iS(o){sS(zt(),Pe(),gr()+o,fa())}function sS(o,a,l,d){if(!d)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&io(a,g,l)}else{const g=o.preOrderHooks;null!==g&&ls(a,g,0,l)}mr(l)}function T_(o,a){return o<<17|a<<2}function Ea(o){return o>>17&32767}function uw(o){return 2|o}function cc(o){return(131068&o)>>2}function dw(o,a){return-131069&o|a<<2}function hw(o){return 1|o}function M_(o,a){const l=o.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const f=l[d],g=l[d+1];if(-1!==g){const v=o.data[g];ol(f),v.contentQueries(2,a[g],g)}}}function gd(o,a,l,d,f,g,v,w,I,A){const O=a.blueprint.slice();return O[0]=f,O[2]=140|d,So(O),O[3]=O[15]=o,O[8]=l,O[10]=v||o&&o[10],O[11]=w||o&&o[11],O[12]=I||o&&o[12]||null,O[9]=A||o&&o[9]||null,O[6]=g,O[16]=2==a.type?o[16]:O,O}function rf(o,a,l,d,f){let g=o.data[a];if(null===g)g=function x_(o,a,l,d,f){const g=da(),v=Oo(),I=o.data[a]=function yS(o,a,l,d,f,g){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,a,d,f);return null===o.firstChild&&(o.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(o,a,l,d,f),function Wl(){return Ct.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=d,g.attrs=f;const v=function ha(){const o=Ct.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return Lr(g,!0),g}function sf(o,a,l,d){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function af(o,a,l){Yl(a);try{const d=o.viewQuery;null!==d&&Ow(1,d,l);const f=o.template;null!==f&&gS(o,a,f,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&M_(o,a),o.staticViewQueries&&Ow(2,o.viewQuery,l);const g=o.components;null!==g&&function UN(o,a){for(let l=0;l<a.length;l++)KN(o,a[l])}(a,g)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,ll()}}function lf(o,a,l,d){const f=a[2];if(256==(256&f))return;Yl(a);const g=fa();try{So(a),function $u(o){return Ct.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&gS(o,a,l,2,d);const v=3==(3&f);if(!g)if(v){const A=o.preOrderCheckHooks;null!==A&&io(a,A,null)}else{const A=o.preOrderHooks;null!==A&&ls(a,A,0,null),Ql(a,0)}if(function Mw(o){for(let a=Q0(o);null!==a;a=y_(a)){if(!a[2])continue;const l=a[9];for(let d=0;d<l.length;d++){const f=l[d],g=f[3];0==(1024&f[2])&&Ao(g,1),f[2]|=1024}}}(a),function Aw(o){for(let a=Q0(o);null!==a;a=y_(a))for(let l=10;l<a.length;l++){const d=a[l],f=d[1];Do(d)&&lf(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&M_(o,a),!g)if(v){const A=o.contentCheckHooks;null!==A&&io(a,A)}else{const A=o.contentHooks;null!==A&&ls(a,A,1),Ql(a,1)}!function dc(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)mr(~f);else{const g=f,v=l[++d],w=l[++d];Oc(v,g),w(2,a[g])}}}finally{mr(-1)}}(o,a);const w=o.components;null!==w&&function VN(o,a){for(let l=0;l<a.length;l++)F_(o,a[l])}(a,w);const I=o.viewQuery;if(null!==I&&Ow(2,I,d),!g)if(v){const A=o.viewCheckHooks;null!==A&&io(a,A)}else{const A=o.viewHooks;null!==A&&ls(a,A,2),Ql(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),g||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Ao(a[3],-1))}finally{ll()}}function BN(o,a,l,d){const f=a[10],g=!fa(),v=Jn(a);try{g&&!v&&f.begin&&f.begin(),v&&af(o,a,d),lf(o,a,l,d)}finally{g&&!v&&f.end&&f.end()}}function gS(o,a,l,d,f){const g=gr(),v=2&d;try{mr(-1),v&&a.length>20&&sS(o,a,20,fa()),l(d,f)}finally{mr(g)}}function _w(o,a,l){if(Ll(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=o.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}function yw(o,a,l){!xc()||(function R_(o,a,l,d){const f=l.directiveStart,g=l.directiveEnd;o.firstCreatePass||Ds(l,a),Sr(d,a);const v=l.initialInputs;for(let w=f;w<g;w++){const I=o.data[w],A=os(I);A&&ZN(a,l,I);const O=Ms(a,o,w,l);Sr(O,a),null!==v&&IS(0,w-f,O,I,0,v),A&&(Fr(l.index,a)[8]=O)}}(o,a,l,Cr(l,a)),128==(128&l.flags)&&function P_(o,a,l){const d=l.directiveStart,f=l.directiveEnd,v=l.index,w=function Rc(){return Ct.lFrame.currentDirectiveIndex}();try{mr(v);for(let I=d;I<f;I++){const A=o.data[I],O=a[I];rl(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&Iw(A,O)}}finally{mr(-1),rl(w)}}(o,a,l))}function k_(o,a,l=Cr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let g=0;g<d.length;g+=2){const v=d[g+1],w=-1===v?l(a,o):o[v];o[f++]=w}}}function mS(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=O_(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function O_(o,a,l,d,f,g,v,w,I,A){const O=20+d,M=O+f,q=function jN(o,a){const l=[];for(let d=0;d<a;d++)l.push(d<o?null:Nt);return l}(O,M),re="function"==typeof A?A():A;return q[1]={type:o,blueprint:q,template:l,queries:null,viewQuery:w,declTNode:a,data:q.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:M,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:re,incompleteFirstPass:!1}}function bw(o,a,l,d){const f=DS(a);null===l?f.push(d):(f.push(l),o.firstCreatePass&&SS(o).push(d,f.length-1))}function ww(o,a,l){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(a,f):l[d]=[a,f]}return l}function fo(o,a,l,d,f,g,v,w){const I=Cr(a,l);let O,A=a.inputs;!w&&null!=A&&(O=A[d])?(H_(o,l,O,d,f),Fu(a)&&function zN(o,a){const l=Fr(a,o);16&l[2]||(l[2]|=64)}(l,a.index)):3&a.type&&(d=function $N(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=v?v(f,a.value||"",d):f,Ln(g)?g.setProperty(I,d,f):Yu(d)||(I.setProperty?I.setProperty(d,f):I[d]=f))}function Cw(o,a,l,d){let f=!1;if(xc()){const g=function wS(o,a,l){const d=o.directiveRegistry;let f=null;if(d)for(let g=0;g<d.length;g++){const v=d[g];nS(l,v.selectors,!1)&&(f||(f=[]),pa(Ds(l,a),o,v.type),os(v)?(N_(o,l),f.unshift(v)):f.push(v))}return f}(o,a,l),v=null===d?null:{"":-1};if(null!==g){f=!0,CS(l,o.data.length,g.length);for(let O=0;O<g.length;O++){const M=g[O];M.providersResolver&&M.providersResolver(M)}let w=!1,I=!1,A=sf(o,a,g.length,null);for(let O=0;O<g.length;O++){const M=g[O];l.mergedAttrs=ar(l.mergedAttrs,M.hostAttrs),Tw(o,l,a,A,M),ES(A,M,v),null!==M.contentQueries&&(l.flags|=8),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(l.flags|=128);const q=M.type.prototype;!w&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),w=!0),!I&&(q.ngOnChanges||q.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),I=!0),A++}!function Ew(o,a){const d=a.directiveEnd,f=o.data,g=a.attrs,v=[];let w=null,I=null;for(let A=a.directiveStart;A<d;A++){const O=f[A],M=O.inputs,q=null===g||eS(a)?null:_g(M,g);v.push(q),w=ww(M,A,w),I=ww(O.outputs,A,I)}null!==w&&(w.hasOwnProperty("class")&&(a.flags|=16),w.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=w,a.outputs=I}(o,l)}v&&function md(o,a,l){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new Fe(-301,`Export of name '${a[f+1]}' not found!`);d.push(a[f],g)}}}(l,d,v)}return l.mergedAttrs=ar(l.mergedAttrs,l.attrs),f}function bS(o,a,l,d,f,g){const v=g.hostBindings;if(v){let w=o.hostBindingOpCodes;null===w&&(w=o.hostBindingOpCodes=[]);const I=~a.index;(function WN(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(w)!=I&&w.push(I),w.push(d,f,v)}}function Iw(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function N_(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function ES(o,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=o;os(a)&&(l[""]=o)}}function CS(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function Tw(o,a,l,d,f){o.data[d]=f;const g=f.factory||(f.factory=Bi(f.type)),v=new Wn(g,os(f),null);o.blueprint[d]=v,l[d]=v,bS(o,a,0,d,sf(o,l,f.hostVars,Nt),f)}function ZN(o,a,l){const d=Cr(a,o),f=mS(l),g=o[10],v=yg(o,gd(o,f,null,l.onPush?64:16,d,a,g,g.createRenderer(d,l),null,null));o[a.index]=v}function _l(o,a,l,d,f,g){const v=Cr(o,a);!function Dw(o,a,l,d,f,g,v){if(null==g)Ln(o)?o.removeAttribute(a,f,l):a.removeAttribute(f);else{const w=null==v?te(g):v(g,d||"",f);Ln(o)?o.setAttribute(a,f,w,l):l?a.setAttributeNS(l,f,w):a.setAttribute(f,w)}}(a[11],v,g,o.value,l,d,f)}function IS(o,a,l,d,f,g){const v=g[a];if(null!==v){const w=d.setInput;for(let I=0;I<v.length;){const A=v[I++],O=v[I++],M=v[I++];null!==w?d.setInput(l,M,A,O):l[O]=M}}}function _g(o,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return l}function TS(o,a,l,d){return new Array(o,!0,!1,a,null,0,d,l,null,null)}function F_(o,a){const l=Fr(a,o);if(Do(l)){const d=l[1];80&l[2]?lf(d,l,d.template,l[8]):l[5]>0&&L_(l)}}function L_(o){for(let d=Q0(o);null!==d;d=y_(d))for(let f=10;f<d.length;f++){const g=d[f];if(1024&g[2]){const v=g[1];lf(v,g,v.template,g[8])}else g[5]>0&&L_(g)}const l=o[1].components;if(null!==l)for(let d=0;d<l.length;d++){const f=Fr(l[d],o);Do(f)&&f[5]>0&&L_(f)}}function KN(o,a){const l=Fr(a,o),d=l[1];(function xw(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(d,l),af(d,l,l[8])}function yg(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Wo(o){for(;o;){o[2]|=64;const a=ef(o);if($a(o)&&!a)return o;o=a}return null}function kw(o,a,l){const d=a[10];d.begin&&d.begin();try{lf(o,a,o.template,l)}catch(f){throw MS(a,f),f}finally{d.end&&d.end()}}function U_(o){!function _d(o){for(let a=0;a<o.components.length;a++){const l=o.components[a],d=cg(l),f=d[1];BN(f,d,f.template,l)}}(o[8])}function Ow(o,a,l){ol(0),a(o,l)}const YN=(()=>Promise.resolve(null))();function DS(o){return o[7]||(o[7]=[])}function SS(o){return o.cleanup||(o.cleanup=[])}function MS(o,a){const l=o[9],d=l?l.get(hg,null):null;d&&d.handleError(a)}function H_(o,a,l,d,f){for(let g=0;g<l.length;){const v=l[g++],w=l[g++],I=a[v],A=o.data[v];null!==A.setInput?A.setInput(I,f,d,w):I[w]=f}}function ms(o,a,l){const d=ji(a,o);!function J0(o,a,l){Ln(o)?o.setValue(a,l):a.textContent=l}(o[11],d,l)}function cf(o,a,l){let d=l?o.styles:null,f=l?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const w=a[v];"number"==typeof w?g=w:1==g?f=ye(f,w):2==g&&(d=ye(d,w+": "+a[++v]+";"))}l?o.styles=d:o.stylesWithoutHost=d,l?o.classes=f:o.classesWithoutHost=f}const Ca=new sn("INJECTOR",-1);class z_{get(a,l=va){if(l===va){const d=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw d.name="NullInjectorError",d}return l}}const uf=new sn("Set Injector scope."),nu={},q_={};let Gi;function G_(){return void 0===Gi&&(Gi=new z_),Gi}function vg(o,a=null,l=null,d){const f=W_(o,a,l,d);return f._resolveInjectorDefTypes(),f}function W_(o,a=null,l=null,d){return new QN(o,l,a||G_(),d)}class QN{constructor(a,l,d,f=null){this.parent=d,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];l&&wi(l,w=>this.processProvider(w,a,l)),wi([a],w=>this.processInjectorType(w,[],g)),this.records.set(Ca,yd(void 0,this));const v=this.records.get(uf);this.scope=null!=v?v.value:null,this.source=f||("object"==typeof a?null:me(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,l=va,d=wt.Default){this.assertNotDestroyed();const f=S(this),g=Jt(void 0);try{if(!(d&wt.SkipSelf)){let w=this.records.get(a);if(void 0===w){const I=function kS(o){return"function"==typeof o||"object"==typeof o&&o instanceof sn}(a)&&Mn(a);w=I&&this.injectableDefInScope(I)?yd(Z_(a),nu):null,this.records.set(a,w)}if(null!=w)return this.hydrate(a,w)}return(d&wt.Self?G_():this.parent).get(a,l=d&wt.Optional&&l===va?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[tr]=v[tr]||[]).unshift(me(a)),f)throw v;return function Yt(o,a,l,d){const f=o[tr];throw a[pl]&&f.unshift(a[pl]),o.message=function _n(o,a,l,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=me(a);if(Array.isArray(a))f=a.map(me).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let w=a[v];g.push(v+":"+("string"==typeof w?JSON.stringify(w):me(w)))}f=`{${g.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${o.replace(kh,"\n  ")}`}("\n"+o.message,f,l,d),o.ngTokenPath=f,o[tr]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{Jt(g),S(f)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((d,f)=>a.push(me(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Fe(205,"")}processInjectorType(a,l,d){if(!(a=oe(a)))return!1;let f=Ji(a);const g=null==f&&a.ngModule||void 0,v=void 0===g?a:g,w=-1!==d.indexOf(v);if(void 0!==g&&(f=Ji(g)),null==f)return!1;if(null!=f.imports&&!w){let O;d.push(v);try{wi(f.imports,M=>{this.processInjectorType(M,l,d)&&(void 0===O&&(O=[]),O.push(M))})}finally{}if(void 0!==O)for(let M=0;M<O.length;M++){const{ngModule:q,providers:re}=O[M];wi(re,we=>this.processProvider(we,q,re||$))}}this.injectorDefTypes.add(v);const I=Bi(v)||(()=>new v);this.records.set(v,yd(I,nu));const A=f.providers;if(null!=A&&!w){const O=a;wi(A,M=>this.processProvider(M,O,A))}return void 0!==g&&void 0!==a.providers}processProvider(a,l,d){let f=iu(a=oe(a))?a:oe(a&&a.provide);const g=function Nw(o,a,l){return wg(o)?yd(void 0,o.useValue):yd(bg(o),nu)}(a);if(iu(a)||!0!==a.multi)this.records.get(f);else{let v=this.records.get(f);v||(v=yd(void 0,nu,!0),v.factory=()=>Ve(v.multi),this.records.set(f,v)),f=a,v.multi.push(a)}this.records.set(f,g)}hydrate(a,l){return l.value===nu&&(l.value=q_,l.value=l.factory()),"object"==typeof l.value&&l.value&&function Lw(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=oe(a.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function Z_(o){const a=Mn(o),l=null!==a?a.factory:Bi(o);if(null!==l)return l;if(o instanceof sn)throw new Fe(204,"");if(o instanceof Function)return function ru(o){const a=o.length;if(a>0)throw ma(a,"?"),new Fe(204,"");const l=function Rr(o){const a=o&&(o[fi]||o[zn]);if(a){const l=function xn(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new Fe(204,"")}function bg(o,a,l){let d;if(iu(o)){const f=oe(o);return Bi(f)||Z_(f)}if(wg(o))d=()=>oe(o.useValue);else if(function Fw(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...Ve(o.deps||[]));else if(function K_(o){return!(!o||!o.useExisting)}(o))d=()=>B(oe(o.useExisting));else{const f=oe(o&&(o.useClass||o.provide));if(!function xS(o){return!!o.deps}(o))return Bi(f)||Z_(f);d=()=>new f(...Ve(o.deps))}return d}function yd(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function wg(o){return null!==o&&"object"==typeof o&&Zc in o}function iu(o){return"function"==typeof o}let _s=(()=>{class o{static create(l,d){var f;if(Array.isArray(l))return vg({name:""},d,l,"");{const g=null!==(f=l.name)&&void 0!==f?f:"";return vg({name:g},l.parent,l.providers,g)}}}return o.THROW_IF_NOT_FOUND=va,o.NULL=new z_,o.\u0275prov=Kt({token:o,providedIn:"any",factory:()=>B(Ca)}),o.__NG_ELEMENT_ID__=-1,o})();function Ls(o,a){Gu(cg(o)[1],An())}function ry(o){let a=function ff(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const d=[o];for(;a;){let f;if(os(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Fe(903,"");f=a.\u0275dir}if(f){if(l){d.push(f);const v=o;v.inputs=iy(o.inputs),v.declaredInputs=iy(o.declaredInputs),v.outputs=iy(o.outputs);const w=f.hostBindings;w&&$w(o,w);const I=f.viewQuery,A=f.contentQueries;if(I&&Tg(o,I),A&&Dg(o,A),ce(o.inputs,f.inputs),ce(o.declaredInputs,f.declaredInputs),ce(o.outputs,f.outputs),os(f)&&f.data.animation){const O=o.data;O.animation=(O.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const w=g[v];w&&w.ngInherit&&w(o),w===ry&&(l=!1)}}a=Object.getPrototypeOf(a)}!function NS(o){let a=0,l=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=ar(f.hostAttrs,l=ar(l,f.hostAttrs))}}(d)}function iy(o){return o===pn?{}:o===$?[]:o}function Tg(o,a){const l=o.viewQuery;o.viewQuery=l?(d,f)=>{a(d,f),l(d,f)}:a}function Dg(o,a){const l=o.contentQueries;o.contentQueries=l?(d,f,g)=>{a(d,f,g),l(d,f,g)}:a}function $w(o,a){const l=o.hostBindings;o.hostBindings=l?(d,f)=>{a(d,f),l(d,f)}:a}let pf=null;function wd(){if(!pf){const o=Pt.Symbol;if(o&&o.iterator)pf=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const d=a[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(pf=d)}}}return pf}function gf(o){return!!Ed(o)&&(Array.isArray(o)||!(o instanceof Map)&&wd()in o)}function Ed(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Ia(o,a,l){return o[a]=l}function Yr(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function wl(o,a,l,d){const f=Yr(o,a,l);return Yr(o,a+1,d)||f}function oy(o,a,l,d){const f=Pe();return Yr(f,Hi(),a)&&(zt(),_l(Un(),f,o,a,l,d)),oy}function Id(o,a,l,d){return Yr(o,Hi(),l)?a+te(l)+d:Nt}function uy(o,a,l,d,f,g,v,w){const I=Pe(),A=zt(),O=o+20,M=A.firstCreatePass?function cy(o,a,l,d,f,g,v,w,I){const A=a.consts,O=rf(a,o,4,v||null,li(A,w));Cw(a,l,O,li(A,I)),Gu(a,O);const M=O.tViews=O_(2,O,d,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,A);return null!==a.queries&&(a.queries.template(a,O),M.queries=a.queries.embeddedTView(O)),O}(O,A,I,a,l,d,f,g,v):A.data[O];Lr(M,!1);const q=I[11].createComment("");C_(A,I,q,M),Sr(q,I),yg(I,I[O]=TS(q,I,q,M)),ss(M)&&yw(A,I,M),null!=v&&k_(I,M,w)}function Kw(o){return yi(function Ih(){return Ct.lFrame.contextLView}(),20+o)}function kd(o,a=wt.Default){const l=Pe();return null===l?B(o,a):tc(An(),l,oe(o),a)}function vy(){throw new Error("invalid")}function by(o,a,l){const d=Pe();return Yr(d,Hi(),a)&&fo(zt(),Un(),d,o,a,d[11],l,!1),by}function wy(o,a,l,d,f){const v=f?"class":"style";H_(o,l,a.inputs[v],v,d)}function Ey(o,a,l,d){const f=Pe(),g=zt(),v=20+o,w=f[11],I=f[v]=fg(w,a,function Dh(){return Ct.lFrame.currentNamespace}()),A=g.firstCreatePass?function iE(o,a,l,d,f,g,v){const w=a.consts,A=rf(a,o,2,f,li(w,g));return Cw(a,l,A,li(w,v)),null!==A.attrs&&cf(A,A.attrs,!1),null!==A.mergedAttrs&&cf(A,A.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,A),A}(v,g,f,0,a,l,d):g.data[v];Lr(A,!0);const O=A.mergedAttrs;null!==O&&Ku(w,I,O);const M=A.classes;null!==M&&cw(w,I,M);const q=A.styles;null!==q&&QD(w,I,q),64!=(64&A.flags)&&C_(g,f,I,A),0===function Mo(){return Ct.lFrame.elementDepthCount}()&&Sr(I,f),function xo(){Ct.lFrame.elementDepthCount++}(),ss(A)&&(yw(g,f,A),_w(g,A,f)),null!==d&&k_(f,A)}function Cy(){let o=An();Oo()?nl():(o=o.parent,Lr(o,!1));const a=o;!function ko(){Ct.lFrame.elementDepthCount--}();const l=zt();l.firstCreatePass&&(Gu(l,o),Ll(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Vc(o){return 0!=(16&o.flags)}(a)&&wy(l,a,Pe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Uc(o){return 0!=(32&o.flags)}(a)&&wy(l,a,Pe(),a.stylesWithoutHost,!1)}function Iy(o,a,l,d){Ey(o,a,l,d),Cy()}function Od(o,a,l){const d=Pe(),f=zt(),g=o+20,v=f.firstCreatePass?function oE(o,a,l,d,f){const g=a.consts,v=li(g,d),w=rf(a,o,8,"ng-container",v);return null!==v&&cf(w,v,!0),Cw(a,l,w,li(g,f)),null!==a.queries&&a.queries.elementStart(a,w),w}(g,f,d,a,l):f.data[g];Lr(v,!0);const w=d[g]=d[11].createComment("");C_(f,d,w,v),Sr(w,d),ss(v)&&(yw(f,d,v),_w(f,v,d)),null!=l&&k_(d,v)}function vf(){let o=An();const a=zt();Oo()?nl():(o=o.parent,Lr(o,!1)),a.firstCreatePass&&(Gu(a,o),Ll(o)&&a.queries.elementEnd(o))}function aE(o,a,l){Od(o,a,l),vf()}function lE(){return Pe()}function Ty(o){return!!o&&"function"==typeof o.then}function Dy(o){return!!o&&"function"==typeof o.subscribe}const cE=Dy;function Sy(o,a,l,d){const f=Pe(),g=zt(),v=An();return function dE(o,a,l,d,f,g,v,w){const I=ss(d),O=o.firstCreatePass&&SS(o),M=a[8],q=DS(a);let re=!0;if(3&d.type||w){const Ke=Cr(d,a),Je=w?w(Ke):Ke,se=q.length,bt=w?Ze=>w(kn(Ze[d.index])):d.index;if(Ln(l)){let Ze=null;if(!w&&I&&(Ze=function uE(o,a,l,d){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===l&&f[g+1]===d){const w=a[7],I=f[g+2];return w.length>I?w[I]:null}"string"==typeof v&&(g+=2)}return null}(o,a,f,d.index)),null!==Ze)(Ze.__ngLastListenerFn__||Ze).__ngNextListenerFn__=g,Ze.__ngLastListenerFn__=g,re=!1;else{g=My(d,a,M,g,!1);const an=l.listen(Je,f,g);q.push(g,an),O&&O.push(f,bt,se,se+1)}}else g=My(d,a,M,g,!0),Je.addEventListener(f,g,v),q.push(g),O&&O.push(f,bt,se,v)}else g=My(d,a,M,g,!1);const we=d.outputs;let x;if(re&&null!==we&&(x=we[f])){const Ke=x.length;if(Ke)for(let Je=0;Je<Ke;Je+=2){const Wi=a[x[Je]][x[Je+1]].subscribe(g),ea=q.length;q.push(g,Wi),O&&O.push(f,d.index,ea,-(ea+1))}}}(g,f,f[11],v,o,a,!!l,d),Sy}function hE(o,a,l,d){try{return!1!==l(d)}catch(f){return MS(o,f),!1}}function My(o,a,l,d,f){return function g(v){if(v===Function)return d;const w=2&o.flags?Fr(o.index,a):a;0==(32&a[2])&&Wo(w);let I=hE(a,0,d,v),A=g.__ngNextListenerFn__;for(;A;)I=hE(a,0,A,v)&&I,A=A.__ngNextListenerFn__;return f&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function xy(o=1){return function Zp(o){return(Ct.lFrame.contextLView=function Kp(o,a){for(;o>0;)a=a[15],o--;return a}(o,Ct.lFrame.contextLView))[8]}(o)}function n1(o,a){let l=null;const d=function IN(o){const a=o.attrs;if(null!=a){const l=a.indexOf(5);if(0==(1&l))return a[l+1]}return null}(o);for(let f=0;f<a.length;f++){const g=a[f];if("*"!==g){if(null===d?nS(o,g,!0):SN(d,g))return f}else l=f}return l}function ky(o){const a=Pe()[16][6];if(!a.projection){const d=a.projection=ma(o?o.length:1,null),f=d.slice();let g=a.child;for(;null!==g;){const v=o?n1(g,o):0;null!==v&&(f[v]?f[v].projectionNext=g:d[v]=g,f[v]=g),g=g.next}}}function fE(o,a=0,l){const d=Pe(),f=zt(),g=rf(f,20+o,16,null,l||null);null===g.projection&&(g.projection=a),nl(),64!=(64&g.flags)&&function yN(o,a,l){YD(a[11],0,a,l,HD(o,l,a),sw(l.parent||a[6],l,a))}(f,d,g)}function Oy(o,a,l){return xg(o,"",a,"",l),Oy}function xg(o,a,l,d,f){const g=Pe(),v=Id(g,a,l,d);return v!==Nt&&fo(zt(),Un(),g,o,v,g[11],f,!1),xg}function yE(o,a,l,d,f){const g=o[l+1],v=null===a;let w=d?Ea(g):cc(g),I=!1;for(;0!==w&&(!1===I||v);){const O=o[w+1];iA(o[w],a)&&(I=!0,o[w+1]=d?hw(O):uw(O)),w=d?Ea(O):cc(O)}I&&(o[l+1]=d?uw(g):hw(g))}function iA(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&ps(o,a)>=0}function EE(o,a,l){return Da(o,a,l,!1),EE}function Vy(o,a){return Da(o,a,null,!0),Vy}function Da(o,a,l,d){const f=Pe(),g=zt(),v=function Is(o){const a=Ct.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}(2);g.firstUpdatePass&&function Uy(o,a,l,d){const f=o.data;if(null===f[l+1]){const g=f[gr()],v=function Cf(o,a){return a>=o.expandoStartIndex}(o,l);(function hA(o,a){return 0!=(o.flags&(a?16:32))})(g,d)&&null===a&&!v&&(a=!1),a=function c1(o,a,l,d){const f=function il(o){const a=Ct.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let g=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(l=kg(l=By(null,o,a,l,d),a.attrs,d),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(l=By(f,o,a,l,d),null===g){let I=function lA(o,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==cc(d))return o[Ea(d)]}(o,a,d);void 0!==I&&Array.isArray(I)&&(I=By(null,o,a,I[1],d),I=kg(I,a.attrs,d),function u1(o,a,l,d){o[Ea(l?a.classBindings:a.styleBindings)]=d}(o,a,d,I))}else g=function d1(o,a,l){let d;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)d=kg(d,o[g].hostAttrs,l);return kg(d,a.attrs,l)}(o,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,d),function nA(o,a,l,d,f,g){let v=g?a.classBindings:a.styleBindings,w=Ea(v),I=cc(v);o[d]=l;let O,A=!1;if(Array.isArray(l)){const M=l;O=M[1],(null===O||ps(M,O)>0)&&(A=!0)}else O=l;if(f)if(0!==I){const q=Ea(o[w+1]);o[d+1]=T_(q,w),0!==q&&(o[q+1]=dw(o[q+1],d)),o[w+1]=function kN(o,a){return 131071&o|a<<17}(o[w+1],d)}else o[d+1]=T_(w,0),0!==w&&(o[w+1]=dw(o[w+1],d)),w=d;else o[d+1]=T_(I,0),0===w?w=d:o[I+1]=dw(o[I+1],d),I=d;A&&(o[d+1]=uw(o[d+1])),yE(o,O,d,!0),yE(o,O,d,!1),function rA(o,a,l,d,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&ps(g,a)>=0&&(l[d+1]=hw(l[d+1]))}(a,O,o,d,g),v=T_(w,I),g?a.classBindings=v:a.styleBindings=v}(f,g,a,l,v,d)}}(g,o,v,d),a!==Nt&&Yr(f,v,a)&&function uA(o,a,l,d,f,g,v,w){if(!(3&a.type))return;const I=o.data,A=I[w+1];jy(function lS(o){return 1==(1&o)}(A)?dA(I,a,l,f,cc(A),v):void 0)||(jy(g)||function aS(o){return 2==(2&o)}(A)&&(g=dA(I,null,l,f,w,v)),function bN(o,a,l,d,f){const g=Ln(o);if(a)f?g?o.addClass(l,d):l.classList.add(d):g?o.removeClass(l,d):l.classList.remove(d);else{let v=-1===d.indexOf("-")?void 0:ml.DashCase;if(null==f)g?o.removeStyle(l,d,v):l.style.removeProperty(d);else{const w="string"==typeof f&&f.endsWith("!important");w&&(f=f.slice(0,-10),v|=ml.Important),g?o.setStyle(l,d,f,v):l.style.setProperty(d,f,w?"important":"")}}}(d,v,ji(gr(),l),f,g))}(g,g.data[gr()],f,f[11],o,f[v+1]=function p1(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=me(qi(o)))),o}(a,l),d,v)}function By(o,a,l,d,f){let g=null;const v=l.directiveEnd;let w=l.directiveStylingLast;for(-1===w?w=l.directiveStart:w++;w<v&&(g=a[w],d=kg(d,g.hostAttrs,f),g!==o);)w++;return null!==o&&(l.directiveStylingLast=w),d}function kg(o,a,l){const d=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Dr(o,v,!!l||a[++g]))}return void 0===o?null:o}function dA(o,a,l,d,f,g){const v=null===a;let w;for(;f>0;){const I=o[f],A=Array.isArray(I),O=A?I[1]:I,M=null===O;let q=l[f+1];q===Nt&&(q=M?$:void 0);let re=M?Uo(q,d):O===d?q:void 0;if(A&&!jy(re)&&(re=Uo(I,d)),jy(re)&&(w=re,v))return w;const we=o[f+1];f=v?Ea(we):cc(we)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(w=Uo(I,d))}return w}function jy(o){return void 0!==o}function Hy(o,a=""){const l=Pe(),d=zt(),f=o+20,g=d.firstCreatePass?rf(d,f,1,a,null):d.data[f],v=l[f]=function v_(o,a){return Ln(o)?o.createText(a):o.createTextNode(a)}(l[11],a);C_(d,l,v,g),Lr(g,!1)}function CE(o){return $y("",o,""),CE}function $y(o,a,l){const d=Pe(),f=Id(d,o,a,l);return f!==Nt&&ms(d,gr(),f),$y}function Ky(o,a,l){const d=Pe();return Yr(d,Hi(),a)&&fo(zt(),Un(),d,o,a,d[11],l,!0),Ky}const cu=void 0;var EA=["en",[["a","p"],["AM","PM"],cu],[["AM","PM"],cu,cu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],cu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],cu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",cu,"{1} 'at' {0}",cu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wA(o){const l=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let Dl={};function Yy(o){const a=function Sa(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=If(a);if(l)return l;const d=a.split("-")[0];if(l=If(d),l)return l;if("en"===d)return EA;throw new Error(`Missing locale data for the locale "${o}".`)}function xE(o){return Yy(o)[Et.PluralCase]}function If(o){return o in Dl||(Dl[o]=Pt.ng&&Pt.ng.common&&Pt.ng.common.locales&&Pt.ng.common.locales[o]),Dl[o]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const Rg="en-US";let kE=Rg;function KE(o,a,l,d,f){if(o=oe(o),Array.isArray(o))for(let g=0;g<o.length;g++)KE(o[g],a,l,d,f);else{const g=zt(),v=Pe();let w=iu(o)?o:oe(o.provide),I=bg(o);const A=An(),O=1048575&A.providerIndexes,M=A.directiveStart,q=A.providerIndexes>>20;if(iu(o)||!o.multi){const re=new Wn(I,f,kd),we=lv(w,a,f?O:O+q,M);-1===we?(pa(Ds(A,v),g,w),Sf(g,o,a.length),a.push(w),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(re),v.push(re)):(l[we]=re,v[we]=re)}else{const re=lv(w,a,O+q,M),we=lv(w,a,O,O+q),x=re>=0&&l[re],Ke=we>=0&&l[we];if(f&&!Ke||!f&&!x){pa(Ds(A,v),g,w);const Je=function V1(o,a,l,d,f){const g=new Wn(o,l,kd);return g.multi=[],g.index=a,g.componentProviders=0,av(g,f,d&&!l),g}(f?L1:F1,l.length,f,d,I);!f&&Ke&&(l[we].providerFactory=Je),Sf(g,o,a.length,0),a.push(w),A.directiveStart++,A.directiveEnd++,f&&(A.providerIndexes+=1048576),l.push(Je),v.push(Je)}else Sf(g,o,re>-1?re:we,av(l[f?we:re],I,!f&&d));!f&&d&&Ke&&l[we].componentProviders++}}}function Sf(o,a,l,d){const f=iu(a),g=function Y_(o){return!!o.useClass}(a);if(f||g){const I=(g?oe(a.useClass):a).prototype.ngOnDestroy;if(I){const A=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const O=A.indexOf(l);-1===O?A.push(l,[d,I]):A[O+1].push(d,I)}else A.push(l,I)}}}function av(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function lv(o,a,l,d){for(let f=l;f<d;f++)if(a[f]===o)return f;return-1}function F1(o,a,l,d){return YE(this.multi,[])}function L1(o,a,l,d){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=Ms(l,l[1],this.providerFactory.index,d);g=w.slice(0,v),YE(f,g);for(let I=v;I<w.length;I++)g.push(w[I])}else g=[],YE(f,g);return g}function YE(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function oM(o,a=[]){return l=>{l.providersResolver=(d,f)=>function ov(o,a,l){const d=zt();if(d.firstCreatePass){const f=os(o);KE(l,d.data,d.blueprint,f,!0),KE(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class aM{}class j1{resolveComponentFactory(a){throw function B1(o){const a=Error(`No component factory found for ${me(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let jg=(()=>{class o{}return o.NULL=new j1,o})();function H1(){return Af(An(),Pe())}function Af(o,a){return new Hg(Cr(o,a))}let Hg=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=H1,o})();function $1(o){return o instanceof Hg?o.nativeElement:o}class cM{}let z1=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function G1(){const o=Pe(),l=Fr(An().index,o);return function q1(o){return o[11]}(Nr(l)?l:o)}(),o})(),W1=(()=>{class o{}return o.\u0275prov=Kt({token:o,providedIn:"root",factory:()=>null}),o})();class uM{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const dM=new uM("13.1.3"),cv={};function du(o,a,l,d,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&d.push(kn(g)),mi(g))for(let w=10;w<g.length;w++){const I=g[w],A=I[1].firstChild;null!==A&&du(I[1],I,A,d)}const v=l.type;if(8&v)du(o,a,l.child,d);else if(32&v){const w=Z0(l,a);let I;for(;I=w();)d.push(I)}else if(16&v){const w=ZD(a,l);if(Array.isArray(w))d.push(...w);else{const I=ef(a[16]);du(I[1],I,w,d,!0)}}l=f?l.projectionNext:l.next}return d}class Mf{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return du(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(mi(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(nw(a,d),lo(l,d))}this._attachedToViewContainer=!1}jD(this._lView[1],this._lView)}onDestroy(a){bw(this._lView[1],this._lView,null,a)}markForCheck(){Wo(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){kw(this._lView[1],this._lView,this.context)}checkNoChanges(){!function yl(o,a,l){Gl(!0);try{kw(o,a,l)}finally{Gl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Fe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function uN(o,a){pg(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Fe(902,"");this._appRef=a}}class xf extends Mf{constructor(a){super(a),this._view=a}detectChanges(){U_(this._view)}checkNoChanges(){!function B_(o){Gl(!0);try{U_(o)}finally{Gl(!1)}}(this._view)}get context(){return null}}class uv extends jg{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=ut(a);return new Ld(l,this.ngModule)}}function QE(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}const JE=new sn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>W0});class Ld extends aM{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function MN(o){return o.map(AN).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return QE(this.componentDef.inputs)}get outputs(){return QE(this.componentDef.outputs)}create(a,l,d,f){const g=(f=f||this.ngModule)?function hu(o,a){return{get:(l,d,f)=>{const g=o.get(l,cv,f);return g!==cv||d===cv?g:a.get(l,d,f)}}}(a,f.injector):a,v=g.get(cM,as),w=g.get(W1,null),I=v.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",O=d?function vw(o,a,l){if(Ln(o))return o.selectRootElement(a,l===Bt.ShadowDom);let d="string"==typeof a?o.querySelector(a):a;return d.textContent="",d}(I,d,this.componentDef.encapsulation):fg(v.createRenderer(null,this.componentDef),A,function XE(o){const a=o.toLowerCase();return"svg"===a?Xa:"math"===a?"http://www.w3.org/1998/MathML/":null}(A)),M=this.componentDef.onPush?576:528,q=function ny(o,a){return{components:[],scheduler:o||W0,clean:YN,playerHandler:a||null,flags:0}}(),re=O_(0,null,null,1,0,null,null,null,null,null),we=gd(null,re,q,M,null,null,v,I,w,g);let x,Ke;Yl(we);try{const Je=function jw(o,a,l,d,f,g){const v=l[1];l[20]=o;const I=rf(v,20,2,"#host",null),A=I.mergedAttrs=a.hostAttrs;null!==A&&(cf(I,A,!0),null!==o&&(Ku(f,o,A),null!==I.classes&&cw(f,o,I.classes),null!==I.styles&&QD(f,o,I.styles)));const O=d.createRenderer(o,a),M=gd(l,mS(a),null,a.onPush?64:16,l[20],I,d,O,g||null,null);return v.firstCreatePass&&(pa(Ds(I,l),v,a.type),N_(v,I),CS(I,l.length,1)),yg(l,M),l[20]=M}(O,this.componentDef,we,v,I);if(O)if(d)Ku(I,O,["ng-version",dM.full]);else{const{attrs:se,classes:bt}=function xN(o){const a=[],l=[];let d=1,f=2;for(;d<o.length;){let g=o[d];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++d]):8===f&&l.push(g);else{if(!Go(f))break;f=g}d++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);se&&Ku(I,O,se),bt&&bt.length>0&&cw(I,O,bt.join(" "))}if(Ke=To(re,20),void 0!==l){const se=Ke.projection=[];for(let bt=0;bt<this.ngContentSelectors.length;bt++){const Ze=l[bt];se.push(null!=Ze?Array.from(Ze):null)}}x=function ty(o,a,l,d,f){const g=l[1],v=function GN(o,a,l){const d=An();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),Tw(o,d,a,sf(o,a,1,null),l));const f=Ms(a,o,d.directiveStart,d);Sr(f,a);const g=Cr(d,a);return g&&Sr(g,a),f}(g,l,a);if(d.components.push(v),o[8]=v,f&&f.forEach(I=>I(v,a)),a.contentQueries){const I=An();a.contentQueries(1,v,I.directiveStart)}const w=An();return!g.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(mr(w.index),bS(l[1],w,0,w.directiveStart,w.directiveEnd,a),Iw(a,v)),v}(Je,this.componentDef,we,q,[Ls]),af(re,we,null)}finally{ll()}return new $g(this.componentType,x,Af(Ke,we),we,Ke)}}class $g extends class U1{}{constructor(a,l,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new xf(f),this.componentType=a}get injector(){return new Fo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class Vd{}class tC{}const Ud=new Map;class rC extends Vd{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uv(this);const d=Ft(a);this._bootstrapComponents=Gt(d.bootstrap),this._r3Injector=W_(a,l,[{provide:Vd,useValue:this},{provide:jg,useValue:this.componentFactoryResolver}],me(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,l=_s.THROW_IF_NOT_FOUND,d=wt.Default){return a===_s||a===Vd||a===Ca?this:this._r3Injector.get(a,l,d)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class hv extends tC{constructor(a){super(),this.moduleType=a,null!==Ft(a)&&function fM(o){const a=new Set;!function l(d){const f=Ft(d,!0),g=f.id;null!==g&&(function dv(o,a,l){if(a&&a!==l)throw new Error(`Duplicate module registered for ${o} - ${me(a)} vs ${me(a.name)}`)}(g,Ud.get(g),d),Ud.set(g,d));const v=Gt(f.imports);for(const w of v)a.has(w)||(a.add(w),l(w))}(o)}(a)}create(a){return new rC(this.moduleType,a)}}function iC(o,a,l,d,f){return fv(Pe(),Ir(),o,a,l,d,f)}function sC(o,a,l,d,f,g,v){return function Mr(o,a,l,d,f,g,v,w,I){const A=a+l;return function po(o,a,l,d,f,g){const v=wl(o,a,l,d);return wl(o,a+2,f,g)||v}(o,A,f,g,v,w)?Ia(o,A+4,I?d.call(I,f,g,v,w):d(f,g,v,w)):mc(o,A+4)}(Pe(),Ir(),o,a,l,d,f,g,v)}function mc(o,a){const l=o[a];return l===Nt?void 0:l}function fv(o,a,l,d,f,g,v){const w=a+l;return wl(o,w,f,g)?Ia(o,w+2,v?d.call(v,f,g):d(f,g)):mc(o,w+2)}function _c(o,a){const l=zt();let d;const f=o+20;l.firstCreatePass?(d=function pv(o,a){if(a)for(let l=a.length-1;l>=0;l--){const d=a[l];if(o===d.name)return d}}(a,l.pipeRegistry),l.data[f]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(f,d.onDestroy)):d=l.data[f];const g=d.factory||(d.factory=Bi(d.type)),v=Jt(kd);try{const w=Ro(!1),I=g();return Ro(w),function HS(o,a,l,d){l>=o.data.length&&(o.data[l]=null,o.blueprint[l]=null),a[l]=d}(l,Pe(),f,I),I}finally{Jt(v)}}function gv(o,a,l){const d=o+20,f=Pe(),g=yi(f,d);return Us(f,d)?function zg(o,a,l,d,f,g){const v=a+l;return Yr(o,v,f)?Ia(o,v+1,g?d.call(g,f):d(f)):mc(o,v+1)}(f,Ir(),a,g.transform,l,g):g.transform(l)}function cC(o,a,l,d){const f=o+20,g=Pe(),v=yi(g,f);return Us(g,f)?fv(g,Ir(),a,v.transform,l,d,v):v.transform(l,d)}function Us(o,a){return o[1].data[a].pure}function pu(o){return a=>{setTimeout(o,void 0,a)}}const Xo=class mv extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){var f,g,v;let w=a,I=l||(()=>null),A=d;if(a&&"object"==typeof a){const M=a;w=null===(f=M.next)||void 0===f?void 0:f.bind(M),I=null===(g=M.error)||void 0===g?void 0:g.bind(M),A=null===(v=M.complete)||void 0===v?void 0:v.bind(M)}this.__isAsync&&(I=pu(I),w&&(w=pu(w)),A&&(A=pu(A)));const O=super.subscribe({next:w,error:I,complete:A});return a instanceof H.w0&&a.add(O),O}};function wM(){return this._results[wd()]()}class qg{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=wd(),d=qg.prototype;d[l]||(d[l]=wM)}get changes(){return this._changes||(this._changes=new Xo)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const f=ui(a);(this._changesDetected=!function rc(o,a,l){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],g=a[d];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let kf=(()=>{class o{}return o.__NG_ELEMENT_ID__=IM,o})();const EM=kf,CM=class extends EM{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a){const l=this._declarationTContainer.tViews,d=gd(this._declarationLView,l,a,16,null,l.declTNode,null,null,null,null);d[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(d[19]=g.createEmbeddedView(l)),af(l,d,a),new Mf(d)}};function IM(){return Of(An(),Pe())}function Of(o,a){return 4&o.type?new CM(a,o,Af(o,a)):null}let Rf=(()=>{class o{}return o.__NG_ELEMENT_ID__=TM,o})();function TM(){return Zt(An(),Pe())}const DM=Rf,dC=class extends DM{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return Af(this._hostTNode,this._hostLView)}get injector(){return new Fo(this._hostTNode,this._hostLView)}get parentInjector(){const a=us(this._hostTNode,this._hostLView);if(jn(a)){const l=wn(a,this._hostLView),d=lr(a);return new Fo(l[1].data[d+8],l)}return new Fo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=hC(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,d){const f=a.createEmbeddedView(l||{});return this.insert(f,d),f}createComponent(a,l,d,f,g){const v=a&&!function Vo(o){return"function"==typeof o}(a);let w;if(v)w=l;else{const M=l||{};w=M.index,d=M.injector,f=M.projectableNodes,g=M.ngModuleRef}const I=v?a:new Ld(ut(a)),A=d||this.parentInjector;if(!g&&null==I.ngModule&&A){const M=A.get(Vd,null);M&&(g=M)}const O=I.create(A,f,void 0,g);return this.insert(O.hostView,w),O}insert(a,l){const d=a._lView,f=d[1];if(function $l(o){return mi(o[3])}(d)){const O=this.indexOf(a);if(-1!==O)this.detach(O);else{const M=d[3],q=new dC(M,M[6],M[3]);q.detach(q.indexOf(a))}}const g=this._adjustIndex(l),v=this._lContainer;!function hN(o,a,l,d){const f=10+d,g=l.length;d>0&&(l[f-1][4]=a),d<g-10?(a[4]=l[f],ga(l,10+d,a)):(l.push(a),a[4]=null),a[3]=l;const v=a[17];null!==v&&l!==v&&function fN(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(v,a);const w=a[19];null!==w&&w.insertView(o),a[2]|=128}(f,d,v,g);const w=aw(g,v),I=d[11],A=E_(I,v[7]);return null!==A&&function ew(o,a,l,d,f,g){d[0]=f,d[6]=a,pg(o,d,l,1,f,g)}(f,v[6],I,d,A,w),a.attachToViewContainerRef(),ga(Gg(v),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=hC(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=nw(this._lContainer,l);d&&(lo(Gg(this._lContainer),l),jD(d[1],d))}detach(a){const l=this._adjustIndex(a,-1),d=nw(this._lContainer,l);return d&&null!=lo(Gg(this._lContainer),l)?new Mf(d):null}_adjustIndex(a,l=0){return null==a?this.length+l:a}};function hC(o){return o[8]}function Gg(o){return o[8]||(o[8]=[])}function Zt(o,a){let l;const d=a[o.index];if(mi(d))l=d;else{let f;if(8&o.type)f=kn(d);else{const g=a[11];f=g.createComment("");const v=Cr(o,a);pd(g,E_(g,v),f,function _N(o,a){return Ln(o)?o.nextSibling(a):a.nextSibling}(g,v),!1)}a[o.index]=l=TS(d,a,f,o),yg(a,l)}return new dC(l,o,a)}class Pf{constructor(a){this.queryList=a,this.matches=null}clone(){return new Pf(this.queryList)}setDirty(){this.queryList.setDirty()}}class _v{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<d;g++){const v=l.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new _v(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==Ev(a,l).matches&&this.queries[l].setDirty()}}class fC{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class yv{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,g=this.getByIndex(d).embeddedTView(a,f);g&&(g.indexInDeclarationView=d,null!==l?l.push(g):l=[g])}return null!==l?new yv(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class yo{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new yo(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(a,l,pC(l,g)),this.matchTNodeWithReadOption(a,l,On(l,a,g,!1,!1))}else d===kf?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,On(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Hg||f===Rf||f===kf&&4&l.type)this.addMatch(l.index,-2);else{const g=On(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function pC(o,a){const l=o.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function mC(o,a,l,d){return-1===l?function gC(o,a){return 11&o.type?Af(o,a):4&o.type?Of(o,a):null}(a,o):-2===l?function X1(o,a,l){return l===Hg?Af(a,o):l===kf?Of(a,o):l===Rf?Zt(a,o):void 0}(o,a,d):Ms(o,o[1],l,a)}function Xr(o,a,l,d){const f=a[19].queries[d];if(null===f.matches){const g=o.data,v=l.matches,w=[];for(let I=0;I<v.length;I+=2){const A=v[I];w.push(A<0?null:mC(a,g[A],v[I+1],l.metadata.read))}f.matches=w}return f.matches}function vo(o,a,l,d){const f=o.queries.getByIndex(l),g=f.matches;if(null!==g){const v=Xr(o,a,f,l);for(let w=0;w<g.length;w+=2){const I=g[w];if(I>0)d.push(v[w/2]);else{const A=g[w+1],O=a[-I];for(let M=10;M<O.length;M++){const q=O[M];q[17]===q[3]&&vo(q[1],q,A,d)}if(null!==O[9]){const M=O[9];for(let q=0;q<M.length;q++){const re=M[q];vo(re[1],re,A,d)}}}}}return d}function _C(o){const a=Pe(),l=zt(),d=sl();ol(d+1);const f=Ev(l,d);if(o.dirty&&Jn(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?vo(l,a,d,[]):Xr(l,a,f,d);o.reset(g,$1),o.notifyOnChanges()}return!0}return!1}function yC(o,a,l){const d=zt();d.firstCreatePass&&(vC(d,new fC(o,a,l),-1),2==(2&a)&&(d.staticViewQueries=!0)),wv(d,Pe(),a)}function vv(o,a,l,d){const f=zt();if(f.firstCreatePass){const g=An();vC(f,new fC(a,l,d),g.index),function bC(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(f,o),2==(2&l)&&(f.staticContentQueries=!0)}wv(f,Pe(),l)}function bv(){return function MM(o,a){return o[19].queries[a].queryList}(Pe(),sl())}function wv(o,a,l){const d=new qg(4==(4&l));bw(o,a,d,d.destroy),null===a[19]&&(a[19]=new _v),a[19].queries.push(new Pf(d))}function vC(o,a,l){null===o.queries&&(o.queries=new yv),o.queries.track(new yo(a,l))}function Ev(o,a){return o.queries.getByIndex(a)}function Nf(o,a){return Of(o,a)}function Jg(...o){}const Pv=new sn("Application Initializer");let qd=(()=>{class o{constructor(l){this.appInits=l,this.resolve=Jg,this.reject=Jg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(Ty(g))l.push(g);else if(cE(g)){const v=new Promise((w,I)=>{g.subscribe({complete:w,error:I})});l.push(v)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(B(Pv,8))},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();const xC=new sn("AppId"),em={provide:xC,useFactory:function kC(){return`${Nv()}${Nv()}${Nv()}`},deps:[]};function Nv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const tm=new sn("Platform Initializer"),OC=new sn("Platform ID"),Fv=new sn("appBootstrapListener");let RC=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();const nm=new sn("LocaleId"),PC=new sn("DefaultCurrencyCode");class vu{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Lv=(()=>{class o{compileModuleSync(l){return new hv(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),g=Gt(Ft(l).declarations).reduce((v,w)=>{const I=ut(w);return I&&v.push(new Ld(I)),v},[]);return new vu(d,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();const jM=(()=>Promise.resolve(0))();function bu(o){"undefined"==typeof Zone?jM.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class Bs{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xo(!1),this.onMicrotaskEmpty=new Xo(!1),this.onStable=new Xo(!1),this.onError=new Xo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function jf(){let o=Pt.requestAnimationFrame,a=Pt.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function FC(o){const a=()=>{!function HM(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Pt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,rm(o),o.isCheckStableRunning=!0,Gd(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),rm(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,g,v,w)=>{try{return LC(o),l.invokeTask(f,g,v,w)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),VC(o)}},onInvoke:(l,d,f,g,v,w,I)=>{try{return LC(o),l.invoke(f,g,v,w,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),VC(o)}},onHasTask:(l,d,f,g)=>{l.hasTask(f,g),d===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,rm(o),Gd(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,d,f,g)=>(l.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Bs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Bs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,Hf,Jg,Jg);try{return g.runTask(v,l,d)}finally{g.cancelTask(v)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const Hf={};function Gd(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function rm(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function LC(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function VC(o){o._nesting--,Gd(o)}class Vv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xo,this.onMicrotaskEmpty=new Xo,this.onStable=new Xo,this.onError=new Xo}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,f){return a.apply(l,d)}}let js=(()=>{class o{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Bs.assertNotInAngularZone(),bu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())bu(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,d,f){return[]}}return o.\u0275fac=function(l){return new(l||o)(B(Bs))},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})(),Uv=(()=>{class o{constructor(){this._applications=new Map,Wd.addToWindow(this)}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return Wd.findTestabilityInTree(this,l,d)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();class UC{addToWindow(a){}findTestabilityInTree(a,l,d){return null}}function im(o){Wd=o}let Jo,Wd=new UC;const $f=new sn("AllowMultipleToken");class BC{constructor(a,l){this.name=a,this.token=l}}function Zd(o,a,l=[]){const d=`Platform: ${a}`,f=new sn(d);return(g=[])=>{let v=jv();if(!v||v.injector.get($f,!1))if(o)o(l.concat(g).concat({provide:f,useValue:!0}));else{const w=l.concat(g).concat({provide:f,useValue:!0},{provide:uf,useValue:"platform"});!function jC(o){if(Jo&&!Jo.destroyed&&!Jo.injector.get($f,!1))throw new Fe(400,"");Jo=o.get($C);const a=o.get(tm,null);a&&a.forEach(l=>l())}(_s.create({providers:w,name:d}))}return function HC(o){const a=jv();if(!a)throw new Fe(401,"");return a}()}}function jv(){return Jo&&!Jo.destroyed?Jo:null}let $C=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const w=function qM(o,a){let l;return l="noop"===o?new Vv:("zone.js"===o?void 0:o)||new Bs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),l}(d?d.ngZone:void 0,{ngZoneEventCoalescing:d&&d.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:d&&d.ngZoneRunCoalescing||!1}),I=[{provide:Bs,useValue:w}];return w.run(()=>{const A=_s.create({providers:I,parent:this.injector,name:l.moduleType.name}),O=l.create(A),M=O.injector.get(hg,null);if(!M)throw new Fe(402,"");return w.runOutsideAngular(()=>{const q=w.onError.subscribe({next:re=>{M.handleError(re)}});O.onDestroy(()=>{qf(this._modules,O),q.unsubscribe()})}),function GM(o,a,l){try{const d=l();return Ty(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(M,w,()=>{const q=O.injector.get(qd);return q.runInitializers(),q.donePromise.then(()=>(function DA(o){Le(o,"Expected localeId to be defined"),"string"==typeof o&&(kE=o.toLowerCase().replace(/_/g,"-"))}(O.injector.get(nm,Rg)||Rg),this._moduleDoBootstrap(O),O))})})}bootstrapModule(l,d=[]){const f=zC({},d);return function $M(o,a,l){const d=new hv(l);return Promise.resolve(d)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const d=l.injector.get(zf);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new Fe(403,"");l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Fe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(B(_s))},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();function zC(o,a){return Array.isArray(a)?a.reduce(zC,o):Object.assign(Object.assign({},o),a)}let zf=(()=>{class o{constructor(l,d,f,g,v){this._zone=l,this._injector=d,this._exceptionHandler=f,this._componentFactoryResolver=g,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new N.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),I=new N.y(A=>{let O;this._zone.runOutsideAngular(()=>{O=this._zone.onStable.subscribe(()=>{Bs.assertNotInAngularZone(),bu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Bs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{O.unsubscribe(),M.unsubscribe()}});this.isStable=(0,de.T)(w,I.pipe((0,ge.B)()))}bootstrap(l,d){if(!this._initStatus.done)throw new Fe(405,"");let f;f=l instanceof aM?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(f.componentType);const g=function zM(o){return o.isBoundToModule}(f)?void 0:this._injector.get(Vd),w=f.create(_s.NULL,[],d||f.selector,g),I=w.location.nativeElement,A=w.injector.get(js,null),O=A&&w.injector.get(Uv);return A&&O&&O.registerApplication(I,A),w.onDestroy(()=>{this.detachView(w.hostView),qf(this.components,w),O&&O.unregisterApplication(I)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Fe(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;qf(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Fv,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(l){return new(l||o)(B(Bs),B(_s),B(hg),B(jg),B(qd))},o.\u0275prov=Kt({token:o,factory:o.\u0275fac}),o})();function qf(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let Gf=!0,WC=!1;function WM(){return WC=!0,Gf}function sm(){if(WC)throw new Error("Cannot enable prod mode after platform setup.");Gf=!1}let ZM=(()=>{class o{}return o.__NG_ELEMENT_ID__=Wf,o})();function Wf(o){return function KM(o,a,l){if(Fu(o)&&!l){const d=Fr(o.index,a);return new Mf(d,d)}return 47&o.type?new Mf(a[16],a):null}(An(),Pe(),16==(16&o))}class tI{constructor(){}supports(a){return gf(a)}create(a){return new ex(a)}}const JM=(o,a)=>a;class ex{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||JM}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,f=0,g=null;for(;l||d;){const v=!d||l&&l.currentIndex<iI(d,f,g)?l:d,w=iI(v,f,g),I=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{g||(g=[]);const A=w-f,O=I-f;if(A!=O){for(let q=0;q<A;q++){const re=q<g.length?g[q]:g[q]=0,we=re+q;O<=we&&we<A&&(g[q]=re+1)}g[v.previousIndex]=O-A}}w!==I&&a(v,w,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!gf(a))throw new Fe(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let w=0;w<this.length;w++)g=a[w],v=this._trackByFn(w,g),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,g,v,w)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,w),d=!0),l=l._next}else f=0,function US(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[wd()]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,w=>{v=this._trackByFn(f,w),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,w,v,f)),Object.is(l.item,w)||this._addIdentityChange(l,w)):(l=this._mismatch(l,w,v,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new Gv(l,d),g,f),a}_verifyReinsertion(a,l,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new rI),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new rI),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Gv{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class nI{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class rI{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new nI,this.map.set(l,d)),d.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function iI(o,a,l){const d=o.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+a+f}class sI{constructor(){}supports(a){return a instanceof Map||Ed(a)}create(){return new tx}}class tx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Ed(a)))throw new Fe(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const d=new oI(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class oI{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function aI(){return new cm([new tI])}let cm=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||aI()),deps:[[o,new Os,new Zn]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new Fe(901,"")}}return o.\u0275prov=Kt({token:o,providedIn:"root",factory:aI}),o})();function lI(){return new Eu([new sI])}let Eu=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||lI()),deps:[[o,new Os,new Zn]]}}find(l){const d=this.factories.find(g=>g.supports(l));if(d)return d;throw new Fe(901,"")}}return o.\u0275prov=Kt({token:o,providedIn:"root",factory:lI}),o})();const Zf=[new sI],Kd=new cm([new tI]),nx=new Eu(Zf),cI=Zd(null,"core",[{provide:OC,useValue:"unknown"},{provide:$C,deps:[_s]},{provide:Uv,deps:[]},{provide:RC,deps:[]}]),vF=[{provide:zf,useClass:zf,deps:[Bs,_s,hg,jg,qd]},{provide:JE,deps:[Bs],useFactory:function Cu(o){let a=[];return o.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(l){a.push(l)}}},{provide:qd,useClass:qd,deps:[[new Zn,Pv]]},{provide:Lv,useClass:Lv,deps:[]},em,{provide:cm,useFactory:function rx(){return Kd},deps:[]},{provide:Eu,useFactory:function uI(){return nx},deps:[]},{provide:nm,useFactory:function dI(o){return o||function Wv(){return"undefined"!=typeof $localize&&$localize.locale||Rg}()},deps:[[new nr(nm),new Zn,new Os]]},{provide:PC,useValue:"USD"}];let hI=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(B(zf))},o.\u0275mod=le({type:o}),o.\u0275inj=tn({providers:vF}),o})()},3942:(ct,ke,F)=>{"use strict";F.d(ke,{Z:()=>Fe});var c=F(2090),H=F(4859),N=F(9681),de=F(1877);class ge{constructor(te,fe){this._delegate=te,this.firebase=fe,(0,N._addComponent)(te,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=te.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(te){this._delegate.automaticDataCollectionEnabled=te}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(te=>{this._delegate.checkDestroyed(),te()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,N.deleteApp)(this._delegate)))}_getService(te,fe=N._DEFAULT_ENTRY_NAME){var be;this._delegate.checkDestroyed();const Te=this._delegate.container.getProvider(te);return!Te.isInitialized()&&"EXPLICIT"===(null===(be=Te.getComponent())||void 0===be?void 0:be.instantiationMode)&&Te.initialize(),Te.getImmediate({identifier:fe})}_removeServiceInstance(te,fe=N._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(te).clearInstance(fe)}_addComponent(te){(0,N._addComponent)(this._delegate,te)}_addOrOverwriteComponent(te){(0,N._addOrOverwriteComponent)(this._delegate,te)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function ye(){const Be=function me(Be){const te={},fe={__esModule:!0,initializeApp:function ve(he,it={}){const U=N.initializeApp(he,it);if((0,c.r3)(te,U.name))return te[U.name];const Z=new Be(U,fe);return te[U.name]=Z,Z},app:Te,registerVersion:N.registerVersion,setLogLevel:N.setLogLevel,onLog:N.onLog,apps:null,SDK_VERSION:N.SDK_VERSION,INTERNAL:{registerComponent:function xe(he){const it=he.name,U=it.replace("-compat","");if(N._registerComponent(he)&&"PUBLIC"===he.type){const Z=(z=Te())=>{if("function"!=typeof z[U])throw ce.create("invalid-app-argument",{appName:it});return z[U]()};void 0!==he.serviceProps&&(0,c.ZB)(Z,he.serviceProps),fe[U]=Z,Be.prototype[U]=function(...z){return this._getService.bind(this,it).apply(this,he.multipleInstances?z:[])}}return"PUBLIC"===he.type?fe[U]:null},removeApp:function be(he){delete te[he]},useAsService:function nt(he,it){return"serverAuth"===it?null:it},modularAPIs:N}};function Te(he){if(!(0,c.r3)(te,he=he||N._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:he});return te[he]}return fe.default=fe,Object.defineProperty(fe,"apps",{get:function qe(){return Object.keys(te).map(he=>te[he])}}),Te.App=Be,fe}(ge);return Be.INTERNAL=Object.assign(Object.assign({},Be.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function te(fe){(0,c.ZB)(Be,fe)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),Be}(),W=new de.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Be=self.firebase.SDK_VERSION;Be&&Be.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Fe=G;!function Re(Be){(0,N.registerVersion)("@firebase/app-compat","0.1.19",Be)}()},9681:(ct,ke,F)=>{"use strict";F.r(ke),F.d(ke,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>fi,_DEFAULT_ENTRY_NAME:()=>Le,_addComponent:()=>Tn,_addOrOverwriteComponent:()=>Kt,_apps:()=>un,_clearComponents:()=>Fi,_components:()=>It,_getProvider:()=>tn,_registerComponent:()=>Ut,_removeServiceInstance:()=>Mn,deleteApp:()=>wt,getApp:()=>zn,getApps:()=>es,initializeApp:()=>Li,onLog:()=>Jt,registerVersion:()=>Dn,setLogLevel:()=>Er});var c=F(5861),H=F(4859),N=F(1877),de=F(2090),ge=F(2940);class Ce{constructor(Ie){this.container=Ie}getPlatformInfoString(){return this.container.getProviders().map(He=>{if(function ce(Me){const Ie=Me.getComponent();return"VERSION"===(null==Ie?void 0:Ie.type)}(He)){const ht=He.getImmediate();return`${ht.library}/${ht.version}`}return null}).filter(He=>He).join(" ")}}const me="@firebase/app",G=new N.Yd("@firebase/app"),Le="[DEFAULT]",et={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},un=new Map,It=new Map;function Tn(Me,Ie){try{Me.container.addComponent(Ie)}catch(He){G.debug(`Component ${Ie.name} failed to register with FirebaseApp ${Me.name}`,He)}}function Kt(Me,Ie){Me.container.addOrOverwriteComponent(Ie)}function Ut(Me){const Ie=Me.name;if(It.has(Ie))return G.debug(`There were multiple attempts to register component ${Ie}.`),!1;It.set(Ie,Me);for(const He of un.values())Tn(He,Me);return!0}function tn(Me,Ie){const He=Me.container.getProvider("heartbeat").getImmediate({optional:!0});return He&&He.triggerHeartbeat(),Me.container.getProvider(Ie)}function Mn(Me,Ie,He=Le){tn(Me,Ie).clearInstance(He)}function Fi(){It.clear()}const xn=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ji{constructor(Ie,He,ht){this._isDeleted=!1,this._options=Object.assign({},Ie),this._config=Object.assign({},He),this._name=He.name,this._automaticDataCollectionEnabled=He.automaticDataCollectionEnabled,this._container=ht,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ie){this._isDeleted=Ie}checkDestroyed(){if(this.isDeleted)throw xn.create("app-deleted",{appName:this._name})}}const fi="9.6.8";function Li(Me,Ie={}){"object"!=typeof Ie&&(Ie={name:Ie});const He=Object.assign({name:Le,automaticDataCollectionEnabled:!1},Ie),ht=He.name;if("string"!=typeof ht||!ht)throw xn.create("bad-app-name",{appName:String(ht)});const St=un.get(ht);if(St){if((0,de.vZ)(Me,St.options)&&(0,de.vZ)(He,St.config))return St;throw xn.create("duplicate-app",{appName:ht})}const gt=new H.H0(ht);for(const le of It.values())gt.addComponent(le);const rn=new Ji(Me,He,gt);return un.set(ht,rn),rn}function zn(Me=Le){const Ie=un.get(Me);if(!Ie)throw xn.create("no-app",{appName:Me});return Ie}function es(){return Array.from(un.values())}function wt(Me){return qr.apply(this,arguments)}function qr(){return(qr=(0,c.Z)(function*(Me){const Ie=Me.name;un.has(Ie)&&(un.delete(Ie),yield Promise.all(Me.container.getProviders().map(He=>He.delete())),Me.isDeleted=!0)})).apply(this,arguments)}function Dn(Me,Ie,He){var ht;let St=null!==(ht=et[Me])&&void 0!==ht?ht:Me;He&&(St+=`-${He}`);const gt=St.match(/\s|\//),rn=Ie.match(/\s|\//);if(gt||rn){const le=[`Unable to register library "${St}" with version "${Ie}":`];return gt&&le.push(`library name "${St}" contains illegal characters (whitespace or "/")`),gt&&rn&&le.push("and"),rn&&le.push(`version name "${Ie}" contains illegal characters (whitespace or "/")`),void G.warn(le.join(" "))}Ut(new H.wA(`${St}-version`,()=>({library:St,version:Ie}),"VERSION"))}function Jt(Me,Ie){if(null!==Me&&"function"!=typeof Me)throw xn.create("invalid-log-argument");(0,N.Am)(Me,Ie)}function Er(Me){(0,N.Ub)(Me)}const fn="firebase-heartbeat-store";let or=null;function ts(){return or||(or=(0,ge.openDb)("firebase-heartbeat-database",1,Me=>{0===Me.oldVersion&&Me.createObjectStore(fn)}).catch(Me=>{throw xn.create("storage-open",{originalErrorMessage:Me.message})})),or}function ft(){return(ft=(0,c.Z)(function*(Me){try{return(yield ts()).transaction(fn).objectStore(fn).get(gi(Me))}catch(Ie){throw xn.create("storage-get",{originalErrorMessage:Ie.message})}})).apply(this,arguments)}function rt(Me,Ie){return pi.apply(this,arguments)}function pi(){return(pi=(0,c.Z)(function*(Me,Ie){try{const ht=(yield ts()).transaction(fn,"readwrite");return yield ht.objectStore(fn).put(Ie,gi(Me)),ht.complete}catch(He){throw xn.create("storage-set",{originalErrorMessage:He.message})}})).apply(this,arguments)}function Pt(){return(Pt=(0,c.Z)(function*(Me){try{const He=(yield ts()).transaction(fn,"readwrite");return yield He.objectStore(fn).delete(gi(Me)),He.complete}catch(Ie){throw xn.create("storage-delete",{originalErrorMessage:Ie.message})}})).apply(this,arguments)}function gi(Me){return`${Me.name}!${Me.options.appId}`}class ${constructor(Ie){this.container=Ie,this._heartbeatsCache=null;const He=this.container.getProvider("app").getImmediate();this._storage=new De(He),this._heartbeatsCachePromise=this._storage.read().then(ht=>(this._heartbeatsCache=ht,ht))}triggerHeartbeat(){var Ie=this;return(0,c.Z)(function*(){const ht=Ie.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),St=function Y(){return(new Date).toISOString().substring(0,10)}();if(null===Ie._heartbeatsCache&&(Ie._heartbeatsCache=yield Ie._heartbeatsCachePromise),!Ie._heartbeatsCache.some(gt=>gt.date===St))return Ie._heartbeatsCache.push({date:St,userAgent:ht}),Ie._heartbeatsCache=Ie._heartbeatsCache.filter(gt=>{const rn=new Date(gt.date).valueOf();return Date.now()-rn<=2592e6}),Ie._storage.overwrite(Ie._heartbeatsCache)})()}getHeartbeatsHeader(){var Ie=this;return(0,c.Z)(function*(){if(null===Ie._heartbeatsCache&&(yield Ie._heartbeatsCachePromise),null===Ie._heartbeatsCache)return"";const{heartbeatsToSend:He,unsentEntries:ht}=function J(Me,Ie=1024){const He=[];let ht=Me.slice();for(const St of Me){const gt=He.find(rn=>rn.userAgent===St.userAgent);if(gt){if(gt.dates.push(St.date),ae(He)>Ie){gt.dates.pop();break}}else if(He.push({userAgent:St.userAgent,dates:[St.date]}),ae(He)>Ie){He.pop();break}ht=ht.slice(1)}return{heartbeatsToSend:He,unsentEntries:ht}}(Ie._heartbeatsCache),St=(0,de.h$)(JSON.stringify({version:2,heartbeats:He}));return ht.length>0?(Ie._heartbeatsCache=ht,yield Ie._storage.overwrite(Ie._heartbeatsCache)):(Ie._heartbeatsCache=null,Ie._storage.deleteAll()),St})()}}class De{constructor(Ie){this.app=Ie,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ie=this;return(0,c.Z)(function*(){if(yield Ie._canUseIndexedDBPromise){const ht=yield function Bt(Me){return ft.apply(this,arguments)}(Ie.app);return(null==ht?void 0:ht.heartbeats)||[]}return[]})()}overwrite(Ie){var He=this;return(0,c.Z)(function*(){if(yield He._canUseIndexedDBPromise)return rt(He.app,{heartbeats:Ie})})()}add(Ie){var He=this;return(0,c.Z)(function*(){if(yield He._canUseIndexedDBPromise){const St=yield He.read();return rt(He.app,{heartbeats:[...St,...Ie]})}})()}delete(Ie){var He=this;return(0,c.Z)(function*(){if(yield He._canUseIndexedDBPromise){const St=yield He.read();return rt(He.app,{heartbeats:St.filter(gt=>!Ie.includes(gt))})}})()}deleteAll(){var Ie=this;return(0,c.Z)(function*(){if(yield Ie._canUseIndexedDBPromise)return function Vi(Me){return Pt.apply(this,arguments)}(Ie.app)})()}}function ae(Me){return(0,de.h$)(JSON.stringify({version:2,heartbeats:Me})).length}!function Ge(Me){Ut(new H.wA("platform-logger",Ie=>new Ce(Ie),"PRIVATE")),Ut(new H.wA("heartbeat",Ie=>new $(Ie),"PRIVATE")),Dn(me,"0.7.18",Me),Dn(me,"0.7.18","esm2017"),Dn("fire-js","")}("")},4859:(ct,ke,F)=>{"use strict";F.d(ke,{wA:()=>N,H0:()=>me,zt:()=>ge});var c=F(5861),H=F(2090);class N{constructor(G,W,oe){this.name=G,this.instanceFactory=W,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const de="[DEFAULT]";class ge{constructor(G,W){this.name=G,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const W=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(W)){const oe=new H.BH;if(this.instancesDeferred.set(W,oe),this.isInitialized(W)||this.shouldAutoInitialize())try{const je=this.getOrInitializeService({instanceIdentifier:W});je&&oe.resolve(je)}catch(je){}}return this.instancesDeferred.get(W).promise}getImmediate(G){var W;const oe=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),je=null!==(W=null==G?void 0:G.optional)&&void 0!==W&&W;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(je)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(Re){if(je)return null;throw Re}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ce(ye){return"EAGER"===ye.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:de})}catch(W){}for(const[W,oe]of this.instancesDeferred.entries()){const je=this.normalizeInstanceIdentifier(W);try{const Re=this.getOrInitializeService({instanceIdentifier:je});oe.resolve(Re)}catch(Re){}}}}clearInstance(G=de){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,c.Z)(function*(){const W=Array.from(G.instances.values());yield Promise.all([...W.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...W.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=de){return this.instances.has(G)}getOptions(G=de){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:W={}}=G,oe=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const je=this.getOrInitializeService({instanceIdentifier:oe,options:W});for(const[Re,Fe]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(Re)&&Fe.resolve(je);return je}onInit(G,W){var oe;const je=this.normalizeInstanceIdentifier(W),Re=null!==(oe=this.onInitCallbacks.get(je))&&void 0!==oe?oe:new Set;Re.add(G),this.onInitCallbacks.set(je,Re);const Fe=this.instances.get(je);return Fe&&G(Fe,je),()=>{Re.delete(G)}}invokeOnInitCallbacks(G,W){const oe=this.onInitCallbacks.get(W);if(oe)for(const je of oe)try{je(G,W)}catch(Re){}}getOrInitializeService({instanceIdentifier:G,options:W={}}){let oe=this.instances.get(G);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=G,ye===de?void 0:ye),options:W}),this.instances.set(G,oe),this.instancesOptions.set(G,W),this.invokeOnInitCallbacks(oe,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,oe)}catch(je){}var ye;return oe||null}normalizeInstanceIdentifier(G=de){return this.component?this.component.multipleInstances?G:de:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const W=this.getProvider(G.name);if(W.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);W.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const W=new ge(G,this);return this.providers.set(G,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(ct,ke,F)=>{"use strict";F.d(ke,{in:()=>H,Yd:()=>ce,Ub:()=>me,Am:()=>ye});const c=[];var H=(()=>{return(G=H||(H={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",H;var G})();const N={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},de=H.INFO,ge={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},Ce=(G,W,...oe)=>{if(W<G.logLevel)return;const je=(new Date).toISOString(),Re=ge[W];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Re](`[${je}]  ${G.name}:`,...oe)};class ce{constructor(W){this.name=W,this._logLevel=de,this._logHandler=Ce,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in H))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?N[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...W),this._logHandler(this,H.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...W),this._logHandler(this,H.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,H.INFO,...W),this._logHandler(this,H.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,H.WARN,...W),this._logHandler(this,H.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...W),this._logHandler(this,H.ERROR,...W)}}function me(G){c.forEach(W=>{W.setLogLevel(G)})}function ye(G,W){for(const oe of c){let je=null;W&&W.level&&(je=N[W.level]),oe.userLogHandler=null===G?null:(Re,Fe,...Be)=>{const te=Be.map(fe=>{if(null==fe)return null;if("string"==typeof fe)return fe;if("number"==typeof fe||"boolean"==typeof fe)return fe.toString();if(fe instanceof Error)return fe.message;try{return JSON.stringify(fe)}catch(be){return null}}).filter(fe=>fe).join(" ");Fe>=(null!=je?je:Re.logLevel)&&G({level:H[Fe].toLowerCase(),message:te,args:Be,type:Re.name})}}}},5861:(ct,ke,F)=>{"use strict";function c(N,de,ge,Ce,ce,me,ye){try{var G=N[me](ye),W=G.value}catch(oe){return void ge(oe)}G.done?de(W):Promise.resolve(W).then(Ce,ce)}function H(N){return function(){var de=this,ge=arguments;return new Promise(function(Ce,ce){var me=N.apply(de,ge);function ye(W){c(me,Ce,ce,ye,G,"next",W)}function G(W){c(me,Ce,ce,ye,G,"throw",W)}ye(void 0)})}}F.d(ke,{Z:()=>H})}},ct=>{ct(ct.s=864)}]);